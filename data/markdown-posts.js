export const posts = [
  {
    url: '/a-mental-model-to-think-in-typescript',
    title: 'A Mental Model to think in TypeScript',
    content:
      "One day I came across a [tweet](https://twitter.com/larimaza/status/1275747670989176833) from Lari Mazza that says\n\n> \"Can I make a suggestion? Types are hard to understand when you’ve only worked with JS in your life and suddenly have to learn TypeScript\"\n\nAs a software engineer that learned Python, Ruby, Javascript, and Clojure first, when I tried C++, it was a horror movie. I couldn't do much, so counterproductive, and frustrating. Maybe because I was doing everything wrong and I didn't understand types the right way.\n\nBut even though I had so many problems, I could implement a bunch of [algorithms and data structures](https://github.com/imteekay/algorithms).\n\nNow I'm using more and more Typescript in my day-to-today job and [my side projects](https://github.com/imteekay/laziness), I feel I'm more prepared to confront types. Actually, not confront, but use them in my favor.\n\nThis post is my attempt to help developers think more in types and understand this mental model.\n\n## Javascript types\n\nIf you're here, you probably heard that Typescript is a superset of Javascript. If not, great, you just learned something new today. YAY!\n\nTypescript is a superset because any Javascript code is valid in Typescript, syntactically speaking. It may or may not compile depending on the Typescript compiler configuration. But in terms of syntax, it works just fine. This is why you can migrate Javascript to Typescript progressively by just replacing the `.js` extension with the `.ts`. Everything will be without type declarations (the `any` type), but that's another story.\n\nAlso, if you code in Javascript - or any other programming language - you probably think in types:\n\n- \"Hm, it is a list of integers, so I'll need to filter only the even numbers and return a new list\"\n- \"This is an object, but I just need to get this string value from the property X\"\n- \"This function receives two parameters. Both A and B are integers and I want to sum them\"\n\nYeah, you got the idea. We think in types. But they are just in our heads. We constantly think about them because we need to know how to handle, parse, or modify data. We need to know which methods we are allowed to use in this object type.\n\nTo give a more concrete example, imagine you want to sum the price of all products. A product object looks like this:\n\n```tsx\nconst product = {\n  title: 'Some product',\n  price: 100.0,\n};\n```\n\nBut now with a list of products:\n\n```tsx\nconst products = [\n  {\n    title: 'Product 1',\n    price: 100.0,\n  },\n  {\n    title: 'Product 2',\n    price: 25.0,\n  },\n  {\n    title: 'Product 3',\n    price: 300.0,\n  },\n];\n```\n\nOk! Now we want a function to sum all the products prices.\n\n```tsx\nfunction sumAllPrices(products) {\n  return products.reduce((sum, product) => sum + product.price, 0);\n}\n\nsumAllPrices(products); // 425\n```\n\nJust receive the products as the argument and reduce all product prices. Javascript works just fine. But while building this function you start to think about the data and how to handle it properly.\n\nThe first part: products as an argument. Here you just think: \"well, we're receiving a list of some objects\". Yeah, in our heads the products are a list. This is why we can think of using the `reduce` method. It is a method from the `Array` prototype.\n\nThen we can think about the object in detail. We know that the product object has a `price` property. And this property is a number. This is why we can do `product.price` and sum with the accumulator.\n\nRecapping:\n\n- `products` is a list of objects.\n- As a list, we can use the `reduce` method, as this method a member of the `Array` prototype.\n- The `produce` object has some properties. One of them is the `price`, which is a number.\n- As a number property, we can use it to sum with the reduce accumulator.\n- We wanted to return the a number, the sum of all products prices.\n\nWe are always thinking of data types, we just need to add the type annotations to make it more explicit and ask the compiler for help. Our memory is limited and the compilers are here to help us, humans.\n\nThe type system will not only make our data more consistent, but it can also provide autocompletion for data types. It knows the types, so it can show the members for the data. We will take a look at this idea later. Here I just wanted to show that we think in types in our heads.\n\n## Simples Types & Simple Uses\n\nSo we are ready to use some strongly typed programming languages like Typescript. We simply need to explicitly add type annotations to our data structures. It's simple. But sometimes it's not that easy (usually it's not easy when you come from dynamically typed languages. You feel unproductive. It feels like a battle against types. The idea here is to make this learning curve more smooth and fun).\n\nHere we will see many examples of how to use types in Typescript. We start with easy and silly examples and progressively make it more complex while designing the mental model to think in types.\n\nAs Javascript, Typescript also has basic data types like `number`, `string`, `boolean`, `null`, etc. You can find all the basic data types in the [Typescript Docs](https://www.typescriptlang.org/docs/handbook/basic-types.html).\n\nWith these units of data, we can make our programs more useful. To be more practical, let's get a simple example. A `sum` function.\n\nHow does it work in Javascript?\n\n```tsx\nfunction sum(a, b) {\n  return a + b;\n}\n```\n\nEverything ok? ok.\n\nNow let's use it:\n\n```tsx\nsum(1, 2); // 3\nsum(2, 2); // 4\nsum(0, 'string'); // '0string'   WTF!\n```\n\nThe first two calls are what we expect to happen in our system. But Javascript is very flexible, it lets us provide any value to this function. The last call is bizarre. We can call with a string, but it will return an unexpected result. It doesn't break in development, but it will result in strange behavior in runtime.\n\nWhat do we want? We want to add some constraints to the function. It will only be able to receive numbers. That way, we narrow the possibility to have unexpected behaviors. And the function return type is also a number.\n\n```tsx\nfunction sum(a: number, b: number): number {\n  return a + b;\n}\n```\n\nGreat! It was very simple. Let's call again.\n\n```tsx\nsum(1, 2); // 3\nsum(2, 2); // 4\nsum(0, 'string'); // Argument of type '\"string\"' is not assignable to parameter of type 'number'.\n```\n\nAs we type annotate our function, we provide information to the compiler to see if everything is correct. It will follow the constraints we added to the function.\n\nSo the first two calls are the same as in Javascript. It will return the correct calculation. But the last one we have an error in compile time. This is important. The error now happens in compile time and prevents us to ship incorrect code to production. It says that the `string` type is not part of the set of values in the `number` type universe.\n\nFor basic types, we just need to add colon followed by the type definition.\n\n```tsx\nconst isTypescript: boolean = true;\nconst age: number = 24;\nconst username: string = 'tk';\n```\n\nNow let's increase the challenge. Remember the product object code we wrote in Javascript? Let's implement it again, but now with the Typescript mindset.\n\nJust to remember what we are talking about:\n\n```tsx\nconst product = {\n  title: 'Some product',\n  price: 100.0,\n};\n```\n\nThis is the product value. It has a `title` as `string` and the `price` as `number`. For now, this is what we need to know.\n\nThe object type would be something like:\n\n```tsx\n{ title: string, price: number }\n```\n\nAnd we use this type to annotate our function:\n\n```tsx\nconst product: { title: string; price: number } = {\n  title: 'Some product',\n  price: 100.0,\n};\n```\n\nWith this type, the compiler will know how to handle inconsistent data:\n\n```tsx\nconst wrongProduct: { title: string; price: number } = {\n  title: 100.0, // Type 'number' is not assignable to type 'string'.\n  price: 'Some product', // Type 'string' is not assignable to type 'number'.\n};\n```\n\nHere it breaks in two different properties:\n\n- The `title` is a `string` and should not receive a `number`.\n- The `price` is a `number` and should not receive a `string`.\n\nThe compiler helps us to catch type errors like that.\n\nWe could improve this type annotation by using a concept called `Type Aliases`. It's a way to create a new name for a specific type.\n\nIn our case, the product type could be:\n\n```tsx\ntype Product = {\n  title: string;\n  price: number;\n};\n\nconst product: Product = {\n  title: 'Some product',\n  price: 100.0,\n};\n```\n\nIt's better to visualize the type, add semantics, and maybe reuse in our system.\n\nNow that we have this product type, we can use it to type the products list. The syntax looks like this: `MyType[]`. In our case, `Product[]`.\n\n```tsx\nconst products: Product[] = [\n  {\n    title: 'Product 1',\n    price: 100.0,\n  },\n  {\n    title: 'Product 2',\n    price: 25.0,\n  },\n  {\n    title: 'Product 3',\n    price: 300.0,\n  },\n];\n```\n\nNow the function `sumAllPrices`. It will receive the product and return a number, the sum of all product prices.\n\n```tsx\nfunction sumAllPrices(products: Product[]): number {\n  return products.reduce((sum, product) => sum + product.price, 0);\n}\n```\n\nThis is very interesting. As we typed the product, when we write `product.`, it will show the possible properties we can use. In the product type case, it will show the properties `price` and `title`.\n\n```tsx\nsumAllPrices(products); // 425\nsumAllPrices([]); // 0\nsumAllPrices([{ title: 'Test', willFail: true }]); // Type '{ title: string; willFail: true; }' is not assignable to type 'Product'.\n```\n\nPassing the `products` will result in the value `425`. An empty list will result in the value `0`. And if we pass an object with a different structure - Typescript has a structural type system and we will dig deep into this topic later - the compiler will throw a type error telling that the structure is not part of the `Product` type.\n\n## Structural Typing\n\nStructural typing is a type of type compatibility. It's a way to understand the compatibility between types based on its structure: features, members, properties. Some languages have type compatibility based on the names of the types, and it's called nominal typing.\n\nFor example, in Java, even if different types have the same structure, it will throw a compile error because we are using a different type to instantiate and define a new instance.\n\n```tsx\nclass Person {\n  String name;\n}\n\nclass Client {\n  String name;\n}\n\nClient c = new Person();  // compiler throws an error\nClient c = new Client();  // OK!\n```\n\nIn nominal type systems, the relevant part of a type is the name, not the structure.\n\nTypescript, on another hand, verifies the structural compatibility to allow or not specific data. Its type system is based on structural typing.\n\nThe same code implementation that crashes in Java, would work in Typescript.\n\n```tsx\nclass Person {\n  name: string;\n}\n\nclass Client {\n  name: string;\n}\n\nconst c1: Client = new Person(); // OK!\nconst c2: Client = new Client(); // OK!\n```\n\nWe want to use the `Client` type, and it has the property `name`, to point to the `Person` type. It also has the property type. So Typescript will understand that both types have the same shape.\n\nBut it is not only about classes, but it works for any other \"object\".\n\n```tsx\nconst c3: Client = {\n  name: 'TK',\n};\n```\n\nThis code compiles too because we have the same structure here. The typescript type system doesn't care about if it is a class, or an object literal if it has the same members, it will be flexible and compile.\n\nBut now we will add a third type: the `Customer`.\n\n```tsx\nclass Customer {\n  name: string;\n  age: number;\n}\n```\n\nIt not only has the `name` property, but also the `age`. What would happen if we instantiate a `Client` instance in a constant of type `Customer`?\n\n```tsx\nconst c4: Customer = new Client();\n```\n\nThe compiler will not accept that. We want to use the `Customer`, that has `name` and `age`. But we are instantiating the `Client` that has only the `name` property. So it doesn't have the same shape. It will cause an error:\n\n```bash\nProperty 'age' is missing in type 'Client' but required in type 'Customer'.\n```\n\nThe other way around would work because we want `Client`, and `Customer` has all the properties (`name`) from `Client`.\n\n```tsx\nconst c5: Client = new Customer();\n```\n\nIt works fine!\n\nWe can go on for enums, object literals, and any other type, but the idea here is to understand that the structure of the type is the relevant part.\n\n## Runtime and Compile time\n\nThis is a much more complex topic in programming language theory, but I wanted to give some examples to distinct runtime and compile time.\n\nBasically, the runtime is the execution time of a program. Imagine your backend receiving data from a frontend form page, handling this data, and saving it. Or when your frontend is requesting data from a server to render a list of ~~Pokemons~~ products.\n\nCompile time is basically when the compiler is executing operations in the source code to satisfy the programming language requirements. It can include type checking as an operation for example. Compile time errors in Typescript, for example, is very related to the code that we wrote before:\n\n- When the type is missing property: `Property 'age' is missing in type 'Client' but required in type 'Customer'.`\n- When the type doesn't match: `Type '{ title: string; willFail: true; }' is not assignable to type 'Product'.`\n\nLet's see some examples to have a better understanding.\n\nI want to write a function to get the index of a part of the passed programming language.\n\n```tsx\nfunction getIndexOf(language, part) {\n  return language.indexOf(part);\n}\n```\n\nIt receives the `language` and the `part` that we will look for to get the index.\n\n```tsx\ngetIndexOf('Typescript', 'script'); // 4\ngetIndexOf(42, 'script'); // Uncaught TypeError: language.indexOf is not a function at getIndexOf\n```\n\nWhen passing a string, it works fine. But passing a number, we got a runtime error `Uncaught TypeError`. Because a number doesn't have an `indexOf` function, so we can't really use it.\n\nBut if we give type information to the compiler, in compile time, it will throw an error before running the code.\n\n```tsx\nfunction getIndexOf(language: string, part: string): number {\n  return language.indexOf(part);\n}\n```\n\nNow our program knows that it will need to receive two strings and return a number. The compiler can use this information to throw errors when we get a type error... before runtime.\n\n```tsx\ngetIndexOf('Typescript', 'script'); // 4\ngetIndexOf(42, 'script'); // Argument of type '42' is not assignable to parameter of type 'string'.\n```\n\nMaybe, for small projects (or small functions like ours) we don't really see too much benefit. In this case, we know that we need to pass a string, so we won't pass a number to the function. But when the codebase grows or you have many people adding code and more complexity, it's clear to me that a type system can help us a lot to get errors in compile time before shipping code to production.\n\nAt first, we need all the learning curve to understand types and all the mental models, but after a while, you'll be more used to type annotations and eventually become friends with the compiler. It would be a _helper_, not a _yeller_.\n\nAs we are learning about the basic difference between compile time and runtime, I think it's great to differentiate types from values.\n\nAll the examples I'll show here can be copied and run in the [Typescript Playground](https://www.typescriptlang.org/play) to understand the compiler and the result of the compilation process (aka the _\"Javascript\"_).\n\nIn Typescript, we have two different universes: the value and the type spaces. The type space is where types are defined and used to enable the compiler to do all the great magic. And the value space is the values in our programs like variables, constants, functions, value literals, and things that we have in runtime.\n\nIt's good to have an understanding of this concept because in Typescript we can't use type checking in runtime. It has a very clear separation between type checking and the compilation process.\n\nTypescript has the process of type checking the source code types and sees if everything is correct and consistent. And then it can compile to Javascript. As these two parts are separate, we can't use type checking in runtime. Only in \"compile time\". If you try to use a type as a value, it will throw an error: `only refers to a type, but is being used as a value here`.\n\nLet's see examples of this idea.\n\nImagine we want to write a function called `purchase` where we receive a payment method and based on this method, we want to do some action. We have a credit card and a debit card. Let's define them here:\n\n```tsx\ntype CreditCard = {\n  number: number;\n  cardholder: string;\n  expirationDate: Date;\n  secutiryCode: number;\n};\n\ntype DebitCard = {\n  number: number;\n  cardholder: string;\n  expirationDate: Date;\n  secutiryCode: number;\n};\n\ntype PaymentMethod = CreditCard | DebitCard;\n```\n\nThese types are in the _Type space_, so it only works in compile time. After type checking this function, the compiler removes all the types.\n\nIf you add these types in the Typescript Playground, the output will be only a strict definition `\"use strict\";`.\n\nThe idea here is to really understand that the types live in the _Type space_ and will not be available in the runtime. So in our function, it won't be possible to do this:\n\n```tsx\nconst purchase = (paymentMethod: PaymentMethod) => {\n  if (paymentMethod instanceof CreditCard) {\n    // purchase with credit card\n  } else {\n    // purchase with debit card\n  }\n};\n```\n\nIn compiler throws an error: `'CreditCard' only refers to a type, but is being used as a value here.`.\n\nThe compiler knows the difference between the two spaces and that the type `CreditCard` lives in the _Type space_.\n\nThe playground is a very cool tool to see the output of your Typescript code. If you create a new credit card object like this:\n\n```tsx\nconst creditCard: CreditCard = {\n  number: 2093,\n  cardholder: 'TK',\n  expirationDate: new Date(),\n  secutiryCode: 101,\n};\n```\n\nThe compiler will type check it and do all the magic and then it transpiles the Typescript code to Javascript. And we have this:\n\n```tsx\nconst creditCard = {\n  number: 2093,\n  cardholder: 'TK',\n  expirationDate: new Date(),\n  secutiryCode: 101,\n};\n```\n\nThe same object, but now only with the value and without the type.\n\n## Constraints & Type Narrowing\n\n> When we restrict what we can do, it’s easier to understand what we can do.\n\nWe use types as constraints to limit the bugs in your program. To understand this concept, I'm stealing an example from Lauren Tan's talk about Type Systems.\n\n```tsx\nconst half = (x) => x / 2;\n```\n\nHow many ways does this function can fail? Imagine a number of possible inputs:\n\n```tsx\n[\n  null,\n  undefined,\n  0,\n  '0',\n  'TK',\n  { username: 'tk' },\n  [42, 3.14],\n  (a, b) => a + b,\n];\n```\n\nAnd what are the results for input:\n\n```tsx\nhalf(null); // 0\nhalf(undefined); // NaN\nhalf(0); // 0\nhalf('0'); // 0\nhalf('TK'); // NaN\nhalf({ username: 'tk' }); // NaN\nhalf([42, 3.14]); // NaN\nhalf((a, b) => a + b); // NaN\n```\n\nWe have different and unexpected results here. Here it's clear that we want a number as the `half` function, do the calculation, and great, it's done! But sometimes we don't control the input or the codebase is big, or new/unfamiliar, and we're able to make these little mistakes.\n\nThe idea of adding constraints to our code is to narrow the possibilities of a range of types. In this case, we want to limit the input type to a `number` type. It's the only type that we care about to do the half calculation. With type narrowing, we again give type information to the compiler.\n\n```tsx\nconst half = (x: number) => x / 2;\n```\n\nAnd with this new information, if we call the function with the test cases again, we have different results:\n\n```tsx\nhalf(null); // Argument of type 'null' is not assignable to parameter of type 'number'.\nhalf(undefined); // Argument of type 'undefined' is not assignable to parameter of type 'number'.(\nhalf(0); // 0\nhalf('0'); // Argument of type '\"0\"' is not assignable to parameter of type 'number'.\nhalf('TK'); // Argument of type '\"TK\"' is not assignable to parameter of type 'number'.\nhalf({ username: 'tk' }); // Argument of type '{ username: string; }' is not assignable to parameter of type 'number'.\nhalf([42, 3.14]); // Argument of type 'number[]' is not assignable to parameter of type 'number'.\nhalf((a, b) => a + b); // Argument of type '(a: any, b: any) => any' is not assignable to parameter of type 'number'.\n```\n\nBasically the compiler will tell us that only the number type, in this case, the `0` value, is a valid input, it will compile, and allow to run the code. We narrow the input type and allow only the value we really want for this function.\n\nBut are other ways to narrow the types in Typescript. Imagine we have a function that receives a parameter that can be either a string or a number.\n\n```tsx\ntype StringOrNumber = string | number;\n\nfunction stringOrNumber(value: StringOrNumber) {}\n```\n\nIn the function body, the compiler won't know which methods or properties we can use for this type. Is it a string or number? We only know about the value in runtime. But we can narrow the type using the `typeof`:\n\n```tsx\nfunction stringOrNumber(value: StringOrNumber) {\n  if (typeof value === 'string') {\n    // value.\n    // your ide will show you the possible methods from the string type\n    // (parameter) value: string\n    value;\n  }\n\n  if (typeof value === 'number') {\n    // value.\n    // your ide will show you the possible methods from the number type\n    // (parameter) value: number\n    value;\n  }\n}\n```\n\nWith an `if` statement and the `typeof`, we can give more information to the compiler. Now it will know the specific type for each `if` body.\n\nThe IDE knows what to show for the specific type. In runtime, when the value is a string, it will go to the first `if` statement, and the compiler will infer that the type is a string: `(parameter) value: string`.\n\nWhen the value is a number, it will go to the second `if` statement and the compiler will infer that a type is a number: `(parameter) value: number`.\n\nThe `if` statement can be a helper to the compiler.\n\nAnother example is when we have an optional property in an object, but in a function, we need to return a value based on this optional value.\n\nImagine we have this type:\n\n```tsx\ntype User = {\n  name: string;\n  address: {\n    street: string;\n    complement?: string;\n  };\n};\n```\n\nIt's a simple `User` type. Let's focus on the `complement` property. It's optional (take a closer look at the `?` symbol), which means that it can be a `string` or `undefined`.\n\nNow we want to build a function to receive the user and get the length of the address complement. What about this?\n\n```tsx\nfunction getComplementLength(user: User): number {\n  return user.address.complement.length;\n  // (property) complement?: string | undefined\n  // Object is possibly 'undefined'.\n}\n```\n\nAs we see earlier, the `complement` can be a `string` or `undefined`. `undefined` doesn't really have a property called `length`:\n\n```tsx\nUncaught TypeError: Cannot read property 'length' of undefined\n```\n\nWe could make something like:\n\n```tsx\nfunction getComplementLength(user: User) {\n  return user.address.complement?.length;\n}\n```\n\nIf the `complement` has a string value, we can call `length`, otherwise, it will return `undefined`. So this function has two possible return types: `number | undefined`. But we want to ensure that we only return `number`. So we use a `if` or a ternary condition to narrow the type. It will only call `.length` when it has real value (or when it is not `undefined`).\n\n```tsx\nfunction getComplementLength(user: User): number {\n  return user.address.complement ? user.address.complement.length : 0;\n}\n```\n\nIf it is `undefined`, we return the minimum length: `0`. Now we can use the function with the right type design with and without the complement. Without compile and runtime errors.\n\n```tsx\ngetComplementLength({\n  name: 'TK',\n  address: {\n    street: 'Shinjuku Avenue',\n  },\n}); // 0\n\ngetComplementLength({\n  name: 'TK',\n  address: {\n    street: 'Shinjuku Avenue',\n    complement: 'A complement',\n  },\n}); // 12\n```\n\nWe'll get `0` from the first function call and `12` from the second call.\n\nWith this `if` concept, we can also use other helpers to do the same thing. We could use the `in` operator to verify a property from an object, a `Array.isArray` to verify an array, or the `instanceof` for any other class type.\n\nWe could also use more advanced concepts like assertion function or type guards, but I'll let these concepts to future posts.\n\nOne thing that I want to dig deep in this _Constraints_ topic is immutability.\n\nIn Javascript and Typescript, we have the idea of mutable objects. If you define value in a variable, we can reassign it with another value later.\n\n```tsx\nlet email = 'harry.potter@mail.com';\nemail; // 'harry.potter@mail.com'\nemail = 'hermione.granger@mail.com';\nemail; // 'hermione.granger@mail.com'\n```\n\nNow imagine you have a list of numbers. And you want to use a function to sum all of its numbers. The function looks like this:\n\n```tsx\nfunction sumNumbers(numbers: number[]) {\n  let sum = 0;\n  let num = numbers.pop();\n\n  while (num !== undefined) {\n    sum += num;\n    num = numbers.pop();\n  }\n\n  return sum;\n}\n```\n\nYou call the function passing your list and get the result. It works just fine.\n\n```tsx\nconst list = [1, 2, 3, 4];\nsumNumbers(list); // 10\n```\n\nBut what happened to your list? Did the function mutate it entirely?\n\n```tsx\nlist; // []\n```\n\nIf we use the list, it's empty now. The `pop` in the `sumNumbers` function is a \"mutate\" function. It gets the references and removes the item from them. It's not a copy, it's the real reference.\n\nIn runtime, we can use other functions or ways to do the same thing: using reduce, do a for loop without the need to `pop` items from the array.\n\nBut using Typescript, we can provide immutability in compile time. If you are not using types, it's possible to use a type assertion `as const`. Imagine this:\n\n```tsx\nconst author = {\n  name: 'Walter Isaacson',\n  email: 'walter.isaacson@mail.com',\n  books: [\n    {\n      title: 'Leonardo Da Vinci',\n      price: 50.0,\n    },\n  ],\n};\n\nauthor.books.push({\n  title: 'Steve Jobs',\n  price: 10.0,\n});\n```\n\nJust an author object and then we add a new book to this author. The `push` method updates the book's array reference. It's a \"mutate\" method. Let's see if you use the const assertion `as const`:\n\n```tsx\nconst author = {\n  name: 'Walter Isaacson',\n  email: 'walter.isaacson@mail.com',\n  books: [\n    {\n      title: 'Leonardo Da Vinci',\n      price: 50.0,\n    },\n  ],\n} as const;\n\nauthor.books.push({\n  title: 'Steve Jobs',\n  price: 10.0,\n});\n// Property 'push' does not exist on type\n// 'readonly [{ readonly title: \"Leonardo Da Vinci\"; readonly price: 50; }]'\n```\n\nThe compiler won't compile. It gets an error on the author's object. It's is now readonly, and as a readonly object, it has no method called `push` (or any \"mutate\" method). We added a constraint to the author's object. Before it was a specific type (with all the \"mutate\" methods), and now we narrowed the type to be almost the same, but without the \"mutate\" methods. Type narrowing.\n\nTo continue, let's add types to this object. The `book` and the `author`:\n\n```tsx\ntype Book = {\n  title: string;\n  price: number;\n};\n\ntype Author = {\n  name: string;\n  email: string;\n  books: Book[];\n};\n```\n\nAdd the type to the author object:\n\n```tsx\nconst author: Author = {\n  name: 'Walter Isaacson',\n  email: 'walter.isaacson@mail.com',\n  books: [\n    {\n      title: 'Leonardo Da Vinci',\n      price: 50.0,\n    },\n  ],\n};\n```\n\nAdd the type to a new book object:\n\n```tsx\nconst book: Book = {\n  title: 'Steve Jobs',\n  price: 30,\n};\n```\n\nAnd now we can add the new book to the author:\n\n```tsx\nauthor.name = 'TK';\nauthor.books.push(book);\n```\n\nIt works just fine!\n\nI want to show another way to add immutability in compile time. Typescript has an utility type called `Readonly`.\n\nYou can add the `readonly` for each property in an object. Something like this:\n\n```tsx\ntype Book = {\n  readonly title: string;\n  readonly price: number;\n};\n```\n\nBut it can be very repetitive. So we can use the `Readonly` utility to add the `readonly` to all properties of an object:\n\n```tsx\ntype Book = Readonly<{\n  title: string;\n  price: number;\n}>;\n```\n\nOne thing to keep in mind is that it doesn't add the readonly for nested properties. For example, if we add the `Readonly` to the `Author` type, it won't add the `readonly` to the `Book` type too.\n\n```tsx\ntype Author = Readonly<{\n  name: string;\n  email: string;\n  books: Book[];\n}>;\n```\n\nAll the properties from the author can't be reassigned, but you can mutate the `books` list here (`push`, `pop`, ...) because the `Book[]` is not readonly. Let's see it.\n\n```tsx\nconst author: Author = {\n  name: 'Walter Isaacson',\n  email: 'walter.isaacson@mail.com',\n  books: [\n    {\n      title: 'Leonardo Da Vinci',\n      price: 50.0,\n    },\n  ],\n};\n\nconst book: Book = {\n  title: 'Steve Jobs',\n  price: 30,\n};\n\nauthor.books.push(book);\nauthor.books;\n/* =>\n *\n * [\n *   {\n *     title: 'Leonardo Da Vinci',\n *     price: 50.00,\n *   },\n *   {\n *    title: 'Steve Jobs',\n *    price: 30\n *   }\n * ]\n *\n */\n```\n\nThe `push` will work just fine.\n\nSo, how do we enforce a readonly to the `books`? We need to make sure that the array is a readonly type. We can use the `Readonly`, or use another utility from Typescript called `ReadonlyArray`. Let's see the two ways to do it.\n\nWith `Readonly`:\n\n```tsx\ntype Author = Readonly<{\n  name: string;\n  email: string;\n  books: Readonly<Book[]>;\n}>;\n```\n\nWith `ReadonlyArray`:\n\n```tsx\ntype Author = Readonly<{\n  name: string;\n  email: string;\n  books: ReadonlyArray<Book>;\n}>;\n```\n\nFor me, both work great! But in my opinion, `ReadonlyArray` is more semantic and I also feel it is less verbose (not that the `Readonly` with an array is).\n\nWhat happened if we try to mutate the author object now?\n\n```tsx\nauthor.name = 'TK'; // Cannot assign to 'name' because it is a read-only property.\nauthor.books.push(book); // Property 'push' does not exist on type 'readonly [{ readonly title: \"Leonardo Da Vinci\"; readonly price: 50; }]'.\n```\n\nGreat! Now we can catch mutable operations in compile time. This is a way to use the concept of adding constraints to our types to make sure they only do what is really needed.\n\n## Semantics & Readability\n\nAt first, I felt that Typescript could be very verbose because of the types and make the code much more complex than it should be. And it actually can. Strive for simplicity is the goal and it is difficult at the same time.\n\nThis idea is very related to clean code and how we can write code to be human-readable and maintainable. Typescript is no different. Most of the cases, we don't need super complex types. Let the simple types do the work.\n\nAnother thing that I find very useful is semantic of types.\n\nImagine you need to add a string to the `sessionStorage` to save it in the browser. Your function looks like this:\n\n```tsx\nfunction saveMyString(value: string): any {\n  sessionStorage.myString = value;\n}\n```\n\nYou add a type annotation to the string input and as you don't know about the returning type, you probably add a `any` type.\n\nBut what's the real meaning behind this returning type? Is it returning anything?\n\nIt just saves the string to the `sessionStorage`. It doesn't return anything. The `void` type was what you're looking for. As Typescript docs says: `the absence of having any type at all`.\n\n```tsx\nfunction saveMyString(value: string): void {\n  sessionStorage.myString = value;\n}\n```\n\nGreat, the meaning of the type is correct now. The correctness is very important in a type system. It's a way to model our data, but also help maintain systems for future developers. Even if the developer is ... you!\n\nBefore we were talking about verbose code. And we can improve a lot of our code by using Typescript type inference.\n\nFor some code, we don't need to explicitly add type annotation. The Typescript compiler will understand and infer it implicitly. For example:\n\n```tsx\nconst num: number = 1;\n```\n\nThis code is redundant. We can just let the compiler infers it like this:\n\n```tsx\nconst num = 1;\n```\n\nIn our example earlier, we add the annotation `void` to the `saveMyString` function. But as the function doesn't return any value, the compiler will infer that the returning type is `void` implicitly.\n\nWhen I learned this, I thought with myself. But one of the biggest advantages of using Typescript (or any other type system / static type language) is types as documentation. If we let the compiler infer most of the types, we won't have the documentation we want.\n\nBut if you hover over the Typescript code in your editor (at least VS Code works like that), you can see the type information and relevant documentation.\n\nLet's see other examples of redundant code and make the code less verbose and let the compiler works for us.\n\n```tsx\nfunction sum(a: number, b: number): number {\n  return a + b;\n}\n```\n\nWe don't need the returning type `number`, because the compiler knows that a `number` + another `number` is equal to a `number` type, and it is the returning type. It can be:\n\n```tsx\nfunction sum(a: number, b: number) {\n  return a + b;\n}\n```\n\nImplicit code, but with documentation, and the compiler does the work.\n\nType inference works for methods too:\n\n```tsx\nfunction squareAll(numbers: number[]): number[] {\n  return numbers.map((number) => number * number);\n}\n```\n\nThis function gets a list of numbers and makes every number a squared value. The returning type is `number[]`, even though the result of a map is always a list, and as we have a list of numbers, it will always be a list of numbers. So we let the compiler infers this too:\n\n```tsx\nfunction squareAll(numbers: number[]) {\n  return numbers.map((number) => number * number);\n}\n```\n\nThis works the same way for objects too.\n\n```tsx\nconst person: { name: string; age: number } = {\n  name: 'TK',\n  age: 24,\n};\n```\n\nA person object with a string name and a number age. But as we are assigning these values, the compiler can infer these types.\n\n```tsx\nconst person = {\n  name: 'TK',\n  age: 24,\n};\n```\n\nIf you hover the `person`, you get this:\n\n```tsx\nconst person: {\n  name: string;\n  age: number;\n};\n```\n\nThe types are documented here.\n\nAnother benefit of type inference is that we can easily refactor our code. It's a simple example, but good to illustrate the refactoring process. Let's get the `sum` function again.\n\n```tsx\nfunction sum(a: number, b: number): number {\n  return a + b;\n}\n```\n\nInstead of returning the sum number, we want to return `\"Sum: {a + b}\"`. So for `a = 1` and `b = 2`, we have the resulting string as `\"Sum: 3\"`.\n\n```tsx\nfunction sum(a: number, b: number): string {\n  return `Sum: ${a + b}`;\n}\n\nsum(1, 2); // Sum: 3\n```\n\nGreat! But now letting the compiler infers this.\n\n```tsx\n// function sum(a: number, b: number): number\nfunction sum(a: number, b: number) {\n  return a + b;\n}\n\n// function sum(a: number, b: number): string\nfunction sum(a: number, b: number) {\n  return `Sum: ${a + b}`;\n}\n```\n\nWe just need to modify the returning value and the type inference will work. No need to think about the returning type. This is a small example, but for more complex functions, it would work too.\n\nBack to the readability part, we can use `Enum`. A utility that defines a set of named constants. It's a way to give more meaning to the data in your application.\n\nIn your node app or a frontend app, you possibly do some fetching to request data. You commonly use a fetch object to perform a request and sometimes you need to pass the accept headers.\n\n```tsx\nfetch('/pokemons', {\n  headers: {\n    Accept: 'application/json',\n  },\n});\n\nfetch('/harry-potter/spells', {\n  headers: {\n    Accept: 'application/json',\n  },\n});\n```\n\nIt's good, but we can also use an enum to separate this accept string in a constant and reuse.\n\n```tsx\nenum MediaTypes {\n  JSON = 'application/json',\n}\n\nfetch('/pokemons', {\n  headers: {\n    Accept: MediaTypes.JSON,\n  },\n});\n\nfetch('/harry-potter/spells', {\n  headers: {\n    Accept: MediaTypes.JSON,\n  },\n});\n```\n\nAnd we are able to add more data related to the `MediaTypes` like `PDF`:\n\n```tsx\nenum MediaTypes {\n  JSON = 'application/json',\n  PDF = 'application/pdf',\n}\n```\n\nWith `Enum`, we can encapsulate data into a meaningful block of code.\n\nRecently, I was implementing a \"state\" React component. It's basically a component that renders an empty state or an error state based on the request response.\n\nThe UI for the empty and the error states were very similar. Only the title and the description text and the image icon were different. So I thought: \"I have two ways in my mind to implement this: do the logic outside the component and pass all the information needed or pass a 'state type' and let the component render the correct icon and messages.\"\n\nSo I built an enum:\n\n```tsx\nexport enum StateTypes {\n  Empty = 'Empty',\n  Error = 'Error',\n}\n```\n\nAnd I could just pass this data to the component as the `type`:\n\n```tsx\nimport ComponentState, { StateTypes } from './ComponentState';\n\n<ComponentState type={StateTypes.Empty} />\n<ComponentState type={StateTypes.Error} />\n```\n\nIn the component, it had a state object with all the information related to the `title`, `description`, and `icon`.\n\n```tsx\nconst stateInfo = {\n  Empty: {\n    title: messages.emptyTitle,\n    description: messages.emptyDescription,\n    icon: EmptyIcon,\n  },\n  Error: {\n    title: messages.errorTitle,\n    description: messages.errorDescription,\n    icon: ErrorIcon,\n  },\n};\n```\n\nSo I could just receive the type based on the enum and use this `stateInfo` object with the `State` component from our design system:\n\n```tsx\nexport const ComponentState = ({ type }) => (\n  <State\n    title={stateInfo[type].title}\n    subtitle={stateInfo[type].subtitle}\n    icon={stateInfo[type].icon}\n  />\n);\n```\n\nThis is a way to use an enum to encapsulate important data into a meaningful block of code in your application.\n\nAnother cool feature from Typescript is optional properties. When we have properties from an object that can be a real value or undefined, we use an optional property to be explicitly that the property can be or not be there. The syntax for this is a simple `?` operator in the object property. Imagine this function:\n\n```tsx\nfunction sumAll(a: number, b: number, c: number) {\n  return a + b + c;\n}\n```\n\nBut now the `c` value is optional:\n\n```tsx\nfunction sumAll(a: number, b: number, c?: number) {\n  return a + b + c;\n}\n```\n\nWe add the `?` after `c`. But now we have a compiler error saying:\n\n```tsx\n(parameter) c: number | undefined\nObject is possibly 'undefined'.\n```\n\nWe can't sum an `undefined` value (well, actually in Javascript we can, but we receive a `NaN` value).\n\nWe need to ensure that the `c` exists. Type narrowing!\n\n```tsx\nfunction sumAll(a: number, b: number, c?: number) {\n  if (c) {\n    return a + b + c;\n  }\n\n  return a + b;\n}\n```\n\nIf the `c` exists, it will be a `number` and we can sum all. If not, sum only the `a` and `b` values.\n\nAn interesting part of this optional property is that it is a `undefined` not `null`. This is why we do this, we get a compile error:\n\n```tsx\nlet number = null;\nsumAll(1, 2, number);\n// Argument of type 'null' is not assignable to parameter of type 'number | undefined'.\n```\n\nAs the `?` operator doesn't handle the `null` value, choose to use the `undefined` type in your application and so you can still use the optional property and make the types consistent. We can use it like this:\n\n```tsx\nlet value: number | undefined;\nsumAll(1, 2, value); // 3\n```\n\nIf you add a default value to the parameter, you won't need the `?` operator. Actually, the compiler will say that the `Parameter cannot have question mark and initializer`.\n\n```tsx\nfunction sumAll(a: number, b: number, c: number = 3) {\n  return a + b + c;\n}\n```\n\nOptional properties not only works on variables and parameters, but also in objects.\n\nAn API response is a good example of type definition and optional property together. In API responses, data can be optional. Sometimes the API sends, sometimes it has no value.\n\nHow we model our types is really important for an application. If an optional property is defined as a required type, we can make our application breaks in runtime. But if we design the types correctly, we have the possible errors in compile time.\n\nImagine we are fetching a user data and this is the way we modeled the response type:\n\n```tsx\ntype UserResponse = {\n  name: string;\n  email: string;\n  username: string;\n  age: number;\n  isActive: boolean;\n};\n```\n\nBut in reality, the email is optional for the user. The API endpoint could return or not. But the `UserResponse` type we built treat it as a required property.\n\nAfter fetching the user data, we want to see if the user email matches with a specific domain.\n\n```tsx\nfunction matchDomain(email: string) {\n  return email.endsWith(domain);\n}\n```\n\nAs the `email` property is required in the `UserResponse` type, the `email` parameter will also be required in the `matchDomain` function.\n\nThis is the runtime we can get if the `email` is `undefined`:\n\n```tsx\n// Uncaught TypeError: Cannot read property 'endsWith' of undefined\n```\n\nBut what would happen if we modeled the `UserResponse` correctly?\n\n```tsx\ntype UserResponse = {\n  name: string;\n  email?: string;\n  username: string;\n  age: number;\n  isActive: boolean;\n};\n```\n\nNow the `email` is possibly `undefined` and it is explicit.\n\nBut if we still keep the function `matchDomain` the same way, we get a compile error:\n\n```tsx\n// Argument of type 'undefined' is not assignable to parameter of type 'string'.\n```\n\nAnd this is great! Now we can fix the `email` parameter in this function using the `?` operator:\n\n```tsx\nfunction matchDomain(email?: string) {\n  return email.endsWith('email.com');\n}\n```\n\nBut now we get a compile error when running `email.endsWith`, because it could be `undefined` too:\n\n```tsx\n// (parameter) email: string | undefined\n// Object is possibly 'undefined'.\n```\n\nType narrowing! We use an if block to return a `false` when the `email` is `undefined`. And run `endsWith` method only if the `email` is really a string:\n\n```tsx\nfunction matchDomain(email?: string) {\n  if (!email) return false;\n  return email.endsWith('email.com');\n}\n```\n\nIt's pretty nice when we can get runtime errors in compile time. Better to code than debugging after we ship in production, isn't it?\n\n## Type composition\n\nType composition is very useful when trying to reuse existing types for new places of the codebase. We don't need to rewrite new types, we can create a new type by composing existing ones.\n\nOne example of composition I always have to handle using Redux or the `useReducer` hook from React is the idea of \"reducers\". A reducer can always receive a number of different actions.\n\nIn this context, actions are objects with at least a `type` property. It looks like this:\n\n```tsx\nenum ActionTypes {\n  FETCH = 'FETCH',\n}\n\ntype FetchAction = {\n  type: typeof ActionTypes.FETCH;\n};\n\nconst fetchAction: FetchAction = {\n  type: ActionTypes.FETCH,\n};\n```\n\nA `fetchAction` has a type `FetchAction` that has a property type that is a typeof `FETCH`.\n\nBut a reducer can receive other actions too. For example a submit action:\n\n```tsx\nenum ActionTypes {\n  FETCH = 'FETCH',\n  SUBMIT = 'SUBMIT',\n}\n\ntype SubmitAction = {\n  type: typeof ActionTypes.SUBMIT;\n};\n\nconst submitAction: SubmitAction = {\n  type: ActionTypes.SUBMIT,\n};\n```\n\nFor a specific container, we can compose all these actions into just one type and use it for the reducer parameter type.\n\nIt would look like this:\n\n```tsx\ntype Actions = FetchAction | SubmitAction;\n\nfunction reducer(state, action: Actions) {\n  switch (action.type) {\n    case ActionTypes.FETCH:\n    // fetching action\n    case ActionTypes.SUBMIT:\n    // submiting action\n  }\n}\n```\n\nAll the possible actions are the `Actions` type. And we use a union type to \"join\" all action types. The action in the reducer can have the `FetchAction` or the `SubmitAction`.\n\nAs a Potterhead, I couldn't miss a Harry Potter example. I want to build a simple function to choose a Hogwarts House based on the person trait. Let's start with the houses first.\n\n```tsx\ntype House = {\n  name: string;\n  traits: string[];\n};\n\nconst gryffindor: House = {\n  name: 'Gryffindor',\n  traits: ['courage', 'bravery'],\n};\n\nconst slytherin: House = {\n  name: 'Slytherin',\n  traits: ['ambition', 'leadership'],\n};\n\nconst ravenclaw: House = {\n  name: 'Ravenclaw',\n  traits: ['intelligence', 'learning'],\n};\n\nconst hufflepuff: House = {\n  name: 'Hufflepuff',\n  traits: ['hard work', 'patience'],\n};\n\nconst houses: House[] = [gryffindor, slytherin, ravenclaw, hufflepuff];\n```\n\nI want to keep it simple, so the `House` type has only the `name` and the `traits`, a list of possible traits from people related to the house.\n\nAnd then, I create each house and added all of them to the `houses` list.\n\nGreat! Now I'll build the `Person` type. A person can be a witch or a muggle.\n\n```tsx\ntype Witch = {\n  name: string;\n  trait: string;\n  magicFamily: string;\n};\n\ntype Muggle = {\n  name: string;\n  trait: string;\n  email: string;\n};\n```\n\nAnd this is the part we combine these two different types using the union type:\n\n```tsx\ntype Person = Muggle | Witch;\n```\n\nUsing the intersection type, the `Person` type has all properties from `Muggle` or all from `Witch`.\n\nSo now, if I create a `Muggle`, I need just the name, the trait, and the email:\n\n```tsx\nconst hermione: Muggle = {\n  name: 'Hermione Granger',\n  trait: 'bravery',\n  email: 'hermione@mail.com',\n};\n```\n\nIf I create a `Witch`, I need the name, the trait, and the magic family name:\n\n```tsx\nconst harry: Witch = {\n  name: 'Harry Potter',\n  trait: 'courage',\n  magicFamily: 'Potter',\n};\n```\n\nAnd if I create a `Person`, I need at least the `name` and the `trait` properties from `Muggle` and `Witch`:\n\n```tsx\nconst tk: Person = {\n  name: 'TK',\n  email: 'tk@mail.com',\n  trait: 'learning',\n  magicFamily: 'Kinoshita',\n};\n```\n\nThe `chooseHouse` is very simple. We just pas the houses and the person. Based on the person trait, the function will return the chosen house:\n\n```tsx\nfunction chooseHouse(houses: House[], person: Person) {\n  return houses.find((house) => house.traits.includes(person.trait));\n}\n```\n\nAnd applying all the people we created:\n\n```tsx\nchooseHouse(houses, harry); // { name: 'Gryffindor', traits: ['courage', 'bravery'] }\nchooseHouse(houses, hermione); // { name: 'Gryffindor', traits: ['courage', 'bravery'] }\nchooseHouse(houses, tk); // { name: 'Ravenclaw', traits: ['intelligence', 'learning'] }\n```\n\nNice!\n\nThe intersection type is a bit different, but it can also be used to combine existing types.\n\nWhen I was implementing a web app to [apply my studies on UX](https://github.com/imteekay/ux-studies), I needed to create a prop type for the Image component.\n\nI had the type `ImageUrl` from the product type:\n\n```tsx\ntype ImageUrl = {\n  imageUrl: string;\n};\n```\n\nAnd the `ImageAttr` to represent all the attributes for the image:\n\n```tsx\ntype ImageAttr = {\n  imageAlt: string;\n  width?: string;\n};\n```\n\nBut the props expected all this information in the component. Intersection type for the rescue!\n\n```tsx\ntype ImageProps = ImageUrl & ImageAttr;\n```\n\nSimple as that. So now, the component needs all these properties. The type looks like this:\n\n```tsx\ntype ImageProps = {\n  imageUrl: string;\n  imageAlt: string;\n  width?: string;\n};\n```\n\nAnd we can use this type this way:\n\n```tsx\nconst imageProps: ImageProps = {\n  imageUrl: 'www.image.com',\n  imageAlt: 'an image',\n};\n\nconst imagePropsWithWidth: ImageProps = {\n  imageUrl: 'www.image.com',\n  imageAlt: 'an image',\n  width: '100%',\n};\n```\n\nNice! One more concept to reuse and compose types.\n\nI also find the `Pick` type very interesting and useful. We have other [interesting types](/series/typescript-learnings/interesting-types) that we could write here, but the idea here is to understand that we can compose type and there is no limit to reuse types. If you're interested in study other types, take a look at this post I wrote: [Typescript Learnings: Interesting Types](/series/typescript-learnings/interesting-types).\n\n## Tooling\n\nWhen you `npm install typescript`, you don't just get the compiler, you get the language service API, a standalone server called tsserver that editors can run to provide autocompletion, go-to, and other cool features.\n\nThese features are what some people from the Typescript team call developer productivity tools like smart errors when type checking and IntelliSense (code completion, hover info, signature information). We look at these features throughout the whole article, but I want to make a special topic to talk about it.\n\nThe Typescript type checker is powerful in the sense that it can infer types and provide information to some possible issues. Example: It inferred that the city is a string. And the `uppercase` is used the wrong way. As it knows it is a string, it also tries to find a possible method that the engineer is looking for.\n\n```tsx\nconst city = 'Tokyo';\ncity.toUppercase();\n// Property 'toUppercase' does not exist on type\n// 'string'. Did you mean 'toUpperCase'?\n```\n\nIn this case, the compiler is really smart, because it finds exatcly what we wanted.\n\nIt also works for objects:\n\n```tsx\nconst people = [\n  { name: 'TK', age: 24 },\n  { name: 'Kaio', age: 12 },\n  { name: 'Kazumi', age: 31 },\n];\n\nfor (const person of people) {\n  console.log(person.agi);\n  // Property 'agi' does not exist on type '{ name: string; age: number; }'\n}\n```\n\nWith the static types, the tooling can provide a great developer experience with code completion, hover info to show defined types, and signature information for methods and other data.\n\nIf you type: `'TK'.`, the editor will show all the possible methods for the string object. The compiler knows it is a string. And it knows the methods from the `String` prototype. But it also provides the method signature. This is very interesting because we don't necessarily need to go to the docs. The \"docs\" is already in our code editor.\n\nIt's an awesome experience while coding.\n\nThe type definition \"on hover\" is another thing that we saw earlier in this article. Let the compiler infer the types implicitly and you won't lose the type documentation. Using the hover in the object, the IDE or editor will always be able to show the type definition.\n\nAnother interesting thing is that Typescript will not only flag what could go wrong on runtime, but it also helps to find code that doesn't do what you intend.\n\nImagine we have a function to open a snackbar if it is still closed. It would verify the status of the snackbar. If it is closed, just call another function to open it.\n\n```tsx\nconst buildSnackbar = (status: SnackbarStatus) => {\n  if (status.isClosed) {\n    openSnackbar();\n  }\n};\n```\n\nAnd the type information for this snackbar is:\n\n```tsx\ntype SnackbarStatus = {\n  isClosed: boolean;\n};\n```\n\nWhat happens if I call this function like this:\n\n```tsx\nbuildSnackbar({ isclosed: true });\n```\n\nIt won't break in runtime, because the `status` object has no `isClosed` attribute and the `undefined` object is a `falsy` value, so it will skip the if condition and not call the `openSnackbar` function. No runtime error. But probably it will behavior different than the expected.\n\nIn Typescript, the compiler will give some hints to make it works properly. First it will show this error:\n\n```tsx\n// Argument of type '{ isclosed: boolean; }' is not assignable to\n// parameter of type 'SnackbarStatus'.\n```\n\n`isclosed` with downcased `C` is not assignable to the type. It's not defined there. This is the first hint to make you correct your code.\n\nThe second is even better:\n\n```tsx\n// Object literal may only specify known properties,\n// but 'isclosed' does not exist in type 'SnackbarStatus'.\n// Did you mean to write 'isClosed'?\n```\n\nIt tells exactly what you probably need to do: rename the `isclosed` to `isClosed`.\n\nWe can talk a lot of things about the tooling about I think this is the main part.\n\nMy suggestion to learn more about this is to just code in Typescript and \"have a conversation\" with the compiler. Read the errors. Play with the hover. See the autocompletion. Understand the method signatures. It's really a productive way to code.\n\n## Tips & Learnings\n\nAs the article is coming to an end, I want to just add the final thoughts, learnings, and tips to help you in your journey learning Typescript or just applying it in your projects.\n\n- Really read the type error: this will help you better understand the issue and the types.\n- `strictNullChecks` and `noImplicitAny` can be very helpful in finding bugs. Enable this as soon as possible in your project. Use `strictNullChecks` to prevent “undefined is not an object”-style runtime errors. Use `noImplicitAny` to type the source code to give more type information for the compiler.\n- Together with these compiler's configurations, I always recommend being very precise about your types. Mainly with the values that occur only in runtime like an API response. Correctness is important to catch as many bugs as possible in compile time.\n- Understand the difference between runtime and compile time: types only affects in compile type. It runs the type checker and then compiles to Javascript. The Javascript source code doesn't use any type of references or type operations.\n- Learn about utility types. We talk about more specific about the `Readonly` in the immutability in compile time, but Typescript has a box of helpers like `Required`, `Pick`, and many more.\n- If possible, prefer letting the compiler infers the types for you. Most of the types and returning types are redundant. The Typescript compiler is very smart in this topic. If not possible, you can always add type annotations. And let the type assertions as to the last option.\n- As writing code, take a look at the tooling. The design of the tooling provided in an IDE is amazing. The IntelliSense and type checking provide a really good experience.\n\n# Resources\n\nI compiled (pun very much intended!) a bunch of resources to help you learn more about programming languages, type systems, and the type mental model.\n\nAlso, if you found the examples on this post useful, I added all of them this repository: [Thinking in Types](https://github.com/imteekay/thinking-in-types). So you can fork and play with it.\n\n### Courses\n\n- [TypeScript for Front-End Developers](https://www.educative.io/path/typescript-for-front-end-developers?aff=x8bV)\n- [Using TypeScript with React](https://www.educative.io/courses/using-typescript-with-react?aff=x8bV)\n- [Learn TypeScript: The Complete Course for Beginners](https://www.educative.io/courses/learn-typescript-complete-course?aff=x8bV)\n- [Advanced TypeScript Masterclass](https://www.educative.io/courses/advanced-typescript-masterclass?aff=x8bV)\n\n### Type Systems\n\n- [Type Compatibility](https://www.typescriptlang.org/docs/handbook/type-compatibility.html)\n- [Type Systems: Structural vs. Nominal typing explained](https://medium.com/@thejameskyle/type-systems-structural-vs-nominal-typing-explained-56511dd969f4)\n- [Learning TypeScript: Structural vs nominal typing systems](https://yakovfain.com/2018/07/11/learning-typescript-structural-vs-nominal-typing-system/)\n- [Constraints Liberate, Liberties Constrain — Runar Bjarnason](https://www.youtube.com/watch?v=GqmsQeSzMdw&feature=youtu.be)\n- [Type Narrowing in TypeScript](https://www.no.lol/2019-12-27-type-narrowing/)\n- [TypeScript: narrowing types via type guards and assertion functions](https://2ality.com/2020/06/type-guards-assertion-functions-typescript.html)\n- [Programming with Types Book](https://www.goodreads.com/book/show/48920810-programming-with-types)\n- [Effective TypeScript: 62 Specific Ways to Improve Your TypeScript Book](https://www.goodreads.com/book/show/48570456-effective-typescript)\n- [Typescript Learnings: Interesting Types](/series/typescript-learnings/interesting-types)\n\n### Tooling & Developer Experience\n\n- [Advanced TypeScript tooling at scale](https://www.youtube.com/watch?v=fnTEZk-oECM)\n- [Type Systems & Props Design](https://www.youtube.com/watch?v=4C4wCGcsiT0)\n- [Anders Hejlsberg on Modern Compiler Construction](https://www.youtube.com/watch?v=wSdV1M7n4gQ)\n- [Typescript Compiler explained by the Author Anders Hejlsberg](https://www.youtube.com/watch?v=f6TCB61fDwY)\n\n### Compile time vs Runtime\n\n- [Compile time vs Runtime](https://stackoverflow.com/questions/846103/runtime-vs-compile-time)\n- [Compile error vs Runtime error](https://stackoverflow.com/questions/9471837/what-is-the-difference-between-run-time-error-and-compiler-error)\n- [Value space and Type space](https://stackoverflow.com/a/51132333/3159162)\n- [A playground tool to play with Typescript and see the Javascript output](https://www.typescriptlang.org/play)\n\n### Best Practices\n\n- [Typescript Best Practices](https://engineering.zalando.com/posts/2019/02/typescript-best-practices.html)\n",
  },
  {
    url: '/actionable-advice-to-start-learning-to-code',
    title: 'Actionable advice to start learning to code',
    content:
      'When I started sharing my journey about [mastering programming](https://medium.com/the-renaissance-developer) and [hacking my education](https://medium.com/the-renaissance-developer/how-i-hack-my-education-354fb5b8a025), people got really interested and asked me a lot about how to start learning to code.\n\nI really want to help future developers in their journey and the amount of questions on how to start inspired me to write this article.\n\nI got a time to think about my journey and I asked experienced developers about coding, how they started, about career, and all those interesting things everybody wants to know.\n\nThis post has stories and a lot of actionable advice for you to be inspired, motivated, and take the first step in the programming world.\n\nHope this helps!\n\n### The Mindset\n\nWhen I started I fell inlove with programming. My number one tip is to learn it because you like it, you find it interesting, or maybe find it useful (and it really is!).\n\nWhy do I say that? I’m a big fan of “do what you are passionate about”. It looks cliché, but it always worked for me. And if you get started with programming, you’ll need this inner motivation. Passion and interest help you be consistent and disciplined with your learning journey.\n\nRemember: it is not a sprint. It is a long long marathon. Don’t expect to learn everything overnight. It doesn’thappen like that.\n\n![](https://cdn-images-1.medium.com/max/1600/1*TWEjK-8fXse8_4lyz-2YRA.png)\n\n#### Tip number two: keep learning\n\nAs a software engineer, one of my challenges is always keeping track of new things that are emerging in our world: new libraries like [ReactJS in 2013](<https://en.wikipedia.org/wiki/React_(JavaScript_libary)>), web applications like [SPA](https://en.wikipedia.org/wiki/Single-page_application), [PWA](https://en.wikipedia.org/wiki/Progressive_web_app), tech trends like Machine Learning, AI, cryptocurrency (Blockchain Blockchain Blockchain!), and so on.\n\nI’m not saying we need to learn everything and overwhelm ourselves. My point is thatnewthings are created so fast in the tech world, so we need to embrace the **lifelong learning** mindset.\n\nTalking about _overwhelming_, here’s tipnumber three: try not to overwhelm yourself. You don’t need to start with hard concepts first or with the heaviest algorithm book.\n\nHere’s an analogy: when you want to lose weight, you don’t start with a marathon. Instead, you maybe start with a 1-mile run.\n\nThe same way with programming, you don’t need to code and study in all your free time, changing completely your schedule.\n\nGo for small changes, but do them regularly. One code at a time.\n\n**Don’t compare yourself with “experienced engineers”** or “coder genius”is tip number four.First, it is not fair at all. Second, you are just starting. Keep focused on your studies.\n\nIt is easy to compare yourself with your teammates or [programming genius](https://en.wikipedia.org/wiki/Gennady_Korotkevich), but it just increases the impostor syndrome inside you. Don’t let it stop your programming journey.\n\nPractice is the key. **Find ways to learn the concepts and practice it.** This is tip five. Building the foundation with concepts and theories is important, but be practical. Try. Experiment. We will dive into this later, but practice is key!\n\n### Theory & Concepts\n\nIt’s really important to understand the basic programming concepts and build the foundation first. If you are at college now, you’ll be good! Colleges are great in teaching basic concepts and theories. If you’re pursuing a Computer Science degree, you’ll probably have Algorithms and Data Structures classes. But if you are not at college, the internet is here to help you out!\n\nWhen I started I learned with 2 great online courses: [Codecademy](https://www.codecademy.com/) & [CS50 at Harvard](https://cs50.harvard.edu/)**.**\n\nThere, I learned the basics with Python on Codecademy and C in CS50. But my opinion is: you just need to start. Choose one programming language and start understanding the basic concepts (variables, if-else, loops, data structures).\n\n> [Be language\n> agnostic](http://www.gayle.com/blog/2014/07/09/15-pieces-of-career-advice-software-developers-should-follow). Language is just a tool. It’s valuable to know a language deeply, but it’s also valuable to be learning new things. The best developers tend not to identify as a \\_\\_\\_\\_ developer.— [Gayle Laakmann McDowell](https://medium.com/u/e21bc4f4525e)\n\nProbably, when you choose a course, they will teach you with a specific programming language. But don’t worry! Focus on the basic concepts (and maybe fall in love with the programming language as I did with [Python](https://medium.freecodecamp.org/learning-python-from-zero-to-hero-120ea540b567) and [Ruby](https://medium.freecodecamp.org/learning-ruby-from-zero-to-hero-90ad4eecc82d).\n\n#### Why did I choose these courses?\n\nAs I was searching for something to start, I wanted to deeply understand the concepts and be practical about it. CS50 seemed the best resource to build a solid foundation.\n\nDavid J. Malan is definitely one of the best professors I had. And Codecademy helped a lot about being practical. Train myself to code everything I was learning. Code code code. Remember the fifth tip? Find ways to learn the concepts and practice it.\n\n#### Other resources with great content are:\n\n[Introduction to Computer Science](https://br.udacity.com/course/intro-to-computer-science--cs101/) by Udacity. It covers pretty much everything you need to start understanding programming. Udacity courses always have “practice time” after each theory and concept you learn.\n\nMIT’s [Introduction to Algorithms](http://courses.csail.mit.edu/6.006/fall11/notes.shtml) will teach you algorithmic thinking. Understanding algorithms and how they work is the most important thing you should learn when starting your coding journey. Other great resources are algorithm books like [Introduction to Algorithm](https://www.amazon.com/Introduction-Algorithms3rd-MIT-Press/dp/0262033844) by CLRS and [Algorithms](https://www.amazon.com/Algorithms-4th-RobertSedgewick/dp/032157351X/ref=pd_sim_14_3?_encoding=UTF8&pd_rd_i=032157351X&pd_rd_r=Y548PDB04MJN6BH8MYFB&pd_rd_w=UgKc5&pd_rd_wg=CvgEt&psc=1&refRID=Y548PDB04MJN6BH8MYFB) by Robert Sedwick.\n\nHere you’ll start overwhelming yourself with the tons of resources we have on the internet. But **try not to overwhelm yourself**. You don’t need to do every single course, focus on one, learn, practice, build confidence. Remember, it’s a journey. One line of code at a time :)\n\n### Training, Practicing, Coding, Building\n\n**Practice Practice Practice**. I can’t say enough how practicality is so important when you start learning to code.\n\n> Code. A lot… The best way to be a great coder is to just practice — a lot.\n> — [Gayle Laakmann\n> McDowell](http://www.gayle.com/blog/2014/07/09/15-pieces-of-career-advice-software-developers-should-follow)\n\nPractice not only make you a better programmer but also you gain a lot of confidence through this. [Impostor Syndrome](http://blog.teamtreehouse.com/become-a-software-engineer-jonas) is a real thing!\n\nAs I said at the beginning of this article, I will try to write actionable items for you. Options you can do in your learning journey to be more practical.\n\nAs I did, you can start with [Codecademy](https://www.codecademy.com/). It has really good content and a great experience to code everything you are learning.\n\nAnother great site is [Hacker Rank](https://www.hackerrank.com/).The website has a lot of programming language options to choose. But not only this, you can also do other domain exercises. I really like Hacker Rank’s problem-solving exercises. You receive a lot of inputs and your algorithm need to pass in all tests.\n\n![](https://cdn-images-1.medium.com/max/1600/1*bkvDxLVBKJ1Gd8cA86B-fg.png)\n\nAnother thing I’m really passionate about is Competitive Programming. I did it for two years at college, for competitions like [ACM ICPC](https://icpc.baylor.edu/).\n\nBasically, you have a bunch of problems, and you need to implement an algorithm to pass each one. Doing it helped me gain a lot of confidence in my coding skills, and I feel like I’m a stronger developer after my heavy training and participating in competitions. ([Here is my repo on GitHub](https://github.com/imteekay/algorithms) — I solved a lot of problems).\n\nI’m a heavy user on Quora, and someday I read a great answer by [Veni Johanna](https://medium.com/u/f1962714b0f6) about “Does competitive programming really help in improving your knowledge and skill set as a developer?”\n\nI’ll write down some skills we gain learning competitive programming:\n\n1.  You have developed habit to convert / model specific problem to an abstract one.\n\n1.  You are used to registering patterns, and matching patterns against your pattern\n    bank.\n\n1.  You know how to concentrate and perform under pressure.\n\n1.  You have awareness and confidence of your own ability and shortcomings as a\n    coder.\n\n1.  You have learned to manage time, especially in terms of your thinking and coding\n    habits.\n\n1.  You are used to well-defined problems.\n\n1.  You are used to having one objective in mind.\n\n1.  You can be stuck in ‘problem solving’ mode.\n\nI loved her comments and agree 100% with each one. Take a look at the [full answer](https://www.quora.com/Does-competitive-programming-really-help-in-improving-your-knowledge-and-skill-set-as-a-developer-Are-there-better-things-that-would-help-one-amass-greater-knowledge-in-less-time/answer/Veni-Johanna). You should. It’s great!\n\nMy intention here is to give you the most actionable advice as possible, so I’ll list some great websites for you to start learning and training from day 0.\n\n- [Codeforces](http://codeforces.com/): it is a really good website to train and learn. It has tons of great problem sets. Editorial is a plus here (_Editorial_:\n  The problem author writes how you should approach and solve the problem — which algorithm or data structure to use).\n- [Topcoder](https://www.topcoder.com/): this website is very similar to Codeforces in terms of problems quality and editorial. It is also well known for its [tutorials](https://www.topcoder.com/community/data-science/data-science-tutorials/). Each “tutorial” teaches some technique, algorithm, or data structure.\n- [Hacker Rank](http://hackerrank.com/): as I said above, Hacker Rank has a lot of different domains like Algorithms, Data Structures, Mathematics, Programming Languages, etc. The website UI and UX is a plus for Hacker Rank, it is beautiful and very easy to use. I used a lot the Python Domain to build a good foundation on my Python skills.\n- [Hacker Earth](https://www.hackerearth.com/) and [Code\n  Chef](https://www.codechef.com/) are other good websites.\n\nNow you can choose a website and start practicing :)\n\n### Building projects\n\nAfter learning the fundamentals, coding, and practicing a lot, I felt I was stuck. I start searching how could I go to the next level. Building projects were the answer for me. So I taught myself web fundamentals: HTML, CSS, Javascript, and a web framework. That time I learned Ruby on Rails (Ruby Web Framework) and Django (Python Web Framework).\n\nMy first project was [my own website](http://leandrotk.github.io/tk). Then I built a website for my mom’s restaurant. Then two games: tic-tac-toe and snake. All static websites.\n\nI felt I was ready to develop a full stack website. So I built an online bookstore with an admin dashboard (the admin could add new products, edit them, delete them… all the [CRUD](https://en.wikipedia.org/wiki/Create,_read,_update_and_delete) stuff), and the public part — the client could signup/login, search for books, and buy it. I was pretty happy I could finish this project. It was really challenging for me at that time, and I learned a lot.\n\nThe first real life product I developed was [aLavadeira](https://www.alavadeira.com/) responsive website. And now I build the [Worldpackers](http://worldpackers.com/) web product and API for the mobile apps for more than 900K travelers and host all around the world.\n\nMy good friend [Douglas](https://medium.com/@douglas.iacovelli) has a great story on how he started to code and develop apps. He learned the fundamental concepts at college, but building mobile apps was something he was always curious about. He tried to build many Android apps, but soon he gave up.\n\n> “I simply didn’t know how to start, because I had a lot of things to learn, and I didn’t feel ready to build an app. There were so many different things to learn and ways to do the same thing, that I got stuck trying to figure out which was the right or the best. The 2 most important things at this stage were: 1. Set a simple goal and try to learn the basics to achieve that. 2. Avoid perfectionism and just do it.”— Doug\n\nListening to Doug’s story, I felt that everybody who is starting something gets stuck in some part of the process. And it is super normal to feel frustrated or do not understand how to start.\n\n> “I got help from a friend of mine who had already built a simple app. I asked him if he knew which was the best way to do a specific thing and the truth is: he didn’t know, but I felt more secure knowing we were building the same way.” — Doug\n\nIf you have colleagues or friends that have more experience ask for help, probably they will help in some way. And it is cool how these “mentors” inspire and motivate you to start and try again.\n\nAnother learning we can get from Doug’s story: he set a goal to make the simplest app for the first time.\n\n> “I built the [first app version](https://play.google.com/store/apps/details?id=co.iacovelli.usp) and published it to Play Store. Then I learned more and more about Java/Kotlin/Android and could implement more features on this app. But it was a time-consuming process. I needed a lot of persistence” — Doug\n\nIt is so nice when we are on a learning curve part that we feel confident and are just “in the flow” to keep learning and building. But I totally agree with Doug, when you start learning something new, you need a lot of persistence to keep your learning consistent.\n\nNow Doug works as a Android developer. He has 2 personal projects (mobile apps) published in the Play Store and leads the [Worldpackers Android app](https://play.google.com/store/apps/details?id=com.worldpackers.travelers).\n\n> “I learned how to program by working on lots of different website projects starting from a pretty young age. The best way to learn a new skill is to practice, practice, practice. It doesn’t matter what you build, as long as you pick something and start.” — [Feross Aboukhadijeh](https://medium.com/u/1299c645ef11)\n\nIn [Feross answer](https://www.quora.com/How-did-Feross-Aboukhadijeh-learn-to-program-And-if-he-could-do-it-over-again-what-would-he-do-different-What-language-would-he-start-with/answer/Feross-Aboukhadijeh?) on [Quora](https://medium.com/@quoraanswers), he tells how he learned to code by building lots of side projects. His story is so inspiring. You notice how he keep making progress project by project. His advice to learn to program:\n\n- Do side projects.\n- Buy and read programming books.\n- Do side projects.\n- Take computer science classes.\n- Do side projects.\n- Read programming blogs.\n- Do side projects.\n\n[Read his full story here](https://www.quora.com/How-did-Feross-Aboukhadijeh-learn-to-program-And-if-he-could-do-it-over-again-what-would-he-do-different-What-language-would-he-start-with/answer/Feross-Aboukhadijeh?)!\n\n### Here is a list of side projects you can do.\n\nTime to help you start building stuff!\n\n- If you are a gamer, maybe you can start with Tic-Tac-Toe, Sudoku, or Flappy\n  Bird.\n- If you are a data lover, you can do web scraping or work with a trading stock\n  API to build and analyze stock charts.\n- If you want to understand better front-end, build your own website/portfolio.\n- If you want to build a full product, start with an online bookstore, product\n  inventory, or a blog.\n\nThe list goes on and on. Here [another list (https://github.com/karan/Projects#networking) that can help you choose the project. But I agree with Feross, it doesn’t matter what you build, as long as you pick something and start. So start building!You’ll have problems, you’ll get stuck. But you’ll learn A LOT!\n\n#### I know that it is pretty challenging to keep your project going.\n\nTo keep yourself accountable, I found out an interesting project you can do daily. It’s called 100 days of code. Here is the [template](https://github.com/Kallaway/100-days-of-code). It is simple, you write a daily journal about your progress and thoughts about a project you are doing.\n\nAnd it really works. You keep yourself accountable, you keep your project going and track your progress. Everything in a public repository on GitHub, so you can also share with your friends. Collaborate with the GitHub community. And share and inspire other people.\n\nSearching for 100 days of code stories, I found out “[How I Coded Everyday for 365 Days](https://hackernoon.com/how-i-coded-everyday-for-365days-67ebb5fc7ae)” by [Emily](https://medium.com/@emilyyu_17465). Such an inspiring story of discipline and willingness to learn to code.\n\nIt’s pretty cool how she writes about her projects and how she learned through the year. The projects were from iOS apps using Swift programming language, to web development using the whole stack (HTML, CSS, JS, Flask — Python web framework). Go read the [full article](https://hackernoon.com/how-i-coded-everyday-for-365-days-67ebb5fc7ae).\n\nKeep motivated, keep building, keep coding! :)\n\n### Some useful resources\n\nGood websites, articles & videos:\n\n#### Websites\n\n- [freeCodeCamp](https://www.freecodecamp.org/) is a great website focused on web development and JavaScript. Totally free (YEY!).\n- [Udemy](https://www.udemy.com/), [CodeSchool](https://www.codeschool.com/) and [Khan Academy](https://www.khanacademy.org/) are very similar in terms of varieties of courses, but Udemy has paid courses, Khan Academy is free, and CodeSchool is a mix of both (paid and free courses).\n- Don’t forget the MOOC’s: [Udacity](https://www.udacity.com/), [Coursera](https://www.coursera.org/), and [edX](https://www.edx.org/). All these websites have great courses. Give it a try! :)\n\n#### Follow people on Twitter\n\n- If you are interested in Machine Learning, [Andrew Ng](https://medium.com/@andrewng) is the person!\n- For programming stuff I like to read tweets from [DHH](https://medium.com/@dhh)\n  (Ruby on Rails creator), [Dan Abramov](https://medium.com/@dan_abramov) (Redux Co-author), [Tracy Chou](https://medium.com/@triketora) (former Quora, Pinterest), [Quincy Larson](https://medium.com/@quincylarson) (freeCodeCamp creator), [Preethi Kasireddy](https://medium.com/@preethikasireddy) (Blockchain Engineer), [Dan Bader](https://medium.com/@dbader_org) (runs Real Python), and the list goes on.\n\n#### People who are documenting their journey on Medium\n\n- [How To Successfully Teach Yourself How To\n  Code](https://medium.freecodecamp.org/successfully-teaching-yourself-how-to-code-f6aac23db44a) by [Lydia Hallie](https://medium.com/@lydiahallie)\n- [How I went from fashion model to software engineer in 1\n  year](https://medium.freecodecamp.org/how-i-went-from-fashion-model-to-software-engineer-in-1-year-a7399a40d9e7) by [Madison Kanna](https://medium.com/@madisonkanna)\n- [BaseCS](https://medium.com/basecs) by [Vaidehi Joshi](https://medium.com/@vaidehijoshi)\n- [Here’s Why Learning How To Code Is So\n  Hard](https://medium.com/the-mission/heres-why-learning-how-to-code-is-so-hard-and-what-to-do-about-it-3d6fda152409) by [Kevin Kononenko](https://medium.com/@kevink)\n- [I Want to Learn Programming but I Don’t Know where to\n  Start](https://codeburst.io/i-want-to-learn-programming-but-i-dont-know-where-to-start-80dd2d55e1fd) by [Robyn Silber](https://medium.com/@robynjsilber)\n\n#### Vlogs & YouTube channels\n\nI really like to watch vlogs and see people’s lifestyle on YouTube.\n\n- [Fun Fun Function](https://www.youtube.com/channel/UCO1cgjhGzsSYb1rsB4bFe4Q) is a channel run by [Mattias Petter Johansson](https://medium.com/@mpjme), a former Spotify Engineer. It started with JavaScript, but lately, he is talking about development in general. I really like how he puts his ideas and present each topic.\n- [Mayuko](https://www.youtube.com/user/hellomayuko) is an iOS software engineer working at [Patreon](https://medium.com/@Patreon). She also talks about engineering and lifestyle in general.\n- [CS Dojo](https://www.youtube.com/channel/UCxX9wt5FWQUAAz4UrysqK9A) is really focused on programming interview advice, algorithms and data structure stuff. This channel is from [YK Sugishita](https://medium.com/@ykdojo), a former Google Engineer in Canada.\n- [Joma Tech](https://www.youtube.com/channel/UCV0qA-eDDICsRR9rPcG7tw) is the funniest and more entertaining YouTube channel among all. [Jonathan Ma](https://medium.com/@joma) is a data scientist at Facebook. He vlogs about his engineer life and also gives coding interview advice based on his experience interning in a bunch of tech companies.\n\n### That’s all!\n\nI hope this article can help you get started.\n\nYou can see the documentation of my complete journey to learn and master programming here on my [Renaissance Developer publication](https://medium.com/the-renaissance-developer).\n\nHave fun! Keep learning and coding.\n',
  },
  {
    url: '/an-introduction-to-the-basic-principles-of-functional-programming',
    title: 'An introduction to the basic principles of Functional Programming',
    content:
      'After a long time learning and working with object-oriented programming, I took a step back to think about system complexity.\n\n> "`Complexity is anything that makes software hard to understand or to modify.`"\n> — John Outerhout\n\nDoing some research, I found functional programming concepts like immutability and pure function. Those concepts are big advantages to build side-effect-free functions, so it is easier to maintain systems — with some other\n[benefits](https://hackernoon.com/why-functional-programming-matters-c647f56a7691).\n\nIn this post, I will tell you more about functional programming, and some\nimportant concepts, with a lot of code examples.\n\n### What is functional programming?\n\n> **Functional programming** is a programming paradigm — a style of building the > structure and elements of computer programs — that treats computation as the evaluation of mathematical functions and avoids changing-state and mutable data\n> — [Wikipedia](https://en.wikipedia.org/wiki/Functional_programming)\n\n### Pure functions\n\nThe first fundamental concept we learn when we want to understand functional programming is **pure functions**. But what does that really mean? What makes a function pure?\n\nSo how do we know if a function is `pure` or not? Here is a very strict definition of purity:\n\n- It returns the same result if given the same arguments (it is also referred as\n  `deterministic`)\n\n- It does not cause any observable side effects\n\n#### It returns the same result if given the same arguments\n\nImagine we want to implement a function that calculates the area of a circle. An impure function would receive `radius` as the parameter, and then calculate `radius * radius * PI`. In Clojure, the operator comes first, so `radius * radius * PI` becomes `(* radius radius PI)`:\n\n```clojure\n(def PI 3.14)\n\n(defn calculate-area\n  [radius]\n  (* radius radius PI))\n\n(calculate-area 10) ;; returns 314.0\n```\n\nWhy is this an impure function? Simply because it uses a global object that was not passed as a parameter to the function.\n\nNow imagine some mathematicians argue that the `PI` value is actually `42` and change the value of the global object.\n\nOur impure function will now result in `10 * 10 * 42` = `4200`. For the same parameter (`radius = 10`), we have a different result. Let\'s fix it!\n\n```clojure\n(def PI 3.14)\n\n(defn calculate-area\n  [radius, PI]\n  (* radius radius PI))\n\n(calculate-area 10 PI) ;; returns 314.0\n```\n\nTA-DA 🎉! Now we’ll always pass the`PI` value as a parameter to the function. So now we are just accessing parameters passed to the function. No `external object`.\n\n- For the parameters `radius = 10` & `PI = 3.14`, we will always have the same the result: `314.0`\n\n- For the parameters `radius = 10` & `PI = 42`, we will always have the same the result: `4200`\n\n#### Reading Files\n\nIf our function reads external files, it’s not a pure function — the file’s contents can change.\n\n```clojure\n(defn characters-counter\n  [text]\n  (str "Character count: " (count text)))\n\n(defn analyze-file\n  [filename]\n  (characters-counter (slurp filename)))\n\n(analyze-file "test.txt")\n```\n\n#### Random number generation\n\nAny function that relies on a random number generator cannot be pure.\n\n```clojure\n(defn year-end-evaluation\n  []\n  (if (> (rand) 0.5)\n    "You get a raise!"\n    "Better luck next year!"))\n```\n\n#### It does not cause any observable side effects\n\nExamples of observable side effects include modifying a global object or a parameter passed by reference.\n\nNow we want to implement a function to receive an integer value and return the value increased by 1.\n\n```clojure\n(def counter 1)\n\n(defn increase-counter\n  [value]\n  (def counter (inc value))) ;; please don\'t do this\n\n(increase-counter counter) ;; 2\ncounter ;; 2\n```\n\nWe have the `counter` value. Our impure function receives that value and re-assigns the counter with the value increased by 1.\n\n**Observation**: mutability is discouraged in functional programming.\n\nWe are modifying the global object. But how would we make it `pure`? Just return the value increased by 1. Simple as that.\n\n```clojure\n(def counter 1)\n\n(defn increase-counter\n  [value]\n  (inc value))\n\n(increase-counter counter) ;; 2\ncounter ;; 1\n```\n\nSee that our pure function `increase-counter` returns 2, but the `counter` value is still the same. The function returns the incremented value without altering the value of the variable.\n\nIf we follow these two simple rules, it gets easier to understand our programs. Now every function is isolated and unable to impact other parts of our system.\n\nPure functions are stable, consistent, and predictable. Given the same parameters, pure functions will always return the same result. We don’t need to think of situations when the same parameter has different results — because it will never happen.\n\n#### Pure functions benefits\n\nThe code’s definitely easier to test. We don’t need to mock anything. So we can\nunit test pure functions with different contexts:\n\n- Given a parameter `A` → expect the function to return value `B`\n\n- Given a parameter `C` → expect the function to return value `D`\n\nA simple example would be a function to receive a collection of numbers and expect it to increment each element of this collection.\n\n```clojure\n(defn increment-numbers\n  [numbers]\n  (map inc numbers))\n```\n\nWe receive the `numbers` collection, use `map` with the `inc` function to increment each number, and return a new list of incremented numbers.\n\n```clojure\n(= [2 3 4 5 6] (increment-numbers [1 2 3 4 5])) ;; true\n```\n\nFor the `input` `[1 2 3 4 5]`, the expected `output` would be `[2 3 4 5 6]`.\n\n### Immutability\n\n> _Unchanging over time or unable to be changed._\n\nWhen data is immutable, its **state cannot change** after it’s created. **If you want to change an immutable object, you can’t. Instead,** you create a new\nobject with the new value.\n\nIn Javascript we commonly use the `for` loop. This next `for` statement has some mutable variables.\n\n```javascript\nvar values = [1, 2, 3, 4, 5];\nvar sumOfValues = 0;\n\nfor (var i = 0; i < values.length; i++) {\n  sumOfValues += values[i];\n}\n\nsumOfValues; // 15\n```\n\nFor each iteration, we are changing the `i` and the `sumOfValue` **state**. But how do we handle mutability in iteration? Recursion! Back to Clojure!\n\n```clojure\n(defn sum\n  [values]\n  (loop [vals values\n         total 0]\n    (if (empty? vals)\n      total\n      (recur (rest vals) (+ (first vals) total)))))\n\n(sum [1 2 3 4 5]) ;; 15\n```\n\nSo here we have the `sum` function that receives a vector of numerical values. The `recur` jumps back into the `loop` until we get the vector empty ([our recursion](https://en.wikipedia.org/wiki/Recursion) `base case`). For each "iteration" we will add the value to the `total` accumulator.\n\nWith recursion, we keep our **variables** immutable.\n\n**Observation**: Yes! We can use `reduce` to implement this function. We will see this in the `Higher Order Functions` topic.\n\nIt is also very common to build up the final **state** of an object. Imagine we have a string, and we want to transform this string into a `url slug`.\n\n```ruby\nclass UrlSlugify\n  attr_reader :text\n\n  def initialize(text)\n    @text = text\n  end\n\n  def slugify!\n    text.downcase!\n    text.strip!\n    text.gsub!(\' \', \'-\')\n  end\nend\n\nUrlSlugify.new(\' I will be a url slug   \').slugify! # "i-will-be-a-url-slug"\n```\n\nIn OOP in Ruby, we would create a class, let’s say, `UrlSlugify`. And this class will have a `slugify!` method to transform the string input into a `url slug`.\n\nBeautiful! It’s implemented! Here we have imperative programming saying exactly what we want to do in each `slugify` process — first lower case, then remove useless white spaces and, finally, replace remaining white spaces with hyphens.\n\nBut we are mutating the input state in this process.\n\nWe can handle this mutation by doing function composition, or function chaining. In other words, the result of a function will be used as an input for the next function, without modifying the original input string.\n\n```clojure\n(defn slugify\n  [string]\n  (clojure.string/replace\n    (clojure.string/lower-case\n      (clojure.string/trim string)) #" " "-"))\n\n(slugify " I will be a url slug   ")\n```\n\nHere we have:\n\n- `trim`: removes whitespace from both ends of a string\n\n- `lower-case`: converts the string to all lower-case\n\n- `replace`: replaces all instances of match with replacement in a given string\n\nWe combine all three functions and we can `"slugify"` our string.\n\nSpeaking of **combining functions**, we can use the `comp` function to compose all three functions. Let\'s take a look:\n\n```clojure\n(defn slugify\n  [string]\n  ((comp #(clojure.string/replace % #" " "-")\n         clojure.string/lower-case\n         clojure.string/trim)\n    string))\n\n(slugify " I will be a url slug   ") ;; "i-will-be-a-url-slug"\n```\n\n### Referential transparency\n\nLet’s implement a `square function`:\n\n```clojure\n(defn square\n  [n]\n  (* n n))\n```\n\nThis (pure) function will always have the same output, given the same input.\n\n```clojure\n(square 2) ;; 4\n(square 2) ;; 4\n(square 2) ;; 4\n;; ...\n```\n\nPassing “2” as a parameter of the `square function`will always returns 4. So now we can replace the `(square 2)` with 4. That\'s it! Our function is `referentially transparent`.\n\nBasically, if a function consistently yields the same result for the same input, it is referentially transparent.\n\n**pure functions + immutable data = referential transparency**\n\nWith this concept, a cool thing we can do is to memoize the function. Imagine we have this function:\n\n```clojure\n(+ 3 (+ 5 8))\n```\n\nThe `(+ 5 8)` equals `13`. This function will always result in `13`. So we can do this:\n\n```clojure\n(+ 3 13)\n```\n\nAnd this expression will always result in `16`. We can replace the entire expression with a numerical constant and [memoize](https://en.wikipedia.org/wiki/Memoization) it.\n\n### Functions as first-class entities\n\nThe idea of functions as first-class entities is that functions are **also** treated as values **and** used as data.\n\nIn Clojure it’s common to use `defn` to define functions, but this is just syntactic sugar for `(def foo (fn ...))`. `fn` returns the function itself. `defn` returns a `var` which points to a function object.\n\nFunctions as first-class entities can:\n\n- refer to it from constants and variables\n\n- pass it as a parameter to other functions\n\n- return it as result from other functions\n\nThe idea is to treat functions as values and pass functions like data. This way we can combine different functions to create new functions with new behavior.\n\nImagine we have a function that sums two values and then doubles the value. Something like this:\n\n```clojure\n(defn double-sum\n  [a b]\n  (* 2 (+ a b)))\n```\n\nNow a function that subtracts values and the returns the double:\n\n```clojure\n(defn double-subtraction\n  [a b]\n  (* 2 (- a b)))\n```\n\nThese functions have similar logic, but the difference is the operators functions. If we can treat functions as values and pass these as arguments, we can build a function that receives the operator function and use it inside our function. Let’s build it!\n\n```clojure\n(defn double-operator\n  [f a b]\n  (* 2 (f a b)))\n\n(double-operator + 3 1) ;; 8\n(double-operator - 3 1) ;; 4\n```\n\nDone! Now we have an `f` argument, and use it to process `a` and `b`. We passed the `+` and `-` functions to compose with the `double-operator` function and create a new behavior.\n\n### Higher-order functions\n\nWhen we talk about higher-order functions, we mean a function that either:\n\n- takes one or more functions as arguments, or\n\n- returns a function as its result\n\nThe `double-operator` function we implemented above is a higher-order function because it takes an operator function as an argument and uses it.\n\nYou’ve probably already heard about `filter`, `map`, and `reduce`. Let\'s take a look at these.\n\n#### Filter\n\nGiven a collection, we want to filter by an attribute. The filter function expects a `true` or `false` value to determine if the element **should or should not** be included in the result collection. Basically,if the callback expression is `true`, the filter function will include the element in the result collection. Otherwise, it will not.\n\nA simple example is when we have a collection of integers and we want only the even numbers.\n\n**Imperative approach**\n\nAn imperative way to do it with Javascript is to:\n\n- create an empty vector `evenNumbers`\n\n- iterate over the `numbers` vector\n\n- push the even numbers to the `evenNumbers` vector\n\n```javascript\nvar numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nvar evenNumbers = [];\n\nfor (var i = 0; i < numbers.length; i++) {\n  if (numbers[i] % 2 == 0) {\n    evenNumbers.push(numbers[i]);\n  }\n}\n\nconsole.log(evenNumbers); // (6) [0, 2, 4, 6, 8, 10]\n```\n\nWe can use the `filter` higher order function to receive the `even?` function, and return a list of even numbers:\n\n```clojure\n(defn even-numbers\n  [coll]\n  (filter even? coll))\n\n(even-numbers [0 1 2 3 4 5 6 7 8 9 10]) ;; (0 2 4 6 8 10)\n```\n\nOne interesting problem I solved on [Hacker Rank FP](https://www.hackerrank.com/domains/fp) Path was the [Filter Array problem](https://www.hackerrank.com/challenges/fp-filter-array/problem). The problem idea is to filter a given array of integers and output only those values that are less than a specified value `X`.\n\nAn imperative Javascript solution to this problem is something like:\n\n```javascript\nvar filterArray = function (x, coll) {\n  var resultArray = [];\n\n  for (var i = 0; i < coll.length; i++) {\n    if (coll[i] < x) {\n      resultArray.push(coll[i]);\n    }\n  }\n\n  return resultArray;\n};\n\nconsole.log(filterArray(3, [10, 9, 8, 2, 7, 5, 1, 3, 0])); // (3) [2, 1, 0]\n```\n\nWe say exactly what our function needs to do — iterate over the collection, compare the collection current item with `x`, and push this element to the `resultArray` if it pass the condition.\n\n**Declarative approach**\n\nBut we want a more declarative way to solve this problem, and using the `filter` higher order function as well.\n\nA declarative Clojure solution would be something like this:\n\n```clojure\n(defn filter-array\n  [x coll]\n  (filter #(> x %) coll))\n\n(filter-array 3 [10 9 8 2 7 5 1 3 0]) ;; (2 1 0)\n```\n\nThis syntax seems a bit strange in the first place, but is easy to understand.\n\n`#(> x %)` is just a anonymous function that receives `x` and compares it with each element in the collection. `%` represents the parameter of the anonymous function — in this case the current element inside the `filter`.\n\nWe can also do this with maps. Imagine we have a map of people with their `name` and `age`. And we want to filter only people over a specified value of age, in this example people who are more than 21 years old.\n\n```clojure\n(def people [{:name "TK" :age 26}\n             {:name "Kaio" :age 10}\n             {:name "Kazumi" :age 30}])\n\n(defn over-age\n  [people]\n  (filter\n    #(< 21 (:age %))\n    people))\n\n(over-age people) ;; ({:name "TK", :age 26} {:name "Kazumi", :age 30})\n```\n\nSummary of code:\n\n- we have a list of people (with `name` and `age`).\n\n- we have the anonymous function `#(< 21 (:age %))`. Remember that the `%` represents the current element from the collection? Well, the element of the collection is a people map. If we do `(:age {:name "TK" :age 26})`, it returns the age value, `26` in this case.\n\n- we filter all people based on this anonymous function.\n\n#### Map\n\nThe idea of map is to transform a collection.\n\n> The `map` method transforms a collection by applying a function to all of its > elements and building a new collection from the returned values.\n\nLet’s get the same `people` collection above. We don\'t want to filter by “over age” now. We just want a list of strings, something like `TK is 26 years old`. So the final string might be `:name is :age years old` where `:name` and `:age` are attributes from each element in the `people` collection.\n\nIn a imperative Javascript way, it would be:\n\n```javascript\nvar people = [\n  { name: \'TK\', age: 26 },\n  { name: \'Kaio\', age: 10 },\n  { name: \'Kazumi\', age: 30 },\n];\n\nvar peopleSentences = [];\n\nfor (var i = 0; i < people.length; i++) {\n  var sentence = people[i].name + \' is \' + people[i].age + \' years old\';\n  peopleSentences.push(sentence);\n}\n\nconsole.log(peopleSentences); // [\'TK is 26 years old\', \'Kaio is 10 years old\', \'Kazumi is 30 years old\']\n```\n\nIn a declarative Clojure way, it would be:\n\n```clojure\n(def people [{:name "TK" :age 26}\n             {:name "Kaio" :age 10}\n             {:name "Kazumi" :age 30}])\n\n(defn people-sentences\n  [people]\n  (map\n    #(str (:name %) " is " (:age %) " years old")\n    people))\n\n(people-sentences people) ;; ("TK is 26 years old" "Kaio is 10 years old" "Kazumi is 30 years old")\n```\n\nThe whole idea is to transform a given collection into a new collection.\n\nAnother interesting Hacker Rank problem was the [update list problem](https://www.hackerrank.com/challenges/fp-update-list/problem). We just want to update the values of a given collection with their absolute values.\n\nFor example, the input `[1 2 3 -4 5]`needs the output to be `[1 2 3 4 5]`. The absolute value of `-4` is `4`.\n\nA simple solution would be an in-place update for each collection value.\n\n```javascript\nvar values = [1, 2, 3, -4, 5];\n\nfor (var i = 0; i < values.length; i++) {\n  values[i] = Math.abs(values[i]);\n}\n\nconsole.log(values); // [1, 2, 3, 4, 5]\n```\n\nWe use the `Math.abs` function to transform the value into its absolute value, and do the in-place update.\n\nThis is **not** a functional way to implement this solution.\n\nFirst, we learned about immutability. We know how immutability is important to make our functions more consistent and predictable. The idea is to build a new collection with all absolute values.\n\nSecond, why not use `map` here to "transform" all data?\n\nMy first idea was to build a `to-absolute` function to handle only one value.\n\n```clojure\n(defn to-absolute\n  [n]\n  (if (neg? n)\n    (* n -1)\n    n))\n\n(to-absolute -1) ;; 1\n(to-absolute 1)  ;; 1\n(to-absolute -2) ;; 2\n(to-absolute 0)  ;; 0\n```\n\nIf it is negative, we want to transform it in a positive value (the absolute value). Otherwise, we don’t need to transform it.\n\nNow that we know how to do `absolute` for one value, we can use this function to pass as an argument to the `map` function. Do you remember that a `higher order function` can receive a function as an argument and use it? Yes, map can do it!\n\n```clojure\n(defn update-list-map\n  [coll]\n  (map to-absolute coll))\n\n(update-list-map [])               ;; ()\n(update-list-map [1 2 3 4 5])      ;; (1 2 3 4 5)\n(update-list-map [-1 -2 -3 -4 -5]) ;; (1 2 3 4 5)\n(update-list-map [1 -2 3 -4 5])    ;; (1 2 3 4 5)\n```\n\nWow. So beautiful! 😍\n\n#### Reduce\n\nThe idea of reduce is to receive a function and a collection, and return a value created by combining the items.\n\nA common example people talk about is to get the total amount of an order. Imagine you were at a shopping website. You’ve added `Product 1`, `Product 2`, `Product 3`, and `Product 4` to your shopping cart (order). Now we want to calculate the total amount of the shopping cart.\n\nIn imperative way, we would iterate the order list and sum each product amount to the total amount.\n\n```javascript\nvar orders = [\n  { productTitle: \'Product 1\', amount: 10 },\n  { productTitle: \'Product 2\', amount: 30 },\n  { productTitle: \'Product 3\', amount: 20 },\n  { productTitle: \'Product 4\', amount: 60 },\n];\n\nvar totalAmount = 0;\n\nfor (var i = 0; i < orders.length; i++) {\n  totalAmount += orders[i].amount;\n}\n\nconsole.log(totalAmount); // 120\n```\n\nUsing `reduce`, we can build a function to handle the `amount sum` and pass it as an argument to the `reduce` function.\n\n```clojure\n(def shopping-cart\n  [{ :product-title "Product 1" :amount 10 },\n   { :product-title "Product 2" :amount 30 },\n   { :product-title "Product 3" :amount 20 },\n   { :product-title "Product 4" :amount 60 }])\n\n(defn sum-amount\n  [total-amount current-product]\n  (+ (:amount current-product) total-amount))\n\n(defn get-total-amount\n  [shopping-cart]\n  (reduce sum-amount 0 shopping-cart))\n\n(get-total-amount shopping-cart) ;; 120\n```\n\nHere we have `shopping-cart`, the function `sum-amount` that receives the current `total-amount` , and the `current-product` object to `sum` them.\n\nThe `get-total-amount` function is used to `reduce` the `shopping-cart` by using the `sum-amount` and starting from `0`.\n\nAnother way to get the total amount is to compose `map` and `reduce`. What do I mean by that? We can use `map` to transform the `shopping-cart` into a collection of `amount` values, and then just use the `reduce` function with `+` function.\n\n```clojure\n(def shopping-cart\n  [{ :product-title "Product 1" :amount 10 },\n   { :product-title "Product 2" :amount 30 },\n   { :product-title "Product 3" :amount 20 },\n   { :product-title "Product 4" :amount 60 }])\n\n(defn get-amount\n  [product]\n  (:amount product))\n\n(defn get-total-amount\n  [shopping-cart]\n  (reduce + (map get-amount shopping-cart)))\n\n(get-total-amount shopping-cart) ;; 120\n```\n\nThe `get-amount` receives the product object and returns only the `amount` value. So what we have here is `[10 30 20 60]`. And then the `reduce` combines all items by adding up. Beautiful!\n\nWe took a look at how each higher-order function works. I want to show you an example of how we can compose all three functions in a simple example.\n\nTalking about `shopping cart`, imagine we have this list of products in our order:\n\n```clojure\n(def shopping-cart\n  [{ :product-title "Functional Programming" :type "books"      :amount 10 },\n   { :product-title "Kindle"                 :type "eletronics" :amount 30 },\n   { :product-title "Shoes"                  :type "fashion"    :amount 20 },\n   { :product-title "Clean Code"             :type "books"      :amount 60 }])\n```\n\nWe want the total amount of all books in our shopping cart. Simple as that. The algorithm?\n\n- **filter** by book type\n\n- transform the shopping cart into a collection of amount using **map**\n\n- combine all items by adding them up with **reduce**\n\nDone! 🎉\n\n### Resources\n\nI’ve organised some resources I read and studied. I’m sharing the ones that I found really interesting. For more resources, visit my [Functional Programming Github repository](https://github.com/imteekay/learning-functional-programming).\n\n- [Ruby specific resources](https://github.com/imteekay/learning-functional-programming/tree/master/ruby)\n- [Javascript specific resources](https://github.com/imteekay/learning-functional-programming/tree/master/javascript)\n- [Clojure specific resources](https://github.com/imteekay/learning-functional-programming/tree/master/clojure)\n\n#### Intros\n\n- [Learning FP in JS](https://www.youtube.com/watch?v=e-5obm1G_FY)\n- [Intro do FP with Python](https://codewords.recurse.com/issues/one/an-introduction-to-functional-programming)\n- [Overview of FP](https://blog.codeship.com/overview-of-functional-programming)\n- [A quick intro to functional JS](https://hackernoon.com/a-quick-introduction-to-functional-javascript-7e6fe520e7fa)\n- [What is FP?](https://medium.com/javascript-scene/master-the-javascript-interview-what-is-functional-programming-7f218c68b3a0)\n- [Functional Programming Jargon](https://github.com/hemanth/functional-programming-jargon)\n\n#### Pure functions\n\n- [What is a pure function?](https://medium.com/javascript-scene/master-the-javascript-interview-what-is-a-pure-function-d1c076bec976)\n- [Pure Functional Programming 1](https://www.fpcomplete.com/blog/2017/04/pure-functional-programming)\n- [Pure Functional Programming 2](https://www.fpcomplete.com/blog/2017/05/pure-functional-programming-part-2)\n\n#### Immutable data\n\n- [Immutable DS for functional programming](https://www.youtube.com/watch?v=Wo0qiGPSV-s)\n- [Why shared mutable state is the root of all evil](http://henrikeichenhardt.blogspot.com/2013/06/why-shared-mutable-state-is-root-of-all.html)\n- [Structural Sharing in Clojure: Part 1](http://hypirion.com/musings/understanding-persistent-vector-pt-1)\n- [Structural Sharing in Clojure: Part 2](http://hypirion.com/musings/understanding-persistent-vector-pt-2)\n- [Structural Sharing in Clojure: Part 3](http://hypirion.com/musings/understanding-persistent-vector-pt-3)\n- [Structural Sharing in Clojure: Final part](http://hypirion.com/musings/persistent-vector-performance-summarised)\n\n#### Higher-order functions\n\n- [Eloquent JS: Higher Order Functions](https://eloquentjavascript.net/05_higher_order.html)\n- [Fun fun function Filter](https://www.youtube.com/watch?v=BMUiFMZr7vk&t=0s&list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84&index=2&ab_channel=FunFunFunction)\n- [Fun fun function Map](https://www.youtube.com/watch?v=bCqtb-Z5YGQ&index=2&list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84&ab_channel=FunFunFunction)\n- [Fun fun function Basic Reduce](https://www.youtube.com/watch?v=Wl98eZpkp-c&list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84&index=3&frags=wn&ab_channel=FunFunFunction)\n- [Fun fun function Advanced Reduce](https://www.youtube.com/watch?v=1DMolJ2FrNY&list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84&index=4&ab_channel=FunFunFunction)\n- [Clojure Higher Order Functions](https://clojure.org/guides/higher_order_functions)\n- [Purely Function Filter](https://purelyfunctional.tv/lesson/filter/)\n- [Purely Functional Map](https://purelyfunctional.tv/lesson/map/)\n- [Purely Functional Reduce](https://purelyfunctional.tv/lesson/reduce/)\n\n#### Declarative Programming\n\n- [Declarative Programming vs\n  Imperative](https://tylermcginnis.com/imperative-vs-declarative-programming/)\n\n---\n\n## That’s it!\n\nHey people, I hope you had fun reading this post, and I hope you learned a lot here! This was my attempt to share what I’m learning.\n\n[Here is the repository with all codes](https://github.com/imteekay/functional-programming-article-source-code) from this article.\n\nCome learn with me. I’m sharing resources and my code in this [Learning Functional Programming repository](https://github.com/imteekay/learning-functional-programming).\n\nI hope you saw something useful to you here. And see you next time! :)\n',
  },
  {
    url: '/basic-recipes-for-react-testing-library',
    title: 'Basic Recipes for React Testing Library',
    content:
      "Last year I attended a conference called [Clojure South](https://clojure-south.com/) where we had a lot of cool tech talks about functional programming and the programming language Clojure.\n\nOne of the talks I really liked was about [Clojure Spec & Generative Tests](https://www.youtube.com/watch?v=0hhQmbHlwcY&ab_channel=BuildingNubank) by David Chelimsky. He was part of the [Rspec team](https://github.com/rspec/rspec) and he works in the clojure.spec team.\n\nHe started his talk asking\n\n> Why do you make tests?\n\n_\"Confidence\"_ said someone in the audience. Confidence that your software works as expected.\n\nBut tests only give confidence if we add tests that make sense. So it's important to have best practices and adjust the mindset to test properly.\n\n> Side note: In my opinion, having bad tests is worse than having any tests at all. Without tests, you are aware that you need tests in the future or that you will need to manually test your software before shipping to production. With bad tests, you think the tests cover good parts of your product, but they actually don't.\n\nThinking about this, I wanted to play around with React Testing Library to provide good examples of what and how to test properly. So I created a playground to, well, [play with the Testing Library in some different contexts](https://github.com/imteekay/react-testing-library-recipes).\n\nSo, for this post, we will talk about theses topics:\n\n- How to query\n- How to verify content\n- How to handle forms\n- How to handle loading and fetching/async operations\n\nSo let's get started!\n\n# How to query\n\nWe have three main ways to get elements from the DOM: `getBy`, `queryBy`, and `findBy`.\n\nAll of these queries have different variants. For example, the `getBy` query has some variants like `getByRole` and `getByLabelText`. Depending on the context, you better use one over the others. But to simplify this process, the Testing Library docs has a section called [Which query should I use?](https://testing-library.com/docs/guide-which-query) that explains the priority of one query over the others thinking about accessibility and semantics.\n\n## getBy\n\nBefore start using the `getBy` query, let's see what we are testing.\n\n```jsx\nimport React from 'react';\n\nconst Queries = () => <h1>Title</h1>;\n\nexport default Queries;\n```\n\nThis a simple component called `Queries` that renders a title with a text `Title`.\n\nIn this first test, we want to know if it renders the proper text. To query the element (`<h1>`), we'll be using the `getBy`. More specifically, we'll try the `getByText`.\n\n```jsx\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport Queries from '../Queries';\n\ndescribe('getBy', () => {\n  it('title is in the document', () => {\n    render(<Queries />);\n\n    const title = screen.getByText(/title/i);\n\n    expect(title).toBeInTheDocument();\n  });\n});\n```\n\nSo here it is the first test. As simple as it looks.\n\n- We use the `render` function from the testing library to render the component we want to test\n- Query by the text `title` together with the `screen` function from the testing library.\n- In the query, we use the regular expression to not have the problem of upper or lower case.\n- And finally we expect to have this element `title` in the DOM.\n\nWe'll talk about this `toBeInTheDocument` method later. But we basically want to use this matcher to expect that title is in the DOM.\n\nOne specific \"feature\" the `getBy` has is to throw an error if it doesn't find the element in the rendered component. Let's see it in action.\n\n```jsx\nit('verify no element', () => {\n  render(<Queries />);\n\n  try {\n    screen.getByText(/subtitle/i);\n  } catch (e) {\n    console.log('Did not find nonexistent element');\n  }\n});\n```\n\nIf you run this test, the `subtitle` text doesn't exist and it will throw an error. As we use the `try-catch`, when we run the test, it will log the text `Did not find nonexistent element` in your terminal.\n\n## queryBy\n\n`queryBy` has the same feature as the `getBy`. The main difference is that the `queryBy` doesn't throw an error if it doesn't find a given element in the DOM. Let's do the same implementation we did with `getBy`, but now with `queryBy`.\n\n```jsx\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport Queries from '../Queries';\n\ndescribe('queryBy', () => {\n  it('title is in the document', () => {\n    render(<Queries />);\n\n    const title = screen.queryByText(/title/i);\n\n    expect(title).toBeInTheDocument();\n  });\n});\n```\n\nThe happy path works the same way. Here we use the `queryByText` to get the title element and expect it to be in the document.\n\nBut now when it doesn't find an element:\n\n```jsx\nit('verify no element', () => {\n  render(<Queries />);\n\n  const subtitle = screen.queryByText(/subtitle/i);\n\n  expect(subtitle).not.toBeInTheDocument();\n});\n```\n\nIt won't throw an error. Here we can use the `queryByText` without the `try-catch` and try to get the subtitle element.\n\nWe use the `.not` together with the `toBeInTheDocument` matcher to expect that the subtitle is not in the DOM.\n\nThe `queryBy` is very useful when we want to make sure that the page is not showing an element.\n\n## findBy\n\nThe `findBy` always returns a promise. And the promise resolves when it finds the element we are searching for.\n\nIt's very useful when the element is not the DOM. But the element appears after a specific event. Let's see an example:\n\n```jsx\nimport React, { useState } from 'react';\n\nconst Queries = () => {\n  const [isParagraphVisible, setIsParagraphVisible] = useState(false);\n\n  return (\n    <>\n      <button onClick={() => setIsParagraphVisible(true)}>\n        Show paragraph\n      </button>\n      {isParagraphVisible ? <p>A paragraph</p> : null}\n    </>\n  );\n};\n\nexport default Queries;\n```\n\nSo here it is a simple component where we have a button and a logic to show or not a paragraph.\n\nAt the top of the component, we use a `useState` hook to just manage the state to show or hide the paragraph. If the user click the button, it will show the paragraph. This is the \"feature\".\n\nNow we can use the `findBy` to query a paragraph, after clicking in the button.\n\n```jsx\nimport React from 'react';\nimport { render, screen, fireEvent } from '@testing-library/react';\nimport Queries from '../Queries';\n\ndescribe('findBy', () => {\n  it('paragraph is in the document', async () => {\n    render(<Queries />);\n\n    const button = screen.getByRole('button', { name: /show paragraph/i });\n    fireEvent.click(button);\n\n    const paragraph = await screen.findByText(/a paragraph/i);\n    expect(paragraph).toBeInTheDocument();\n  });\n});\n```\n\n- First we render the `Queries` component.\n- Get the button with the `getByRole` query.\n- We use the `fireEvent` function from the testing library to mimic the click in the button.\n- And now we finally try to get the paragraph with the `findByText`.\n- After getting the paragraph, we make sure it is in the document.\n- As the `findBy` query returns a promise, we can use the `.then` method or the `await` to get the real element. As we used the `await` in this example, we need to add an `async` statement in the `it` block.\n\nA common example to use `findBy` is when we do an asynchronous operation like fetching an API for some data, so we need to wait until we have the data rendered in the dom to get the elements we want to verify that are there.\n\nThe `findBy` also throws an error when it doesn't find an element like the `getBy`.\n\n```jsx\nit('verify no other item', async () => {\n  render(<Queries />);\n\n  const button = screen.getByRole('button', { name: /show paragraph/i });\n  fireEvent.click(button);\n\n  try {\n    await screen.findByText(/another paragraph/i);\n  } catch (e) {\n    console.log('Did not find nonexistent element');\n  }\n});\n```\n\nIn this test, I added a `try-catch` to see that the `findByText` really throws an error.\n\n# How to expect content\n\nThere are many ways to verify the correct content in the page or component. But one I like the most is the matcher `.toBeInTheDocument`.\n\nThe `.toBeInTheDocument` is matcher from the [jest-dom library](https://github.com/testing-library/jest-dom) from the testing library org. There other custom jest matchers we can use too.\n\nWe use this matcher in all the queries examples. But one thing that is cool to mention is that we don't need to import the matchers if we import the `jest-dom` in the `setupTests.js` like this:\n\n```jsx\n// setupTests.js\nimport '@testing-library/jest-dom/extend-expect';\n```\n\nSo now the `expect` function from `jest` is extended to use all the matchers from the `jest-dom`.\n\n# How to handle forms\n\nWe can also handle forms with the testing library. The best practice is to use the [@testing-library/user-event library](https://github.com/testing-library/user-event). This library simulates the real interactions between users and browsers.\n\nBefore starting to test, let's the simple form we want to test.\n\n```jsx\nimport React from 'react';\n\nexport const Form = () => (\n  <>\n    <h1>Form</h1>\n\n    <form>\n      <div>\n        <label htmlFor=\"name\">Name</label>\n        <input id=\"name\" name=\"name\" />\n      </div>\n\n      <div>\n        <label htmlFor=\"age\">Age</label>\n        <input id=\"age\" name=\"age\" type=\"number\" />\n      </div>\n\n      <div>\n        <label htmlFor=\"birthday\">Birthday</label>\n        <input id=\"birthday\" name=\"birthday\" type=\"date\" />\n      </div>\n\n      <div>\n        Hobbies:\n        <input type=\"checkbox\" name=\"coding\" id=\"coding\" value=\"coding\" />\n        <label htmlFor=\"coding\">Coding</label>\n        <input type=\"checkbox\" name=\"reading\" id=\"reading\" value=\"reading\" />\n        <label htmlFor=\"reading\">Reading</label>\n        <input type=\"checkbox\" name=\"writing\" id=\"writing\" value=\"writing\" />\n        <label htmlFor=\"writing\">Writing</label>\n      </div>\n\n      <div>\n        OS:\n        <input type=\"radio\" name=\"windows\" id=\"windows\" value=\"windows\" />\n        <label htmlFor=\"windows\">Windows</label>\n        <input type=\"radio\" name=\"mac\" id=\"mac\" value=\"mac\" />\n        <label htmlFor=\"mac\">Mac</label>\n        <input type=\"radio\" name=\"linux\" id=\"linux\" value=\"linux\" />\n        <label htmlFor=\"linux\">Linux</label>\n      </div>\n\n      <div>\n        <label>Favorite city?</label>\n        <select id=\"favcity\" name=\"favcity\" data-testid=\"favcity\">\n          <option value=\"1\">Amsterdam</option>\n          <option value=\"2\">Hong Kong</option>\n          <option value=\"3\">London</option>\n          <option value=\"4\">New York</option>\n          <option value=\"5\">Sao Paulo</option>\n          <option value=\"6\">Tokyo</option>\n        </select>\n      </div>\n\n      <div>\n        <label>Countries you want to visit</label>\n        <div>\n          <select\n            id=\"countries\"\n            name=\"countries\"\n            data-testid=\"countries\"\n            multiple\n          >\n            <option value=\"Brazil\">Brazil</option>\n            <option value=\"Japan\">Japan</option>\n            <option value=\"New Zealand\">Italy</option>\n            <option value=\"Germany\">Germany</option>\n            <option value=\"India\">India</option>\n            <option value=\"Netherlands\">Netherlands</option>\n          </select>\n        </div>\n      </div>\n\n      <button type=\"submit\">Submit</button>\n    </form>\n  </>\n);\n\nexport default Form;\n```\n\nWow! A lot of stuff here. But let's break down each part of the form (and see that it's not that scary). We want to test a lot of different kind of elements (input, select, multi-select, radio button, checkbox, etc):\n\n- A text input for the name\n- A number input for the age\n- A date input for the birthdate\n- A checkbox for hobbies\n- A radio button for operating system\n- A select for favorite city\n- A multi-select for countries I want to visit\n\nThat's it! We want to fill, select, and check all these elements with the testing library, and finally click the submit button.\n\nFirst thing we always do: render the component.\n\n```jsx\nrender(<Form />);\n```\n\nAnd then we use the `screen` together with the `getBy` query to get the form fields.\n\n```jsx\nconst nameInput = screen.getByLabelText(/name/i);\nconst ageInput = screen.getByLabelText(/age/i);\nconst birthdayInput = screen.getByLabelText(/birthday/i);\n\nconst codingCheckbox = screen.getByLabelText(/coding/i);\nconst readingCheckbox = screen.getByLabelText(/reading/i);\nconst writingCheckbox = screen.getByLabelText(/writing/i);\n\nconst osRadio = screen.getByLabelText(/mac/i);\n\nconst favCitySelect = screen.getByTestId(/favcity/i);\nconst tokyoOption = screen.getByText(/tokyo/i);\n\nconst countriesMultiSelect = screen.getByTestId(/countries/i);\nconst japanOption = screen.getByText(/japan/i);\nconst germanyOption = screen.getByText(/germany/i);\nconst netherlandsOption = screen.getByText(/netherlands/i);\n\nconst button = screen.getByRole('button', { name: /submit/i });\n```\n\n### Text, number, and date inputs\n\nAnd finally we fill the input fields with the `type` function:\n\n```jsx\nuserEvent.type(nameInput, 'TK');\nuserEvent.type(ageInput, '24');\nuserEvent.type(birthdayInput, '01/01/1996');\n```\n\n### Checkboxes\n\nCheck the checkboxes with the `click` function:\n\n```jsx\nuserEvent.click(codingCheckbox);\nuserEvent.click(readingCheckbox);\nuserEvent.click(writingCheckbox);\n```\n\n### Radio buttons\n\nChoose an option from the radio button with the `click` function:\n\n```jsx\nuserEvent.click(osRadio);\n```\n\n### Selects\n\nSelect the favorite city with the `selectOptions` function:\n\n```jsx\nuserEvent.selectOptions(favCitySelect, [tokyoOption]);osRadio);\n```\n\n### Multi-selects\n\nSelect countries I want visit (again) with the `selectOptions`\n\n```jsx\nuserEvent.selectOptions(countriesMultiSelect, [\n  japanOption,\n  germanyOption,\n  netherlandsOption,\n]);\n```\n\nAnd after filling all the form, we are able to click the submit button:\n\n```jsx\nuserEvent.click(button);\n```\n\n### How does all come together?\n\n```jsx\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { Form } from '../Form';\n\ndescribe('Form', () => {\n  it('fills form', () => {\n    render(<Form />);\n\n    const nameInput = screen.getByLabelText(/name/i);\n    const ageInput = screen.getByLabelText(/age/i);\n    const birthdayInput = screen.getByLabelText(/birthday/i);\n\n    const codingCheckbox = screen.getByLabelText(/coding/i);\n    const readingCheckbox = screen.getByLabelText(/reading/i);\n    const writingCheckbox = screen.getByLabelText(/writing/i);\n\n    const osRadio = screen.getByLabelText(/mac/i);\n\n    const favCitySelect = screen.getByTestId(/favcity/i);\n    const tokyoOption = screen.getByText(/tokyo/i);\n\n    const countriesMultiSelect = screen.getByTestId(/countries/i);\n    const japanOption = screen.getByText(/japan/i);\n    const germanyOption = screen.getByText(/germany/i);\n    const netherlandsOption = screen.getByText(/netherlands/i);\n\n    const button = screen.getByRole('button', { name: /submit/i });\n\n    userEvent.type(nameInput, 'TK');\n    userEvent.type(ageInput, '24');\n    userEvent.type(birthdayInput, '01/01/1996');\n\n    userEvent.click(codingCheckbox);\n    userEvent.click(readingCheckbox);\n    userEvent.click(writingCheckbox);\n\n    userEvent.click(osRadio);\n\n    userEvent.selectOptions(favCitySelect, [tokyoOption]);\n    userEvent.selectOptions(countriesMultiSelect, [\n      japanOption,\n      germanyOption,\n      netherlandsOption,\n    ]);\n\n    userEvent.click(button);\n  });\n});\n```\n\nThis is a simple form, but if we want to add some validation, we can think of how a user would use the form.\n\nHave each form field a validation of presence that show a text below each field? We could, for example, click the submit buttons and verify which fields have the validation text until it doesn't have any error anymore.\n\n# How to handle fetching and loading\n\nNow we will see an example of fetching within a component and test the loading state and then the data rendered in the DOM.\n\n```jsx\nimport React from 'react';\nimport { useFetchAPI } from './useFetchAPI';\n\nconst Loading = ({ pokemon }) => {\n  const { hasError, isLoading, isResolved, data } = useFetchAPI(\n    `https://pokeapi.co/api/v2/pokemon/${pokemon}`,\n  );\n\n  if (hasError) {\n    return <p>Error!</p>;\n  }\n\n  if (isLoading) {\n    return <p>Loading...</p>;\n  }\n\n  if (!isResolved) {\n    return null;\n  }\n\n  const { name, types } = data;\n  const skills = types.map((type) => type.type.name).join(', ');\n\n  return (\n    <>\n      <h1>Name: {name}</h1>\n      <p>Skills: {skills}</p>\n    </>\n  );\n};\n\nexport default Loading;\n```\n\nThis is a very simple component that we'll use to test the loading and the error state and the data rendered.\n\nHere we have:\n\n- A custom hook for fetching: it uses the `fetch` function to request data from any API.\n- The custom hook receives a url that it will request and returns 4 values: `hasError`, `isLoading`, `isResolved`, and the `data` to render.\n- Below we have three if statements to handle the error, the loading, and when the request didn't finish.\n- And then we have the data we want to render: the name and skills of a pokemon.\n\nLet's first test the error state when the API responds with an error.\n\n```jsx\nit('renders the error', async () => {\n  fetch.mockReject(() => Promise.reject('API is down'));\n\n  render(<Loading pokemon=\"charmander\" />);\n\n  const error = await screen.findByText('Error!');\n  expect(error).toBeInTheDocument();\n});\n```\n\n- The first thing I did was to mock the `fetch` function to simulate that the API will respond with an error.\n- Then we render the `Loading` component with a prop called `pokemon` and a value `charmander`.\n- We try to find the text `Error!`.\n- And verify if it is actually in the document.\n\nWe use the `findByText` because the error state will appear only after the fetching finishes, so it's a asynchronous operation. This is why we need to have an `async-await` in the test.\n\nNow for the happy path: we fetch the pokemon, the loading state appears, and then the pokemon data renders in the DOM.\n\n```jsx\nit('renders the loading and then the pokemon info', async () => {\n  const data = { name: 'charmander', types: [{ type: { name: 'fire' } }] };\n  fetch.once(JSON.stringify(data));\n\n  render(<Loading pokemon=\"charmander\" />);\n\n  const loading = screen.getByText('Loading...');\n  expect(loading).toBeInTheDocument();\n\n  const charmander = await screen.findByText('Name: charmander');\n  const charmanderSkills = await screen.findByText('Skills: fire');\n\n  expect(charmander).toBeInTheDocument();\n  expect(charmanderSkills).toBeInTheDocument();\n});\n```\n\n- The first two lines we define the data and mock the fetch to return this value for us.\n- We fetch the `Loading` component passing `charmander`\n- Then we first want to see the `Loading...` text in the document.\n- And then verify if the pokemon name and skills are in the document.\n\nNow everything together:\n\n```jsx\nimport React from 'react';\nimport { render, screen } from '@testing-library/react';\nimport Loading from '../Loading';\n\ndescribe('Loading', () => {\n  it('renders the loading and then the pokemon info', async () => {\n    const data = { name: 'charmander', types: [{ type: { name: 'fire' } }] };\n    fetch.once(JSON.stringify(data));\n\n    render(<Loading pokemon=\"charmander\" />);\n\n    const loading = screen.getByText('Loading...');\n    expect(loading).toBeInTheDocument();\n\n    const charmander = await screen.findByText('Name: charmander');\n    const charmanderSkills = await screen.findByText('Skills: fire');\n\n    expect(charmander).toBeInTheDocument();\n    expect(charmanderSkills).toBeInTheDocument();\n  });\n\n  it('renders the error', async () => {\n    fetch.mockReject(() => Promise.reject('API is down'));\n\n    render(<Loading pokemon=\"charmander\" />);\n\n    const error = await screen.findByText('Error!');\n    expect(error).toBeInTheDocument();\n  });\n});\n```\n\n# Final words\n\nSo here we finish this first conversation about tests in frontend. We've learned a lot of things:\n\n- How to: query elements in the DOM\n- How to: verify content in the document\n- How to: test forms\n- How to: handle fetching and loading\n\nI wanted to cover as much as possible, but I think this is a good start to understand how use this tool to test our applications and gain more confidence when shipping features or refactorings to production. I hope these recipes can help you understand more about testing in general and improve the quality of your software.\n\nUntil the next time! Keep learning!\n\n## Resources\n\n### Testing React apps\n\n- [React App Testing](https://www.educative.io/path/react-app-testing?aff=x8bV)\n- [Test-driven Development with React](https://www.educative.io/courses/test-driven-react-development?aff=x8bV)\n\n### React\n\n- [Become a React Developer](https://www.educative.io/path/become-a-react-developer?aff=x8bV)\n- [React Development for Professionals](https://www.educative.io/path/react-development-for-professionals?aff=x8bV)\n- [React for Front-End Developers](https://www.educative.io/path/react-front-end-developer?aff=x8bV)\n- [React Deep Dive: From Beginner to Advanced](https://www.educative.io/courses/react-beginner-to-advanced?aff=x8bV)\n- [The Road to learn React](https://www.educative.io/courses/the-road-to-learn-react?aff=x8bV)\n- [Reintroducing React: V16 and Beyond](https://www.educative.io/courses/reintroducing-react-v16-beyond?aff=x8bV)\n- [Advanced React Patterns With Hooks](https://www.educative.io/courses/advanced-react-patterns-with-hooks?aff=x8bV)\n- [React for Beginners Course](https://reactforbeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://advancedreact.com/friend/LEANDRO)\n",
  },
  {
    url: '/building-an-abstraction-for-react-internationalization-messages',
    title: 'Building an abstraction for React intl messages',
    content:
      "I came across a feature I wanted to build and part of it included rendering an internationalized text based on a data type from the API. This API can return three types: `common`, `password`, or `biometry`. And we use it to build our `EntryInfo` component.\n\nFor the `common` type, the API response looks like this:\n\n```javascript\n{\n  type: 'common',\n  ownerName: 'TK',\n  password: null\n}\n```\n\nThe type is `common`, the `password` is `null`, and the `ownerName` is present as a string.\n\nFor the `password` type:\n\n```javascript\n{\n  type: 'password',\n  ownerName: null,\n  password: 'lololol'\n}\n```\n\nThe type is `password`, the `ownerName` is `null`, but `password` is present as a string.\n\nAnd for the `biometry` type:\n\n```javascript\n{\n  type: 'biometry',\n  ownerName: null,\n  password: null\n}\n```\n\nThe type is `biometry`, without a `ownerName` and the `password`.\n\nThese are the three possible payloads we receive from the API. And I needed to render an internationalized text based on this data.\n\nThe logic to build the message text based on the type and the other values is:\n\n- when `type` is `'Common'`, it renders `'Owner {ownerName} will be there'`\n- when `type` is `'Password'`, it renders `'Password: {password}'`\n- when `type` is `'Biometry'`, it renders `'Type: biometry'`\n- when `type` is `null`, it renders `'Call the owner'`\n\nSo the first thing I did was to build the message definitions:\n\n```javascript\nimport { defineMessages } from 'react-intl';\n\nexport const messages = defineMessages({\n  common: {\n    id: 'app.containers.entryInfo.owner',\n    defaultMessage: 'Owner {ownerName} will be there',\n  },\n  password: {\n    id: 'app.containers.entryInfo.password',\n    defaultMessage: 'Password: {password}',\n  },\n  biometry: {\n    id: 'app.containers.entryInfo.biometry',\n    defaultMessage: 'Type: biometry',\n  },\n  defaultMessage: {\n    id: 'app.containers.entryInfo.defaultMessage',\n    defaultMessage: 'Call the owner',\n  },\n}\n```\n\nThe `EntryInfo` component would be like:\n\n```javascript\nconst EntryInfo = ({ type, password, ownerName, intl }) => {\n  let entryInfo;\n\n  if (type === 'common') {\n    entryInfo = intl.format(messages.common, { ownerName });\n  } else if (type === 'password') {\n    entryInfo = intl.format(messages.password, { password });\n  } else if (type === 'biometry') {\n    entryInfo = intl.format(messages.biometry);\n  } else {\n    entryInfo = intl.format(messages.defaultMessage);\n  }\n\n  return <p>{entryInfo}</p>;\n};\n\nexport default injectIntl(EntryInfo);\n```\n\nTo follow the defined logic, I just added an `if-elseif-else` to render the appropriate message using the `intl.format` function. It's straightforward, the `intl.format` function receives the appropriate message and returns the entry info text and pass it to the component to render.\n\nBut I could separate it in a helper function `getEntryInfo` to separate the logic from the UI component. I could also export it to unit test it without too much complication.\n\nI also pass the `intl` object to this new function to return the correct string.\n\n```javascript\nconst getEntryInfo = ({ type, password, ownerName, intl }) => {\n  if (type === 'common') {\n    return intl.format(messages.common, { ownerName });\n  } else if (type === 'password') {\n    return intl.format(messages.password, { password });\n  } else if (type === 'biometry') {\n    return intl.format(messages.biometry);\n  } else {\n    return intl.format(messages.defaultMessage);\n  }\n};\n\nconst EntryInfo = ({ type, password, ownerName, intl }) => {\n  const entryInfo = getEntryInfo({ type, password, ownerName, intl });\n\n  return <p>{entryInfo}</p>;\n};\n\nexport default injectIntl(EntryInfo);\n```\n\nThis logic looks more like a switch case comparing just the `type` value. So just a minor refactor in the `getEntryInfo`:\n\n```javascript\nconst getEntryInfo = ({ type, password, ownerName, intl }) => {\n  switch (type) {\n    case 'Common':\n      return intl.format(messages.common, { ownerName });\n    case 'Password':\n      return intl.format(messages.password, { password });\n    case 'Biometry':\n      return intl.format(messages.biometry);\n    default:\n      return intl.format(messages.defaultMessage);\n  }\n};\n```\n\nThe type is hardcoded, so we could also refactor these constants using an enum:\n\n```javascript\nconst ENTRY_INFO_TYPES = Object.freeze({\n  COMMON: 'Common',\n  PASSWORD: 'Password',\n  BIOMETRY: 'Biometry',\n});\n\nconst getEntryInfo = ({ type, password, ownerName, intl }) => {\n  switch (type) {\n    case ENTRY_INFO_TYPES.COMMON:\n      return intl.format(messages.common, { ownerName });\n    case ENTRY_INFO_TYPES.PASSWORD:\n      return intl.format(messages.password, { password });\n    case ENTRY_INFO_TYPES.BIOMETRY:\n      return intl.format(messages.biometry);\n    default:\n      return intl.format(messages.defaultMessage);\n  }\n};\n```\n\nNow we are good to go.\n\nThinking about `cohesion`, I thought the `getEntryInfo` function did know too much about how the component renders the message text (by using `intl`).\n\nOne idea is to think about the single responsibility of each function.\n\nSo, for the `getEntryInfo` function, we can remove the `intl` parameter as a dependency and build the message object, instead of returning a string.\n\n```javascript\nconst getEntryInfoMessage = ({ type, password, ownerName }) => {\n  switch (type) {\n    case ENTRY_INFO_TYPES.COMMON:\n      return { message: messages.common, values: { ownerName } };\n    case ENTRY_INFO_TYPES.PASSWORD:\n      return { message: messages.password, values: { password } };\n    case ENTRY_INFO_TYPES.BIOMETRY:\n      return { message: messages.biometry, values: {} };\n    default:\n      return { message: messages.defaultMessage, values: {} };\n  }\n};\n```\n\nAnd use like this in the component:\n\n```javascript\nconst EntryInfo = ({ type, password, ownerName, intl }) => {\n  const entryInfoMessage = getEntryInfoMessage({ type, password, ownerName });\n\n  return (\n    <p>{intl.format(entryInfoMessage.message, entryInfoMessage.values)}</p>\n  );\n};\n```\n\nAs a component refactor, we can destructure the message object:\n\n```javascript\nconst EntryInfo = ({ type, password, ownerName, intl }) => {\n  const { message, values } = getEntryInfoMessage({\n    type,\n    password,\n    ownerName,\n  });\n\n  return <p>{intl.format(message, values)}</p>;\n};\n```\n\nIt is more readable and less verbose.\n\nFor the message object, we can build a simple function to handle the message object creation:\n\n```javascript\nconst buildMessageObject = (message, values = {}) => ({\n  message,\n  values,\n});\n\nconst getEntryInfoMessage = ({ type, password, ownerName }) => {\n  switch (type) {\n    case ENTRY_INFO_TYPES.COMMON:\n      return buildMessageObject(messages.common, { ownerName });\n    case ENTRY_INFO_TYPES.PASSWORD:\n      return buildMessageObject(messages.password, { password });\n    case ENTRY_INFO_TYPES.BIOMETRY:\n      return buildMessageObject(messages.biometry);\n    default:\n      return buildMessageObject(messages.defaultMessage);\n  }\n};\n```\n\nTake a look at the `values = {}` argument. We add this empty object as the default value to not need to pass anything in the `biometry` and `default` cases.\n\nWithout the `intl` dependency, it's easier to use and test the function. It relies only upon the data, not on the dependencies anymore.\n\n---\n\n## The final component\n\nThe complete component with all the separated logic is more cohesive. Each part has its own responsibility and it helps to reduce the coupling.\n\n```javascript\nconst messages = defineMessages({\n  common: {\n    id: 'app.containers.entryInfo.owner',\n    defaultMessage: 'Owner {ownerName} will be there',\n  },\n  password: {\n    id: 'app.containers.entryInfo.password',\n    defaultMessage: 'Password: {password}',\n  },\n  biometry: {\n    id: 'app.containers.entryInfo.biometry',\n    defaultMessage: 'Type: biometry',\n  },\n  defaultMessage: {\n    id: 'app.containers.entryInfo.default',\n    defaultMessage: 'Call the owner',\n  },\n}\n\nconst ENTRY_INFO_TYPES = Object.freeze({\n  COMMON: 'Common',\n  PASSWORD: 'Password',\n  BIOMETRY: 'Biometry',\n});\n\nconst buildMessageObject = (message, values = {}) => ({\n  message,\n  values,\n});\n\nconst getEntryInfoMessage = ({ type, password, ownerName }) => {\n  switch (type) {\n    case ENTRY_INFO_TYPES.COMMON:\n      return buildMessageObject(messages.common, { ownerName });\n    case ENTRY_INFO_TYPES.PASSWORD:\n      return buildMessageObject(messages.password, { password });\n    case ENTRY_INFO_TYPES.BIOMETRY:\n      return buildMessageObject(messages.biometry);\n    default:\n      return buildMessageObject(messages.defaultMessage);\n  }\n};\n\nconst EntryInfo = ({ type, password, ownerName, intl }) => {\n  const { message, values } = getEntryInfoMessage({ type, password, ownerName });\n\n  return <p>{intl.format(message, values)}</p>;\n}\n\nexport default injectIntl(EntryInfo);\n```\n\n## Resources\n\n### React\n\n- [Become a React Developer](https://www.educative.io/path/become-a-react-developer?aff=x8bV)\n- [React Development for Professionals](https://www.educative.io/path/react-development-for-professionals?aff=x8bV)\n- [React App Testing](https://www.educative.io/path/react-app-testing?aff=x8bV)\n- [React for Front-End Developers](https://www.educative.io/path/react-front-end-developer?aff=x8bV)\n- [React Deep Dive: From Beginner to Advanced](https://www.educative.io/courses/react-beginner-to-advanced?aff=x8bV)\n- [Test-driven Development with React](https://www.educative.io/courses/test-driven-react-development?aff=x8bV)\n- [The Road to learn React](https://www.educative.io/courses/the-road-to-learn-react?aff=x8bV)\n- [Reintroducing React: V16 and Beyond](https://www.educative.io/courses/reintroducing-react-v16-beyond?aff=x8bV)\n- [Advanced React Patterns With Hooks](https://www.educative.io/courses/advanced-react-patterns-with-hooks?aff=x8bV)\n- [React for Beginners Course](https://reactforbeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://advancedreact.com/friend/LEANDRO)\n\n### JavaScript\n\n- [JavaScript in Detail: From Beginner to Advanced](https://www.educative.io/courses/javascript-in-detail-from-beginner-to-advanced?aff=x8bV)\n- [Simplifying JavaScript: A Handy Guide for Software Engineers](https://www.educative.io/courses/simplifying-javascript-handy-guide?aff=x8bV)\n- [The Complete Guide to Modern JavaScript](https://www.educative.io/courses/complete-guide-to-modern-javascript?aff=x8bV)\n- [Learn Object-Oriented Programming in JavaScript](https://www.educative.io/courses/learn-object-oriented-programming-in-javascript?aff=x8bV)\n- [JavaScript In Practice: ES6 And Beyond](https://www.educative.io/courses/javascript-in-practice-es6-and-beyond?aff=x8bV)\n- [Data Structures for Coding Interviews in JavaScript](https://www.educative.io/courses/data-structures-coding-interviews-javascript?aff=x8bV)\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n- [ES6 Course](https://es6.io/friend/LEANDRO)\n- [Beginner JavaScript Course](https://beginnerjavascript.com/friend/LEANDRO)\n- [JavaScript Fundamentals Before Learning React](https://www.educative.io/courses/javascript-fundamentals-before-learning-react?aff=x8bV)\n- [Rediscovering JavaScript: ES6, ES7 & ES8](https://www.educative.io/courses/rediscovering-javascript?aff=x8bV)\n",
  },
  {
    url: '/building-an-individual-development-plan-with-notion',
    title: 'Building a simple Individual Development Plan (IDP) with Notion',
    content:
      "Some time ago, I wrote about [how I design my life's system](/designing-my-lifes-system) using mainly Notion. Over the months, I'm getting used to have an open Notion app to use, document, and do absolutely everything there.\n\nThe last month I got to know more about the Individual Development Plan (IDP) by a talk from the company I work now. And I thought it was pretty interesting and I wanted to try, but in my own way.\n\nIn a certain way, I was already doing this IDP thing in Notion. I have the `Learning Paths`, the `Goals`, the `Habit Tracker`, the `Journaling`, and the `Personal Knowledge Base (PKB)` pages today that I use daily to document and manage my growth as a person.\n\nBut I also wanted to do the same idea in my work and give visibility to my leader and peers about my career next steps, what I'm working on, collect feedback, and show what I accomplished.\n\nI like this idea of learning in public and [I practice it with this blog for 6 years now](). Doing the same thing at work and being transparent with the people I work with is something I value and I wanted to give it a try.\n\n## How did I start?\n\nAs everything I do, I like to have a first draft page. Somewhere I can just dump the ideas from my brain.\n\nSo I created an empty page called `Career: Next Steps`. I started just writing down all the ideas I had about the next steps of my career. But this task is actually pretty hard in practice. So, instead of force myself to write down anything, I added some questions to help and guide me gain visibility of the possibilities I have:\n\n- What do I want to learn?\n- What do I need to improve?\n- Good skills and behavior I want to maintain?\n- Interesting challenges and opportunities I have (or I can create) to embrace in the next 3 months?\n- Feedback from peers and leader? (if I don't have, proactive ask for)\n\nWith these questions, it got easier to generate some draft ideas.\n\n## Draft ideas and Organizing & Grouping\n\nNow with the draft ideas, it was a mess. Just a bunch of ideas there without no idea of what I could work on.\n\nOrganizing this mess was obvious and it should be the next step. I'll share some examples of how I simply transformed draft ideas into an organizing one.\n\nMy list of ideas was first like this:\n\n- Learn about browsers\n- Help with the sprint planning\n- Mentor peers\n- Give tech talks\n- Learn about performance\n- Learn about error messages\n- Write more articles\n\nVery generic. I could specify more to create some actions about each one. So I transformed it into this:\n\n- Learn about how browsers work\n- Learn about browser threads and network\n- Help planning the following sprints in our team\n- (In)formally mentor my peers with in the technology I'm specialized\n- Give a tech talk about the Testing Library tool and how to properly test frontend\n- Learn about React performance\n- Learn about Sentry error messages\n- Write an article about React Testing Library\n\nA bit better.\n\nI started to see that I could group them to help me organize these ideas. So I just categorized them:\n\n### Specialization / Learning\n\n- Learn about how browsers work\n- Learn about browser threads and network\n- Learn about React performance\n- Learn about Sentry error messages\n\n### Leadership Skills\n\n- Help planning the following sprints in our team\n- (In)formally mentor my peers with in the technology I'm specialized\n\n### Knowledge Sharing\n\n- Give a tech talk about the Testing Library tool and how to properly test frontend\n- Write an article about React Testing Library\n\nIt was a simple and amazing way to have a clear path to work on. Now I have areas I can work on and generate more ideas.\n\n## Actionables & Execution\n\nWith the new page with all the ideas organized, I could break everything down into actions to execute each one of them.\n\nI chose a Kanban-style page to have and give visibility of the things I want to execute, things I'm working on, and things I've already done. It looks like this:\n\n![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b035324e-b84b-40b1-828f-808878fb4103/Screenshot_from_2020-10-18_14-12-16.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/b035324e-b84b-40b1-828f-808878fb4103/Screenshot_from_2020-10-18_14-12-16.png)\n\nThe `Backlog` is just to put somethings there to improve later. Sometimes I have some ideas, but I don't want to forget about them, so I just add to the backlog and add a `[Improve]` tag in the title.\n\nThe `ToDo` is basically everything I've already thought about and it's ready to start working on them.\n\nAnd the `In progress` and `Completed` are self explanatory.\n\nOne important detail is the `labels` for each Kanban card. I have `Learning`, `Knowledge Sharing`, `Writing`, `Leadership`, and so on. These way it's categorized by the topics I organized in the first page of ideas.\n\nWith these labels, I know I can balance better my actions. For example: last 3 weeks I worked really hard in the `Knowledge Sharing` category, maybe I should get more time for `Leadership` and `Learning`.\n\nWith this board, I can give visibility to my peers and my tech lead in 1x1s. Show the things I worked for the week, what I'm working on, what are the problems I'm facing, generate more ideas and add to the board, and ask for feedback based on my progress.\n\n## Accomplishments and Feedback\n\nThe other two pages I have in this how docs are the `Brag Document` and the `Feedback`.\n\nThe `Feedback` is simple: whatever feedback I receive from people, I like to document to remember later and maybe act on them with a simple framework:\n\n- Things I should improve or just not doing great: understand the problem and try some solutions (e.g. add a new card to the Kanban backlog to work in the next week)\n- Things I'm doing well: celebrate & cultivate this behavior\n\nThe `Brag Document` is a idea from [Julia Evans](https://jvns.ca/blog/brag-documents/). It's a tactic to get your work recognized and memorable.\n\nI like to use it to remember myself things I accomplished, things I learned along the way, and behaviors I did that I want to cultivate. It's a pretty simple idea and easy to execute in a day-to-day at work (or life!).\n\nSometimes impostor syndrome gets me, but if I look at a ton of great work I did in the past, I feel better, I feel more confident, and it's always better to have positive energy instead of negative ones.\n\n---\n\nToday the whole page looks like this:\n\n<img src=\"/building-an-individual-development-plan-with-notion/example.png\">\n\n## Final words\n\nFirst thanks for reading my blog post. I feel amazing that I'm able to share my ideas, learnings, and maybe help other people.\n\nFeel free to use the ideas from this post, [share with me](https://twitter.com/wordsofteekay) your own ideas too, and keep learning!\n\nUntil next time.\n",
  },
  {
    url: '/closure-currying-and-cool-abstractions',
    title: 'Closures, Currying, and Cool Abstractions',
    content:
      "In this article, we will talk about closures, curried functions, and play around with these concepts to build cool abstractions. I want to show the idea behind each concept, but also make it very practical with examples and refactor code to make it more fun.\n\n## Closures\n\nSo closure is a common topic in JavaScript and we will start with it. As MDN web docs defines:\n\n> \"A closure is the combination of a function bundled together (enclosed) with references to its surrounding state (the lexical environment).\"\n\nBasically, every time a function is created, a closure is also created and it gives access to all state (variables, constants, functions, etc). The surrounding state is known as the `lexical environment`.\n\nLet's show a simple example:\n\n```javascript\nfunction makeFunction() {\n  const name = 'TK';\n  function displayName() {\n    console.log(name);\n  }\n  return displayName;\n}\n```\n\nWhat do we have here?\n\n- Our main function called `makeFunction`\n- A constant named `name` assigned with a string `'TK'`\n- The definition of the `displayName` function (that just log the `name` constant)\n- And finally the `makeFunction` returns the `displayName` function\n\nThis is just a definition of a function. When we call the `makeFunction`, it will create everything within it: constant and function in this case.\n\nAs we know, when the `displayName` function is created, the closure is also created and it makes the function aware of the environment, in this case, the `name` constant. This is why we can `console.log` the `name` without breaking anything. The function knows about the lexical environment.\n\n```javascript\nconst myFunction = makeFunction();\nmyFunction(); // TK\n```\n\nGreat! It works as expected! The return of the `makeFunction` is a function that we store it in the `myFunction` constant, call it later, and displays `TK`.\n\nWe can also make it work as an arrow function:\n\n```javascript\nconst makeFunction = () => {\n  const name = 'TK';\n  return () => console.log(name);\n};\n```\n\nBut what if we want to pass the name and display it? A parameter!\n\n```javascript\nconst makeFunction = (name = 'TK') => {\n  return () => console.log(name);\n};\n\n// Or a one-liner\nconst makeFunction =\n  (name = 'TK') =>\n  () =>\n    console.log(name);\n```\n\nNow we can play with the name:\n\n```javascript\nconst myFunction = makeFunction();\nmyFunction(); // TK\n\nconst myFunction = makeFunction('Dan');\nmyFunction(); // Dan\n```\n\nOur `myFunction` is aware of the arguments passed: default or dynamic value.\nThe closure does make the created function not only aware of constants/variables, but also other functions within the function.\n\nSo this also works:\n\n```javascript\nconst makeFunction = (name = 'TK') => {\n  const display = () => console.log(name);\n  return () => display();\n};\n\nconst myFunction = makeFunction();\nmyFunction(); // TK\n```\n\nThe returned function knows about the `display` function and it is able to call it.\n\nOne powerful technique is to use closures to build \"private\" functions and variables.\n\nMonths ago I was learning data structures (again!) and wanted to implement each one. But I was always using the object oriented approach. As a functional programming enthusiast, I wanted to build all the data structures following FP principles (pure functions, immutability, referential transparency, etc).\n\nThe first data structure I was learning was the Stack. It is pretty simple. The main API is:\n\n- `push`: add an item to the first place of the stack\n- `pop`: remove the first item from the stack\n- `peek`: get the first item from the stack\n- `isEmpty`: verify if the stack is empty\n- `size`: get the number of items the stack has\n\nWe could clearly create a simple function to each \"method\" and pass the stack data to it. It use/transform the data and return it.\n\nBut we can also create a private stack data and exposes only the API methods. Let's do this!\n\n```javascript\nconst buildStack = () => {\n  let items = [];\n\n  const push = (item) => (items = [item, ...items]);\n  const pop = () => (items = items.slice(1));\n  const peek = () => items[0];\n  const isEmpty = () => !items.length;\n  const size = () => items.length;\n\n  return {\n    push,\n    pop,\n    peek,\n    isEmpty,\n    size,\n  };\n};\n```\n\nAs we created the `items` stack data inside our `buildStack` function, it is \"private\". It can be accessed only within the function. In this case, only the `push`, `pop`, etc could touch the data. And this is what we're looking for.\n\nAnd how do we use it? Like this:\n\n```javascript\nconst stack = buildStack();\n\nstack.isEmpty(); // true\n\nstack.push(1); // [1]\nstack.push(2); // [2, 1]\nstack.push(3); // [3, 2, 1]\nstack.push(4); // [4, 3, 2, 1]\nstack.push(5); // [5, 4, 3, 2, 1]\n\nstack.peek(); // 5\nstack.size(); // 5\nstack.isEmpty(); // false\n\nstack.pop(); // [4, 3, 2, 1]\nstack.pop(); // [3, 2, 1]\nstack.pop(); // [2, 1]\nstack.pop(); // [1]\n\nstack.isEmpty(); // false\nstack.peek(); // 1\nstack.pop(); // []\nstack.isEmpty(); // true\nstack.size(); // 0\n```\n\nSo, when the stack is created, all the functions are aware of the `items` data. But outside the function, we can't access this data. It's private. We just modify the data by using the stack builtin API.\n\n## **Curry**\n\n> \"Currying is the process of taking a function with multiple arguments and turning it into a sequence of functions each with only a single argument.\" - Wikipedia\n\nSo imagine you have a function with multiple arguments: `f(a, b, c)`. Using currying, we achieve a function `f(a)` that returns a function `g(b)` the returns a function `h(c)`.\n\nBasically: `f(a, b, c)` —> `f(a) => g(b) => h(c)`\n\nLet's build a simple example: add two numbers. But first, without currying!\n\n```javascript\nconst add = (x, y) => x + y;\nadd(1, 2); // 3\n```\n\nGreat! Super simple! Here we have a function with two arguments. To transform it into a curried function we need a function that receives `x` and returns a function that receives `y` and returns the sum of both values.\n\n```javascript\nconst add = (x) => {\n  function addY(y) {\n    return x + y;\n  }\n\n  return addY;\n};\n```\n\nWe can refactor this `addY` into a anonymous arrow function:\n\n```javascript\nconst add = (x) => {\n  return (y) => {\n    return x + y;\n  };\n};\n```\n\nOr simplify it by building one liner arrow functions:\n\n```javascript\nconst add = (x) => (y) => x + y;\n```\n\nThese three different curried functions have the same behavior: build a sequence of functions with only one argument.\n\nHow we use it?\n\n```javascript\nadd(10)(20); // 30\n```\n\nAt first, it can look a bit strange, but it has a logic behind it. `add(10)` returns a function. And we call this function with the `20` value.\n\nThis is the same as:\n\n```javascript\nconst addTen = add(10);\naddTen(20); // 30\n```\n\nAnd this is interesting. We can generate specialized functions by calling the first function. Imagine we want an `increment` function. We can generate it from our `add` function by passing the `1` as the value.\n\n```javascript\nconst increment = add(1);\nincrement(9); // 10\n```\n\n---\n\nWhen I was implementing the [Lazy Cypress](https://github.com/imteekay/lazy-cypress), a npm library to record the user behavior in a form page and generate Cypress testing code, I want to build a function to generate this string `input[data-testid=\"123\"]`. So here we have the element (`input`), the attribute (`data-testid`), and the value (`123`). Interpolating this string in JavaScript would look like this: `${element}[${attribute}=\"${value}\"]`.\n\nthe first implementation in mind is to receive these three values as parameters and return the interpolated string above.\n\n```javascript\nconst buildSelector = (element, attribute, value) =>\n  `${element}[${attribute}=\"${value}\"]`;\n\nbuildSelector('input', 'data-testid', 123); // input[data-testid=\"123\"]\n```\n\nAnd it is great. I achieved what I was looking for. But at the same time, I wanted to build a more idiomatic function. Something I could write \"_get an element X with attribute Y and value Z_\". So what if we break this phrase into three steps:\n\n- \"_get an element X_\": `get(x)`\n- \"_with attribute Y_\": `withAttribute(y)`\n- \"_and value Z_\": `andValue(z)`\n\nWe can transform the `buildSelector(x, y, z)` into `get(x)` ⇒ `withAttribute(y)` ⇒ `andValue(z)` by using the currying concept.\n\n```javascript\nconst get = (element) => {\n  return {\n    withAttribute: (attribute) => {\n      return {\n        andValue: (value) => `${element}[${attribute}=\"${value}\"]`,\n      };\n    },\n  };\n};\n```\n\nHere we use a different idea: returning an object with function as key-value. This way we can achieve this syntax: `get(x).withAttribute(y).andValue(z)`.\n\nAnd for each returned object, we have the next function and argument.\n\nRefactoring time! Remove the `return` statements:\n\n```javascript\nconst get = (element) => ({\n  withAttribute: (attribute) => ({\n    andValue: (value) => `${element}[${attribute}=\"${value}\"]`,\n  }),\n});\n```\n\nI think it looks prettier. And we use it like:\n\n```javascript\nconst selector = get('input').withAttribute('data-testid').andValue(123);\n\nselector; // input[data-testid=\"123\"]\n```\n\nThe `andValue` function knows about the `element` and `attribute` values because it is aware of the lexical environment as we talked about closures before.\n\n---\n\nWe can also implement functions using \"partial currying\". Separate only the first argument from the rest for example.\n\nDoing web development for a long time, I commonly used the [event listener Web API](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener). It is used this way:\n\n```javascript\nconst log = () => console.log('clicked');\nbutton.addEventListener('click', log);\n```\n\nI wanted to create an abstraction to build specialized event listeners and use them by passing the element and callback handler.\n\n```javascript\nconst buildEventListener = (event) => (element, handler) =>\n  element.addEventListener(event, handler);\n```\n\nThis way I can create different specialized event listeners and use it as functions.\n\n```javascript\nconst onClick = buildEventListener('click');\nonClick(button, log);\n\nconst onHover = buildEventListener('hover');\nonHover(link, log);\n```\n\n---\n\nWith all these concepts, I could create a SQL query using JavaScript syntax. I wanted to SQL query a JSON data like:\n\n```javascript\nconst json = {\n  users: [\n    {\n      id: 1,\n      name: 'TK',\n      age: 25,\n      email: 'tk@mail.com',\n    },\n    {\n      id: 2,\n      name: 'Kaio',\n      age: 11,\n      email: 'kaio@mail.com',\n    },\n    {\n      id: 3,\n      name: 'Daniel',\n      age: 28,\n      email: 'dani@mail.com',\n    },\n  ],\n};\n```\n\nSo I built a simple engine to handle this implementation:\n\n```javascript\nconst startEngine = (json) => (attributes) => ({\n  from: from(json, attributes),\n});\n\nconst buildAttributes = (node) => (acc, attribute) => ({\n  ...acc,\n  [attribute]: node[attribute],\n});\n\nconst executeQuery = (attributes, attribute, value) => (resultList, node) =>\n  node[attribute] === value\n    ? [...resultList, attributes.reduce(buildAttributes(node), {})]\n    : resultList;\n\nconst where = (json, attributes) => (attribute, value) =>\n  json.reduce(executeQuery(attributes, attribute, value), []);\n\nconst from = (json, attributes) => (node) => ({\n  where: where(json[node], attributes),\n});\n```\n\nWith this implementation, we can start the engine with the JSON data:\n\n```javascript\nconst select = startEngine(json);\n```\n\nAnd use it like a SQL query:\n\n```javascript\nselect(['id', 'name']).from('users').where('id', 1);\n\nresult; // [{ id: 1, name: 'TK' }]\n```\n\n---\n\nThat's it for today. We could go on and on showing a lot of different examples of abstractions, but now I let you play with those concepts.\n\n## Resources\n\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n- [Blog post source code](https://github.com/tk-notes/blog/tree/master/closures-currying-and-cool-abstractions)\n- [Closures | MDN Web Docs](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Closures)\n- [Currying | Fun Fun Function](https://www.youtube.com/watch?v=iZLP4qOwY8I)\n- [React for Beginners Course](https://ReactForBeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://AdvancedReact.com/friend/LEANDRO)\n- [Learn React by building an App](https://alterclass.io/?ref=5ec57f513c1321001703dcd2)\n- [JavaScript in Detail: From Beginner to Advanced](https://www.educative.io/courses/javascript-in-detail-from-beginner-to-advanced?aff=x8bV)\n- [Simplifying JavaScript: A Handy Guide for Software Engineers](https://www.educative.io/courses/simplifying-javascript-handy-guide?aff=x8bV)\n- [The Complete Guide to Modern JavaScript](https://www.educative.io/courses/complete-guide-to-modern-javascript?aff=x8bV)\n- [Learn Object-Oriented Programming in JavaScript](https://www.educative.io/courses/learn-object-oriented-programming-in-javascript?aff=x8bV)\n- [JavaScript In Practice: ES6 And Beyond](https://www.educative.io/courses/javascript-in-practice-es6-and-beyond?aff=x8bV)\n- [Data Structures for Coding Interviews in JavaScript](https://www.educative.io/courses/data-structures-coding-interviews-javascript?aff=x8bV)\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n- [ES6 Course](https://es6.io/friend/LEANDRO)\n- [Beginner JavaScript Course](https://beginnerjavascript.com/friend/LEANDRO)\n- [JavaScript Fundamentals Before Learning React](https://www.educative.io/courses/javascript-fundamentals-before-learning-react?aff=x8bV)\n- [Rediscovering JavaScript: ES6, ES7 & ES8](https://www.educative.io/courses/rediscovering-javascript?aff=x8bV)\n",
  },
  {
    url: '/consistent-state-management-in-react-and-redux',
    title: 'Consistent State Management in React and Redux',
    content:
      "This is part of my studies on how to build sustainable and consistent software. In this post, we will talk about state management in the context of React and Redux. I'll show you a problem I was trying to solve and a proposed solution I made for QuintoAndar.\n\n# The problem\n\nFirst thing first: the problem! This part is really important. I was trying to solve a problem, not adding shiny technologies to QuintoAndar's tech stack.\n\nWhile developing the new Originals listing, we fetched data from an API to render the page. An important part of this data was an attribute called `specialConditions`. It is a list of real estate conditions.\n\nA list. Yes, we expected it to be always a list, but somewhere in the codebase, we dispatched an action to mutate this value to an `undefined` causing a bug and need for a bug fix.\n\nSince that day, I was searching for a solution to make the system more consistent. If it is a list, it will always be a list. No matter how creative we are as developers.\n\nThis problem can be really common as the codebase grows. Because it is easy to have hidden effects that you are not aware of. It scales badly.\n\nSo typing the whole redux lifecycle came to mind. If we type the state and each Redux \"lifecycle agent\", we can make it resilient and consistent.\n\n# The solution\n\nThe idea was to make the PWA architecture explicit, resilient, and consistent across the Redux lifecycle by typing the state, actions, reducers, handlers, and selectors.\n\nHandling frontend state management is complex. As we use Redux as the main state management architecture for - almost - all PWAs at QuintoAndar, building a framework to apply typings to Redux is a good way to make a guideline with best practices and conventions to scale across QuintoAndar PWAs.\n\n[Constraints](https://www.youtube.com/watch?v=TqfbAXCCVwE&feature=emb_title) are a really important concept to keep us away from making simple mistakes. By typing our redux lifecycle, we can protect, at least in compile-time, our main data handler from these kinds of mistakes.\n\nBy typing our initial states, reducers, and handlers [we gain for free good documentation](https://dropbox.tech/application/our-journey-to-type-checking-4-million-lines-of-python) about the Redux lifecycle, making it easier to reason the details about what is expected in each step.\n\n# The proposal\n\nAn important note in this proposal is that we created it thinking about the problem and the QuintoAndar's context (current tech stack and tooling, developers acceptance, what could scale across our PWAs). We will talk about these topics:\n\n- Choosing the tool\n- Redux Lifecycle Agents\n- Immutable data\n- Proof of Concept with one of our PWAs\n- Pros and Cons\n\n## Choosing the tool\n\nWe came across some questions to choose a tool:\n\n- Does it really solve the problem?\n- Acceptance at QuintoAndar.\n- The tool in the tech community.\n\nSome tools that can solve the problem: Flow, ReasonML, Elm, ClojureScript, and Typescript. (_disclaimer_: ClojureScript is from the LISP family. It doesn't have a static type system. But it has some cool features like immutable data structures)\n\nThinking about the QuintoAndar's codebase, it's all JavaScript. Choosing a different language like ReasonML, Elm or ClojureScript would be a drawback in terms of learning a new language and have a guideline with best practices and conventions. Flow and Typescript, instead, are wrappers - or a superset - to JavaScript. It's easier to learn new APIs in comparison to a totally new language. Even though we like learning and trying new things, I thought that we should have a gentle learning curve and still solve the main problem.\n\nTypescript is used in some PWAs. Some use to type the API and app data contract with Typescript models (classes, interfaces, types). Others use the data fetcher for houses, search, and neighborhood. Flow, instead, is not used in our PWAs.\n\nTypeScript is one of the fastest-growing languages and is [currently the leading compile-to-JavaScript language](https://medium.com/javascript-scene/the-typescript-tax-132ff4cb175b). Some big companies - like [Airbnb - are also adopting this tool at scale](https://www.youtube.com/watch?v=P-J9Eg7hJwE).\n\nSo we started with Typescript to do a proof of concept and see how it goes.\n\n## Redux Lifecycle Agents\n\nThe idea behind the proposal is to type Redux agents. For - almost - all QuintoAndar's PWAs, we have actions, reducers, handlers, and selectors to type.\n\n- **Actions**: Using types to type the actions contract - type, promise, meta, extraProperties, properties, etc.\n\n- **Store state**: Contract for initialState and make it consistent across the Redux lifecycle.\n\n- **Reducers**: Take care of the state contract, returning only the correct type contract - changing only the data, not the types - by using handlers.\n\n- **Handlers**: Take care of the external interaction lifecycle and state mapping. Enforce that the final state will have the same contract as expected - the store state contract. Handlers are a common pattern when using [redux-pack](https://github.com/lelandrichardson/redux-pack).\n\n- **From External Interaction Data**: A contract for data from API or Firestore or any other external interaction.\n\n- **To Store State**: Use the store state contract - basically, the reducer initial state contract.\n\n- **Selectors**: Get the store state and map to component state - props - with mapStateToProps.\n\n- **Types**: a repository of types for all the agents.\n\nWe can organize these agents inside the container component folder:\n\n```bash\n__ containers\n      |__ MyComponent\n        |__ actions.ts\n        |__ handlers.ts\n        |__ reducer.ts\n        |__ selectors.ts\n        |__ types.ts\n```\n\n## Immutable data\n\n### Immutable.js\n\nImmutable data is a fundamental feature to [make the frontend state management less complex](https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd#.9g51h5stk). It's a core principle to make pure functions, a mathematical function concept of for a giving input, it always returns the same output, without mutation or side effects.\n\nWe currently use Immutable.js to make JavaScript with immutable data structures. It gives JavaScript new data structures to handle immutable data with a whole new API.\n\nPredictability is really important to understand code. But Immutable.js doesn't enforce us to always use it in the state, so we don't know which API to use - Immutable or JavaScript API - to get data in the selector, for example. It is easy to mix data in the store. Part of it is an Immutable object. Other is vanilla JavaScript objects.\n\nRedux docs [raised some concerns about using Immutable.js](https://redux.js.org/recipes/using-immutablejs-with-redux/). And Redux authors [suggests avoiding using Immutable.js with Redux](https://www.reddit.com/r/javascript/comments/4rcqpx/dan_abramov_redux_is_not_an_architecture_or/d51g4k4/?utm_source=share&utm_medium=web2x). For immutable data, [they strongly recommend using Immer.js](https://redux.js.org/style-guide/style-guide/#use-immer-for-writing-immutable-updates).\n\nTo make it consistent and predictable, what if we handle immutable data in compile-time and in development - with [lint](https://github.com/jonaskello/tslint-immutable) - and use only one language API, without the need to reason about between languages - JavaScript and Immutable.js?\n\n### Typescript readonly and TSLint-Immutable\n\nTypescript has [Readonly properties](https://mariusschulz.com/blog/read-only-properties-in-typescript) to handle [immutable data in compile-time](https://stackoverflow.com/questions/55905801/can-typescripts-readonly-fully-replace-immutable-js/55906256#55906256). They are:\n\n- **readonly**: immutable primitive data\n\n- **Readonly**: immutable object\n\n- **ReadonlyArray**: immutable array\n\n### readonly\n\nAdd immutable features for primitive values as a number, string, boolean, etc.\n\nIf we add this feature to a type definition, we enforce the data to be immutable in compile time. If you are using VS Code, your code will have an error \"Cannot assign to 'your property here' because it is a read-only property\".\n\n### Readonly\n\nAdd immutable features for [objects](https://stackoverflow.com/questions/41879327/deepreadonly-object-typescript/49670389#49670389).\n\nIf you are handling an object, you will probably use Readonly to mark all of its properties as readonly using mapped types.\n\n### ReadonlyArray\n\nAdd immutable features for lists.\n\nIf you try adding new items to the readonly array, you will have an error \"Property 'push' does not exist on type 'readonly Readonly<T>[]\"\n\n## Benchmark: Immutable.js vs Native APIs\n\nWe did some [benchmarks to compare the PWA with and without Immutable.js](https://github.com/imteekay/javascript-immutable-data-benchmarks). In the first benchmark, we decided to compare native JavaScript and Immutable.js APIs: get, get-in, set, and set-in. And understand how it looks like to transform data structure with fromJS and toJS functions.\n\n**[Get - Object and Array](https://github.com/imteekay/javascript-immutable-data-benchmarks/blob/master/src/get.js)**: getting the first attribute of an object is way more costly for the Immutable.js API. 7 times (in milliseconds) running with 1 million cycles and 5 million cycles. Getting the first element of an array is closer compared to those APIs.\n\n![Object.get results](https://raw.githubusercontent.com/leandrotk/javascript-immutable-data-benchmarks/master/results/get.png)\n\n**[Get-In - Object and Array](https://github.com/imteekay/javascript-immutable-data-benchmarks/blob/master/src/getin.js)**: getting a nested attribute for an object or a nested element of an array is way more costly for the Immutable.js API than the native one. For both 1 and 5 million cycles.\n\n![Object.getIn results](https://raw.githubusercontent.com/leandrotk/javascript-immutable-data-benchmarks/master/results/getin.png)\n\n**[Set - Object and Array](https://github.com/imteekay/javascript-immutable-data-benchmarks/blob/master/src/set.js)**: setting a new value to an object attribute is way more costly for the native JavaScript API. But using the set method, we can still work with native Objects and drastically decrease the milliseconds. For the array, it's closer, but it can be better with the set method.\n\n![Object.set results](https://raw.githubusercontent.com/leandrotk/javascript-immutable-data-benchmarks/master/results/set.png)\n\n**[Set-In - Object and Array](https://github.com/imteekay/javascript-immutable-data-benchmarks/blob/master/src/setin.js)**: for both objects and arrays, it's better to use the native JavaScript API instead of the Immutable.js data structures and methods.\n\n![Object.setIn results](https://raw.githubusercontent.com/leandrotk/javascript-immutable-data-benchmarks/master/results/setin.png)\n\n**[fromJS](https://github.com/imteekay/javascript-immutable-data-benchmarks/blob/master/src/fromJS.js) & [toJS](https://github.com/imteekay/javascript-immutable-data-benchmarks/blob/master/src/toJS.js)**: we can see that the fromJS function can be costly when transforming native JavaScript data structures to Immutable DS. toJS is way less costly, but every time we need to get a value, in the selector, for example, we use toJS and it can influence performance.\n\n![fromJS toJS](https://raw.githubusercontent.com/leandrotk/javascript-immutable-data-benchmarks/master/results/transformation.png)\n\n# Typed State Management: The lifecycle\n\n![Redux Lifecycle](https://user-images.githubusercontent.com/5835798/70868988-f96bbe80-1f64-11ea-948d-7be14ad19cdc.gif)\n\nThe component renders with the initial state defined in the reducer. It dispatches an action. This action will have an external interaction, so it uses the promise concurrent model. The new data arrives in the reducer as part of the action and it passes the action to the handler to handle the external interaction lifecycle and add new data to the state if it succeeds. With an updated state, the selector will get and pass it to the component as props in mapStateToProps.\n\nThe concept of typed state management is to make sure all the communication between these agents has a consistent and predictable state contract. From the initial state to the updated state after the external interaction, it has the same type of contract.\n\n# Typed State Management PoC\n\nTrying this concept as a Photos PWA Proof of Concept: Photos PWA is a small app maintained by a small team, this is why we chose it as part of the PoC. We needed to validate this idea in production, but without too much complication.\n\nThe container component we applied to this concept is called NotStartedPhotoSessions. It fetches an API endpoint to get photo sessions to list in the photographer's agenda.\n\nThe first thing was to build the store state contract as the initial state:\n\n```typescript\n// types.ts\nexport type PhotoSessionsState = {\n  notStarted: ReadonlyPhotoSession;\n  started: ReadonlyPhotoSession;\n};\n\n// reducer.ts\nexport const initialState: PhotoSessionsState = {\n  notStarted: [],\n  started: [],\n};\n```\n\nSo in the first render, the component will access these values as props. In the rendering, it will dispatch a new typed action:\n\n```typescript\n// actions.ts\nexport const fetchNotStartedPhotoSessionsAction = (): PhotoSessionsActions => ({\n  type: FETCH_NOT_STARTED_PHOTO_SESSIONS,\n  promise: fetchNotStartedPhotoSessions(),\n});\n\n// types.ts\nexport type FetchNotStartedPhotoSessionsAction = {\n  type: typeof FETCH_NOT_STARTED_PHOTO_SESSIONS;\n  promise?: Promise<any>;\n  payload?: PhotoSessionsPayloadType;\n};\n\nexport type PhotoSessionsActions =\n  | FetchNotStartedPhotoSessionsAction\n  | FetchStartedPhotoSessionsAction\n  | PhotoSessionsPageViewedAnalyticsAction\n  | PhotoSessionsClickedAnalyticsAction;\n```\n\nThe reducer will receive this action. And ensure that the final result will have the same state contract as the initial state:\n\n```typescript\nexport const photoSessionsReducer = (state = initialState, action: PhotoSessionsActions): PhotoSessionsState => {\n  ...\n};\n```\n\nThe reducer then calls the handler and it transforms the API response payload into the store state. It's just data mapping.\n\nNow that the store state is updated, it's time to let the selector gets the new data:\n\n```typescript\nexport const selectNotStartedPhotoSessions = (\n  photoSessions: PhotoSessionsState,\n): ReadonlyPhotoSession => photoSessions.notStarted;\n```\n\nAnd we get back to the component, where we map state to props and receive the new data.\n\n# Benefits\n\n- Foreseeability: type checking makes the code more foreseeable and, in turn, makes it less error-prone.\n- Documentation: making contracts for each agent in the redux lifecycle gives us good documentation about them for free.\n- Type safety to data flow: since most of our data flow happens in the redux lifecycle we get type safety, at least in compile-time, to our data - where most of our bugs originate.\n- If we choose to remove Immutable.js (fromJS and toJS) from the store state, we can still use cool functions like [mergeDeep](https://immutable-js.github.io/immutable-js/docs/#/mergeDeep) without an Immutable Map/Array/DS, but only using Immutable.js version 4.\n- Performance optimization when removing Immutable in favor of Typescript readonly\n  - [Immutable vs JS Benchmark](https://github.com/imteekay/javascript-immutable-data-benchmarks): get, get-in, set, set-in, fromJS, toJS.\n  - Google Lighthouse: a slight improvement when running Google Lighthouse without Immutable.js.\n\n# Resources\n\n- [TypeScript for Front-End Developers](https://www.educative.io/path/typescript-for-front-end-developers?aff=x8bV)\n- [Using TypeScript with React](https://www.educative.io/courses/using-typescript-with-react?aff=x8bV)\n- [Learn TypeScript: The Complete Course for Beginners](https://www.educative.io/courses/learn-typescript-complete-course?aff=x8bV)\n- [Advanced TypeScript Masterclass](https://www.educative.io/courses/advanced-typescript-masterclass?aff=x8bV)\n- [Beginner JavaScript Course](https://BeginnerJavaScript.com/friend/LEANDRO)\n- [React for Beginners Course](https://ReactForBeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://AdvancedReact.com/friend/LEANDRO)\n- [ES6 Course](https://ES6.io/friend/LEANDRO)\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n- [Constraints in frontend development](https://www.youtube.com/watch?v=TqfbAXCCVwE&feature=emb_title)\n- [Our journey to type checking 4 million lines of Python](https://dropbox.tech/application/our-journey-to-type-checking-4-million-lines-of-python)\n- [The Typescript Tax](https://medium.com/javascript-scene/the-typescript-tax-132ff4cb175b)\n- [Adopting Typescript at Scale](https://www.youtube.com/watch?v=P-J9Eg7hJwE)\n- [The Dao of Immutability](https://medium.com/javascript-scene/the-dao-of-immutability-9f91a70c88cd#.9g51h5stk)\n- [Concerns on using Immutable.js with Redux](https://redux.js.org/recipes/using-immutablejs-with-redux/)\n  - [Avoid using Immutable.js with Redux](https://www.reddit.com/r/javascript/comments/4rcqpx/dan_abramov_redux_is_not_an_architecture_or/d51g4k4?utm_source=share&utm_medium=web2x)\n  - [3 Reasons to Avoid Using ImmutableJS With Redux](https://medium.com/better-programming/3-reasons-to-avoid-using-immutablejs-with-redux-b0109d0123e8)\n  - [Use Immer for Writing Immutable Updates](https://redux.js.org/style-guide/style-guide/#use-immer-for-writing-immutable-updates)\n- [Tslint-immutable](https://github.com/jonaskello/tslint-immutable)\n- [Read-only Typescript](https://mariusschulz.com/blog/read-only-properties-in-typescript)\n- [Typescript Read-only doesn't fully replace Immutable](https://stackoverflow.com/a/55906256/11314146)\n- [Deep ReadOnly Objects](https://stackoverflow.com/a/49670389/11314146)\n- [Native JavaScript vs Immutable.js APIs](https://github.com/imteekay/javascript-immutable-data-benchmarks)\n- [io-ts](https://github.com/gcanti/io-ts)\n- [Typescript and jest mock](https://klzns.github.io/how-to-use-type-script-and-jest-mocks/)\n- [The Road to learn React](https://www.educative.io/courses/the-road-to-learn-react?aff=x8bV)\n- [JavaScript Fundamentals Before Learning React](https://www.educative.io/courses/javascript-fundamentals-before-learning-react?aff=x8bV)\n- [Reintroducing React: V16 and Beyond](https://www.educative.io/courses/reintroducing-react-v16-beyond?aff=x8bV)\n- [Advanced React Patterns With Hooks](https://www.educative.io/courses/advanced-react-patterns-with-hooks?aff=x8bV)\n- [Practical Redux](https://www.educative.io/courses/practical-redux?aff=x8bV)\n- [The Ultimate Guide to Redux](https://www.educative.io/courses/ultimate-guide-to-redux?aff=x8bV)\n- [Intermediate Redux with Redux Toolkit](https://www.educative.io/courses/intermediate-redux-toolkit?aff=x8bV)\n",
  },
  {
    url: '/constant-feedback-driven-development-with-nodemon',
    title: 'Constant feedback driven development with Nodemon',
    content:
      'I\'m learning a lot about building new projects using Typescript. Today I want to tell you more about building things with constant feedback and how to make the development dynamic.\n\nAt first, when I started building things with Typescript, for every function I built, I had two options:\n\n1. Execute the file by using `ts-node`.\n2. Open a repl with `ts-node` and copy and paste the function there.\n\nAt first, it is ok to test simple things. But you all need to stop the development and lose the flow. I wanted a more dynamic development flow and I found `nodemon`.\n\n`nodemon` is not specific for Typescript. It is a\n\n> Tool that helps develop node.js based applications by automatically restarting the node application when file changes in the directory are detected. - nodemon.io\n\nSo, for every file you saved, `nodemon` will restart the application. With that, you can have constant feedback from what you are building.\n\n## Setting up\n\nIf you really like this tooling, you can install it globally:\n\n```bash\nnpm install -g nodemon\n```\n\nBut I like to configure dependencies for each project. So I install it in the dev dependencies in the project I want to use it.\n\n```bash\nnpm install --save-dev nodemon\n```\n\nAfter installing it, we have to configure the nodemon json config. This is the simple configuration I did for my [publisher tool](/publisher-a-tooling-to-automate-the-process-to-publish-my-blog-posts):\n\n```json\n{\n  "watch": ["src", "examples"],\n  "ext": ".ts,.js,.html,.json",\n  "ignore": [],\n  "exec": "ts-node ./src/index.ts"\n}\n```\n\nIt watches the `src` and `example` folders with `.ts`, `.js`, `.html`, and `.json` files. If one of these files changes, the nodemon executes your main file defined in the `exec` property. In my project, I add the main file in the `./src/index.ts`.\n\nIn your `package.json`, you can add a script to handle nodemon:\n\n```json\n{\n  "scripts": {\n    "start:dev": "nodemon"\n  }\n}\n```\n\nRun the command:\n\n```bash\nnpm run start:dev\n```\n\nAnd now your app is up and running.. with constant feedback.\n\nAs I said earlier, dynamic feedback is really important in development mode. It helps you have instant feedback as early as possible, making it breaking and working faster.\n\nFor your next project, I really recommend you to play around with this library. Or set up a different tool to make your development more dynamic.\n\n## Resources\n\n- [npm package](https://www.npmjs.com/package/nodemon)\n- [Advanced TypeScript Masterclass](https://www.educative.io/courses/advanced-typescript-masterclass?aff=x8bV)\n',
  },
  {
    url: '/data-fetching-in-react-with-react-query',
    title: 'Data Fetching in React with react-query',
    content:
      "One of the fundamental parts of web development is requesting data from a backend service or an API. This task is also known as data fetching in the frontend world.\n\nIn the early days of the frontend, we were usually building websites with HTML and CSS. The template or the pages were server-side rendered. And JavaScript was mainly used to do some animations and, at most, form validations.\n\nThe idea of fetching data asynchronously starts with a technique called Ajax, which stands for \"Asynchronous JavaScript and XML\".\n\nI remember using [XMLHttpRequest](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest) Web APIs object to request data from servers while the user interacted with the page. The usage of Ajax kept growing and one of the favorite toolings that we used back in the days was [jQuery Ajax](https://api.jquery.com/jquery.ajax/). It was very simple to use and less scary than the name `XMLHttpRequest`.\n\nGmail and Trello were heavily using these techniques to retrieve and update info without having the browser reload the entire page.\n\n## Data fetching with Fetch\n\nNowadays we commonly use `fetch` to handle data fetching. As [MDN wrote:](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data#fetch)\n\n> \"The Fetch API is basically a modern replacement for XHR; it was introduced in browsers recently to make asynchronous HTTP requests easier to do in JavaScript.\"\n\nAnd it really made it easier to make async requests. Let's see a simple use:\n\n```jsx\nfetch('https://pokeapi.co/api/v2/pokemon/pikachu')\n  .then((response) => response.json())\n  .then(console.log);\n```\n\nYou can go right now and type this code in your Browser's console. It'll request the data from the [Pokemon's API](https://pokeapi.co/).\n\nWe pass the resource URL and the `fetch` will return a [Promise](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise). The first `.then` receives the request's `response` object, which has a method called `json`. The `json` method returns the response JSON data. As the `.then` returns another Promise, we can make chained promises. The console log will return the Pikachu's info.\n\nWe can use the `async-await` to handle promises:\n\n```jsx\nconst response = await fetch('https://pokeapi.co/api/v2/pokemon/pikachu');\nconst data = await response.json();\n```\n\nIn modern browsers, we can use this code as they implemented [top-level await](https://v8.dev/features/top-level-await#:~:text=Top%2Dlevel%20await%20enables%20developers,they%20start%20evaluating%20their%20body.).\n\n## React, Fetch, and custom hooks\n\nIn React application, we also need to handle data fetching. If you see 5 different codebases, it's possible to see 5 different ways of building the communication between the frontend and the server.\n\nLet's implement our own fetch hook.\n\nThe hook's API would be very simple:\n\n- It should receive an URL\n- It can receive the initial data\n- It will return the fetch state:\n  - `data`: the data returned from the API.\n  - `isLoading`: a boolean that represents if the request is currently happenning or not.\n  - `hasError`: a boolean that represents if the request got any error.\n\n### It should receive an URL\n\n```jsx\nconst useFetch = (url) => {};\n```\n\n### It can receive the initial data\n\n```jsx\nconst useFetch = (url, initialData) => {\n  const initialState = {\n    isLoading: false,\n    hasError: false,\n    data: initialData,\n  };\n};\n```\n\nThe simple fetch can be wrapped in a `useEffect`. It would look very similar to the async-await fetch that we did earlier.\n\n```jsx\nuseEffect(() => {\n  const fetchAPI = async () => {\n    const response = await fetch(url);\n    const data = await response.json();\n  };\n\n  fetchAPI();\n}, [url]);\n```\n\nBut now we need to build the request state: basically, if it's loading, if it got an error, the data that came from the server, and so on.\n\nWe could do that by simply using the `useState`, but I'll show an example abstracting the logic in a reducer. To do that, we'll use the `useReducer` hook. It looks like this:\n\n```jsx\nexport const FetchActionType = {\n  FETCH_INIT: 'FETCH_INIT',\n  FETCH_SUCCESS: 'FETCH_SUCCESS',\n  FETCH_ERROR: 'FETCH_ERROR',\n};\n\nexport const fetchReducer = (state, action) => {\n  switch (action.type) {\n    case FetchActionType.FETCH_INIT:\n      return {\n        ...state,\n        isLoading: true,\n        hasError: false,\n      };\n    case FetchActionType.FETCH_SUCCESS:\n      return {\n        ...state,\n        hasError: false,\n        isLoading: false,\n        data: action.payload,\n      };\n    case FetchActionType.FETCH_ERROR:\n      return {\n        ...state,\n        hasError: true,\n        isLoading: false,\n      };\n    default:\n      return state;\n  }\n};\n```\n\nFirst we have all the actions:\n\n- `FETCH_INIT`: when the fetch initializes\n- `FETCH_SUCCESS`: when the fetch succeed\n- `FETCH_ERROR`: when the fetch got an error\n\nThen we have the reducer. It's basically a switch case mapping the action to the execution we do in the state.\n\nFor the `FETCH_INIT`, we get the current state and update the `isLoading` to `true` (it's loading) and the `hasError` to `false` (in case it got an error before, we need to make sure that it doesn't have an error anymore as we are fetching again).\n\nFor the `FETCH_SUCCESS`, we update the `hasError` and the `isLoading` to `false` and add the request payload to the state.\n\nFor the `FETCH_ERROR`, we just make sure that the `isLoading` is `false` and update the `hasError` to `true`.\n\nNow that we have our reducer, let's use it in the custom fetch hook.\n\n```jsx\nconst [state, dispatch] = useReducer(fetchReducer, initialState);\n```\n\nAs I mentioned earlier, we'll use the `useReducer` hook and pass our new reducer and an initial state for it. The hook returns the current state and a function called `dispatch` to dispatch actions that the reducer is listening to.\n\nWe can now modify our fetch and add the apropriate action dispatchers to it.\n\n```jsx\nuseEffect(() => {\n  const fetchAPI = async () => {\n    dispatch({ type: FetchActionType.FETCH_INIT });\n\n    try {\n      const response = await fetch(url);\n      const data = await response.json();\n\n      dispatch({\n        type: FetchActionType.FETCH_SUCCESS,\n        payload: data,\n      });\n    } catch (error) {\n      dispatch({ type: FetchActionType.FETCH_ERROR });\n    }\n  };\n\n  fetchAPI();\n}, [url]);\n```\n\n- When the fetch starts, we dispatch the `FETCH_INIT` action.\n- When it got a success response, we dispatch the `FETCH_SUCCESS` action.\n- When it got an error, we dispatch the `FETCH_ERROR` action.\n\nDoing this, we are always updating the state of our request. To finish we just return the `state`. So the entire hook would look like this:\n\n```jsx\nconst useFetch = (url, initialData) => {\n  const initialState = {\n    isLoading: false,\n    hasError: false,\n    data: initialData,\n  };\n\n  const [state, dispatch] = useReducer(fetchReducer, initialState);\n\n  useEffect(() => {\n    const fetchAPI = async () => {\n      dispatch({ type: FetchActionType.FETCH_INIT });\n\n      try {\n        const response = await fetch(url);\n        const data = await response.json();\n\n        dispatch({\n          type: FetchActionType.FETCH_SUCCESS,\n          payload: data,\n        });\n      } catch (error) {\n        dispatch({ type: FetchActionType.FETCH_ERROR });\n      }\n    };\n\n    fetchAPI();\n  }, [url]);\n\n  return state;\n};\n```\n\n## Data fetching with react-query\n\nData fetching and server state are complex topics in web development when it comes to their challenges: caching, revalidation, complex async operations, retry logic, and so on.\n\nreact-query came as the solution for data fetching in React. It solves many common problems out of the box and its simplicity improves hugely the dev experience.\n\nAs stated in the Getting Started, the react-query's motivation was:\n\n> \"Out of the box, React applications do not come with an opinionated way of fetching or updating data from your components so developers end up building their own ways of fetching data. This usually means cobbling together component-based state and effect using React hooks or using more general-purpose state management libraries to store and provide asynchronous data throughout their apps. While most traditional state management libraries are great for working with client state, they are not so great at working with async or server state. This is because server state is totally different.\" - [react-query's motivation](https://react-query.tanstack.com/overview#motivation)\n\nSome people are also saying the library is the obvious choice to handle data fetching in React and it's becoming the main tool to solve this problem:\n\n[https://twitter.com/kentcdodds/status/1379072162040926213?lang=en](https://twitter.com/kentcdodds/status/1379072162040926213?lang=en)\n\nBut we also have other choices to handle server cache like [swr](https://swr.vercel.app/) (Stale-While-Revalidate). The APIs look very similar to react-query.\n\n### react-query: set up\n\nThe library set up is very simple. All we need to do is to install it:\n\n```bash\nyarn add react-query\n```\n\nAnd add the `QueryClient` as a provider for our app:\n\n```jsx\nimport { QueryClient, QueryClientProvider } from 'react-query';\n\nconst queryClient = new QueryClient();\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      {/* the application here */}\n    </QueryClientProvider>\n  );\n}\n```\n\nIn addition to this first setup, we can also add our own configuration. By [default](https://react-query.tanstack.com/guides/important-defaults#_top), it will have its own configurations, for example, when the window is refocused, it will refetch automatically. If it's something you want to keep, you don't need to do anything. But if it has a bad UX for your app, you can overwrite this setup by passing the `refetchOnWindowFocus` to the `QueryClient`:\n\n```jsx\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      refetchOnWindowFocus: false,\n    },\n  },\n});\n```\n\nReading the [\"Important Defaults\"](https://react-query.tanstack.com/guides/important-defaults#_top) document is really important to understand the default behavior of the library. It'll also help you debug in an easier way.\n\n### react-query: simple request\n\nTo see a simple request we can make with react-query, let's use the Pokemon's API again.\n\nThe react-query's API is super simple:\n\n- query key: this first parameter is used for the data cache and revalidation purposes.\n- fetch promise: the request should always be wrapped in a Promise.\n\n```jsx\nconst { data } = useQuery(['pokemon', 'pikachu'], async () => {\n  const response = await fetch('https://pokeapi.co/api/v2/pokemon/pikachu');\n  return await response.json();\n});\n```\n\nThe query key is `['pokemon', 'pikachu']` because we can query all types of pokemons. Other variants would be:\n\n- `['pokemon', 'ditto']`\n- `['pokemon', 'blastoise']`\n\nAll under the namespace `pokemon`. But it is up to you to define the query string and make it a convention or pattern in your application.\n\nTo reuse this same query in other places to make it more testable, we can extract this code into a custom hook. We'll call it `usePokemon`.\n\n```jsx\nfunction usePokemon(pokemon) {\n  return useQuery(['pokemon', pokemon], fetchPokemon(pokemon));\n}\n```\n\nAs we also extract the fetch promise, it becomes very clean. The `fetchPokemon` just becomes\n\n```jsx\nfunction fetchPokemon(pokemon) {\n  return async () => {\n    const response = await fetch(\n      `https://pokeapi.co/api/v2/pokemon/${pokemon}`,\n    );\n    return await response.json();\n  };\n}\n```\n\nAnd now we can reuse this hook in all parts of our application:\n\n```jsx\nconst { data } = usePokemon('pikachu');\n```\n\n### react-query: request's state\n\nreact-query also provides a nice API that represents the request's state:\n\n- `isLoading`: when the request is still in process. Nice to show a loading spinner or skeleton.\n- `isError`: when the request got an error. Nice for error handling like showing a dialog, error content, or snackbar.\n- `refetch`: a function to refetch the resource. A nice example is when it gets an error and we show the user the possibility of requesting the resource again.\n\nAnd so on. For the entire API, take a look at the [doc](https://react-query.tanstack.com/reference/useQuery).\n\n## Conclusion\n\nIn the old days of frontend, it started very simply with little and, most of the time, with no JavaScript at all. Then the websites were getting more and more complex in terms of interactivity, and JavaScript's need was very much required. So much that jQuery was created to make it easier to do DOM manipulation and data fetching using the Ajax technique.\n\nThe single page applications' growth exploded and many developers and companies are building frontend applications using a frontend framework like VueJS, AngularJS, or libraries like ReactJS.\n\nData fetching and server cache are really different than client state and they come with a lot of engineering challenges like caching, update state \"out of date\", dedup multiple requests, and so on.\n\nTo handle all these challenges, react-query was created and it's becoming the go-to option to handle data fetching out of the box in React applications. We also have other competing tools like [swr](https://swr.vercel.app/). They are both very well-thought libraries, easy to use, and solve the data fetching problems out of the box.\n\n## Resources\n\n- [Fetching data from the server](https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Client-side_web_APIs/Fetching_data)\n- [react-query: Performant and powerful data synchronization for React](https://react-query.tanstack.com/)\n- [Become a React Developer](https://www.educative.io/path/become-a-react-developer?aff=x8bV)\n- [React Development for Professionals](https://www.educative.io/path/react-development-for-professionals?aff=x8bV)\n- [React App Testing](https://www.educative.io/path/react-app-testing?aff=x8bV)\n- [React for Front-End Developers](https://www.educative.io/path/react-front-end-developer?aff=x8bV)\n- [React Deep Dive: From Beginner to Advanced](https://www.educative.io/courses/react-beginner-to-advanced?aff=x8bV)\n- [Test-driven Development with React](https://www.educative.io/courses/test-driven-react-development?aff=x8bV)\n- [The Road to learn React](https://www.educative.io/courses/the-road-to-learn-react?aff=x8bV)\n- [Reintroducing React: V16 and Beyond](https://www.educative.io/courses/reintroducing-react-v16-beyond?aff=x8bV)\n- [Advanced React Patterns With Hooks](https://www.educative.io/courses/advanced-react-patterns-with-hooks?aff=x8bV)\n- [React for Beginners Course](https://reactforbeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://advancedreact.com/friend/LEANDRO)\n",
  },
  {
    url: '/designing-my-learning-experience',
    title: 'Designing my Learning Experience',
    content:
      "In 2017, I posted about [**my learning journey**](https://medium.com/the-renaissance-developer/how-i-hack-my-education-354fb5b8a025), I talk a lot about passion, willingness, and obsession. I always feel I have so much to do. So much to learn. In the same time this feeling makes me anxious, it makes me feel ready for the next challenge. It's mixed feelings.\n\nSince 2017, I'm learning a lot and sharing knowledge (on [Medium](https://medium.com/@leandrotk_/) and my [Blog](http://leandrotk.github.io/tk)). I want to keep this mindset of trying new things, experiment new technologies, learn different paradigms. But I want to improve the whole process, making this a better experience and more conscious.\n\nAs I'm learning about myself and how my body and mind work, I'm designing my learning process based on those things. So some questions started to pop in my mind:\n\n- What's the best way to learn?\n- How do I measure it?\n- How do I improve my learning experience?\n- How to design my life to have \"a good amount of productivity\"?\n\nOk, we have a lot of work to do here. Let's answer these questions and see the final product.\n\n---\n\n## What's the best way to learn?\n\nThe short answer is: I don't know.\n\nI think we don't have the right answer for every person in earth. But if I design the learning experience exclusively for myself, I think I have a chance.\n\nTo understand what works and what is not so effective, I need to try different methods as experiments: podcast, articles, videos, courses, university, doing projects, books, etc. We have a bunch of resources and ways to learn.\n\n### What works for me?\n\n- **Podcast**: I use it as a distraction tool when commuting, running, and playing video games. I like to listen to discussions on technology and experiences in tech. I tried to use it as a learning tool but I always get distracted. So now, for example, if I want to learn React Hooks, I don't listen to a podcast to learn Hooks. I prefer reading the docs (which is pretty good!). But if I want to learn how different teams/companies scale React, a podcast can be a good fit.\n- **Articles**: I love learning through reading articles. I tend to collect a bunch of different articles on one topic and read all to have a deep understanding with different perspectives. When I was learning JavaScript concurrent model with Promises, I got about 10 different articles to go deep in this subject. It's also good for spaced repetition in my learning process. For example, if I want to learn JavaScript Promises, I read the first 3 to 4 articles in the first place and do some experiments (a.k.a. practice, code!). In the following days/weeks, I read other articles to have other perspectives or to just remember the concept.\n- **Videos & Courses**: When I started learning to code, videos were a big part of my learning process. As a visual person, I like to understand the concepts by seeing the code. It was also good because I watched a lot of tutorials. But nowadays, I don't watch a lot of videos, I tend to watch tech video as an entertaining+educational content like [fun fun function](https://www.youtube.com/channel/UCO1cgjhGzsSYb1rsB4bFe4Q) and [Joma Tech](https://www.youtube.com/channel/UCV0qA-eDDICsRR9rPcnG7tw). Specific for courses, I tend to like more educational platforms like Udacity that mixes theory (concepts) and practice (coding).\n- **University**: So let's skip this part... kidding! Hmm.. I'm a bit skeptical about universities. I tried it, but I realized that the \"way of learning\" was not the best for me. I didn't fit it. A class of 30 people passively listening to a professor for 40 minutes. I like to be active, I like to question, I like to do experiments and practice. It didn't work for me. Maybe it works for you.. who knows?\n- **Projects**: I love doing project-based learning. I'm doing a lot of this recently. When I was learning functional programming, I tried many different projects ([PomoLambda](https://github.com/imteekay/pomo-lambda), [Luhn](https://github.com/imteekay/luhn), [Year Progress Bar](https://github.com/imteekay/year-progress-bar)). When I was learning React Hooks, I did some experiments to understand the concepts by building [a mini pokemon \"game\"](https://github.com/imteekay/pokehooks-labs). When I was learning JavaScript concurrent model with Promises, [I also tried different things](https://github.com/imteekay/promising). When I wanted to fix my struggles with CSS, I created the [UI Challenges project](https://github.com/imteekay/ui-challenges). I think you got the idea.\n- **Books**: Books are a big part of my learning process. But I'm a slow reader. I like to take notes, organize my thoughts, and understand the details. And I know that I'm too curious about a lot of different things, so the challenge to me is to keep it up, to be consistent, and finish the books. Having this in mind, I'm trying something different: reading 3 books simultaneously. A biography or something about self-development ([Mastery](https://www.goodreads.com/book/show/13589182-mastery)). A technical one ([SICP: Structure and Interpretation of Computer Programs](https://www.goodreads.com/book/show/43713.Structure_and_Interpretation_of_Computer_Programs)). And a career one ([The Effective Engineer](https://www.goodreads.com/book/show/25238425-the-effective-engineer)). This is how it's working for me. ¯\\*(ツ)\\*/¯\n\nSo here we have a ton of resources and ways of learning. Basically my mindset is like a laboratory. Make experiments, try new things. But understanding **what works for me**. Asking myself how do I learn best? Which resources I really engage and get the most of it? Keep in mind it doesn't have any rules. Actually, **you make the rules**. You understand yourself, you understand the resources, and make the decision to keep it up with the best way of (**your**) learning.\n\nNow I divide my time in my three main resources: articles, projects, and books.\n\nI have my own time to keep reading books, as I told you my experiment to read three books at the same time with different topics. It's not daily yet, but my goal is to have a daily time to read it and make it more consistent.\n\nArticles I read once in a while, when I want to go deep in a topic, understand the theory and the concepts. I like to do a linked list of articles (or maybe a priority queue) and organize by topics to study later.\n\nThe projects are the resource I spend most of my time. This is the way I practice. The way I get the concepts I learn and make it live. The way I do experiments. The way I think deeply about the concepts. Today I'm in a good vibe to try different projects. But I want to explore it more, organize my time to get more done.\n\n---\n\n## How do I measure it?\n\nThis is an interesting topic, but I don't know if we can really measure the learning process. I have two things in mind when I want to \"evaluate\" if I'm actually learning or not: project-based learning and real life projects.\n\n### Project-based learning\n\nAs I mentioned in the resources topic, projects are a simple way to make the learning practical. Sometimes I call it \"mini projects\", because I just want to do a Proof of Concept (PoC) or just a small experiment, making the learned theory real and practical. So I don't spend a lot of time doing a specific project or improving it. I create the project, do the experiment, and when I feel satisfied with the results I move on to the next thing I want to learn. As a software engineer, the coding part is always fun, but to go to the project and start the experiments early as possible, I created a framework to myself:\n\n- Think about the project that I can apply the concepts I'm learning\n- Create a new Github repository\n- Choose a programming language (sometimes I'm learning a specific feature of a programming language. Sometimes I just want to apply the concepts and the PL is only a tool for this experiment)\n- Coding time\n- Share to receive feedback\n\nI like this framework because I start the project fast and then I can focus on the experiment and the feedback cycle.\n\n### Real life projects\n\nThis is similar to project-based learning (PBL), but the PBL is a quick and small project just to experiment. A real life project will be a longer and probably bigger project (bigger codebase in software development). Some questions to \"measure\" the learning:\n\n- Can I apply this learned concept and ship it to production?\n- Does the learned concept helps me to have better (technical) decisions?\n- Am I able to suggest the learned concept in code review or help other people working on this project?\n\nAn example was a project I needed to implement an authentication and authorization in a serveless environment using node. As I learned promises, I wanted to implement using `async/await` syntax. I was confident about what I studied and wanted to see the results. After shipping the code to production, I realized my accomplishment. It's a good feeling when you study hard and can apply this in real life. Not just a good feeling, but a way to \"measure\" that I'm learning it, that I understand it.\n\n## How do I improve my learning experience?\n\nLearning can be hard. Sometimes \"boring\". But we can make it more engaging and \"fun\". I'll tell you the three ways I use to improve my learning experience. I like these three ways because it gives me visibility and depth on the topics I'm learning: **The Flow,** **Sharing Knowledge** & **Smart People Around**.\n\n### The Flow chart\n\nA couple years ago, I wrote a piece of content describing the turning point in the learning process: In the beginning it can be hard to learn a new thing, but keeping it consistent until a time `t`, you'll realize that you'll learning much faster than before. This time `t` is particular for each person.\n\n<img src=\"/designing-my-learning-experience/learning-time.jpeg\">\n\nBut it is very simplistic. So I kept searching for a better framework to understand this, but also give me visibility to understand how to improve my learnings and enable me to be actionable.\n\nI found this chart from the book [Flow](https://www.amazon.com/Flow-Psychology-Experience-Perennial-Classics/dp/0061339202). It talks about how to stay in the flow by managing your state between anxiety and boredom. Basically:\n\n- Low Challege + High Skills = Boredom\n- High Challenge + Low Skills = Anxiety\n- Low Challenge + Low Skills = Flow\n- High Challenge + High Skills = Flow\n\n<img src=\"/designing-my-learning-experience/flow-chart.jpeg\">\n\nSo now I can stop and reflect about my learning experience:\n\n- Am I bored? Maybe I need to search for more challenging projects.\n- Am I anxiety? Maybe I need to study something to get the challenge done.\n- Am I in the flow? This feeling is good. Keep it up.\n\nI like this idea because it gives more visibility to understand the pain points on my learning process and also reflect and be actionable on the problems and opportunities I have to improve the whole learning experience. I also like it because it is simple, it's not that complex. And it doesn't need be.\n\n### Sharing knowledge\n\nFor me, sharing knowledge is a way to give me depth on the topics I'm learning. When I share knowledge, I force myself to go deep and understand every possible detail about the topic I'm learning to teach in the best way. Now I usually do two things: Articles and Tech Talks\n\nI love to write detailed articles about things I'm learning or had experience like when [I was learning functional programming](https://medium.com/free-code-camp/functional-programming-principles-in-javascript-1b8fc6c3563f), when [I was learning data structures and fell in love with the tree data structure](https://medium.com/free-code-camp/all-you-need-to-know-about-tree-data-structures-bceacb85490c), and [my very first programming language: Python](https://medium.com/free-code-camp/learning-python-from-zero-to-hero-120ea540b567)!\n\nTech talks are the last step for me when it comes to learning something new. I usually:\n\n- Learn by reading a lot of articles\n- Learn by doing some experiments and projects\n- Learn by writing articles\n- Learn by doing tech talks\n\nThis \"framework\" is the exact thing I did when I was learning functional programming. I did read a lot of articles (and added all in this [A Learning Path for Functional Programming](https://github.com/imteekay/functional-programming-learning-path) Github repo). I did some [experiments and projects](https://github.com/imteekay?tab=repositories). I did write an [article](https://medium.com/free-code-camp/functional-programming-principles-in-javascript-1b8fc6c3563f). And I did a [tech talk](https://github.com/imteekay/talks/blob/master/functional_programming/slides.pdf).\n\n### Smart people around\n\nI like the idea to always designing a better experience for my life. As I know I get most of my time at work, and if I have the possibility, I'll choose the best option out there. I like to choose a company or job/team based on three things:\n\n- **Company / Team Culture**: work in a team that supports/helps me to grow, a team that gives me freedom to question things and debate, a team with lifelong-learners, a team with great professionals, but also awesome human beings.\n- **Learning / Challenges**: I really like to solve interesting problems. It's not only fun, but also helps me to grow, try different solutions, and motivates me to keep learning.\n- **Purpose**: Looking inside me, I truly love the technical part of my job. I love the challenges and the learning involved. And it motivates me a lot. It sounds cliché, but I am deeply passionated about building new things, new products that have a good impact on people's lives\n\nWith these three things in mind, I could choose a lot of good places I worked for. The places and people helped immensely to grow.\n\nBut learning at a company is one way to do it. You can also be part of a community. Sometimes I go to meetups, or be active on groups on slack or telegram, to learn and discuss things I'm interested or things I want to learn.\n\n---\n\n## About Productivity\n\nI want to get the most of my day to learn and improve, so I experimented different things. And this what I'm aware of to get things done with quality.\n\n### **Energy**\n\n- Productivity is about the energy I put into tasks. Strive to think about quality, instead of only quantity of thing you get done in the end of the day.\n- Strive to be physically and mentally well. Eat healthy. Do exercises. Sleep well. De-stress.\n\n### **Task Planning & Prioritization**\n\n- Realize you won't get done a thousand things in a single day.\n- Prioritization is so important. Design your tasks to get done the most important and impactful things.\n- Plan to get things done. It is easy to do other things not related to things you really need to get done. Planning your day, or the things you want to do is a way to be productive and not procrastinating all day.\n\n### **Focus & Distractions**\n\n- Design your environment to be focused on your tasks: get a good headphone, stay away from loud places with too many people, silence the phone.\n\n---\n\n## Wrapping up\n\nSo here I have different things I'm trying out, do experiments in my life, and reflect to understand what works for me. And this is important, because it works for me, but it may not work for you. Do experiments, try different ways of learning, keep the mindset of improving day after day, the lifelong mindset.\n\nThe last thing I want say: this is an in progress design for my learning experience. I want to keep improving this, because I'm trying new approaches. The design for my learning experience continues.\n\n## Some resources\n\n- [Understanding the Flow](https://alifeofproductivity.com/how-to-experience-flow-magical-chart/)\n- [Deep understand of Flow](https://medium.com/swlh/flow-a-productive-antidote-to-anxiety-and-boredom-1b015be966b)\n- [How I hack my education](https://medium.com/the-renaissance-developer/how-i-hack-my-education-354fb5b8a025)\n- [Mastery book](https://www.amazon.com/gp/product/0670024961/)\n- [My Github repositories](https://github.com/imteekay)\n- [Nathaniel Drew Youtube channel on self development](https://www.youtube.com/channel/UCrdWRLq10OHuy7HmSckV3Vg/videos?view=0&sort=p&flow=grid)\n- [Matt D'Avilla Youtube channel](https://www.youtube.com/channel/UCJ24N4O0bP7LGLBDvye7oCA)\n",
  },
  {
    url: '/designing-my-lifes-system',
    title: "Designing my life's System",
    content:
      "> _“You have power over your mind - not outside events. Realize this, and you will find strength.”_ — Marcus Aurelius, Meditations\n\nI'm always looking for ways to get better. I know it is a long term goal. Actually, it is a _forever goal_. It doesn't finish. I'll do it consistently for my eternity. Every single day.\n\nSometimes I feel I'm getting closer. But closer to what? It's just a feeling. I don't have a real end goal. Actually, my end goal is to be able to do what I love to do daily. It's all about the process. The end goal is my process. My process is my end goal. It's all connected.\n\nAs Marcus Aurelius said \"_You have power over your mind - not outside events_\". I don't control outside events, I only have power over myself. This is what I can fix, polish, and make better. I don't want to lose my time trying to change something I'm not able to. Focus is important.\n\nThe focus is on my process and how to make it works for me. Everything can get better. A system is not an exception. I build it to try and experiment for a week. See if it works. Fix and improve if needed.\n\nThis post is my attempt to illustrate how I designed my life's system, what I'm trying, and next steps.\n\nTopics I want to cover in this piece:\n\n- Goals\n- Systems\n- Habits\n- Mental Clarity\n- Personal Knowledge Base\n- Feedback & Review\n\nJust a _disclaimer_ before we start this conversation. This is how I designed my system. It can or cannot work for you. The best advice I can give is to read, experiment, and adjust it specifically for your life.\n\n_Disclaimer_ number 2: this essay won't be like every single Medium article. I will not write a _“5 steps to build your system”_ or _\"I created a system and this is what I learned\"_. Nothing wrong with these types of articles, but my essay is more like rambling about different things I tried and thinking deeply in each part.\n\n## The System\n\nIt all started when I was feeling overwhelmed by my own mind. I wanted to do everything, read all the books, learn every programming language, embrace all projects. Basically I was saying _**yes! **_ for everything and doing nothing.\n\nI needed to put my ideas down on paper. Literally. Yes, people still use paper. It cleared my mind. Writing and making drafts really help me gain visibility. And visibility is what I need. A place that I can see all the things I want to do. My goals, my studies, my projects, my bookshelf, etcetera.\n\nIt could be a physical place. But I didn't want to use paper, notebooks, or physical calendars to organize my life. I wanted something digital. A place I could get very quickly anywhere I am. In my pocket. Or using my MacBook.\n\n_So it must be online._\n\nBut not only online. It should be simple to use. Easy to organise. And - maybe - the most important thing: give me the visibility of things I want to do and show my progress.\n\nAt first, I used Evernote for a long time. But I always thought of it as a draft tool. Not a place I could I organise my life. Notion gives me that. It is digital, simple to use, easy to organise, and it enables me to create my system to give me visibility about everything.\n\nBut one thing I want to make clear is that Notion - and any other software - is just a tool. The most important thing is _how_ you will use it.\n\nAs a perfectionist, I wanted everything, well, perfect. I wanted to design the best system for me. But to break this perfectionism feeling, the first thing that I did was to create a page called **_Drafts_**. This page was to write down everything I wanted. Or needed. All the expected ideas to the craziest ones. It allowed me to just try it out and make the ideas better. Polishing here. Refining there.\n\nIt doesn't need to be perfect at first. Build the first version. Make it works. Experiment. Learn more things. Refine it.\n\nThis is one thing that I learned. This cycle is forever. We can always make it better. But it is not the main reason. It's because we are people. We constantly change. What works now, may not work in a month. It doesn't need to be perfect at first.\n\nSo I started simple. I built a _Home_ page. This page would contain everything I need to have visibility. In the _Home_, I added the first page: the _Daily Schedule_. This page is a just a simple calendar. But it joins two power features: a calendar and a to-do.\n\nEvery night before, I add To-Dos for the next day. Actually, not every night, but I tried my best. It has three main things:\n\n- Daily Habits\n- Work Expectation\n- Projects\n\nI organise everything on these topics. With Notion, I can use the _template_ feature to setup the default daily schedule very quickly.\n\nWith that, I have a very clear vision of my day. Basically what I want to accomplish. I try to make it very actionable to just execute it. I also use them to do a weekly retrospective.\n\nThis is an important topic. Doing a retrospective is like a feedback loop. I have all the information about my week there. I just need to grab and reflect on them. What worked. What doesn't. How I felt about the week. And actionable items to work on the next week.\n\n**Daily Habits**: we will dive into this topic more in depth later, but the idea here is to cluster the habits I'm building daily. It's just a bunch of checkboxes that help me keep track of the habits I set for me.\n\n![Untitled](https://storage.googleapis.com/reading-supply-assets/reading.supply.bc7bfa08-c8a7-4322-981b-8fbcb8c6a754.png)\n\nI started with some habits that I was already maintaining. It is always easier when we are used to something than other new things that we need all the learnings curve process. It needed to be simple and easy to start.\n\nAs Notion is a central system, I use it to organize everything and to give visibility of my day. But at night I store every habit in the _Loop Habit Tracker_ app to build a chart and understand my progress for each habit I'm building.\n\n**Work Expectation**: this part is very related to the work I do as a software engineer. Add some important events or meetings I have, the tasks I'm working on, and other projects or ideas I need to separate a time to work on.\n\nNo big deal here. Just to remember me about the work for the day and organise my expectations.\n\n**Projects**: writing, tech products, learning paths. I started with some topics I was already doing in my life. Start simple. Improve along the way.\n\nI love sharing knowledge and writing is my main channel. I feel I can express everything in every detail I want with writing. But it is not only about sharing, it's also about clearing my mind. We will dive into this topic later.\n\nI love building things. Tech products are the side projects that enable me to make stuff and ship it. It allows me to be creative, thinks in different tools to make life easier, and have a big impact.\n\nI'm always studying. Learning. Reading. This is my hobby and my process. I love it since I know myself as a person. Lifelong learning is part of me.\n\nIt was a very simple setup. I didn't want to make it hard at first. After some days, I felt the need to transform these three things into a more detailed and organised page.\n\nActually, three separate pages: Project, Work, Habits.\n\n### Work\n\nThe _Work_ page is the simplest one. It is just a page with different toggle lists.\n\n![Untitled](https://storage.googleapis.com/reading-supply-assets/reading.supply.058d97bb-1f83-4390-a0cd-d3d09b88f8e8.png)\n\nHere I have these toggles:\n\n- **Squad**: I use it as the repository for basically everything related to the squad I'm working on. The projects, meeting drafts, doubts, questions.\n- **Projects**: These are the project I do that are not related to my current squad. As a software engineer, I love to build dev tools. It is not part of my squad goals, but I know it can have a big impact in the developer experience across the company. It helps me keep track and share with my colleagues the last updates of theses projects.\n- **1x1**: This is easy to understand. Notes from 1x1s I have with colleagues and my tech leaders. Sometimes I write down some action points to do in the following weeks, or just add notes to have a focused conversation.\n- **Learnings**: At work I'm always learning. This is one of my main reasons to work where I work. I need to be constantly learning. This page is just a repository of things I learned or notes from tech talks I participated.\n- **Retrospective**: This is one thing that is related to the squad, but I keep it separated to write down all the pain point along the weeks and be ready to share in our bi-weekly retrospective meetings.\n\nI said I needed to start simple. Don't get me wrong. This is not how I started. When I began to write it down, it was just the Squad toggle list. Nothing more. And I just added some notes from meetings to help me have a better understanding of business rules and product features.\n\nOver the weeks I saw the need to add notes about other topics and start improving it.\n\nThis is the best part of the system. You can do your own way, start easy, and then increment with whatever you want.\n\n### Habits\n\n> _“Motivation is what gets you started. Habit is what keeps you going.”_ ― Jim Ryun\n\nThis topic is one of my passions. I really like to learn about habit, habit tracking, and how to apply it my daily life.\n\nI wanted small, smart, and actionable habits. With that, I could do every day and think long term and the compound effect. I wanted to set up to success: part of the system is to make everything _closer_ and _convenient_. In other terms, make it easy to do in a daily basis. And I wanted to document this. I really like the idea of learning in public and document all my process.\n\nThe last thing in my mind is to just enjoy and love the process, because the process is my biggest reward. It is the process and the end goal at the same time. I could do what I love every single day, consistently.\n\nAt first, I wanted to add all the habits that will make me become the person I want to be. It is a natural thing to think and act like this. But after some reflection, I understood that I didn't need to do everything. What I've learned?\n\n- _Prioritize_ is important\n- _Saying no_ is important\n\nYeah, it is obvious. But it is difficult at the same time. It is something I need to be constantly active and aware of.\n\nSo I wrote myself a question: _\"What are the essential habits I want to cultivate?\"_. To answer this, I started sketching and drawing on a paper. I came with something that made so much sense for me and my life.\n\n<img src=\"/designing-my-lifes-system/mindset.jpeg\">\n\nIt just illustrates that I want to be strong in three levels:\n\n- Physically\n- Mentally\n- Spiritually\n\nI thought about these three levels because if I want to do my best work and have peak performance - and this is my own hypothesis - I believe I need to master and compose them.\n\nThis _three levels_ is a deep topic and require a long term journey. It doesn't work overnight. I picked level number one first: physically healthy; and started working on it.\n\nThe habits I'm building daily are: physical exercises, minimum of 2 litres of water, good amount of sleep, and eat healthily.\n\nThe exercise habit was the easiest one. I was already running daily. And I love running, it is a hobby of mine. At 7 p.m. I stop working and start running. It's the best time for me to turn off work thoughts and be more energetic.\n\nIt was already good. But I wanted to improve this system, so I started paying a gym membership. Sometimes I run, sometimes I go to the gym. I gain variety. I don't get bored.\n\nThis _bored thing_ is something I learned about habits. It's good to be consistent and all, but the routine can be tiring. It is healthy to mix it up, try new things, and add diversity to the routine. Get bored is the first step to stop the consistency of your habit.\n\n> _\"I love the idea that the important things that happen to us continue to appear again and again in our behavior patterns until we learn to understand & confront them\"_ — Ava Huang\n\nAnd the last habit I wanted to do was _sleep well_. It is so simple: I sleep well. I have more energy. I can perform better. I have a better focus. I can do my best work. But I need to tell you. Sometimes I don't take it seriously enough. So I'm trying these three things to help me sleep well:\n\n- **Less caffeine**: I love coffee. But it drastically disturbs my sleep. Instead of 3 to 5 cups of coffee, I take 1 (or 2, one in the morning, one after lunch), and if I want to drink another cup, I get tea instead. The idea is to mimic the same feeling but reduce caffeine.\n- **Less internet**: I love internet. If I could, I would be almost all my time. But it is not really that healthy. To begin, I'm changing internet time at night to read a book. This is a habit I wanted to cultivate: read the best books - I'm looking at you, _Why We Sleep_. Instead of being in the computer at night, I read books.\n- **Build a routine**: Set the hour to sleep. Set the hour to wake up. It is not easy. Sometimes I go to sleep late, or I want to sleep more. But the idea is to have a routine. Give a chance to my body to get used to the _time to sleep, time to wake up_.\n\nWith these three things, I want to improve the quality of my sleep. All these things are addict or difficult to do. But realistic and simple enough to try.\n\nOne thing that I didn't talk about was food. This topic could be a whole other essay, but I want to illustrate part of the system I built to eat better.\n\nI'm not a nutrition specialist - and I don't intend to be - but the food is a big part of my daily life, I wanted to have a better understanding of it. So I started going to a nutritionist. I didn't go to just receive a diet plan and start this food routine. I wanted to understand food, nutrients, fat, etc.\n\n> _“Any fool can know. The point is to understand.”_ ― Albert Einstein\n\nKnowledge is important in all areas. It is the path to good decisions. In terms of food, I could have a better understanding of how to cook, what to buy in supermarkets, enough amount of food to eat in each part of the day. I didn't need to do all this. But knowledge enables me to act like this.\n\nI'm pretty amazed how healthy I'm eating now - but I'm more amazed to had confronted my laziness. It didn't take too much effort. Buy quality food, cook at home, if go eat outside, try restaurants with a better quality of food, cut soda, reduce sugar, and so on. We all can do this. (_disclaimer_: we all can do this in terms of effort, not in terms of money. I have the privilege of independence).\n\nBut I have my days of junky food too and it is totally ok. We need to be happy with our decisions.\n\nTo be mentally strong, I wanted to cultivate habits that _reduce_ toxic things in my life, not something that adds new features. And this is a powerful habit concept: a habit is not only about doing something, but can also be removing or reducing some behaviours.\n\nThis is what I wanted to focus on: remove it or reduce it.\n\nI use the internet a lot to do my work, to write, to read. So it is hard to reduce internet consumption. But I can reduce noise from the internet. I don't need to have a thousand Chrome tabs. I built a Personal Knowledge Base (PKB) to help me with that. This PKB is a work in progress project, but I know I can reduce noise from my work by just let the articles, videos, podcasts stored for the right moment. And now I know where I go to when I procrastinate. The PKB is there for this purpose.\n\nFacebook, Instagram, LinkedIn. They are all noise. I reduced drastically the time consuming using these apps. And when I use it, it is to publish my work, my writings, or book reviews. I don't miss the _consuming _ time at all.\n\nTwo things in mind:\n\n- **Mindset**: Now my mind is set to use these media to create and share, not consume. I won't lie. I consume them. But with this mindset, I reduced the consuming time.\n- **Remove or Disable**: One strategy that worked for me is to remove or disable the apps from my phone. I always used these apps when I wanted to procrastinate. As I don't have these apps in my phone anymore, I can use my procrastination time to do other things. We will dive into this topic later.\n\nTwitter is something I use constantly in my daily basis. At the same time it can be an excellent tool to express ideas, it can be a distracting social media. I was a bit overwhelmed with all the content from all the following I had plus the ads are pretty annoying.\n\nWhat if I could separate people into domains. It would help me consume content in a more focused way. I want to read about _writing_?, go to the _writing_ domain. I want to see the latest _software engineering_ topics?, go to the _software engineering_ domain. And so on.\n\nThe specific knowledge for the right moment. I built this whole idea with simple private lists, where I separate people into domains. I started the idea with all my following group. If I followed the person sometime in my life, it is because I found the account interesting. So for every following, I\n\n- Added the person to a specific list, or sometimes, multiple lists.\n- Removed from the following.\n\nThe _remove_ part was important, because I wanted to reduce the noise in my Twitter Home. And move all the content to private lists.\n\nThis way, I could declutter my Twitter Home. I only see my tweets there now. Lists are the place for domain specific content. And they have a hidden feature - it's actually not, but I see is a feature - they don't run ads in private lists. I gain focus and more focus. Only the content I _subscribe_ for.\n\nAs an introvert, I don't really like to be with people all the time. I always need my time alone and do all my things in my own way.\n\n> _Looking for progress is essentially looking for pleasure. It is the pleasure of self-image, which says, “I’m in a better place now than I was before.”_ — Kapil Gupta\n\nLike social media, people can also be toxic or just uninteresting. I don't want to be in a circle of people that just blame life about everything and don't act to change their own situation. I don't want to be in a toxic network that everybody is the victim. I want to be with lifelong learners that want progress and will build the future. People that are excited about innovation and science. Curious humans that want to learn everything and understand how the system works.\n\nBut I don't need to find these people. First I need to be one of them. This needs to be part of me and we all get together along the way. What about the toxic people? Just snooze them.\n\nFor my life, writing has been a great tool to make everything clearer. It's my daily habit. I do journaling, but not every day. The goal is mental clarity and I'm using this tool to get to this point. I write for my software engineering blog. The goal is knowledge sharing. I love this. It is my life mission to share and make knowledge open and accessible to everybody.\n\nNow I'm trying to do a different thing: long and timeless essays. I know they aren't going to be great at first, but it is a process. I'm writing mostly for me. I have so many thoughts in my mind and it is always fuzzy. I use writing as a tool to translate my thinking process into well-organised ideas, and them I'm able to communicate them in a compelling way - or I like to think that at least I have the chance to do that.\n\nThe _spiritual_ part is a work in progress. I tend to focus too much on my skills and technical things. Most of the time I miss my mental health. And this is a huge problem. I'm studying more about this topic and also doing therapy. As it is a work in progress, I want to get more time to illustrate things I'm working on and how I'm improving in spiritual terms.\n\n### Projects\n\n> _“One thing we do know: Life will give you whatever experience is most helpful for the evolution of your consciousness.” _ — Eckhart Tolle\n\nProjects enable me to be creative, try new things, and grow. For most things I wanted to accomplish, projects were an excellent tool to achieve them. If I want to try and understand new technology, I can use projects as a Proof of Concept (PoC). I can use projects to manage my digital bookshelf, what I am reading, my notes, highlights. If I see that I can improve my process, I build [tools to automate it](/publisher-a-tooling-to-automate-the-process-to-publish-my-blog-posts).\n\nI think you got the idea.\n\nI just want to stop a little moment to add some notes on _goals_. I always liked goals, but they are just _what_ and not _how_. This is why I put most of my time on systems.\n\nBut goals are very good to give me a perspective of my future. I think of goals not about what I want, but who I want to become. It is a subtle difference. Goals are also a good first step to understand why I want this or that. Do I want to work as a software engineer because of the money - and only that - or I want to be a software engineer because I really like to build things?\n\nDon't get me wrong, there is nothing wrong to earn a good amount of money, I also like this part. But I have a different vision of my _why_. When I have a deep understanding of my _why_, it gets crystal clear to me. It also builds inspiration and motivation along the way. And it is truly important to me, because I know I'm playing the long game. It's a marathon, not a sprint.\n\nI want to be remembered as a lifelong learner. A person who strives to learn and share knowledge. But not only share, but also advocate for open and accessible knowledge. It shouldn't be a privilege of few. It should be free for everyone.\n\nHere, I can talk more about how I learn and how I share and detail the system behind it.\n\n> _“I'm still learning”_ — Michelangelo\n\nI wanted to improve my whole learning process, making this a better experience and more conscious.\n\nAs I'm learning about myself and how my body and mind work, I'm designing my learning process based on those things.\n\nWhat's the best way to learn? The short answer is: I don't know. I think we don't have the right answer for every person on earth. But if I designed the learning experience exclusively for myself, I think I had a chance.\n\nTo understand what works and what doesn't, I needed to try different methods as experiments: podcast, articles, videos, courses, university, doing projects, books, etc. We have a bunch of resources and ways to learn.\n\n### What works for me?\n\n- **Podcast**: I use it as a distraction tool when commuting, running, and playing video games. I like to listen to discussions on technology and experiences in tech. I tried to use it as a learning tool but I always get distracted. So now, for example, if I want to learn React Hooks, I don't listen to a podcast to learn Hooks. I prefer reading the docs (which is pretty good!). But if I want to learn how different teams/companies scale React, a podcast can be a good fit.\n\n- **Articles**: I love learning through reading articles. I tend to collect a bunch of different articles on one topic and read all to have a deep understanding of different perspectives. When I was learning JavaScript concurrent model with Promises, I got about 10 different articles to go deep in this subject. It's also good for spaced repetition in my learning process. For example, if I want to learn JavaScript Promises, I read the first 3 to 4 articles in the first place and do some experiments (a.k.a. practice, code!). In the following days/weeks, I read other articles to have other perspectives or to just remember the concept.\n- **Videos & Courses**: When I started learning to code, videos were a big part of my learning process. As a visual person, I like to understand the concepts by seeing the code. It was also good because I watched a lot of tutorials. But nowadays, I don't watch a lot of videos, I tend to watch tech video as an entertaining+educational content like fun fun function and Joma Tech. Specific for courses, I tend to like more educational platforms like Udacity that mixes theory (concepts) and practice (coding).\n- **University**: So let's skip this part... kidding! Hmm.. I'm a bit skeptical about universities. I tried it, but I realized that the \"way of learning\" was not the best for me. I didn't fit in. A class of 30 people passively listening to a professor for 40 minutes. I like to be active, I like to question, I like to do experiments and practice. It didn't work for me. Maybe it works for you. This is why be self aware is so important.\n- **Projects**: I love doing project-based learning. I'm doing a lot of this recently. When I was learning functional programming, I tried many different projects (PomoLambda, Luhn, Year Progress Bar). When I was learning React Hooks, I did some experiments to understand the concepts by building a mini pokemon \"game\". When I was learning JavaScript concurrent model with Promises, I also tried different things. When I wanted to fix my struggles with CSS, I created the UI Challenges project. I think you got the idea.\n- **Books**: Books are a big part of my learning process. But I'm a slow reader. I like to take notes, organize my thoughts, and understand the details. And I know that I'm too curious about a lot of different things, so the challenge to me is to keep it up, to be consistent, and finish the books. Having this in mind, I'm trying something different: reading 3 books simultaneously. A biography or something about self-development (Mastery). A technical one (SICP: Structure and Interpretation of Computer Programs). And a career one (The Effective Engineer). This is how it's working for me. ¯\\(ツ)/¯\n\nSo here we have a ton of resources and ways of learning. Basically my mindset is like a laboratory. Make experiments, try new things. But understanding what works for me. Asking myself how do I learn best? Which resources I really engage in and get the most of it? Keep in mind it doesn't have any rules. Actually, you make the rules. You understand yourself, you understand the resources, and make the decision to keep it up with the best way of (your) learning.\n\n> _“Be curious. Read widely. Try new things. What people call intelligence just boils down to curiosity.” _— \\_ \\_Aaron Swartz\n\nNow I divide my time in my three main resources: articles, projects, and books.\nI have my own time to keep reading books, as I told you my experiment to read three books at the same time with different topics. I read daily now, like 30 minutes to 1 hour. My goal is to make it consistent.\n\nArticles I read once in a while, when I want to go deep in a topic, understand the theory and the concepts. I like to do a linked list of articles (or maybe a priority queue) and organize by topics to study later.\n\nThe projects are the resource I spend most of my time. This is the way I practice. The way I get the concepts I learn and make it live. The way I do experiments. The way I think deeply about the concepts.\n\nWith all these resources I can build a _learning path_. It's basically a linear path with each resource linked to each other. This way I can understand what is the next step (read one more article or do a project?). And even though the path is linear, it doesn't have rules, it's flexible to change. The whole idea is to give me visibility of the learning process.\n\nWith everything I read, watch, and learn, I like to add notes and document my experiences. These notes are the first draft to write the next blog posts. I have a blog roadmap on Notion. In this board, I have the _Draft_ column, where I can add all the drafts I'm working on. After compiling all the notes in the draft, I can start writing the post based on these ideas.\n\nWith the notes, I try to remove the friction to start writing. As I already have all the notes, ideas, and bullet points in the draft, I just need to reorder and organize. Then I review, refine, and publish it.\n\nI wanted to make this process simple to focus on sharing knowledge. This is the main goal. I want to document my learnings. The blog is my voice on the internet. Writing is one of my passions. And I like it more because it is an excellent tool to distribute knowledge for everybody.\n\nIn the future, I want to try different media. Do livestream on Twitch, Youtube videos, podcasts, and so on. But now I want to focus on my writing.\n\nThese days I came across an interesting video about [_Should You Specialize or Be a Generalist?_](https://www.youtube.com/watch?v=wCPbPMRNnvk)\\_ \\_ by Tim Ferriss. He talks about the idea of a Specialized Generalist. Combine a handful of skills that are rarely combined.\n\nI also read an interesting idea from the book Originals where he talks about the concept of building a unique combination of broad and deep experiences and how this is critical to creativity. He tells about this study:\n\n> _\"In a recent study comparing every Novel Prize-winning scientist from 1901 to 2005 with typical scientists of the same era, both groups attained deep expertise in their respective fields of study. But the Novel Price winners were dramatically more likely to be involved in the arts than less accomplished scientists.\"_ — Adam Grant\n\nReading and watching these interesting ideas, I'm also trying to broaden my skills. I always have a bunch of different hobbies. But now I want to double down on them and get more time to dedicate to these hobbies.\n\n- **Sports**: I like to run and table tennis. I really want to start tennis in the near future. I also want to get back to play [Taiko](https://www.youtube.com/watch?v=ojhbnndvkBI) as the old days of my life. (Taiko could be in all three different categories, it is an art, a sport, and music).\n- **Arts**: I always love drawing. It was my first hobby as far as I remember. I don't do this every single day, but it is something I really like. In the future, I will definitely learn Sumie painting and Shodo.\n- **Music**: 10 years ago I started learning to play guitar. But I stopped for a long time. This year I bought a guitar, an electric guitar, and an amplifier. I do my guitar practices 5 times a week. To give you an idea, I have a very wide taste for music. At the same time I want a piano do learn classical music, I will buy a launchpad to do some LoFi music with my guitar.\n- **Languages**: Languages are a beautiful thing. I came across a TED talk, where Lera Boroditsky tells how language shapes the way we think. It opens a whole new universe of ways of thinking. It's also great because it is so aligned with the culture, the people, and the nation. One of my goals was to get better at English, so I always forced myself to write all my essays in this language. I started learning Japanese again. After my Japan trip, I got passionate about the culture, the people, and the language again. If I get some time, I want to learn other Asian languages like Korean and Thai.\n\nThese are what I'm currently doing. But I have a bunch of different things I want to do. Videography and Photography are a thing that I want to try and master in the near future.\n\nFirst, I do because I like it. They are my hobbies. But second, because I feel more creative, it's like using my brain in different ways.\n\nIt's a social construct when society puts you in a _\"box\"_. If you are an engineer, you are good at STEM but don't know anything about arts and humanities. For me, it's bizarre that people believe in this. I see everything connected. People like to add non-sense boundaries. But I don't care about this status quo. I will do my own thing, the way I want.\n\n## Final Thoughts\n\nI'm learning a lot with all this process. I want to add my final thoughts by pointing out some learnings I had along the way.\n\n- Self awareness is so important. Take a moment to reflect on your life and you as a person. Meeting new interesting people is awesome. But know yourself in depth will change your life. There are so many ways to get it works, but you probably have your own way. The way that works for you.\n- Simplify as much as possible. Don't try to do all things at the same time. Start simple. It will make so much easier to keep going and improve along the way. Simplicity is the goal.\n- Use goals as a direction. But build systems and habits to accomplish them. Goals are about _what_. Systems are about _how_.\n- Think deeply about your own life and who you want to become. You won't have all the answers in the first place. It is a long journey, learn through the process.\n- Habits are also about removing or reducing. Think which things in your life are toxic. People, environment, city, work, projects, social media. Snooze things that are not healthy for you.\n- Mental clarity is so important to me. It gives me, well, clarity. Writing, journaling, sleeping well. These are the things that make my mind clear and rest to perform my best work.\n- If you want to play the long game, you need to start focusing on your health. Spiritual, mental, and physically healthy. Learn about it. Knowledge is the first step to great decisions.\n- Doing other hobbies - that are not related to my work - makes me so creative and with a broad experience.\n- Projects are a good tool to learn. The blog is a great way to share knowledge.\n\nI hope you had a great time reading this piece.\n",
  },
  {
    url: '/dx-and-software-maintainability-in-frontend-engineering',
    title: 'DX & Software Maintainability in Frontend Engineering',
    content:
      'In the last quarter, I was assigned a big project to work on. Our main goal was to understand the biggest problems and technical challenges we have in our current frontend application and build a thorough vision of how we can move forward.\n\nI\'ve been doing a lot of work on frontend engineering and backend for frontend (BFF) applications and I had an accumulated experience of what problems I could work on. But before start executing (like crazy!), I wanted to make the goal clear and set principles for that project.\n\n## Goals\n\n### Improve and enable better user and developer experience\n\nThis role gave me a lot of autonomy to execute the project in my own way. I liked the idea of balancing execution (improve) and exploration (enable).\n\nDX and UX are one of the core principles I followed to act on the most impactful challenges. Improving DX makes our engineers move faster, increase their productivity to work on business projects, and ship products without (much) friction. Improving DX also can enable better UX as engineers are moving fast to ship product features, find bugs and easily fix them and focus more on the business part of coding.\n\n### Build a vision and how we can move forward\n\nFor this specific project I worked "alone", I didn\'t have a squad, but a group of people I could use their support. Thinking about that, it would be impossible to organize my time to explore the problems and technical opportunities and execute everything.\n\nBig challenges require time and effort. As people in the tech industry usually say: "Software development is a team sport". My goal was not to get some time to solve all problems but to show possible solutions, understand the effort needed to execute these solutions, and build a vision to show how we can move forward.\n\nThe vision can be built in a documentation format. But part of my goal was also to create space to discuss, build the culture, and enforce the ideas in our actions while building software.\n\n## Principles\n\n> "Engineering principles realize our values in concrete concepts and guide everyone in a fair and structured way." - Ilya Kozlov\n\n- Root for simplicity\n- Work on what matters\n- Share knowledge & Transparency\n\n> "Simplicity is prerequisite for reliability." - Edsger W. Dijkstra\n\nAll these principles are interconnected to the work I did in this project. To reduce the system\'s complexity, I needed to always think of the simplest way to (re)build the software. When striving for simplicity, we ease our understanding of the software, making it easier to maintain, because it\'s simpler to change, debug, and refactor.\n\nSo, simpler systems have a real impact on the developer experience and productivity. And this is really connected to the "work on what matters". I could start refactoring all code I wanted, but it could have little or no impact on the developer\'s productivity. Focusing on the developer experience that enables better user experience was my goal and a great variable when thinking in prioritization of what I should work on.\n\nAs a "one-person team", I understood that if I really wanted to have a real impact in the organization, I needed a better way to scale the knowledge and the vision. From day 0, I had a Notion page representing the project with everything I was doing documented: backlog, meeting notes, goal & principles, weekly report. Transparency and accessibility were part of the vision I wanted to build with this project together with incremental knowledge sharing throughout the entire quarter.\n\n## Starting up\n\nBefore start working on this project, I worked on other 4 different products at QuintoAndar. They were all different in terms of business contexts and clients, but very similar when it comes to tech stack and technical challenges.\n\nOver time, I noticed the similarities and started to document the same technical debts, [reimagining future architectures](/react-hooks-context-api-and-pokemons), [building abstractions](/building-an-abstraction-for-react-internationalization-messages) that could be reused across the organization, proposing new ways to handle [data contracts](/thinking-in-data-contracts) and [consistent state management](/consistent-state-management-in-react-and-redux), build [tools to improve DX](https://github.com/imteekay/laziness), etc.\n\nThey were all frontend engineering challenges I encountered on my way by building different products. It was a good starting point to have these initial ideas in my backlog to start exploring. But it was very limited.\n\nI also start sketching the engineer\'s workflow:\n\n<img src="/dx-and-software-maintainability-in-frontend-engineering/dx.png">\n\nFrom getting the Jira ticket to deploy and taking a look at the monitoring system, we had a lot of opportunities to improve and make the dev experience awesome. It\'s great to have the big picture\'s vision, but I also wanted to focus on another powerful tool: listening!\n\n> "Listening through questions is a form of active listening with the goal of understanding the rest of the room\'s perspectives" - [@lethain](https://lethain.com/learn-to-never-be-wrong/#:~:text=Listening%20through%20questions%20is%20a,to%20ask%20their%20own%20questions.&text=They%20sharpen%20the%20conversation.)\n\nTo improve the developer experience, I needed to understand the real problems the engineers were facing, so I scheduled a brainstorming meeting. In this meeting, I explained my project and shared a [Metro Retro](https://metroretro.io/) board to write down all issues our application had at that time, what was the bad DX we had, and doubts related to this application (e.g. how do we handle data fetching?; how do we handle error handling?; how do we know if our application is health?).\n\nWith all these ideas - actually, "issues" - I could organize, improve, and prioritize my backlog.\n\nBesides those issues, one thing that came to my mind was that I (and the team) needed to be able to refactor a lot of code to improve the software quality and pay tech debts.\n\nTo enable refactoring, I added 2 "tasks" to my backlog:\n\n- Frontend Testing: how should we test frontend & add tests to make our team more confident when deploying new features.\n- App Monitoring: as an organization, we have many different tooling that could help us monitor our application. I wanted an easy way to answer three questions:\n  - Is the application health?\n  - How to use tools to help us debug bugs?\n  - I deployed a new feature, where should I look at?\n\n### Tests\n\n> "Quality must be enforced, otherwise it won\'t happen. We programmers must be required to write tests, otherwise we won\'t do it." - Yegor Bugayenko\n\nTogether with the Quality Assurance team, we add a lot of integration tests using Cypress to the most important workflows in the PWA. Running these integration tests in our CI for each Pull Request helped us a lot in having the confidence to ship features, refactorings, and dependencies upgrades.\n\nI was also working on some studies related to component tests with the testing-library. Our codebase was heavily using Enzyme for most of the tests we have for React components. As we wanted to test more user behavior instead of the component structure, we started to replace Enzyme and add testing-library kinds of tests for new features and components.\n\nAs we didn\'t have much experience nor knowledge of the best way of how to use it, I started learning it, writing tests as examples, document all my learning, and improving our test setup.\n\nI started writing simple [recipes to use the testing-library](/basic-recipes-for-react-testing-library) and about [testing-driven development in React](/tdd-functions-and-react-components). Then I wrote tests for different use cases: query elements, expecting content, user behavior (click, focus, etc), custom hooks, better setup for components using redux.\n\nThe idea behind this was to make the tests very easy to implement and improve all the pain points. This study\'s final result was a set of tests as examples and a wiki in our Github project to guide `How to test the frontend` that covers integration tests, custom hooks, component tests, using the redux store, etc.\n\n### Monitoring & Observability\n\n> "Originally the feedback loop was you would break stuff, people would yell at you, and then they would praise you when you fixed it, but then the Internet became a thing and our systems got more complicated.”\n\nOur old way to deploy was creating Github release tags. With all these tests I mentioned earlier, we had the confidence to change the release tag to `deploy on PR merge`. Now we are running full CI/CD.\n\nFor the monitoring systems, we had a lot of different possibilities, but we are using mostly Sentry to make the most out of the error tracings to find bugs, debug, and fix them. We are also using Instana to keep up with the API endpoints the PWA uses. Together with the product manager, we consistently take a look at the Amplitude trackings to make sure our users can use our product\n\nDisclaimer: Amplitude is definitely not a tracing tool, but it\'s nice to keep up with the user\'s behavior and see some weekly patterns to find issues.\n\nOne of our users\' worst experiences in our application is when they are using the product and a drawer (our error boundary) shows that they had an error.\n\nTo make it distinct in the Sentry logs, we added the "fatal" level for these errors that occurs and trigger the Error Boundary (drawer). When shipping a new feature, we can look at this kind of error by filtering by level `fatal`.\n\nNow we have toolings to help us verify the health of our systems. But this project aimed to improve the developer experience and I wanted to reduce the cognitive load even more, so I created a Github wiki with all the important links for the Sentry, Instana, and Amplitude dashboards.\n\nBefore, the engineers would need to open each dashboard and make their own queries, but now it\'s easy to access the most important metrics we want to see: open the Github wiki and they are all there.\n\n## Foundation & Tooling\n\n> "We want everything we offer to be easy to adopt. The simpler a tool or workflow is to adopt and use.. so that our users have a great out-of-box experience." - Lei Zhang\n\n### Formatting\n\nThe codebase lacked formatting consistency. We were using only eslint to lint the code and break the build process if it finds any lint error. But each engineer has their own code style, so the codebase starts to become very inconsistent.\n\nNow we are using a [code formatter called Prettier](https://prettier.io/), it\'s an opinionated formatter, and all our codebase and PRs are consistent. We can focus on the business part of development and code reviews instead of being distracted by the format issues.\n\nWe also had a problem that we pushed code to the github remote and the eslint break the build. To avoid breaking only in the build process, we break it as fast as possible to have no need to wait for the CI build.\n\nNow we are using [husky](https://github.com/typicode/husky) to run eslint in each commit\'s changed files and format with prettier in the pre-commit. It helped us be more productive and fix things faster and before pushing to github.\n\nI had one learning experience while adopting Prettier for legacy software to run prettier. My first idea was to scale the prettier use for each PR, but it was not a good experience because sometimes the engineer only needs to fix a line of code, but prettier would format the entire file and make it really difficult to code review.\n\n### PR Template\n\nThe Pull Request template was a bit outdated so I did a revamp to have only the necessary things to create a new PR. It\'s not required, but we have a description section, type of change, a checklist to help engineers be aware of all technical details we need to take a look at before shipping a new feature, and screenshots if needed.\n\n### Performance tooling\n\nMy latest project was very related to web performance (I also wrote about this experience: [Optimizing the Performance of a React Progressive Web App](/optimizing-the-performance-of-a-react-progressive-web-app)). But I was only using lab metrics. I wanted to start collecting metrics related to real users as well. This would enable us to see if we have any performance issues for our users and tackle that problem.\n\nWe have an internal tool to handle the RUM (Real User Metrics), so I set up the tooling our PWA to start collecting these metrics. And also started to measure the navigation between pages. One of our main users flows is house registration, so adding navigation metrics would have a huge impact if we find any issue and fix it.\n\n### Dependencies\n\n> "We strive to maintain minimalism and clarity to drive development to completion." - Suckless Philosophy\n\nMinimizing [software bloat](https://www.youtube.com/watch?v=5kk_Ng7weuE) and rooting for simplicity and minimalism in software was my way to improve the dev experience. In the JavaScript ecosystem, it is very common to have a dozen different libraries that do the same things and other dozens that are borning daily. It\'s also usual to have many packages in a JavaScript project, even if it isn\'t really used or replaced with a smaller library or implemented in-house.\n\nI started to explore all the dependencies, which ones I should take a closer look at, which ones I could upgrade and would enable new possibilities for us, and which ones I could just remove.\n\nI could remove a ton of libraries that were not actually being used and it also pointed me to some old and dead code, they were basically features that were not being used by users or dead components that were there in the codebase. Overall, I could remove **10,200 lines** of code.\n\nSome other big packages like webpack, babel, and immutable were in my backlog to plan how I could upgrade everything. At that time, we had a team working close to the immutable removal (we\'re striving to not use any library or [immer](https://github.com/immerjs/immer) if an engineer prefers), so I let this library to their team to work on. And we also had a team experimenting with NextJS in some projects, so bumping webpack and babel could not be worthy, so I make this task less of a priority at that time.\n\nOther libraries that upgraded would improve our dev experience and enable us to use interesting APIs like TypeScript and react-redux.\n\nBumping react-redux enabled us to use hooks together with redux, removing all the `mapStateToProps` and `mapDispatchToProps` boilerplates. Even though we are moving away from Redux (testing out react-query for server cache and hooks for client state), the codebase is heavily using it to handle state. Using hooks together with Redux became simpler to handle state and reduced the need for a lot of boilerplate code.\n\nWe don\'t use TypeScript heavily in our codebase yet, but upgrading it to 3.9 was easy and enabled us to use any new features from it mainly in the interface between our frontend and our backend for frontend (BFF).\n\n## Work on what matters\n\n> "To build scalable and maintainable frontend systems, we need a strategy for managing and organizing the complexity that exists in the user interface." - Safia Abdalla\n\nListening to the team that was heavily working on this codebase, I could understand some parts that had a lot of complexity that I could work on to make simpler and improve the developer productivity and experience.\n\n### House Registration and Edition complexity\n\nIn this codebase, we have the house registration flow for landlords, but the code modules were reused for the edition flow as well. In the beginning, it started with good intentions to reuse the same abstraction, but over time it became more and more complex and coupled.\n\nThe number of `if` statements were the first thing that pointed me to this problem. The second was related to the consistency of bugs that was happening in this flow. With the increase of complexity, the tests (manually and automated) didn\'t cover everything, it was very easy to add features that could break any part of this flow in the product.\n\n> "With great complexity comes great bugs and even greater maintenance burdens." - Safia Abdalla\n\nSeparating the modules and reusing only the components and some auxiliary helpers would reduce the complexity of each module. I created a migration strategy document organized in "Problems", "Architecture", and the "Plan" to execute it.\n\nBringing clarity to the team about the vision and how we could solve this problem was the first step to execute the migration. Making everyone understand the problems and the steps to refactor help scale the migration. Every person that would touch that code, could look at it with new eyes and refactor it if possible.\n\nWe are still in the process to finish the refactoring, but now we have an optimistic vision that we\'ll incrementally solve this problem and improve the developer experience.\n\n### DDD Architecture\n\nIn frontend applications, it\'s not that common to follow Domain-Driven Design, but in our context, we started to rethink our applications and how we could make them more organized and easy to reason about.\n\nThe current state of our PWAs is using `components` and `containers` folders to organize shared components and pages. Some helper functions were in big `utils` files or folders, which became difficult to find and reuse.\n\nThe first step was to understand what were domains\n\n<img src="/dx-and-software-maintainability-in-frontend-engineering/ddd.png">\n\nThis was the first draft of the domain I designed looking at the product and the codebase. For each domain, I added a simple description to make it clear to everyone what was each one.\n\nThe same way I did for the registration and edition modules split, I did for this DDD Architecture: create a document to illustrate the problem I was solving, the vision, and the strategy to make it happen.\n\nTo make it very clear, I mapped each file/folder in the codebase to the new architecture in the document. It was not an exhaustive mapping, but it brought a lot of clarity to start refactoring the codebase.\n\nAmong all explorations I did, this is the one that we could really do incrementally over time without the need to stop everything and focus on that for 2 weeks. This is why I started to refactored it to bring some examples on how to it and scale the knowledge to every engineer in the team.\n\n### Interface between backend and frontend\n\nOne of the goals for the future is to have a layer between the PWA and the OwnerappAPI to [make the data consistent using TypeScript](/thinking-in-data-contracts).\n\nWe are experimenting with TypeScript in our Backend for Frontend (BFF) to have better and explicit types for each payload. And also in the frontend. [I\'ve been studying TypeScript](/a-mental-model-to-think-in-typescript) and got to understand the real benefits of applying it to the [state part of the frontend application](/consistent-state-management-in-react-and-redux), but also in the [UI part](/ux-studies-with-react-typescript-and-testing-library) by replacing the `PropTypes` with "compile-time" types.\n\nIt\'s an initial thought yet, but an idea is to have a common repository of types to reuse it between the PWA and the BFF. With this package of types, we can make the interface really consistent. But at the same time, we can add a level of bureaucracy that makes us slower in shipping features. It\'s a tradeoff that we need to think about before implementing it. But this is just an idea for the future.\n\n### Owner Landing Page DX Issue\n\nTo give context, we have a different kind of development when talking about our landing pages. We use React to develop them, but we have tooling that removes the react code and library in build time.\n\nEvery time we want to test if the landing page is correct - in terms of UI and functionality - we need to run the build process or push the new feature to the test environment, which takes about 18 minutes. Even though we have a "static" landing page without React, the developer experience was suboptimal.\n\nThis was actually an issue brought by all engineers that worked in this codebase last quarter. We knew the pain that was to build new features for landing pages.\n\nIt started as an exploration to think about which solutions I could come up with. We could work with a static site generator like [11ty](https://www.11ty.dev/), but we only have a design system for React application. This would increase the complexity to rebuild the entire landing page and make space to design inconsistencies.\n\nAnother approach was to use NextJS in the project as the default framework and serve the landing pages with SSR. The last approach was to split the landing page from the main application and use NextJS from scratch. This last approach was very interesting for us because the landing page is a living thing that many teams can work on and it shouldn\'t be coupled with the rest of the application. This strategy would also decrease the build time for each PR and production deployment as we didn\'t need to run the tests, lint, and build tool for the landing page in the application\'s CI build.\n\nIn this exploration, I also created a document with all possible solutions, the effort and time we needed to rebuild this landing page, the tradeoffs, and the steps for each solution.\n\n### Error Handling & Data Fetching\n\nMost of the errors we handle for each request are by using a high order component called `withDialogError` to provide and open an error dialog when the request returns an error.\n\nUsing this approach made it very coupled to the container and Redux because of the way we need to pass data down to the high order component.\n\nWhen we don\'t handle errors for a given request, we don\'t have the data, and it can get us the famous:\n\n```bash\nUncaught TypeError: Cannot read property \'a\' of undefined\n```\n\nWith our `ErrorBoundary`, it gets this exception and opens a drawer kind of page showing a friendly (but generic) message about the current error. Looking at the fatal errors in Sentry, I understood the correlation (and sometimes causation) with the missing error handling.\n\nI started to redesign the way we handle the errors to remove all the Redux boilerplate and how the error dialog was coupled to the Redux container. Instead of using a high order component, it would be easier to reason about if it was just a declarative component that we add to the page and it receives the correct props to open and show the necessary content and action buttons.\n\nTo make the error dialog works properly, I needed to be able to always provide if it is open or not (basically an `isError` from a request-response), the content (specific for each request/page), and the possibility to refetch/re-request with an action button.\n\nThis discovery made me rethink how we handle data fetching - today using Redux - and I started a new exploration looking for new ways to do data fetch stuff, state management, and improve the developer experience of handling errors.\n\n<img src="/dx-and-software-maintainability-in-frontend-engineering/error-handling-and-data-fetching.png">\n\nI started by designing the best experience when it comes to data fetching and then I thought of an abstraction to be able to use it in all codebase. But instead of implementing the best abstraction, I started to search for a solution. Well, data fetching is a common challenge in all kinds of frontend applications and we actually have nice alternatives in the community ([react-query](https://react-query.tanstack.com/), [swr](https://swr.vercel.app/)).\n\nI created some Proofs-of-Concept (PoC) to handle use cases using react-query. The result is pretty interesting. The way react-query handles cache and revalidation and separates client state and server cache is pretty interesting and it also enables us to rethink state management in our frontends. It could be the way we handle data fetching in our PWAs and I started to share this exploration across the organization.\n\n## Scale & Culture\n\n> "If You Want to Go Fast, Go Alone. If You Want to Go Far, Go Together."\n\nWhen my manager talked to me about this project, I realized it was a technical leadership role. I was given the opportunity and a lot of autonomy to explore different technical and product issues, understand the pain points that made engineering processes slower and build a vision to make the team move forward.\n\nAs I wrote in the beginning, sharing knowledge and transparency were principles I wanted to follow in the entire project. I have a Notion page with everything about the project: roadmap, backlog, goals & principles, documented discoveries, meeting notes, etc. Everything there, open, and easy to access and find information.\n\nHave an open page to give visibility to the entire organization was the first step, but I also wanted to be very intentional about the project. I had the opportunity to talk about what I was working on 3 times a week in the team\'s daily meeting, I had weekly engineering syncs with the engineering leadership.\n\nFor each exploration I did, it was all documented and shared with the team. With the draft idea, I could call a meeting with engineers to explain the exploration, the problem I was working on, and open for discussions and questions.\n\n> "The act of asking good questions with good intent opens up a conversation, creating space and safety for others to ask their own questions." - Will Larson\n\nWith these meetings, I could make three things happen:\n\n- Give visibility of the problem, possible solutions, and a vision.\n- Give space for them to ask or share opinions and be part of the vision.\n- And refine the solutions and vision.\n\nAs Kevan Lee said: "Transparency starts as a mindset change". I wanted to be intentional in terms of transparency and give them space and accessible documents were the ways I found to make them part of the whole process.\n\n## Final words & Resources\n\nI learned a lot throughout this project. It was for sure one of the most challenging projects I did in my career and I had a lot of fun studying, learning, applying my knowledge, thinking in strategy, communicating as a leader, and enjoying the opportunity to work on developer experience and software maintainability.\n\nThroughout the project, I used some resources that I want to share with you all. It\'s not a prerequisite to manage a project like this, but these resources helped me a lot.\n\n### Software Maintainability\n\n- [Simple made easy](https://www.infoq.com/presentations/Simple-Made-Easy/)\n- [Building Resilient Frontend Architecture](https://www.youtube.com/watch?v=TqfbAXCCVwE)\n- [React Query: It’s Time to Break up with your "Global State”](https://www.youtube.com/watch?v=seU46c6Jz7E)\n- [On composable, modular frontends](https://increment.com/frontend/on-composable-modular-frontends/)\n- [On choosing independence… for a software developer](https://www.crthomaz.com.br/posts/independence.html)\n- [Surviving death by complexity](https://www.youtube.com/watch?v=EeV2hVtKetk&ab_channel=BrazilJS)\n- [Embracing simplicity in your engineering team](https://leaddev.com/technical-direction-strategy/embracing-simplicity-your-engineering-team)\n- [Scaling held knowledge to unblock teams and untangle software complexity](https://leaddev.com/technical-direction-strategy/scaling-held-knowledge-unblock-teams-and-untangle-software-complexity)\n- [Implementing a plan to clean up technical debt](https://leaddev.com/legacy-technical-debt-migrations/implementing-plan-clean-technical-debt)\n- [Maintaining speed while minimizing risk](https://leaddev.com/series/maintaining-speed-while-minimizing-risk)\n\n### Developer Experience\n\n- [What is Developer Experience (DX)?](https://css-tricks.com/what-is-developer-experience-dx/)\n- [An Introduction to Developer Experience (DevEx, DX)](https://humanitec.com/blog/developer-experience)\n- [A Conversation about Developer Experience with Lei Zhang](https://www.techatbloomberg.com/blog/conversation-developer-experience-lei-zhang/)\n- [Why Every Software Team Should Have a Developer Experience Owner (DXO)](https://loft.sh/blog/why-every-software-team-should-have-a-developer-experience-owner-dxo/)\n- [Engineering Productivity: Measure What Matters](https://nemethgergely.com/blog/engineering-productivity)\n- [Continuously Integrating Distributed Code at Netflix](https://www.youtube.com/watch?v=Gw6QWlreY0w)\n- [The Importance of a Great Developer Experience](https://medium.com/nick-tune-tech-strategy-blog/the-importance-of-a-great-developer-experience-40567abc0e9a)\n- [Measuring and improving the efficiency of software delivery](https://leaddev.com/technical-direction-strategy/measuring-and-improving-efficiency-software-delivery)\n\n### Engineering Leadership\n\n- [Engineering principles: putting our values into practice](https://medium.com/taxfix/engineering-principles-putting-our-values-into-practice-4bbc140d4fa2)\n- [Suckless Philosophy](https://suckless.org/philosophy/)\n- [Thriving on the Technical Leadership Path](https://keavy.com/work/thriving-on-the-technical-leadership-path/)\n- [StaffEng project](https://staffeng.com/)\n- [Staff Engineer book](https://gumroad.com/l/staff-engineer)\n- [Learn to never be wrong](https://lethain.com/learn-to-never-be-wrong/)\n- [Where to Start](https://keavy.com/work/where-to-start/)\n- [Building Bridges as a Technical Leader](https://keavy.com/work/building-bridges/)\n- [Technical Research and Preparation](https://keavy.com/work/technical-preparation/)\n- [The reality of being a Principal Engineer](https://leaddev.com/career-paths-progression-promotion/reality-being-principal-engineer)\n- [What does sponsorship look like?](https://larahogan.me/blog/what-sponsorship-looks-like/)\n- [What a Senior Staff Software Engineer Actually Does - Part 1](https://medium.com/box-tech-blog/what-a-senior-staff-software-engineer-actually-does-f3fc140d5f33)\n- [What a Senior Staff Software Engineer Actually Does - Part 2](https://medium.com/box-tech-blog/what-a-senior-staff-software-engineer-actually-does-d55308fcdd41)\n- [Defining a Distinguished Engineer](https://blog.jessfraz.com/post/defining-a-distinguished-engineer/)\n',
  },
  {
    url: '/fun-with-dates',
    title: 'Fun with Dates',
    content:
      "As an ex-Rubyist, I always liked to work with Ruby dates (mental note: not the timezone part). I liked the human way on how Ruby and Rails provide methods to handle the Date object.\n\nIn Ruby, we can get the current date by doing:\n\n```ruby\nrequire 'date'\n\nDate.today # #<Date: 2020-04-05 ((2458945j,0s,0n),+0s,2299161j)>\n```\n\nThis is pretty cool! I can send a simple message to the Date object \"hey, provide me the `today date`\" by calling the `today` method.\n\nOr simply get the `year`, `month`, `day`.\n\n```ruby\ndate = Date.today\ndate.year # 2020\ndate.month # 4\ndate.day # 5\n```\n\nUsing Rails, it is also possible to call the `yesterday` method.\n\n```ruby\nDate.yesterday\n```\n\nRails also provides other interesting APIs: `beginning_of_month`, `minutes.ago`, `days.ago`.\n\nSo after a long time with Ruby and Rails, I started using JavaScript more and more. But the JavaScript Date object was really strange for me. I wanted to use all the Ruby/Rails date APIs but in JavaScript and Typescript.\n\nI didn't want to monkey patch or build new methods in the JavaScript Date object. I could just provide some simple functions and handle the Date internally.\n\n## Dating dates\n\nFirst things first: I wanted to better understand the Date object. How do we create it?\n\n```typescript\nnew Date();\n```\n\nBy simply instantiate the Date object. We get the representation of `now` (the current date).\n\nThe other APIs I need to try was: `getDate`, `getMonth`, and `getFullYear`. These are all methods to handle the date.\n\n```typescript\nconst day: number = now.getDate(); // 5\nconst month: number = now.getMonth(); // 3\nconst year: number = now.getFullYear(); // 2020\n```\n\nWe could experiment with a whole bunch of other methods here, but I think we are good to move to the next part.\n\n## Fun with dates\n\nIn this part, we will build functions! I wanted to try creating this API:\n\n- day\n- month\n- year\n- today\n- yesterday\n- beginningOfDay\n- beginningOfMonth\n- beginningOfYear\n- get(1).dayAgo\n- get(2).daysAgo\n- get(1).monthAgo\n- get(2).monthsAgo\n- get(1).yearAgo\n- get(2).yearsAgo\n\n## day, month, and year\n\nIn this case, we provide a date and it will return the day of this date we provided.\n\n```typescript\nconst day = (date: Date): number => date.getDate();\nconst month = (date: Date): number => date.getMonth();\nconst year = (date: Date): number => date.getFullYear();\n```\n\nAnd we can use it like:\n\n```typescript\nconst now = new Date();\n\nday(now); // 5\nmonth(now); // 3\nyear(now); // 2020\n```\n\n## today and yesterday\n\nWith `today` function, we could just return the `new Date()` and we are good. But this returns the representation of `now` with \"time\" included.\n\n```typescript\nnew Date(); // 2020-04-05T18:58:45\n```\n\nBut it would be great to return the beginning of the day. We could simply pass the day, month, and year to the `Date` and it will generate this for us.\n\n```typescript\nconst today = (): Date => {\n  const now: Date = new Date();\n  const day: number = now.getDate();\n  const month: number = now.getMonth();\n  const year: number = now.getFullYear();\n\n  return new Date(year, month, day);\n};\n```\n\nGreat. The `yesterday` function would work very similarly. Just subtract the day and we are good to go.\n\n```typescript\nconst yesterday = (): Date => {\n  const now: Date = new Date();\n  const day: number = now.getDate();\n  const month: number = now.getMonth();\n  const year: number = now.getFullYear();\n\n  return new Date(year, month, day - 1);\n};\n```\n\nBut what happens when we subtract the day if the day is the first day of the month?\n\n```typescript\n// date to handle\nnew Date(2020, 3, 1); // 2020-04-01\n\n// when subtracting the day: from 1 to 0\nnew Date(2020, 3, 0); // 2020-03-31\n```\n\nAnd what happens if it is the first day of the year?\n\n```typescript\n// date to handle\nnew Date(2020, 0, 1); // 2020-01-01\n\n// when subtracting the day: from 1 to 0\nnew Date(2020, 0, 0); // 2019-12-31\n```\n\nYes, JavaScript can be pretty smart too!\n\nWith these two new functions, we can also refactor the logic to get the separated date into a separate function.\n\n```typescript\nconst getSeparatedDate = (): { day: number; month: number; year: number } => {\n  const now: Date = new Date();\n  const day: number = now.getDate();\n  const month: number = now.getMonth();\n  const year: number = now.getFullYear();\n\n  return { day, month, year };\n};\n```\n\nLet's improve this! This returned type could be a Typescript `type`.\n\n```typescript\ntype SeparatedDate = {\n  day: number;\n  month: number;\n  year: number;\n};\n```\n\nLess verbose now:\n\n```typescript\nconst getSeparatedDate = (): SeparatedDate => {\n  const now: Date = new Date();\n  const day: number = now.getDate();\n  const month: number = now.getMonth();\n  const year: number = now.getFullYear();\n\n  return { day, month, year };\n};\n```\n\nIn this case, we are always returning the `day`, `month`, and `year` attributes of the current date. But what if we want to pass a different date? A new argument to the rescue:\n\n```typescript\nconst getSeparatedDate = (now: Date = new Date()): SeparatedDate => {\n  const day: number = now.getDate();\n  const month: number = now.getMonth();\n  const year: number = now.getFullYear();\n\n  return { day, month, year };\n};\n```\n\nNow we have a function that can receive a new date, but if it doesn't, it just uses the default value: the representation of `now`.\n\nHow does our functions `today` and `yesterday` look like now?\n\n```typescript\nconst today = (): Date => {\n  const { day, month, year }: SeparatedDate = getSeparatedDate();\n\n  return new Date(year, month, day);\n};\n\nconst yesterday = (): Date => {\n  const { day, month, year }: SeparatedDate = getSeparatedDate();\n\n  return new Date(year, month, day - 1);\n};\n```\n\nBoth functions use the `getSeparatedDate` function to get the Date attributes and return the appropriate date.\n\n## The beginning of everything\n\nTo build the `beginningOfDay`, it would look exactly of the `today` function, as we want to the current date but at the beginning of the day.\n\n```typescript\nconst beginningOfDay = (date: Date = new Date()): Date => {\n  const { day, month, year }: SeparatedDate = getSeparatedDate();\n\n  return new Date(year, month, day);\n};\n```\n\nNothing special here.\n\nBut just minor comment if you didn't notice: At first, I'm built this function to get the beginning of the day of the current day. But I wanted to make it flexible enough to get the beginning of the day of other days too.\n\nSo \"argument\", right? Now the function receives a date, but it is flexible to not receive it too. I just handle it with a default value of the current date.\n\nFor the `beginningOfMonth`, it will look pretty much the same, but instead of using the `day`, we just set it to `1`.\n\n```typescript\nconst beginningOfMonth = (date: Date = new Date()): Date => {\n  const { month, year }: SeparatedDate = getSeparatedDate();\n\n  return new Date(year, month, 1);\n};\n```\n\nYou got it, the `beginningOfYear` is similar. But also changing the `month` attribute.\n\n```typescript\nconst beginningOfYear = (date: Date = new Date()): Date => {\n  const { year }: SeparatedDate = getSeparatedDate();\n\n  return new Date(year, 0, 1);\n};\n```\n\n## Traveling back in time\n\nNow the `get(1).dayAgo` API. We could build a `get` function that receives a `number` and return an object like:\n\n```typescript\n{\n  dayAgo, monthAgo, yearAgo;\n}\n```\n\nFor each attribute of this object, it would be the returned value we expect.\n\n```typescript\nconst get = (n: number): { dayAgo: Date; monthAgo: Date; yearAgo: Date } => {\n  const { day, month, year }: SeparatedDate = getSeparatedDate();\n\n  const dayAgo: Date = new Date(year, month, day - n);\n  const monthAgo: Date = new Date(year, month - n, day);\n  const yearAgo: Date = new Date(year - n, month, day);\n\n  return { dayAgo, monthAgo, yearAgo };\n};\n```\n\nWhat about a `DateAgo` type?\n\n```typescript\ntype DateAgo = {\n  dayAgo: Date;\n  monthAgo: Date;\n  yearAgo: Date;\n};\n```\n\nAnd now using the new type:\n\n```typescript\nconst get = (n: number): DateAgo => {\n  const { day, month, year }: SeparatedDate = getSeparatedDate();\n\n  const dayAgo: Date = new Date(year, month, day - n);\n  const monthAgo: Date = new Date(year, month - n, day);\n  const yearAgo: Date = new Date(year - n, month, day);\n\n  return { dayAgo, monthAgo, yearAgo };\n};\n```\n\nWe build each attribute: `dayAgo`, `monthAgo`, and `yearAgo` by basically handling the Date object as we know.\n\nBut now we also need to implement the object in the plural: `daysAgo`, `monthsAgo`, and `yearsAgo`. But only for a number greater than 1.\n\nFor these new attributes, we don't need to create a whole new date again. We can use the same value from the singular attributes.\n\nWe also need to handle the `number` received.\n\n- if it is greater than 1: return the object with plural attributes\n- otherwise: return the object with singular attributes\n\n```typescript\nconst get = (n: number): DateAgo | DatesAgo => {\n  const { day, month, year }: SeparatedDate = getSeparatedDate();\n\n  const dayAgo: Date = new Date(year, month, day - n);\n  const monthAgo: Date = new Date(year, month - n, day);\n  const yearAgo: Date = new Date(year - n, month, day);\n\n  const daysAgo: Date = dayAgo;\n  const monthsAgo: Date = monthAgo;\n  const yearsAgo: Date = yearAgo;\n\n  return n > 1\n    ? { daysAgo, monthsAgo, yearsAgo }\n    : { dayAgo, monthAgo, yearAgo };\n};\n```\n\n- In this case, I also created the `DatesAgo` type and used the Typescript `Union Type` feature.\n- We reuse the singular values.\n- And do a simple ternary to handle the number received.\n\nBut what if we pass a `0` or negative value? We can throw an error:\n\n```typescript\nconst get = (n: number): DateAgo | DatesAgo => {\n  if (n < 1) {\n    throw new Error('Number should be greater or equal than 1');\n  }\n\n  const { day, month, year }: SeparatedDate = getSeparatedDate();\n\n  const dayAgo: Date = new Date(year, month, day - n);\n  const monthAgo: Date = new Date(year, month - n, day);\n  const yearAgo: Date = new Date(year - n, month, day);\n\n  const daysAgo: Date = dayAgo;\n  const monthsAgo: Date = monthAgo;\n  const yearsAgo: Date = yearAgo;\n\n  return n > 1\n    ? { daysAgo, monthsAgo, yearsAgo }\n    : { dayAgo, monthAgo, yearAgo };\n};\n```\n\nThe Date can be fun too. Learn the basic concepts and just play around with it, you'll like! I hope this post was valuable to you!\n\n## Resources\n\n- [Beginner JavaScript Course](https://BeginnerJavaScript.com/friend/LEANDRO)\n- [React for Beginners Course](https://ReactForBeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://AdvancedReact.com/friend/LEANDRO)\n- [ES6 Course](https://ES6.io/friend/LEANDRO)\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n- [Date - JavaScript | MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date)\n- [Ruby on Rails Date API](https://api.rubyonrails.org/classes/Date.html)\n- [Ruby Date API](https://ruby-doc.org/stdlib-2.7.1/libdoc/date/rdoc/Date.html)\n- [Dating library](https://github.com/imteekay/dating)\n- [Typescript Learnings 001: Object Destructuring](/series/typescript-learnings/object-destructuring)\n- [Understanding Date and Time in JavaScript](https://www.digitalocean.com/community/tutorials/understanding-date-and-time-in-javascript)\n\n### Javascript\n\n- [JavaScript in Detail: From Beginner to Advanced](https://www.educative.io/courses/javascript-in-detail-from-beginner-to-advanced?aff=x8bV)\n- [Simplifying JavaScript: A Handy Guide for Software Engineers](https://www.educative.io/courses/simplifying-javascript-handy-guide?aff=x8bV)\n- [The Complete Guide to Modern JavaScript](https://www.educative.io/courses/complete-guide-to-modern-javascript?aff=x8bV)\n- [Learn Object-Oriented Programming in JavaScript](https://www.educative.io/courses/learn-object-oriented-programming-in-javascript?aff=x8bV)\n- [JavaScript In Practice: ES6 And Beyond](https://www.educative.io/courses/javascript-in-practice-es6-and-beyond?aff=x8bV)\n- [Data Structures for Coding Interviews in JavaScript](https://www.educative.io/courses/data-structures-coding-interviews-javascript?aff=x8bV)\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n- [ES6 Course](https://es6.io/friend/LEANDRO)\n- [Beginner JavaScript Course](https://beginnerjavascript.com/friend/LEANDRO)\n- [JavaScript Fundamentals Before Learning React](https://www.educative.io/courses/javascript-fundamentals-before-learning-react?aff=x8bV)\n- [Rediscovering JavaScript: ES6, ES7 & ES8](https://www.educative.io/courses/rediscovering-javascript?aff=x8bV)\n",
  },
  {
    url: '/functional-programming-principles-in-javascript',
    title: 'Functional Programming Principles in JavaScript',
    content:
      "After a long time learning and working with object-oriented programming, I took a step back to think about system complexity.\n\n> “Complexity is anything that makes software hard to understand or to modify.\" — John Outerhout\n\nDoing some research, I found functional programming concepts like immutability and pure function. Those concepts are big advantages to build side-effect-free functions, so it is easier to maintain systems — with some other [benefits](https://hackernoon.com/why-functional-programming-matters-c647f56a7691).\n\nIn this post, I will tell you more about functional programming, and some important concepts, with a lot of code examples. In Javascript!\n\n### What is functional programming?\n\n> Functional programming is a programming paradigm — a style of building the structure and elements of computer programs — that treats computation as the evaluation of mathematical functions and avoids changing-state and mutable data — Wikipedia\n\n### Pure functions\n\n![](https://cdn-images-1.medium.com/max/1600/0*FMur6URY7yAVjeuP)\n\nThe first fundamental concept we learn when we want to understand functional programming is **pure functions**. But what does that really mean? What makes a function pure?\n\nSo how do we know if a function is `pure` or not? Here is a very strict definition of purity:\n\n- It returns the same result if given the same arguments (it is also referred as `deterministic`)\n\n- It does not cause any observable side effects\n\n#### It returns the same result if given the same arguments\n\nImagine we want to implement a function that calculates the area of a circle. An impure function would receive `radius` as the parameter, and then calculate `radius * radius * PI`:\n\n```javascript\nconst PI = 3.14;\n\nfunction calculateArea(radius) {\n  return radius * radius * PI;\n}\n\ncalculateArea(10); // returns 314.0\n```\n\nWhy is this an impure function? Simply because it uses a global object that was not passed as a parameter to the function.\n\nNow imagine some mathematicians argue that the `PI` value is actually `42`and change the value of the global object.\n\nOur impure function will now result in `10 * 10 * 42` = `4200`. For the same parameter (`radius = 10`), we have a different result. Let's fix it!\n\n```javascript\nconst PI = 3.14;\n\nfunction calculateArea(radius, pi) {\n  return radius * radius * pi;\n}\n\ncalculateArea(10, PI); // returns 314.0\n```\n\nTA-DA 🎉! Now we’ll always pass the`PI` value as a parameter to the function. So now we are just accessing parameters passed to the function. No `external object`.\n\n- For the parameters `radius = 10` & `PI = 3.14`, we will always have the same the result: `314.0`\n\n- For the parameters `radius = 10` & `PI = 42`, we will always have the same the result: `4200`\n\n#### Reading Files\n\nIf our function reads external files, it’s not a pure function — the file’s contents can change.\n\n```javascript\nfunction charactersCounter(text) {\n  return `Character count: ${text.length}`;\n}\n\nfunction analyzeFile(filename) {\n  let fileContent = open(filename);\n  return charactersCounter(fileContent);\n}\n```\n\n#### Random number generation\n\nAny function that relies on a random number generator cannot be pure.\n\n```javascript\nfunction yearEndEvaluation() {\n  if (Math.random() > 0.5) {\n    return 'You get a raise!';\n  } else {\n    return 'Better luck next year!';\n  }\n}\n```\n\n#### It does not cause any observable side effects\n\nExamples of observable side effects include modifying a global object or a parameter passed by reference.\n\nNow we want to implement a function to receive an integer value and return the value increased by 1.\n\n```javascript\nlet counter = 1;\n\nfunction increaseCounter(value) {\n  counter = value + 1;\n}\n\nincreaseCounter(counter);\nconsole.log(counter); // 2\n```\n\nWe have the `counter` value. Our impure function receives that value and re-assigns the counter with the value increased by 1.\n\n**Observation**: mutability is discouraged in functional programming.\n\nWe are modifying the global object. But how would we make it `pure`? Just return the value increased by 1. Simple as that.\n\n```javascript\nlet counter = 1;\n\nfunction increaseCounter(value) {\n  return value + 1;\n}\n\nincreaseCounter(counter); // 2\nconsole.log(counter); // 1\n```\n\nSee that our pure function `increaseCounter` returns 2, but the `counter` value is still the same. The function returns the incremented value without altering the value of the variable.\n\nIf we follow these two simple rules, it gets easier to understand our programs. Now every function is isolated and unable to impact other parts of our system.\n\nPure functions are stable, consistent, and predictable. Given the same parameters, pure functions will always return the same result. We don’t need to think of situations when the same parameter has different results — because it will never happen.\n\n#### Pure functions benefits\n\nThe code’s definitely easier to test. We don’t need to mock anything. So we can unit test pure functions with different contexts:\n\n- Given a parameter `A` → expect the function to return value `B`\n\n- Given a parameter `C` → expect the function to return value `D`\n\nA simple example would be a function to receive a collection of numbers and expect it to increment each element of this collection.\n\n```javascript\nlet list = [1, 2, 3, 4, 5];\n\nfunction incrementNumbers(list) {\n  return list.map((number) => number + 1);\n}\n```\n\nWe receive the `numbers` array, use `map` incrementing each number, and return a new list of incremented numbers.\n\n```javascript\nincrementNumbers(list); // [2, 3, 4, 5, 6]\n```\n\nFor the `input` `[1, 2, 3, 4, 5]`, the expected `output` would be `[2, 3, 4, 5, 6]`.\n\n### Immutability\n\n> Unchanging over time or unable to be changed.\n\n![](https://cdn-images-1.medium.com/max/1600/0*MGlzHgISuw0dXwsf)\n\n**after it’s created. **If you want to change an immutable object, you can’t. Instead,** you create a new object with the new value.**\n\nIn Javascript we commonly use the `for` loop. This next `for` statement has some mutable variables.\n\n```javascript\nvar values = [1, 2, 3, 4, 5];\nvar sumOfValues = 0;\n\nfor (var i = 0; i < values.length; i++) {\n  sumOfValues += values[i];\n}\n\nsumOfValues; // 15\n```\n\nFor each iteration, we are changing the `i` and the `sumOfValue` **state**. But how do we handle mutability in iteration? Recursion!\n\n```javascript\nlet list = [1, 2, 3, 4, 5];\nlet accumulator = 0;\n\nfunction sum(list, accumulator) {\n  if (list.length == 0) {\n    return accumulator;\n  }\n\n  return sum(list.slice(1), accumulator + list[0]);\n}\n\nsum(list, accumulator); // 15\nlist; // [1, 2, 3, 4, 5]\naccumulator; // 0\n```\n\nSo here we have the `sum` function that receives a vector of numerical values. The function calls itself until we get the list empty ([our recursion ](<https://en.wikipedia.org/wiki/Recursion_(computer_science)#Recursive_functions_and_algorithms>)`base case`). For each \"iteration\" we will add the value to the `total` accumulator.\n\nimmutable. The `list` and the `accumulator` variables are not changed. It keeps the same value.\n\n**Observation**: Yes! We can use `reduce` to implement this function. We will cover this in the `Higher Order Functions` topic.\n\nIt is also very common to build up the final **state** of an object. Imagine we have a string, and we want to transform this string into a `url slug`.\n\nIn OOP in Ruby, we would create a class, let’s say, `UrlSlugify`. And this class will have a `slugify!` method to transform the string input into a `url slug`.\n\n```ruby\nclass UrlSlugify\n  attr_reader :text\n\n  def initialize(text)\n    @text = text\n  end\n\n  def slugify!\n    text.downcase!\n    text.strip!\n    text.gsub!(' ', '-')\n  end\nend\n\nUrlSlugify.new(' I will be a url slug   ').slugify! # \"i-will-be-a-url-slug\"\n```\n\nBeautiful! It’s implemented! Here we have imperative programming saying exactly what we want to do in each `slugify` process — first lower case, then remove useless white spaces and, finally, replace remaining white spaces with hyphens.\n\nBut we are mutating the input state in this process.\n\nWe can handle this mutation by doing function composition, or function chaining. In other words, the result of a function will be used as an input for the next function, without modifying the original input string.\n\n```javascript\nlet string = ' I will be a url slug   ';\n\nfunction slugify(string) {\n  return string.toLowerCase().trim().split(' ').join('-');\n}\n\nslugify(string); // i-will-be-a-url-slug\n```\n\nHere we have:\n\n- `toLowerCase`: converts the string to all lower case\n\n- `trim`: removes whitespace from both ends of a string\n\n- `split` and `join`: replaces all instances of match with replacement in a given string\n\nWe combine all these 4 functions and we can `\"slugify\"` our string.\n\n### Referential transparency\n\n![](https://cdn-images-1.medium.com/max/1600/0*K0VAbQjAwmKZb1at)\n\nLet’s implement a `square function`:\n\n```javascript\nfunction square(n) {\n  return n * n;\n}\n```\n\nThis pure function will always have the same output, given the same input.\n\n```javascript\nsquare(2); // 4\nsquare(2); // 4\nsquare(2); // 4\n// ...\n```\n\nPassing `2` as a parameter of the `square function` will always returns 4. So now we can replace the `square(2)` with 4. That's it! Our function is `referentially transparent`.\n\nBasically, if a function consistently yields the same result for the same input, it is referentially transparent.\n\n**pure functions + immutable data = referential transparency**\n\nWith this concept, a cool thing we can do is to memoize the function. Imagine we have this function:\n\n```javascript\nfunction sum(a, b) {\n  return a + b;\n}\n```\n\nAnd we call it with these parameters:\n\n```javascript\nsum(3, sum(5, 8));\n```\n\nThe `sum(5, 8)` equals `13`. This function will always result in `13`. So we can do this:\n\n```javascript\nsum(3, 13);\n```\n\nAnd this expression will always result in `16`. We can replace the entire expression with a numerical constant and [memoize](https://en.wikipedia.org/wiki/Memoization) it.\n\n### Functions as first-class entities\n\n![](https://cdn-images-1.medium.com/max/1600/0*K6m1Ftw54Wm6tfFB)\n\nThe idea of functions as first-class entities is that functions are **also** treated as values **and** used as data.\n\nFunctions as first-class entities can:\n\n- refer to it from constants and variables\n\n- pass it as a parameter to other functions\n\n- return it as result from other functions\n\nThe idea is to treat functions as values and pass functions like data. This way we can combine different functions to create new functions with new behavior.\n\nImagine we have a function that sums two values and then doubles the value. Something like this:\n\n```javascript\nfunction doubleSum(a, b) {\n  return (a + b) * 2;\n}\n```\n\nNow a function that subtracts values and the returns the double:\n\n```javascript\nfunction doubleSubtraction(a, b) {\n  return (a - b) * 2;\n}\n```\n\nThese functions have similar logic, but the difference is the operators functions. If we can treat functions as values and pass these as arguments, we can build a function that receives the operator function and use it inside our function. Let’s build it!\n\n```javascript\nfunction sum(a, b) {\n  return a + b;\n}\n\nfunction subtraction(a, b) {\n  return a - b;\n}\n\nfunction doubleOperator(f, a, b) {\n  return f(a, b) * 2;\n}\n\ndoubleOperator(sum, 3, 1); // 8\ndoubleOperator(subtraction, 3, 1); // 4\n```\n\nDone! Now we have an `f` argument, and use it to process `a` and `b`. We passed the `sum` and `subtraction` functions to compose with the `doubleOperator` function and create a new behavior.\n\n### Higher-order functions\n\nWhen we talk about higher-order functions, we mean a function that either:\n\n- takes one or more functions as arguments, or\n\n- returns a function as its result\n\nThe `doubleOperator` function we implemented above is a higher-order function because it takes an operator function as an argument and uses it.\n\nYou’ve probably already heard about `filter`, `map`, and `reduce`. Let's take a look at these.\n\n### Filter\n\nGiven a collection, we want to filter by an attribute. The filter function expects a `true` or `false` value to determine if the element **should or should not** be included in the result collection. Basically, if the callback expression is `true`, the filter function will include the element in the result collection. Otherwise, it will not.\n\nA simple example is when we have a collection of integers and we want only the even numbers.\n\n**Imperative approach**\n\nAn imperative way to do it with Javascript is to:\n\n- create an empty array `evenNumbers`\n\n- iterate over the `numbers` array\n\n- push the even numbers to the `evenNumbers` array\n\n```javascript\nvar numbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nvar evenNumbers = [];\n\nfor (var i = 0; i < numbers.length; i++) {\n  if (numbers[i] % 2 == 0) {\n    evenNumbers.push(numbers[i]);\n  }\n}\n\nconsole.log(evenNumbers); // (6) [0, 2, 4, 6, 8, 10]\n```\n\nWe can also use the `filter` higher order function to receive the `even` function, and return a list of even numbers:\n\n```javascript\nfunction even(number) {\n  return number % 2 == 0;\n}\n\nlet listOfNumbers = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10];\nlistOfNumbers.filter(even); // [0, 2, 4, 6, 8, 10]\n```\n\nOne interesting problem I solved on [Hacker Rank FP](https://www.hackerrank.com/domains/fp) Path was the [Filter Array problem](https://www.hackerrank.com/challenges/fp-filter-array/problem). The problem idea is to filter a given array of integers and output only those values that are less than a specified value `X`.\n\nAn imperative Javascript solution to this problem is something like:\n\n```javascript\nvar filterArray = function (x, coll) {\n  var resultArray = [];\n\n  for (var i = 0; i < coll.length; i++) {\n    if (coll[i] < x) {\n      resultArray.push(coll[i]);\n    }\n  }\n\n  return resultArray;\n};\n\nconsole.log(filterArray(3, [10, 9, 8, 2, 7, 5, 1, 3, 0])); // (3) [2, 1, 0]\n```\n\nWe say exactly what our function needs to do — iterate over the collection, compare the collection current item with `x`, and push this element to the `resultArray` if it pass the condition.\n\n**Declarative approach**\n\nBut we want a more declarative way to solve this problem, and using the `filter` higher order function as well.\n\nA declarative Javascript solution would be something like this:\n\n```javascript\nfunction smaller(number) {\n  return number < this;\n}\n\nfunction filterArray(x, listOfNumbers) {\n  return listOfNumbers.filter(smaller, x);\n}\n\nlet numbers = [10, 9, 8, 2, 7, 5, 1, 3, 0];\n\nfilterArray(3, numbers); // [2, 1, 0]\n```\n\nUsing `this` in the `smaller` function seems a bit strange in the first place, but is easy to understand.\n\n`this` will be the second parameter in the `filter` function. In this case, `3` (the `x`) is represented by `this`. That's it.\n\nWe can also do this with maps. Imagine we have a map of people with their `name` and `age`.\n\n```javascript\nlet people = [\n  { name: 'TK', age: 26 },\n  { name: 'Kaio', age: 10 },\n  { name: 'Kazumi', age: 30 },\n];\n```\n\nAnd we want to filter only people over a specified value of age, in this example people who are more than 21 years old.\n\n```javascript\nfunction olderThan21(person) {\n  return person.age > 21;\n}\n\nfunction overAge(people) {\n  return people.filter(olderThan21);\n}\n\noverAge(people); // [{ name: 'TK', age: 26 }, { name: 'Kazumi', age: 30 }]\n```\n\nSummary of code:\n\n- we have a list of people (with `name` and `age`).\n\n- we have a function `olderThan21`. In this case, for each person in people array, we want to access the `age` and see if it is older than 21.\n\n- we filter all people based on this function.\n\n### Map\n\nThe idea of map is to transform a collection.\n\n> The map method transforms a collection by applying a function to all of its elements and building a new collection from the returned values.\n\nLet’s get the same `people` collection above. We don't want to filter by “over age” now. We just want a list of strings, something like `TK is 26 years old`. So the final string might be `:name is :age years old` where `:name` and `:age` are attributes from each element in the `people` collection.\n\nIn a imperative Javascript way, it would be:\n\n```javascript\nvar people = [\n  { name: 'TK', age: 26 },\n  { name: 'Kaio', age: 10 },\n  { name: 'Kazumi', age: 30 },\n];\n\nvar peopleSentences = [];\n\nfor (var i = 0; i < people.length; i++) {\n  var sentence = people[i].name + ' is ' + people[i].age + ' years old';\n  peopleSentences.push(sentence);\n}\n\nconsole.log(peopleSentences); // ['TK is 26 years old', 'Kaio is 10 years old', 'Kazumi is 30 years old']\n```\n\nIn a declarative Javascript way, it would be:\n\n```javascript\nfunction makeSentence(person) {\n  return `${person.name} is ${person.age} years old`;\n}\n\nfunction peopleSentences(people) {\n  return people.map(makeSentence);\n}\n\npeopleSentences(people); // ['TK is 26 years old', 'Kaio is 10 years old', 'Kazumi is 30 years old']\n```\n\nThe whole idea is to transform a given array into a new array.\n\nAnother interesting Hacker Rank problem was the [update list problem](https://www.hackerrank.com/challenges/fp-update-list/problem). We just want to update the values of a given array with their absolute values.\n\nFor example, the input `[1, 2, 3, -4, 5]`needs the output to be `[1, 2, 3, 4, 5]`. The absolute value of `-4` is `4`.\n\nA simple solution would be an in-place update for each collection value.\n\n```javascript\nvar values = [1, 2, 3, -4, 5];\n\nfor (var i = 0; i < values.length; i++) {\n  values[i] = Math.abs(values[i]);\n}\n\nconsole.log(values); // [1, 2, 3, 4, 5]\n```\n\nWe use the `Math.abs` function to transform the value into its absolute value, and do the in-place update.\n\nThis is **not** a functional way to implement this solution.\n\nFirst, we learned about immutability. We know how immutability is important to make our functions more consistent and predictable. The idea is to build a new collection with all absolute values.\n\nSecond, why not use `map` here to \"transform\" all data?\n\nMy first idea was to test the `Math.abs` function to handle only one value.\n\n```javascript\nMath.abs(-1); // 1\nMath.abs(1); // 1\nMath.abs(-2); // 2\nMath.abs(2); // 2\n```\n\nWe want to transform each value into a positive value (the absolute value).\n\nNow that we know how to do `absolute` for one value, we can use this function to pass as an argument to the `map` function. Do you remember that a `higher order function` can receive a function as an argument and use it? Yes, map can do it!\n\n```javascript\nlet values = [1, 2, 3, -4, 5];\n\nfunction updateListMap(values) {\n  return values.map(Math.abs);\n}\n\nupdateListMap(values); // [1, 2, 3, 4, 5]\n```\n\nWow. So beautiful! 😍\n\n### Reduce\n\nThe idea of reduce is to receive a function and a collection, and return a value created by combining the items.\n\nA common example people talk about is to get the total amount of an order. Imagine you were at a shopping website. You’ve added `Product 1`, `Product 2`, `Product 3`, and `Product 4` to your shopping cart (order). Now we want to calculate the total amount of the shopping cart.\n\nIn imperative way, we would iterate the order list and sum each product amount to the total amount.\n\n```javascript\nvar orders = [\n  { productTitle: 'Product 1', amount: 10 },\n  { productTitle: 'Product 2', amount: 30 },\n  { productTitle: 'Product 3', amount: 20 },\n  { productTitle: 'Product 4', amount: 60 },\n];\n\nvar totalAmount = 0;\n\nfor (var i = 0; i < orders.length; i++) {\n  totalAmount += orders[i].amount;\n}\n\nconsole.log(totalAmount); // 120\n```\n\nUsing `reduce`, we can build a function to handle the `amount sum` and pass it as an argument to the `reduce` function.\n\n```javascript\nlet shoppingCart = [\n  { productTitle: 'Product 1', amount: 10 },\n  { productTitle: 'Product 2', amount: 30 },\n  { productTitle: 'Product 3', amount: 20 },\n  { productTitle: 'Product 4', amount: 60 },\n];\n\nconst sumAmount = (currentTotalAmount, order) =>\n  currentTotalAmount + order.amount;\n\nfunction getTotalAmount(shoppingCart) {\n  return shoppingCart.reduce(sumAmount, 0);\n}\n\ngetTotalAmount(shoppingCart); // 120\n```\n\nHere we have `shoppingCart`, the function `sumAmount` that receives the current `currentTotalAmount` , and the `order` object to `sum` them.\n\nThe `getTotalAmount` function is used to `reduce` the `shoppingCart` by using the `sumAmount` and starting from `0`.\n\nAnother way to get the total amount is to compose `map` and `reduce`. What do I mean by that? We can use `map` to transform the `shoppingCart` into a collection of `amount` values, and then just use the `reduce` function with `sumAmount` function.\n\n```javascript\nconst getAmount = (order) => order.amount;\nconst sumAmount = (acc, amount) => acc + amount;\n\nfunction getTotalAmount(shoppingCart) {\n  return shoppingCart.map(getAmount).reduce(sumAmount, 0);\n}\n\ngetTotalAmount(shoppingCart); // 120\n```\n\nThe `getAmount` receives the product object and returns only the `amount` value. So what we have here is `[10, 30, 20, 60]`. And then the `reduce` combines all items by adding up. Beautiful!\n\nWe took a look at how each higher order function works. I want to show you an example of how we can compose all three functions in a simple example.\n\nTalking about `shopping cart`, imagine we have this list of products in our order:\n\n```javascript\nlet shoppingCart = [\n  { productTitle: 'Functional Programming', type: 'books', amount: 10 },\n  { productTitle: 'Kindle', type: 'eletronics', amount: 30 },\n  { productTitle: 'Shoes', type: 'fashion', amount: 20 },\n  { productTitle: 'Clean Code', type: 'books', amount: 60 },\n];\n```\n\nWe want the total amount of all books in our shopping cart. Simple as that. The algorithm?\n\n- **filter** by book type\n\n- transform the shopping cart into a collection of amount using **map**\n\n- combine all items by adding them up with **reduce**\n\n```javascript\nlet shoppingCart = [\n  { productTitle: 'Functional Programming', type: 'books', amount: 10 },\n  { productTitle: 'Kindle', type: 'eletronics', amount: 30 },\n  { productTitle: 'Shoes', type: 'fashion', amount: 20 },\n  { productTitle: 'Clean Code', type: 'books', amount: 60 },\n];\n\nconst byBooks = (order) => order.type == 'books';\nconst getAmount = (order) => order.amount;\nconst sumAmount = (acc, amount) => acc + amount;\n\nfunction getTotalAmount(shoppingCart) {\n  return shoppingCart.filter(byBooks).map(getAmount).reduce(sumAmount, 0);\n}\n\ngetTotalAmount(shoppingCart); // 70\n```\n\nDone! 🎉\n\n### Resources\n\nI’ve organised some resources I read and studied. I’m sharing the ones that I found really interesting. For more resources, visit my [Functional Programming Github repository](https://github.com/imteekay/learning-functional-programming).\n\n- [EcmaScript 6 course by Wes Bos](https://ES6.io/friend/LEANDRO)\n- [Ruby specific resources](https://github.com/imteekay/learning-functional-programming/tree/master/ruby)\n- [Javascript specific resources](https://github.com/imteekay/learning-functional-programming/tree/master/javascript)\n- [Clojure specific resources](https://github.com/imteekay/learning-functional-programming/tree/master/clojure)\n\n#### Intros\n\n- [Learning FP in JS](https://www.youtube.com/watch?v=e-5obm1G_FY)\n- [Intro do FP with Python](https://codewords.recurse.com/issues/one/an-introduction-to-functional-programming)\n- [Overview of FP](https://blog.codeship.com/overview-of-functional-programming)\n- [A quick intro to functional JS](https://hackernoon.com/a-quick-introduction-to-functional-javascript-7e6fe520e7fa)\n- [What is FP?](https://medium.com/javascript-scene/master-the-javascript-interview-what-is-functional-programming-7f218c68b3a0)\n- [Functional Programming Jargon](https://github.com/hemanth/functional-programming-jargon)\n\n#### Pure functions\n\n- [What is a pure function?](https://medium.com/javascript-scene/master-the-javascript-interview-what-is-a-pure-function-d1c076bec976)\n- [Pure Functional Programming 1](https://www.fpcomplete.com/blog/2017/04/pure-functional-programming)\n- [Pure Functional Programming 2](https://www.fpcomplete.com/blog/2017/05/pure-functional-programming-part-2)\n\n#### Immutable data\n\n- [Immutable DS for functional programming](https://www.youtube.com/watch?v=Wo0qiGPSV-s)\n- [Why shared mutable state is the root of all evil](http://henrikeichenhardt.blogspot.com/2013/06/why-shared-mutable-state-is-root-of-all.html)\n\n#### Higher-order functions\n\n- [Eloquent JS: Higher Order Functions](https://eloquentjavascript.net/05_higher_order.html)\n- [Fun fun function Filter](https://www.youtube.com/watch?v=BMUiFMZr7vk&t=0s&list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84&index=2&ab_channel=FunFunFunction)\n- [Fun fun function Map](https://www.youtube.com/watch?v=bCqtb-Z5YGQ&index=2&list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84&ab_channel=FunFunFunction)\n- [Fun fun function Basic Reduce](https://www.youtube.com/watch?v=Wl98eZpkp-c&list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84&index=3&frags=wn&ab_channel=FunFunFunction)\n- [Fun fun function Advanced Reduce](https://www.youtube.com/watch?v=1DMolJ2FrNY&list=PL0zVEGEvSaeEd9hlmCXrk5yUyqUag-n84&index=4&ab_channel=FunFunFunction)\n- [Clojure Higher Order Functions](https://clojure.org/guides/higher_order_functions)\n- [Purely Function Filter](https://purelyfunctional.tv/lesson/filter/)\n- [Purely Functional Map](https://purelyfunctional.tv/lesson/map/)\n- [Purely Functional Reduce](https://purelyfunctional.tv/lesson/reduce/)\n\n#### Declarative Programming\n\n- [Declarative Programming vs Imperative](https://tylermcginnis.com/imperative-vs-declarative-programming/)\n\n## That’s it!\n\nHey people, I hope you had fun reading this post, and I hope you learned a lot here! This was my attempt to share what I’m learning.\n\n[Here is the repository with all codes](https://github.com/tk-notes/fp-in-javascript-article-source-code) from this article.\n\nCome learn with me. I’m sharing resources and my code in this [Learning Functional Programming repository](https://github.com/imteekay/learning-functional-programming).\n\nI also wrote an [FP post but using mainly Clojure](https://medium.freecodecamp.org/an-introduction-to-the-basic-principles-of-functional-programming-a2c2a15c84) ❤.\n\nI hope you saw something useful to you here. And see you next time! :)\n",
  },
  {
    url: '/how-i-received-4-salary-raises-in-2-years-of-quintoandar-as-a-software-engineer',
    title:
      'How I received 4 salary raises in 2 years of QuintoAndar as a Software Engineer',
    content:
      "Or how to be a _Rebel at Work_.\n\n---\n\n_Disclaimer:_\n\n1. these ideas and insights come from a privileged person working in a very privileged industry.\n2. my intent is not to show off, but to share my experience and I hope you can steal some ideas.\n3. it's ok to see money as a valuable capital in your life, but I'll focus on how I keeo improving my craft in this post.\n\n## Before telling my experience\n\nIn this essay, I'll talk about skills, experiences, opportunities, and mindset. Basically how I became better at my own craft.\n\nMy focus was always on the journey and I didn't intend to grow at the company. This was not my goal. I actually didn't have a real goal, just wanted to have fun while working, search for autonomy and control, and have a space I could learn a lot.\n\nWith that in mind, my experience may not help you \"climb\" the _Career Ladder_. But I hope you can steal some ideas and use them in your favor for better working life.\n\nAlso, if your goal is to grow at the company, climb the career ladder, and get raises, maybe I'll write about it in the future, but here are two (shallow) advice:\n\n- _Understand the career ladder (if your company has one)_: to be able to get promotions, you need to understand where you are at and what are the expectations for the next level.\n- _Work with your manager_: use One-on-One meetings to sync the career ladder expectations, receive feedback, ask for projects you could work on. Everything that can help you go to the next level.\n\nThere are many other things you can do to get raises, but, for me, these are the fundamental pieces that will help you take the first step. And as I don't want this essay to focus on promotions, I'll probably write a separate article for this topic. But you can find awesome content on the internet that is probably better than my future one.\n\n## My Experience\n\n### External Factors\n\nTo start, I have to say that I had important _External Factors_. QuintoAndar is one of the fastest-growing startups in Brazil. Today it's valued at $5.1 billion. It's an innovative company in the real estate industry, and it has a business model that works well in Brazil.\n\nThe fact that it's a company that's making money, was invested a huge amount of capital, and keeps growing, it's a very important factor when it comes to getting raises and promotions.\n\nBesides this, it's a company that attracts real talented people, not only in engineering but in the product and other organizations too.\n\nIMHO, the culture is great for engineers as I always felt that it was a safe place to expose and discuss my and new ideas, to share my honest opinion on what was working or not, and was always incentivized to challenge the status quo.\n\nSo these are the important _external factors_ that had nothing to do with my skills and work:\n\n- QuintoAndar is a fast-growing company\n- It kept growing financially over the years\n- Real talented people\n- Great culture (but not only) for engineers\n\n### Achieving my team's goals\n\nBefore anything else, my focus was always on my team and our quarter goals. It was truly important to me that I understand the team's goals, the business metrics we should look at, and why we were doing this list of features.\n\nTo have everybody on board, we had a Notion page with everything business and product-related to our team. I also created a dashboard with all the important pages we had in the Amplitude platform to be easier to access key metrics.\n\nUnderstanding _why_ is just the first step. As engineers, one of our responsibilities is to help and come up with solutions for the _how_.\n\nCollaborating with the product manager, the designer, and the other engineers here is key to succeeding as a team. I think this part not many people talk about and it was always a bit fuzzy for me when I first started working in software engineering. _Collaborating_ means a lot of different things here, but I'll list some ideas I executed in the past:\n\n- Ideas can come from different places: your manager, the PM, the designer, or any other person outside your team. After understanding the idea (and most importantly, the problem), you help shape and polish the solution with your engineering background and knowledge from the current system you're working on.\n  - You probably understand the pain points from the system you're working on.\n  - With your background, you can think of different solutions: each with its own effort and time you and your team will be needed to spend on.\n  - Negotiate to have more time to polish the chosen solution after the implementation that needed to be deployed faster to the real user but lacked a bit of the engineering best practices.\n  - Or better, negotiate to have time to deliver the feature or product with best practices already built-in.\n- Ideas can come from you: a feature, a product, or an improvement that you saw that could improve the user experience and business metrics. Later, we'll talk about my experience leading the [web performance project](/optimizing-the-performance-of-a-react-progressive-web-app) and being a product-minded software engineer.\n- Create a safe space to collaborate: it's easy when the company's culture already creates this space that you feel safe to discuss ideas, come up with your own, or disagree with others. Having a more and more diverse team was important to enrich the discussions we had in the team, and having a safe space is the building block that enables people to discuss without fear of judgment.\n  - Creating space by asking everybody in the team to ask questions, discuss, and share their opinions.\n  - Actively listen to people, care about what they are saying, and document the insights to use to polish the ideas discussed.\n  - Having better processes for developing products: a space to discuss the strategy, a space to discuss quarter's goals and metrics, a space to discuss the engineering challenges and architectures/solutions.\n\nThe thing is, as you mature as an engineer, you not only code to deliver products but you collaborate in all aspects of software engineering. You understand that making the team, the processes, the delivery, and the dev experience better are part of your \"_responsibility_\".\n\n### Challenge the status quo: everything can be improved\n\nI need to emphasize that the QuintoAndar's culture not only expected me to challenge the status quo but I was always incentivized to improve – or create awareness – about everything that was suboptimal. So it was always an environment where I could question everything and experiment with ideas and then improve things that were not working or could be better.\n\nWhen thinking about improving stuff in a company, the goal is to make the organization better. I could think of processes, technologies, the team's culture, the developer experience, and so on.\n\nMy idea was always to [_do things that don't scale_](http://paulgraham.com/ds.html) first: focus on my team, try experiments, learn with this process, and improve it. Do this cycle until the idea gets matured. When I felt it was ready to scale, I could share it in more broad scope, like a tribe (a set of squads/teams) or for the whole organization.\n\nA good solution always comes up with a well-defined problem (or a well-defined _thing_ that could be improved). This is why understanding the problem and the context is so important. Living and breathing the engineering problems on a daily basis gave me a lot of understanding of how things worked and enabled me to think of solutions to make it better.\n\nAs I was working in a big tech company, the technologies, patterns, and conventions are extremely important to make us move fast but always with quality in mind.\n\nMy first initiative was to create guidelines about how we used React, optimizations, immutability, and testing in JavaScript and React. Guideline documents are a nice initiative because first, we can normalize the conventions and patterns cross-company, and second, they gave awareness about these topics and as engineers, we could discuss the conventions we wanted to adopt and formalize. I liked the whole process, mainly because it was always nice to receive feedback, different views, and insights from other engineers and we could come up with great solutions for frequently problems we face on a daily basis.\n\nWith this first initiative, I gained confidence that I could improve more and more things in the engineering scope. For every problem that I faced, I documented the solutions and patterns that I came up with and shared them with other engineers.\n\nI remember when we didn't have the opportunity to use Hooks in our PWAs. So I made some experiments ([React Hooks, Context API, and Pokemons](/react-hooks-context-api-and-pokemons)) and shared them.\n\nRegarding JavaScript patterns, I also experimented with some ideas on [Closures and Currying](/closure-currying-and-cool-abstractions), [Internationalization abstraction in React](/building-an-abstraction-for-react-internationalization-messages), and [Functional Programming](/functional-programming-principles-in-javascript).\n\nAs our codebase was getting more and more complex, it started to get difficult to reason about it, mostly the state management part, which we were heavily using Redux.\n\n[\"Typing\" our state management](/consistent-state-management-in-react-and-redux) gave us more confidence and make it more clear how data was structured in the app.\n\nChoosing TypeScript to handle this made me study a bit more and create a [Mental Model to think in TypeScript](/a-mental-model-to-think-in-typescript). As we were using React in almost all codebases, it was important to have examples of [how React and TypeScript can work together](/ux-studies-with-react-typescript-and-testing-library).\n\nTesting applications was a topic people were always interested in the company. We had mini guilds to discuss these ideas and create patterns and conventions we wanted to use. I could share my two experiments: [TDD, JavaScript, and React](/tdd-functions-and-react-components) and [Basic Recipes for React Testing Library](/basic-recipes-for-react-testing-library). I think TDD is a more personal process, but using the testing library was our default choice to test our applications.\n\nTechnology is always changing and improving. We saw many libraries coming up and two gained our attention: [react-query](https://react-query.tanstack.com/) and [swr](https://swr.vercel.app/). I could make experiments with both and my colleague and I came up with an Architecture Decision Record (ADR) for [react-query](/data-fetching-in-react-with-react-query). We saw the potential to use this pattern and replace redux-pack and redux-saga, which were bottlenecks in terms of performance for us. Also, react-query brings a more intuitive approach and focuses on the server cache challenge.\n\nBesides technology, we can think of developer experience. Engineering time is getting more and more important.\n\n<blockquote class=\"twitter-tweet\"><p lang=\"en\" dir=\"ltr\">We recently found that the new 2021 M1 MacBooks cut our Android build times in half.<br><br>So for a team of 9, $32k of laptops will actually save $100k in productivity over 2022. The break-even point happens at 3 months.<br><br>TL;DR Engineering hours are much more expensive than laptops!</p>&mdash; Jameson (@softwarejameson) <a href=\"https://twitter.com/softwarejameson/status/1455971162060697613?ref_src=twsrc%5Etfw\">November 3, 2021</a></blockquote> <script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n\nBut in my opinion, it's not only important but can be crucial for many companies that are scaling their business. You don't need a separate team or a platform squad to improve the engineer's productivity, we as engineers can always design better processes and solve productivity bottlenecks. It's up to us to talk to our managers, allocate more time for this type of work, or even create a new team from scratch.\n\nI did work on developer experience and I need to say that I had a blast. I wrote a whole piece about this experience if you want to take a look at it: [DX & Software Maintainability in Frontend Engineering](/dx-and-software-maintainability-in-frontend-engineering).\n\nBut in summary, I worked on the engineers' pain points at that time:\n\n- _Monitoring_: instrument the new system, create dashboard links, document how to use monitoring systems on a daily basis.\n- _Tests_: experiment with new testing toolings, share the insights from these experiences, write guidelines and examples on how to use them, show different patterns.\n- _CI/CD_: not only optimized the CI builds to tune developers' productivity but also automated the release process. Before it was GitHub tags, now they just need to merge the PR and it automatically deploys the new change.\n- _Code Formatting_: now using prettier together with ESLint's rules. I was able to format the whole codebase with prettier in less than a week. And with confidence as we had quality automated tests and our monitoring system backing us. Also was able to implement a pre-commit hook to run prettier and ESLint for every commit made on the repository.\n- _Web Performance_: I had the opportunity to work on a web performance project before, but in this case, I could work on instrumenting performance tooling to collect real user metrics ([Core Web Vitals](https://web.dev/vitals/)).\n\n_Monitoring_ and _Tests_ were the building blocks to do more experiments, refactoring, and change code with confidence. Formatting code automatically was a huge gain in letting engineers discuss business rules and architecture instead of debating if you need to add a semicolon or not. Web performance tooling was the building block to measure any initiative related to improving the performance of that software. Making _CI_ faster improved the experience for every engineer that worked on that project. Building a _Continuous Delivery_ also makes the developer experience smoother.\n\nAnd the last piece in this _Challenge the status quo_ part is _Knowledge Sharing_.\n\nFor me, everything that I learn, research, or experiment, I like to document and share. The document format can vary. It can be an article, a guideline, a Notion document, slides to use for tech talks, or simple notes on my Moleskine to be used to create content based on this draft.\n\nI've been doing this for 8 years now and everything is documented here: [writings](/writings).\n\nIt's a way to share my learnings with my teammates, but also share ideas with the tech communities. Having this process helps me craft my thoughts and learn more about each topic I experimented with before.\n\nFirst _writing_, second any kind of content I want to share. Writing down and organizing the ideas and experiments is the foundation to create any other content. With the written article, I basically detailed everything I wanted to share and it could turn into guidelines (the example here was the [testing recipes](/basic-recipes-for-react-testing-library)), engineering critics, or slides for a tech talk, as I did for _[Web Performance Improvements](/optimizing-the-performance-of-a-react-progressive-web-app)_.\n\nBut the thing that I liked the most was turning my writings into topics to discuss with the team. We had a group meeting called _Guildinha_, or Little Guild, and every engineer could plan the meeting with a topic in mind. It was always an informal meeting to chat, discuss, and learn from each other.\n\nWith more knowledge and experience I could also mentor informally and formally my colleagues throughout the 3 years I was working there. It was always nice to talk to other people, help them grow in their careers, and impact their work somehow.\n\n### Improving my Craft\n\nAmong all topics I'm covering in this article, this is what I find the most interesting: _Improving my Craft_.\n\nI partially wrote about this before in two essays:\n\n- [Designing my Life's System](/designing-my-lifes-system)\n- [Designing my Learning Experience](/designing-my-learning-experience)\n\nI know I'm not a machine, but I'm constantly looking for ways to learn more and gain more knowledge about things I care about. Every day. Every time. Forever.\n\nI've been rethinking the way I learn in my free time and usually, I have three ways\n\n- Fundamentals\n- On-demand\n- Local Maxima vs Global Maxima\n\nWhen I think about fundamentals, I think of _First Principles_. What are the building blocks of software engineering? What are we absolutely sure is true? And reasoning from this principle, we can understand and solve more difficult and complex problems.\n\nIn software engineering, we have an ocean of things we can learn. When I was a backend engineer, my focus was on understanding APIs, system architecture, automated tests, and databases. For each topic, I could go deep and understand the building block of each one of them. With a better understanding, I could link this knowledge (or \"connect the dots\") and solve more difficult problems in backend engineering.\n\nThis worked the same way for frontend engineering. I started with HTML and CSS and then learned more about JavaScript. Now we have other things we need a better understanding of to do the work (or at least more complex work) like build systems (the compilers and bundlers), automated tests (for components and integration), browsers engines, and so on.\n\nKnowledge is infinity and I won't learn everything but reasoning from first principles helps me not only solve complex problems but also understand what are the knowledge gaps that I'm missing.\n\nOn-demand way of learning is basically when I have a new challenge at work or in my side-project and I need this specific kind of knowledge to solve the problem. It happened when I needed to understand monitoring, testing, and web performance at work and it's also happening on my current side-project which I need to have a better understanding of CMS and text editors.\n\nAnd Local Maxima vs Global Maxima is one of the things that I learned these days. It was very counterintuitive for me but as I'm doing more and more it got clear to me how important it's to diversify your knowledge portfolio.\n\nIf you're a JavaScript engineer, the obvious choice is to keep learning about JavaScript but soon you can get trapped in the local maxima. What I did was to first get one step away from my comfort zone and [learn TypeScript](/a-mental-model-to-think-in-typescript) and [how to get the best out of type systems](https://github.com/imteekay/programming-with-types). My next step was to learn more about browsers, [algorithms](https://github.com/imteekay/algorithms) & [data structures](/series/data-structures). Now I'm investing my time and effort in [learning about compilers](/series/building-an-interpreter), [how bundlers work](https://github.com/imteekay/minibundler), and Rust. Everything I've been learning has a direct or indirect impact on my work and how I think about engineering.\n\nAt work, it was no different. My approach was to actively look for feedback, from my managers and peers, and figure out how to be a better software/product engineer.\n\nActively looking for feedback is a habit that I wanted to start earlier in my career. In the early days, my thoughts were \"feedback is great, I'm always open to receiving feedback\". But it was not enough. I did at my last job was to have a weekly meeting with my manager and always ask about her perspective about my work on that week:\n\n- The things I was doing well and should keep doing\n- The things I was doing ok and could improve or could do more\n- The things I was doing were not that great and could improve\n\nI think these bullet points are a good starting point to discuss things I could learn, do, and build habits.\n\nThe other thing was to provide feedback and ideas to make the project better. I had a weekly log about the things that could be better and I shared it with my manager to discuss how to implement them in our processes and project's codebases.\n\nAnother effective way to receive feedback is to work on your [IDP (Individual Development Plan)](/building-an-individual-development-plan-with-notion). I wrote about that before but the idea is to develop a plan for your (career) growth. With this shared document, I could always debate with my manager about the path I was following, what I was learning, what were things I was interested in, and receive feedback and advice on how to improve my actions and habits. It's also a nice way to become more self-aware and share with your manager the things you like the most and possibly receive projects that have the intersections of your skills and interests. I really liked working on my IDP and I came up with a public version of it to share with my teammates. Everyone knew what I was learning and it was the starting point to discuss and share more knowledge within the team.\n\nBut It's ok if you don't want to create a plan to grow in your career. There are always other ways to incentivize receiving (and giving) feedback in your team. To receive feedback from my peers I first gave feedback (informal and formal) for each one of them and kindly shared that if they had time, I would be happy to receive feedback too.\n\nRegarding figuring out how to be a better product/software engineer, there are very interesting articles about product-minded engineers out there but I'll give my two cents on this topic through my lens and experience.\n\nFor me, the first step is to understand the product you are working on.\n\nIs it a product for _final users_?\n\n- who are the clients?\n- can I understand their behavior through data?\n- talk to designers who interviewed them, and have documented insights.\n- how does the business work?\n\nIs it a product for _internal stakeholders_?\n\n- what are the goals of these stakeholders when using this product?\n- what are the missing functionalities?\n- what are the general complaints?\n\nIs it a _product for engineers_?\n\n- what's their current workflow?\n- what are the things they are happy about?\n- what are the things they are angry about?\n\nBut for all three (and any other) groups, we can always think about UX (what are the UX pain points?) and find ways to help them achieve their goal.\n\nFiguring out which product you're working on is a good starting point. Asking a lot of questions about the business, the users, and how it is used are also tools to gain more knowledge about the product.\n\nThe second thing I usually do is to understand the next steps, the OKR, the goals of the team regarding the product. Understanding why we are creating this feature _X_, the related metrics we want to achieve, and actively participating in discussions to debate _what_ and _how_ to do things.\n\nHaving open doors to engineers in these meetings is awesome because we can not only help thinking about product ideas but also give insights into the software underneath the product. As we have the engineering and the software background, it's very useful when creating strategies and debating engineering X product tradeoffs.\n\nDon't miss the opportunity to learn more about the product and actively participate in strategy and planning meetings if it's possible.\n\n### Challenge yourself with interesting projects\n\nInteresting projects can be the building block for your learning experience at work. While doing a challenging project, you'll probably learn a lot. Things you don't know and need to search and learn. Things you know and could do the best work. After finishing this kind of project, it's nice to do a retrospective on things that went well and things that you could do better. It's always a learning experience.\n\nI like challenging projects because, first, I like challenges. Second, because I always have fun at work when I have the opportunity to learn new things. And finally, because I like to look at my past self and be proud of the work I did.\n\nThings I did:\n\n- Built products and business from scratch:\n  - Built a whole new app for photographers\n  - Built the for sale business in the affiliates product\n- [Web Performance optimizations for the real estate's owners product](/optimizing-the-performance-of-a-react-progressive-web-app)\n- [Developer Experience in frontend engineering](/dx-and-software-maintainability-in-frontend-engineering)\n- CI/CD optimizations, monitoring systems, and [automated tests](/basic-recipes-for-react-testing-library)\n\nIn all these projects I could always learn a lot. Building the photographers app was the first time I worked with serverless functions and React. Building the affiliate product was the first time I worked with Clojure and the payment system. Improving web performance was the first time I worked with performance in the web and build tooling (mostly Webpack) in depth. Thinking about DX gave me a macro perspective about the engineer's workflow and I can apply this knowledge in other places as well.\n\nChallenging projects are always great tools for self-improvement as they are opportunities to keep learning and improving your craft. Seek interesting projects and keep learning. The feeling to look to your past self and be proud of your decisions and development is amazing.\n\n### Keep a Journal\n\nI have a habit to document everything. From things I'm learning to book's notes. From articles ideas to daily journals. Journaling is part of my day and it helps me think and opens space to reflect on the things I did in the past.\n\nThese are a series of ideas I came across and you can use in your favor as well:\n\nDocument all the things I accomplished\n\n- `What`: What was the project I was working on, the problem I was solving, or features I implemented.\n- `How`: How were the solution and the architecture decision, which PRs I worked on, what were the tradeoffs, how the team worked together, and what was my role in this whole project.\n- `Learnings`: What are things I would do differently – it can be architecture, solution, process, delegation, communication, prioritization, anything that could be improved and you can use it as a learning experience for another project.\n\nUnderstand the impact of your work\n\n- The first things that should be 100% clear to me are: what's the problem we are solving, why (this usually come from the PM, designer, or business people), and how we should solve this.\n- With that in mind, I keep my eye on the important \"metrics\":\n  - `business/ux`: I work together with PMs and designers to understand the business metrics and OKRs we'll be looking at.\n  - `engineering`: performance, build time, error logs, monitoring systems.\n  - `dx`: feedback from my teammates about what are the pain points and create initiatives to solve these problems.\n\nWeekly documents\n\n- As I told you, I document everything. It's a habit. At the end of the week, I tend to compile all my daily documents in a weekly document.\n- It's cool to see what I've been working on, what I've learned, and the challenges I had to overcome.\n\nQuarter document\n\n- It is also great to document in this way because I can just compound all notes I wrote at the end of the quarter, and it works like a report document for everyone at the company that wants to know what I've been doing.\n- This document also serves as a \"brag document\" to talk to your manager.\n- It's easy for your manager to understand your accomplishments.\n- It's easy for your manager to use this document to work on your promotion (if you're interested in this).\n\nThis is why I think documentation and journals are powerful. Making it a tiny habit has a huge impact after compounding all your work. As engineers, we tend to focus on the little things in our daily lives, but having this macro vision about our work is rewarding. It makes me proud and aware of my self-development.\n\n## Final words\n\nAs I wrote at the beginning of this essay, even though the title is a true story and money is a valuable and important capital in our lives, I wanted to talk about skills, experiences, opportunities, and mindset. Basically how I became better at my own craft. And I hope this piece can help you in some way in your career. Feel free to steal some ideas you find interesting and apply them in your life.\n\nFinally, I need to say _Thanks!_ to QuintoAndar for its great culture and the amazing people I worked with: my peers, my managers and leaders, and stakeholders that enabled me to be the best version of myself. I only have gratitude.\n\n## Resources\n\n### Writings\n\n- [Optimizing the Performance of a React Progressive Web App](/optimizing-the-performance-of-a-react-progressive-web-app)\n- [React Hooks, Context API, and Pokemons](/react-hooks-context-api-and-pokemons)\n- [Closures, Currying, and Cool Abstractions](/closure-currying-and-cool-abstractions)\n- [Building an abstraction for React intl messages](/building-an-abstraction-for-react-internationalization-messages)\n- [Functional Programming Principles in JavaScript](https://iamtk.co/functional-programming-principles-in-javascript)\n- [Consistent State Management in React and Redux](/consistent-state-management-in-react-and-redux)\n- [A Mental Model to think in TypeScript](https://iamtk.co/a-mental-model-to-think-in-typescript)\n- [UX Studies with React, TypeScript, and Testing Library](https://iamtk.co/ux-studies-with-react-typescript-and-testing-library)\n- [TDD, simple functions, and React components](/tdd-functions-and-react-components)\n- [Basic Recipes for React Testing Library](/basic-recipes-for-react-testing-library)\n- [Data Fetching in React with react-query](/data-fetching-in-react-with-react-query)\n- [DX & Software Maintainability in Frontend Engineering](/dx-and-software-maintainability-in-frontend-engineering)\n\n### Series\n\n- [Data Structures series](/series/data-structures)\n- [Building an Interpreter Series](/series/building-an-interpreter)\n\n### Learning\n\n- [Designing my Life's System](/designing-my-lifes-system)\n- [Designing my Learning Experience](/designing-my-learning-experience)\n- [Building a simple Individual Development Plan (IDP) with Notion](/building-an-individual-development-plan-with-notion)\n- [Compromise and collaboration: Working with product](https://leaddev.com/culture-engagement-motivation/compromise-and-collaboration-working-product)\n- [Nope, Practice does not make perfect](https://www.getrevue.co/profile/lucianohgo/issues/nope-practice-does-not-make-perfect-lu-s-newsletter-issue-4-423806)\n- [First Principles: The Building Blocks of True Knowledge](https://fs.blog/first-principles/)\n- [First Principles: Elon Musk on the Power of Thinking for Yourself](https://jamesclear.com/first-principles)\n\n### Interesting resources\n\n- [Get your work recognized: write a brag document](https://jvns.ca/blog/brag-documents/)\n- [Do Things that Don't Scale](http://paulgraham.com/ds.html)\n- [react-query](https://react-query.tanstack.com/)\n- [swr](https://swr.vercel.app/)\n",
  },
  {
    url: '/learning-python-from-zero-to-hero',
    title: 'Learning Python: From Zero to Hero',
    content:
      'First of all, what is Python? According to its creator, Guido van Rossum, Python is a:\n\n> “high-level programming language, and its core design philosophy is all about code readability and a syntax which allows programmers to express concepts in a few lines of code.”\n\nFor me, the first reason to learn Python was that it is, in fact, a beautiful programming language. It was really natural to code in it and express my thoughts.\n\nAnother reason was that we can use coding in Python in multiple ways: data science, web development, and machine learning all shine here. Quora, Pinterest and Spotify all use Python for their backend web development. So let’s learn a bit about it.\n\n### The Basics\n\n#### 1. Variables\n\nYou can think about variables as words that store a value. Simple as that.\n\nIn Python, it is really easy to define a variable and set a value to it. Imagine you want to store number 1 in a variable called “one.” Let’s do it:\n\n```python\none = 1\n```\n\nHow simple was that? You just assigned the value 1 to the variable “one.”\n\n```python\ntwo = 2\nsome_number = 10000\n```\n\nAnd you can assign any other **value** to whatever other **variables** you want. As you see in the table above, the variable “**two**” stores the integer **2**, and “**some_number**” stores **10,000**.\n\nBesides integers, we can also use booleans (True / False), strings, float, and so many other data types.\n\n```python\n# booleans\ntrue_boolean = True\nfalse_boolean = False\n\n# string\nmy_name = "Leandro Tk"\n\n# float\nbook_price = 15.80\n```\n\n#### 2. Control Flow: conditional statements\n\n“**If**” uses an expression to evaluate whether a statement is True or False. If it is True, it executes what is inside the “if” statement. For example:\n\n```python\nif True:\n  print("Hello Python If")\n\nif 2 > 1:\n  print("2 is greater than 1")\n```\n\n**2** is greater than **1**, so the “**print**” code is executed.\n\nThe “**else**” statement will be executed if the “**if**” expression is **false**.\n\n```python\nif 1 > 2:\n  print("1 is greater than 2")\nelse:\n  print("1 is not greater than 2")\n```\n\n**1** is not greater than **2**, so the code inside the “**else**” statement will be executed.\n\nYou can also use an “**elif**” statement:\n\n```python\nif 1 > 2:\n  print("1 is greater than 2")\nelif 2 > 1:\n  print("1 is not greater than 2")\nelse:\n  print("1 is equal to 2")\n```\n\n#### 3. Looping / Iterator\n\nIn Python, we can iterate in different forms. I’ll talk about two: **while** and **for**.\n\n**While** Looping: while the statement is True, the code inside the block will be executed. So, this code will print the number from **1** to **10**.\n\n```python\nnum = 1\n\nwhile num <= 10:\n    print(num)\n    num += 1\n```\n\nThe **while** loop needs a “**loop condition.**” If it stays True, it continues iterating. In this example, when `num` is `11` the **loop condition** equals `False`.\n\nAnother basic bit of code to better understand it:\n\n```python\nloop_condition = True\n\nwhile loop_condition:\n    print("Loop Condition keeps: %s" %(loop_condition))\n    loop_condition = False\n```\n\nThe **loop condition** is `True` so it keeps iterating — until we set it to `False`.\n\n**For Looping**: you apply the variable “**num**” to the block, and the “**for**” statement will iterate it for you. This code will print the same as **while** code: from **1** to **10**.\n\n```python\nfor i in range(1, 11):\n  print(i)\n```\n\nSee? It is so simple. The range starts with `1` and goes until the `11`th element (`10` is the `10`th element).\n\n### List: Collection | Array | Data Structure\n\nImagine you want to store the integer 1 in a variable. But maybe now you want to store 2. And 3, 4, 5 …\n\nDo I have another way to store all the integers that I want, but not in **millions of variables**? You guessed it — there is indeed another way to store them.\n\n`List` is a collection that can be used to store a list of values (like these integers that you want). So let’s use it:\n\n```python\nmy_integers = [1, 2, 3, 4, 5]\n```\n\nIt is really simple. We created an array and stored it on **my_integer**.\n\nBut maybe you are asking: “How can I get a value from this array?”\n\nGreat question. `List` has a concept called **index**. The first element gets the index 0 (zero). The second gets 1, and so on. You get the idea.\n\nTo make it clearer, we can represent the array and each element with its index. I can draw it:\n\n![](https://cdn-images-1.medium.com/max/1600/1*ReMk6NgghLII20vPD6uNEA.jpeg)\n\nUsing the Python syntax, it’s also simple to understand:\n\n```python\nmy_integers = [5, 7, 1, 3, 4]\nprint(my_integers[0]) # 5\nprint(my_integers[1]) # 7\nprint(my_integers[4]) # 4\n```\n\nImagine that you don’t want to store integers. You just want to store strings, like a list of your relatives’ names. Mine would look something like this:\n\n```python\nrelatives_names = [\n  "Toshiaki",\n  "Juliana",\n  "Yuji",\n  "Bruno",\n  "Kaio"\n]\n\nprint(relatives_names[4]) # Kaio\n```\n\nIt works the same way as integers. Nice.\n\nWe just learned how `Lists` indices work. But I still need to show you how we can add an element to the `List` data structure (an item to a list).\n\nThe most common method to add a new value to a `List` is `append`. Let’s see how it works:\n\n```python\nbookshelf = []\nbookshelf.append("The Effective Engineer")\nbookshelf.append("The 4 Hour Work Week")\nprint(bookshelf[0]) # The Effective Engineer\nprint(bookshelf[1]) # The 4 Hour Work Week\n```\n\n`append` is super simple. You just need to apply the element (eg. “**The Effective Engineer**”) as the `append` parameter.\n\nWell, enough about `Lists`**.** Let’s talk about another data structure.\n\n### Dictionary: Key-Value Data Structure\n\nNow we know that `Lists` are indexed with integer numbers. But what if we don’t want to use integer numbers as indices? Some data structures that we can use are numeric, string, or other types of indices.\n\nLet’s learn about the `Dictionary` data structure. `Dictionary` is a collection of key-value pairs. Here’s what it looks like:\n\n```python\ndictionary_example = {\n  "key1": "value1",\n  "key2": "value2",\n  "key3": "value3"\n}\n```\n\nThe **key** is the index pointing to the **value**. How do we access the `Dictionary` **value**? You guessed it — using the **key**. Let’s try it:\n\n```python\ndictionary_tk = {\n  "name": "Leandro",\n  "nickname": "Tk",\n  "nationality": "Brazilian"\n}\n\nprint("My name is %s" %(dictionary_tk["name"])) # My name is Leandro\nprint("But you can call me %s" %(dictionary_tk["nickname"])) # But you can call me Tk\nprint("And by the way I\'m %s" %(dictionary_tk["nationality"])) # And by the way I\'m Brazilian\n```\n\nI created a `Dictionary` about me. My name, nickname, and nationality. Those attributes are the `Dictionary` **keys**.\n\nAs we learned how to access the `List` using index, we also use indices (**keys** in the `Dictionary` context) to access the **value** stored in the `Dictionary`.\n\nIn the example, I printed a phrase about me using all the values stored in the `Dictionary`. Pretty simple, right?\n\nAnother cool thing about `Dictionary` is that we can use anything as the value. In the `Dictionary` I created, I want to add the **key** “age” and my real integer age in it:\n\n```python\ndictionary_tk = {\n  "name": "Leandro",\n  "nickname": "Tk",\n  "nationality": "Brazilian",\n  "age": 24\n}\n\nprint("My name is %s" %(dictionary_tk["name"])) # My name is Leandro\nprint("But you can call me %s" %(dictionary_tk["nickname"])) # But you can call me Tk\nprint("And by the way I\'m %i and %s" %(dictionary_tk["age"], dictionary_tk["nationality"])) # And by the way I\'m Brazilian\n```\n\nHere we have a **key** (age) **value** (24) pair using string as the **key** and integer as the **value**.\n\nAs we did with `Lists`, let’s learn how to add elements to a `Dictionary`. The **key **pointing to a** value** is a big part of what `Dictionary` is. This is also true when we are talking about adding elements to it:\n\n```python\ndictionary_tk = {\n  "name": "Leandro",\n  "nickname": "Tk",\n  "nationality": "Brazilian"\n}\n\ndictionary_tk[\'age\'] = 24\n\nprint(dictionary_tk) # {\'nationality\': \'Brazilian\', \'age\': 24, \'nickname\': \'Tk\', \'name\': \'Leandro\'}\n```\n\nWe just need to assign a **value** to a `Dictionary` **key**. Nothing complicated here, right?\n\n### Iteration: Looping Through Data Structures\n\nAs we learned in the [Python Basics](https://medium.com/the-renaissance-developer/python-101-the-basics-441136fb7cc3), the `List` iteration is very simple. We `Python` developers commonly use `For` looping. Let’s do it:\n\n```python\nbookshelf = [\n  "The Effective Engineer",\n  "The 4 hours work week",\n  "Zero to One",\n  "Lean Startup",\n  "Hooked"\n]\n\nfor book in bookshelf:\n    print(book)\n```\n\nSo for each book in the bookshelf, we (**can do everything with it**) print it. Pretty simple and intuitive. That’s Python.\n\nFor a hash data structure, we can also use the `for` loop, but we apply the `key` :\n\n```python\ndictionary = { "some_key": "some_value" }\n\nfor key in dictionary:\n    print("%s --> %s" %(key, dictionary[key]))\n\n# some_key --> some_value\n```\n\nThis is an example how to use it. For each `key` in the `dictionary` , we `print` the `key` and its corresponding `value`.\n\nAnother way to do it is to use the `iteritems` method.\n\n```python\ndictionary = { "some_key": "some_value" }\n\nfor key, value in dictionary.items():\n    print("%s --> %s" %(key, value))\n\n# some_key --> some_value\n```\n\nWe did name the two parameters as `key` and `value`, but it is not necessary. We can name them anything. Let’s see it:\n\n```python\ndictionary_tk = {\n  "name": "Leandro",\n  "nickname": "Tk",\n  "nationality": "Brazilian",\n  "age": 24\n}\n\nfor attribute, value in dictionary_tk.items():\n    print("My %s is %s" %(attribute, value))\n\n# My name is Leandro\n# My nickname is Tk\n# My nationality is Brazilian\n# My age is 24\n```\n\nWe can see we used attribute as a parameter for the `Dictionary` `key`, and it works properly. Great!\n\n### Classes & Objects\n\n#### A little bit of theory:\n\n**Objects** are a representation of real world objects like cars, dogs, or bikes. The objects share two main characteristics: **data** and **behavior**.\n\nCars have **data,** like number of wheels, number of doors, and seating capacity They also exhibit **behavior**: they can accelerate, stop, show how much fuel is left, and so many other things.\n\nWe identify **data** as **attributes** and **behavior** as **methods** in object-oriented programming. Again:\n\nData → Attributes and Behavior → Methods\n\nAnd a **Class** is the blueprint from which individual objects are created. In the real world, we often find many objects with the same type. Like cars. All the same make and model (and all have an engine, wheels, doors, and so on). Each car was built from the same set of blueprints and has the same components.\n\n#### Python Object-Oriented Programming mode: ON\n\nPython, as an Object-Oriented programming language, has these concepts: **class** and **object**.\n\nA class is a blueprint, a model for its objects.\n\nSo again, a class it is just a model, or a way to define **attributes** and **behavior** (as we talked about in the theory section). As an example, a vehicle **class** has its own **attributes** that define what **objects** are vehicles. The number of wheels, type of tank, seating capacity, and maximum velocity are all attributes of a vehicle.\n\nWith this in mind, let’s look at Python syntax for **classes**:\n\n```python\nclass Vehicle:\n    pass\n```\n\nWe define classes with a class statement — and that’s it. Easy, isn’t it?\n\n**Objects** are instances of a **class**. We create an instance by naming the class.\n\n```python\ncar = Vehicle()\nprint(car) # <__main__.Vehicle instance at 0x7fb1de6c2638>\n```\n\nHere `car` is an **object** (or instance) of the **class** `Vehicle`.\n\nRemember that our vehicle **class** has four **attributes**: number of wheels, type of tank, seating capacity, and maximum velocity. We set all these **attributes** when creating a vehicle **object**. So here, we define our **class** to receive data when it initiates it:\n\n```python\nclass Vehicle:\n    def __init__(self, number_of_wheels, type_of_tank, seating_capacity, maximum_velocity):\n        self.number_of_wheels = number_of_wheels\n        self.type_of_tank = type_of_tank\n        self.seating_capacity = seating_capacity\n        self.maximum_velocity = maximum_velocity\n```\n\nWe use the `init` **method**. We call it a constructor method. So when we create the vehicle **object**, we can define these **attributes**. Imagine that we love the **Tesla Model S,** and we want to create this kind of **object**. It has four wheels, runs on electric energy, has space for five seats, and the maximum velocity is 250km/hour (155 mph). Let’s create this **object:**\n\n```python\ntesla_model_s = Vehicle(4, \'electric\', 5, 250)\n```\n\nFour wheels + electric “tank type” + five seats + 250km/hour maximum speed.\n\nAll attributes are set. But how can we access these attributes’ values? We **send a message to the object asking about them**. We call it a **method**. It’s the **object’s behavior**. Let’s implement it:\n\n```python\nclass Vehicle:\n    def __init__(self, number_of_wheels, type_of_tank, seating_capacity, maximum_velocity):\n        self.number_of_wheels = number_of_wheels\n        self.type_of_tank = type_of_tank\n        self.seating_capacity = seating_capacity\n        self.maximum_velocity = maximum_velocity\n\n    def number_of_wheels(self):\n        return self.number_of_wheels\n\n    def set_number_of_wheels(self, number):\n        self.number_of_wheels = number\n```\n\nThis is an implementation of two methods: **number_of_wheels** and **set_number_of_wheels**. We call it `getter` & `setter`. Because the first gets the attribute value, and the second sets a new value for the attribute.\n\nIn Python, we can do that using `@property` (`decorators`) to define `getters` and `setters`. Let’s see it with code:\n\n```python\nclass Vehicle:\n    def __init__(self, number_of_wheels, type_of_tank, seating_capacity, maximum_velocity):\n        self.number_of_wheels = number_of_wheels\n        self.type_of_tank = type_of_tank\n        self.seating_capacity = seating_capacity\n        self.maximum_velocity = maximum_velocity\n\n    @property\n    def number_of_wheels(self):\n        return self.number_of_wheels\n\n    @number_of_wheels.setter\n    def number_of_wheels(self, number):\n        self.number_of_wheels = number\n```\n\nAnd we can use these methods as attributes:\n\n```python\ntesla_model_s = Vehicle(4, \'electric\', 5, 250)\nprint(tesla_model_s.number_of_wheels) # 4\ntesla_model_s.number_of_wheels = 2 # setting number of wheels to 2\nprint(tesla_model_s.number_of_wheels) # 2\n```\n\nThis is slightly different than defining methods. The methods work as attributes. For example, when we set the new number of wheels, we don’t apply two as a parameter, but set the value 2 to `number_of_wheels`. This is one way to write `pythonic` `getter` and `setter` code.\n\nBut we can also use methods for other things, like the “**make_noise**” method. Let’s see it:\n\n```python\nclass Vehicle:\n    def __init__(self, number_of_wheels, type_of_tank, seating_capacity, maximum_velocity):\n        self.number_of_wheels = number_of_wheels\n        self.type_of_tank = type_of_tank\n        self.seating_capacity = seating_capacity\n        self.maximum_velocity = maximum_velocity\n\n    def make_noise(self):\n        print(\'VRUUUUUUUM\')\n```\n\nWhen we call this method, it just returns a string **“VRRRRUUUUM.”**\n\n```python\ntesla_model_s = Vehicle(4, \'electric\', 5, 250)\ntesla_model_s.make_noise() # VRUUUUUUUM\n```\n\n### Encapsulation: Hiding Information\n\nEncapsulation is a mechanism that restricts direct access to objects’ data and methods. But at the same time, it facilitates operation on that data (objects’ methods).\n\n> “Encapsulation can be used to hide data members and members function. Under this definition, encapsulation means that the internal representation of an object is generally hidden from view outside of the object’s definition.” — Wikipedia\n\nAll internal representation of an object is hidden from the outside. Only the object can interact with its internal data.\n\nFirst, we need to understand how `public` and `non-public` instance variables and methods work.\n\n#### Public Instance Variables\n\nFor a Python class, we can initialize a `public instance variable` within our constructor method. Let’s see this:\n\nWithin the constructor method:\n\n```python\nclass Person:\n    def __init__(self, first_name):\n        self.first_name = first_name\n```\n\nHere we apply the `first_name` value as an argument to the `public instance variable`.\n\n```python\ntk = Person(\'TK\')\nprint(tk.first_name) # => TK\n```\n\nWithin the class:\n\n```python\nclass Person:\n    first_name = \'TK\'\n```\n\nHere, we do not need to apply the `first_name` as an argument, and all instance objects will have a `class attribute` initialized with `TK`.\n\n```python\ntk = Person()\nprint(tk.first_name) # => TK\n```\n\nCool. We have now learned that we can use `public instance variables` and `class attributes`. Another interesting thing about the `public` part is that we can manage the variable value. What do I mean by that? Our `object` can manage its variable value: `Get` and `Set` variable values.\n\nKeeping the `Person` class in mind, we want to set another value to its `first_name` variable:\n\n```python\ntk = Person(\'TK\')\ntk.first_name = \'Kaio\'\nprint(tk.first_name) # => Kaio\n```\n\nThere we go. We just set another value (`kaio`) to the `first_name` instance variable and it updated the value. Simple as that. Since it’s a `public` variable, we can do that.\n\n#### Non-public Instance Variable\n\n> We don’t use the term “private” here, since no attribute is really private in Python (without a generally unnecessary amount of work). — PEP 8\n\nAs the `public instance variable` , we can define the `non-public instance variable` both within the constructor method or within the class. The syntax difference is: for `non-public instance variables` , use an underscore (`_`) before the `variable` name.\n\n> “‘Private’ instance variables that cannot be accessed except from inside an object don’t exist in Python. However, there is a convention that is followed by most Python code: a name prefixed with an underscore (e.g. \\_spam) should be treated as a non-public part of the API (whether it is a function, a method or a data member)” — Python Software Foundation\n\nHere’s an example:\n\n```python\nclass Person:\n    def __init__(self, first_name, email):\n        self.first_name = first_name\n        self._email = email\n```\n\nDid you see the `email` variable? This is how we define a `non-public variable` :\n\n```python\ntk = Person(\'TK\', \'tk@mail.com\')\nprint(tk._email) # tk@mail.com\n```\n\n> We can access and update it. Non-public variables are just a convention and should be treated as a non-public part of the API.\n\nSo we use a method that allows us to do it inside our class definition. Let’s implement two methods (`email` and `update_email`) to understand it:\n\n```python\nclass Person:\n    def __init__(self, first_name, email):\n        self.first_name = first_name\n        self._email = email\n\n    def update_email(self, new_email):\n        self._email = new_email\n\n    def email(self):\n        return self._email\n```\n\nNow we can update and access `non-public variables` using those methods. Let’s see:\n\n```python\ntk = Person(\'TK\', \'tk@mail.com\')\nprint(tk.email()) # => tk@mail.com\ntk._email = \'new_tk@mail.com\'\nprint(tk.email()) # => tk@mail.com\ntk.update_email(\'new_tk@mail.com\')\nprint(tk.email()) # => new_tk@mail.com\n```\n\n#### Public Method\n\nWith `public methods`, we can also use them out of our class:\n\n```python\nclass Person:\n    def __init__(self, first_name, age):\n        self.first_name = first_name\n        self._age = age\n\n    def show_age(self):\n        return self._age\n```\n\nLet’s test it:\n\n```python\ntk = Person(\'TK\', 25)\nprint(tk.show_age()) # => 25\n```\n\nGreat — we can use it without any problem.\n\n#### Non-public Method\n\nBut with `non-public methods` we aren’t able to do it. Let’s implement the same `Person` class, but now with a `show_age` `non-public method` using an underscore (`_`).\n\n```python\nclass Person:\n    def __init__(self, first_name, age):\n        self.first_name = first_name\n        self._age = age\n\n    def _show_age(self):\n        return self._age\n```\n\nAnd now, we’ll try to call this `non-public method` with our object:\n\n```python\ntk = Person(\'TK\', 25)\nprint(tk._show_age()) # => 25\n```\n\n> We can access and update it. Non-public methods are just a convention and should be treated as a non-public part of the API.\n\nHere’s an example for how we can use it:\n\n```python\nclass Person:\n    def __init__(self, first_name, age):\n        self.first_name = first_name\n        self._age = age\n\n    def show_age(self):\n        return self._get_age()\n\n    def _get_age(self):\n        return self._age\n\ntk = Person(\'TK\', 25)\nprint(tk.show_age()) # => 25\n```\n\nHere we have a `_get_age` `non-public method` and a `show_age` `public method`. The `show_age` can be used by our object (out of our class) and the `_get_age` only used inside our class definition (inside `show_age` method). But again: as a matter of convention.\n\n#### Encapsulation Summary\n\nWith encapsulation we can ensure that the internal representation of the object is hidden from the outside.\n\n### Inheritance: behaviors and characteristics\n\nCertain objects have some things in common: their behavior and characteristics.\n\nFor example, I inherited some characteristics and behaviors from my father. I inherited his eyes and hair as characteristics, and his impatience and introversion as behaviors.\n\nIn object-oriented programming, classes can inherit common characteristics (data) and behavior (methods) from another class.\n\nLet’s see another example and implement it in Python.\n\n**ElectricCar** class inherits these same attributes from the regular **Car** class.\n\n```python\nclass Car:\n    def __init__(self, number_of_wheels, seating_capacity, maximum_velocity):\n        self.number_of_wheels = number_of_wheels\n        self.seating_capacity = seating_capacity\n        self.maximum_velocity = maximum_velocity\n```\n\nOur **Car** class implemented:\n\n```python\nmy_car = Car(4, 5, 250)\nprint(my_car.number_of_wheels)\nprint(my_car.seating_capacity)\nprint(my_car.maximum_velocity)\n```\n\nOnce initiated, we can use all `instance variables` created. Nice.\n\nIn Python, we apply a `parent class` to the `child class` as a parameter. An **ElectricCar** class can inherit from our **Car** class.\n\n```python\nclass ElectricCar(Car):\n    def __init__(self, number_of_wheels, seating_capacity, maximum_velocity):\n        Car.__init__(self, number_of_wheels, seating_capacity, maximum_velocity)\n```\n\nSimple as that. We don’t need to implement any other method, because this class already has it (inherited from **Car** class). Let’s prove it:\n\n```python\nmy_electric_car = ElectricCar(4, 5, 250)\nprint(my_electric_car.number_of_wheels) # => 4\nprint(my_electric_car.seating_capacity) # => 5\nprint(my_electric_car.maximum_velocity) # => 250\n```\n\nBeautiful.\n\n### That’s it!\n\nWe learned a lot of things about Python basics:\n\n- How Python variables work\n- How Python conditional statements work\n- How Python looping (while & for) works\n- How to use Lists: Collection | Array\n- Dictionary Key-Value Collection\n- How we can iterate through these data structures\n- Objects and Classes\n- Attributes as objects’ data\n- Methods as objects’ behavior\n- Using Python getters and setters & property decorator\n- Encapsulation: hiding information\n- Inheritance: behaviors and characteristics\n\nCongrats! You completed this dense piece of content about Python.\n\nIf you want a complete Python course, learn more real-world coding skills and build projects, try [One Month Python Bootcamp](https://onemonth.com/courses/python?campaignid=33447&discount_code=TKPython1&mbsy=lG6tv&mbsy_source=7d89eeb0-0031-478c-a60c-6a96d762712a). See you there ☺\n\nFor more stories and posts about my journey learning & mastering programming, follow my publication [The Renaissance Developer](https://medium.com/the-renaissance-developer).\n\n[This post was first published at my Medium blog.](https://medium.freecodecamp.org/learning-python-from-zero-to-hero-120ea540b567)\n\nHave fun, keep learning, and always keep coding.\n',
  },
  {
    url: '/learning-ruby-from-zero-to-hero',
    title: 'Learning Ruby: From Zero to Hero',
    content:
      '> “Ruby is simple in appearance, but is very complex inside, just like our human body.” — Matz, creator of the Ruby programming language\n\nWhy learn Ruby?\n\nFor me, the first reason is that it’s a beautiful language. It’s natural to code and it always expresses my thoughts.\n\nThe second — and main — reason is Rails: the same framework that Twitter, Basecamp, Airbnb, Github, and so many companies use.\n\n### Introduction/History\n\nRuby is “A dynamic, open source programming language with a focus on simplicity and productivity. It has an elegant syntax that is natural to read and easy to write.” — [ruby-lang.org](https://www.ruby-lang.org/)\n\nLet’s get started with some basics!\n\n### Variables\n\nYou can think about a variable as a word that stores a value. Simple as that.\n\nIn Ruby it’s easy to define a variable and set a value to it. Imagine you want to store the number 1 in a variable called one. Let’s do it!\n\n```ruby\none = 1\n```\n\nHow simple was that? You just assigned the value 1 to a variable called one.\n\n```ruby\ntwo = 2\nsome_number = 10000\n```\n\nYou can assign a value to whatever variable you want. In the example above, a two variable stores an integer of 2 and some_number stores 10,000.\n\nBesides integers, we can also use booleans (true/false), strings, [symbols](http://rubylearning.com/satishtalim/ruby_symbols.html), float, and other data types.\n\n```ruby\n# booleans\ntrue_boolean = true\nfalse_boolean = false\n\n# string\nmy_name = "Leandro Tk"\n\n# symbol\na_symbol = :my_symbol\n\n# float\nbook_price = 15.80\n\n```\n\n### Conditional Statements: Control Flow\n\nConditional statements evaluate true or false. If something is true, it executes what’s inside the statement. For example:\n\n```ruby\nif true\n  puts "Hello Ruby If"\nend\n\nif 2 > 1\n  puts "2 is greater than 1"\nend\n\n```\n\n2 is greater than 1, so the puts code is executed.\n\nThis else statement will be executed when the if expression is false:\n\n```ruby\nif 1 > 2\n  puts "1 is greater than 2"\nelse\n  puts "1 is not greater than 2"\nend\n```\n\n1 is not greater than 2, so the code inside the else statement will be executed.\n\nThere’s also the elsif statement. You can use it like this:\n\n```ruby\nif 1 > 2\n  puts "1 is greater than 2"\nelsif 2 > 1\n  puts "1 is not greater than 2"\nelse\n  puts "1 is equal to 2"\nend\n```\n\nOne way I really like to write Ruby is to use an if statement after the code to be executed:\n\n```ruby\ndef hey_ho?\n  true\nend\n\nputs "let’s go" if hey_ho?\n```\n\nIt is so beautiful and natural. It is idiomatic Ruby.\n\n### Looping/Iterator\n\nIn Ruby we can iterate in so many different forms. I’ll talk about three iterators: while, for and each.\n\nWhile looping: As long as the statement is true, the code inside the block will be executed. So this code will print the number from 1 to 10:\n\n```ruby\nnum = 1\n\nwhile num <= 10\n  puts num\n  num += 1\nend\n```\n\nFor looping: You pass the variable num to the block and the for statement will iterate it for you. This code will print the same as while code: from 1 to 10:\n\n```ruby\nfor num in 1..10\n  puts num\nend\n```\n\nEach iterator: I really like the each iterator. For an array of values, it’ll iterate one by one, passing the variable to the block:\n\n```ruby\n[1, 2, 3, 4, 5].each do |num|\n  puts num\nend\n```\n\nYou may be asking what the difference is between the each iterator and for looping. The main difference is that the each iterator only maintains the variable inside the iteration block, whereas for looping allows the variable to live on outside the block.\n\n```ruby\n# for vs each\n\n# for looping\nfor num in 1...5\n  puts num\nend\n\nputs num # => 5\n\n# each iterator\n[1, 2, 3, 4, 5].each do |num|\n  puts num\nend\n\nputs num # => undefined local variable or method `n\' for main:Object (NameError)\n```\n\n### Array: Collection/List/Data Structure\n\nImagine you want to store the integer 1 in a variable. But maybe now you want to store 2. And 3, 4, 5 …\n\nDo I have a way to store all the integers that I want, but not in millions of variables? Ruby has an answer!\n\nArray is a collection that can be used to store a list of values (like these integers). So let’s use it!\n\n```ruby\nmy_integers = [1, 2, 3, 4, 5]\n```\n\nIt is really simple. We created an array and stored it in my_integer.\n\nYou may be asking, “How can I get a value from this array?” Great question. Arrays have a concept called index. The first element gets the index 0 (zero). The second gets 1, and so on. You get the idea!\n\n![](https://cdn-images-1.medium.com/max/1600/1*HmGUFmEI1w7ClqD6YCSmJQ.png)\n\nUsing the Ruby syntax, it’s simple to understand:\n\n```ruby\nmy_integers = [5, 7, 1, 3, 4]\nprint my_integers[0] # 5\nprint my_integers[1] # 7\nprint my_integers[4] # 4\n```\n\nImagine you want to store strings instead of integers, like a list of your relatives’ names. Mine would be something like this:\n\n```ruby\nrelatives_names = [\n  "Toshiaki",\n  "Juliana",\n  "Yuji",\n  "Bruno",\n  "Kaio"\n]\n\nprint relatives_names[4] # Kaio\n```\n\nWorks the same way as integers. Nice!\n\nWe just learned how array indices works. Now let’s add elements to the array data structure (items to the list).\n\nThe most common methods to add a new value to an array are push and <<.\n\nPush is super simple! You just need to pass the element (The Effective Engineer) as the push parameter:\n\n```ruby\nbookshelf = []\nbookshelf.push("The Effective Engineer")\nbookshelf.push("The 4 hours work week")\nprint bookshelf[0] # The Effective Engineer\nprint bookshelf[1] # The 4 hours work week\n```\n\nThe << method is just slightly different:\n\n```ruby\nbookshelf = []\nbookshelf << "Lean Startup"\nbookshelf << "Zero to One"\nprint bookshelf[0] # Lean Startup\nprint bookshelf[1] # Zero to One\n```\n\nYou may ask, “But it doesn’t use the dot notation like other methods do. How could it be a method?” Nice question! Writing this:\n\n```ruby\nbookshelf << "Hooked"\n```\n\n…is similar to writing this:\n\n```ruby\nbookshelf.<<("Hooked")\n```\n\nRuby is so great, huh?\n\nWell, enough arrays. Let’s talk about another data structure.\n\n### Hash: Key-Value Data Structure/Dictionary Collection\n\nWe know that arrays are indexed with numbers. But what if we don’t want to use numbers as indices? Some data structures can use numeric, string, or other types of indices. The hash data structure is one of them.\n\nHash is a collection of key-value pairs. It looks like this:\n\n```ruby\nhash_example = {\n  "key1" => "value1",\n  "key2" => "value2",\n  "key3" => "value3"\n}\n```\n\nThe key is the index pointing to the value. How do we access the hash value? Using the key!\n\nHere’s a hash about me. My name, nickname, and nationality are the hash’s keys.\n\n```ruby\nhash_tk = {\n  "name" => "Leandro",\n  "nickname" => "Tk",\n  "nationality" => "Brazilian"\n}\n\nprint "My name is #{hash_tk["name"]}" # My name is Leandro\nprint "But you can call me #{hash_tk["nickname"]}" # But you can call me Tk\nprint "And by the way I\'m #{hash_tk["nationality"]}" # And by the way I\'m Brazilian\n```\n\nIn the above example I printed a phrase about me using all the values stored in the hash.\n\nAnother cool thing about hashes is that we can use anything as the value. I’ll add the key “age” and my real integer age (24).\n\n```ruby\nhash_tk = {\n  "name" => "Leandro",\n  "nickname" => "Tk",\n  "nationality" => "Brazilian",\n  "age" => 24\n}\n\nprint "My name is #{hash_tk["name"]}" # My name is Leandro\nprint "But you can call me #{hash_tk["nickname"]}" # But you can call me Tk\nprint "And by the way I\'m #{hash_tk["age"]} and #{hash_tk["nationality"]}" # And by the way I\'m 24 and Brazilian\n```\n\nLet’s learn how to add elements to a hash. The key pointing to a value is a big part of what hash is — and the same goes for when we want to add elements to it.\n\n```ruby\nhash_tk = {\n  "name" => "Leandro",\n  "nickname" => "Tk",\n  "nationality" => "Brazilian"\n}\n\nhash_tk["age"] = 24\nprint hash_tk # { "name" => "Leandro", "nickname" => "Tk", "nationality" => "Brazilian", "age" => 24 }\n```\n\nWe just need to assign a value to a hash key. Nothing complicated here, right?\n\n### Iteration: Looping Through Data Structures\n\nThe array iteration is very simple. Ruby developers commonly use the each iterator. Let’s do it:\n\n```ruby\nbookshelf = [\n  "The Effective Engineer",\n  "The 4 hours work week",\n  "Zero to One",\n  "Lean Startup",\n  "Hooked"\n]\n\nbookshelf.each do |book|\n  puts book\nend\n```\n\nThe each iterator works by passing array elements as parameters in the block. In the above example, we print each element.\n\nFor hash data structure, we can also use the each iterator by passing two parameters to the block: the key and the value. Here’s an example:\n\n```ruby\nhash = { "some_key" => "some_value" }\nhash.each { |key, value| puts "#{key}: #{value}" } # some_key: some_value\n```\n\nWe named the two parameters as key and value, but it’s not necessary. We can name them anything:\n\n```ruby\nhash_tk = {\n  "name" => "Leandro",\n  "nickname" => "Tk",\n  "nationality" => "Brazilian",\n  "age" => 24\n}\n\nhash_tk.each do |attribute, value|\n  puts "#{attribute}: #{value}"\nend\n```\n\nYou can see we used attribute as a parameter for the hash key and it works properly. Great!\n\n### Classes & Objects\n\nAs an object oriented programming language, Ruby uses the concepts of class and object.\n\n“Class” is a way to define objects. In the real world there are many objects of the same type. Like vehicles, dogs, bikes. Each vehicle has similar components (wheels, doors, engine).\n\n“Objects” have two main characteristics: data and behavior. Vehicles have data like number of wheels and number of doors. They also have behavior like accelerating and stopping.\n\nIn object oriented programming we call data “attributes” and behavior “methods.”\n\nData = Attributes\n\nBehavior = Methods\n\n### Ruby Object Oriented Programming Mode: On\n\nLet’s understand Ruby syntax for classes:\n\n```ruby\nclass Vehicle\nend\n```\n\nWe define Vehicle with class statement and finish with end. Easy!\n\nAnd objects are instances of a class. We create an instance by calling the .new method.\n\n```ruby\nvehicle = Vehicle.new\n```\n\nis an object (or instance) of the class Vehicle.\n\nOur vehicle class will have 4 attributes: Wheels, type of tank, seating capacity, and maximum velocity.\n\nLet’s define our class Vehicle to receive data and instantiate it.\n\n```ruby\nclass Vehicle\n  def initialize(number_of_wheels, type_of_tank, seating_capacity, maximum_velocity)\n    @number_of_wheels = number_of_wheels\n    @type_of_tank = type_of_tank\n    @seating_capacity = seating_capacity\n    @maximum_velocity = maximum_velocity\n  end\nend\n\n```\n\nWe use the initialize method. We call it a constructor method so when we create the vehicle object, we can define its attributes.\n\nImagine that you love the Tesla Model S and want to create this kind of object. It has 4 wheels. Its tank type is electric energy. It has space for 5 seats and a maximum velocity is 250km/hour (155 mph). Let’s create the object tesla_model_s! :)\n\n```ruby\ntesla_model_s = Vehicle.new(4, \'electric\', 5, 250)\n```\n\n4 wheels + electric tank + 5 seats + 250km/hour maximum speed = tesla_model_s.\n\n```ruby\ntesla_model_s\n# => <Vehicle:0x0055d516903a08 @number_of_wheels=4, @type_of_tank="electric", @seating_capacity=5, @maximum_velocity=250>\n```\n\nWe’ve set the Tesla’s attributes. But how do we access them?\n\nWe send a message to the object asking about them. We call it a method. It’s the object’s behavior. Let’s implement it!\n\n```ruby\nclass Vehicle\n  def initialize(number_of_wheels, type_of_tank, seating_capacity, maximum_velocity)\n    @number_of_wheels = number_of_wheels\n    @type_of_tank = type_of_tank\n    @seating_capacity = seating_capacity\n    @maximum_velocity = maximum_velocity\n  end\n\n  def number_of_wheels\n    @number_of_wheels\n  end\n\n  def set_number_of_wheels=(number)\n    @number_of_wheels = number\n  end\nend\n\n```\n\nThis is an implementation of two methods: number_of_wheels and set_number_of_wheels. We call it “getter” and “setter.” First we get the attribute value, and second, we set a value for the attribute.\n\nIn Ruby, we can do that without methods using attr_reader, attr_writer and attr_accessor. Let’s see it with code!\n\n- attr_reader: implements the getter method\n\n```ruby\nclass Vehicle\n  attr_reader :number_of_wheels\n\n  def initialize(number_of_wheels, type_of_tank, seating_capacity, maximum_velocity)\n    @number_of_wheels = number_of_wheels\n    @type_of_tank = type_of_tank\n    @seating_capacity = seating_capacity\n    @maximum_velocity = maximum_velocity\n  end\nend\n\ntesla_model_s = Vehicle.new(4, \'electric\', 5, 250)\ntesla_model_s.number_of_wheels # => 4\n```\n\n- attr_writer: implements the setter method\n\n```ruby\nclass Vehicle\n  attr_writer :number_of_wheels\n\n  def initialize(number_of_wheels, type_of_tank, seating_capacity, maximum_velocity)\n    @number_of_wheels = number_of_wheels\n    @type_of_tank = type_of_tank\n    @seating_capacity = seating_capacity\n    @maximum_velocity = maximum_velocity\n  end\nend\n\n# number_of_wheels equals 4\ntesla_model_s = Vehicle.new(4, \'electric\', 5, 250)\ntesla_model_s # => <Vehicle:0x0055644f55b820 @number_of_wheels=4, @type_of_tank="electric", @seating_capacity=5, @maximum_velocity=250>\n\n# number_of_wheels equals 3\ntesla_model_s.number_of_wheels = 3\ntesla_model_s # => <Vehicle:0x0055644f55b820 @number_of_wheels=3, @type_of_tank="electric", @seating_capacity=5, @maximum_velocity=250>\n```\n\n- attr_accessor: implements both methods\n\n```ruby\nclass Vehicle\n  attr_accessor :number_of_wheels\n\n  def initialize(number_of_wheels, type_of_tank, seating_capacity, maximum_velocity)\n    @number_of_wheels = number_of_wheels\n    @type_of_tank = type_of_tank\n    @seating_capacity = seating_capacity\n    @maximum_velocity = maximum_velocity\n  end\nend\n\n# number_of_wheels equals 4\ntesla_model_s = Vehicle.new(4, \'electric\', 5, 250)\ntesla_model_s.number_of_wheels # => 4\n\n# number_of_wheels equals 3\ntesla_model_s.number_of_wheels = 3\ntesla_model_s.number_of_wheels # => 3\n```\n\nSo now we’ve learned how to get attribute values, implement the getter and setter methods, and use attr (reader, writer, and accessor).\n\nWe can also use methods to do other things — like a “make_noise” method. Let’s see it!\n\n```ruby\nclass Vehicle\n  def initialize(number_of_wheels, type_of_tank, seating_capacity, maximum_velocity)\n    @number_of_wheels = number_of_wheels\n    @type_of_tank = type_of_tank\n    @seating_capacity = seating_capacity\n    @maximum_velocity = maximum_velocity\n  end\n\n  def make_noise\n    "VRRRRUUUUM"\n  end\nend\n\n```\n\nWhen we call this method, it just returns a string “VRRRRUUUUM”.\n\n```ruby\nv = Vehicle.new(4, \'gasoline\', 5, 180)\nv.make_noise # => "VRRRRUUUUM"\n```\n\n### Encapsulation: Hiding Information\n\nEncapsulation is a way to restrict direct access to objects’ data and methods. At the same time it facilitates operation on that data (objects’ methods).\n\n> Encapsulation can be used to hide data members and members function…Encapsulation means that the internal representation of an object is generally hidden from view outside of the object’s definition.  — Wikipedia\n\nSo all internal representation of an object is hidden from the outside, only the object can interact with its internal data.\n\nIn Ruby we use methods to directly access data. Let’s see an example:\n\n```ruby\nclass Person\n  def initialize(name, age)\n    @name = name\n    @age  = age\n  end\nend\n```\n\nWe just implemented this Person class. And as we’ve learned, to create the object person, we use the new method and pass the parameters.\n\n```ruby\ntk = Person.new("Leandro Tk", 24)\n```\n\nSo I created me! :) The [tk](https://medium.com/@leandrotk_/) object! Passing my name and my age. But how can I access this information? My first attempt is to call the name and age methods.\n\n```ruby\ntk.name\n> NoMethodError: undefined method `name\' for #<Person:0x0055a750f4c520 @name="Leandro Tk", @age=24>\n```\n\nWe can’t do it! We didn’t implement the name (and the age) method.\n\nRemember when I said “In Ruby we use methods to directly access data?” To access the tk name and age we need to implement those methods on our Person class.\n\n```ruby\nclass Person\n  def initialize(name, age)\n    @name = name\n    @age  = age\n  end\n\n  def name\n    @name\n  end\n\n  def age\n    @age\n  end\nend\n```\n\nNow we can directly access this information. With encapsulation we can ensure that the object (tk in this case) is only allowed to access name and age. The internal representation of the object is hidden from the outside.\n\n### Inheritance: behaviors and characteristics\n\nCertain objects have something in common. Behavior and characteristics.\n\nFor example, I inherited some characteristics and behaviors from my father — like his eyes and hair. And behaviors like impatience and introversion.\n\nIn object oriented programming, classes can inherit common characteristics (data) and behavior (methods) from another class.\n\nLet’s see another example and implement it in Ruby.\n\nImagine a car. Number of wheels, seating capacity and maximum velocity are all attributes of a car.\n\n```ruby\nclass Car\n  attr_accessor :number_of_wheels, :seating_capacity, :maximum_velocity\n\n  def initialize(number_of_wheels, seating_capacity, maximum_velocity)\n    @number_of_wheels = number_of_wheels\n    @seating_capacity = seating_capacity\n    @maximum_velocity = maximum_velocity\n  end\nend\n```\n\nOur Car class implemented! :)\n\n```ruby\nmy_car = Car.new(4, 5, 250)\nmy_car.number_of_wheels # 4\nmy_car.seating_capacity # 5\nmy_car.maximum_velocity # 250\n```\n\nInstantiated, we can use all methods created! Nice!\n\nIn Ruby, we use the < operator to show a class inherits from another. An ElectricCar class can inherit from our Car class.\n\n```ruby\nclass ElectricCar < Car\nend\n```\n\nSimple as that! We don’t need to implement the initialize method and any other method, because this class already has it (inherited from the Car class). Let’s prove it!\n\n```ruby\ntesla_model_s = ElectricCar.new(4, 5, 250)\ntesla_model_s.number_of_wheels # 4\ntesla_model_s.seating_capacity # 5\ntesla_model_s.maximum_velocity # 250\n```\n\nBeautiful!\n\n### Module: A Toolbox\n\nWe can think of a module as a toolbox that contains a set of constants and methods.\n\nAn example of a Ruby module is Math. We can access the constant PI:\n\n```ruby\nMath::PI # > 3.141592653589793\n```\n\nAnd the .sqrt method:\n\n```ruby\nMath.sqrt(9) # 3.0\n```\n\nAnd we can implement our own module and use it in classes. We have a RunnerAthlete class:\n\n```ruby\nclass RunnerAthlete\n  def initialize(name)\n    @name = name\n  end\nend\n```\n\nAnd implement a module Skill to have the average_speed method.\n\n```ruby\nmodule Skill\n  def average_speed\n    puts "My average speed is 20mph"\n  end\nend\n```\n\nHow do we add the module to our classes so it has this behavior (average_speed method)? We just include it!\n\n```ruby\nclass RunnerAthlete\n  include Skill\n\n  def initialize(name)\n    @name = name\n  end\nend\n```\n\nSee the “include Skill”! And now we can use this method in our instance of RunnerAthlete class.\n\n```ruby\nmohamed = RunnerAthlete.new("Mohamed Farah")\nmohamed.average_speed # "My average speed is 20mph"\n```\n\nYay! To finish modules, we need to understand the following:\n\n- A module can have no instances.\n- A module can have no subclasses.\n- A module is defined by module…end.\n\n### Wrapping Up!\n\nWe learned A LOT of things here!\n\n- How Ruby variables work\n- How Ruby conditional statements work\n- How Ruby looping & iterators work\n- Array: Collection | List\n- Hash: Key-Value Collection\n- How we can iterate through this data structures\n- Objects & Classes\n- Attributes as objects’ data\n- Methods as objects’ behavior\n- Using Ruby getters and setters\n- Encapsulation: hiding information\n- Inheritance: behaviors and characteristics\n- Modules: a toolbox\n\n### That’s it\n\nCongrats! You completed this dense piece of content about Ruby! We learned a lot here. Hope you liked it.\n\nIf you want a complete Ruby course, learn real-world coding skills and build projects, try [One Month Ruby Bootcamp](https://onemonth.com/courses/ruby?mbsy=lG6tt&mbsy_source=97541b09-e3ab-45d7-a9b1-dbc77028e008&campaignid=33446&discount_code=TKRuby1). See you there ☺\n\nHave fun, keep learning, and always keep coding!\n',
  },
  {
    url: '/on-distraction',
    title: 'On Distraction',
    content:
      "I often listen to music while working, writing, or when doing anything \"knowledge-work\" related. But most of the time, I don't have any specific music that I want to listen to, and a playlist I usually use to listen to while working. So I open YouTube and try to find anything that I would like.\n\n— SpongeBob Narrator: \"a few hours later\".\n\n<img src=\"/on-distraction/a-few-hours-later.jpeg\">\n\nThe only thing I needed was to do the work, I didn't need music, I didn't need YouTube, but suddenly I'm procrastinating, watching useless videos, and being stuck on YouTube rabbit hole.\n\nEvery time this happens I reflect on two things: the first one is the attention economy and the second is how to design better systems.\n\n## The Attention Economy\n\nWe live in a world that everybody is trying to get your attention: on social media, advertisement, influencers, TV, people around you. Everybody.\n\nHaving the attention means visibility, and today, this number is very important when it comes to monetizing things. Our \"beautiful\" capitalist world.\n\nIt's easy to be distracted by the physical world — TV, friends, colleagues — and the digital world — any new shiny social media, ads, notifications. I'm not saying that they are bad things, even though most of the time they can be. My theory is that it's easy to \"say yes!\" to things that don't matter to you. Because they are entertaining or just a tool to potentialize your procrastination.\n\nI don't want to be a prisoner of distractions.\n\n## How to design better systems\n\nThe first thing that I always think about is to use my energy on things I can control.\n\n- I can't control social media's algorithm. But I can remove the app from my phone.\n- I can't control TV entertainment shows. But I can turn it off — or just not buy it at all.\n- I can't control people texting me. But I can separate work time from leisure time.\n\nThe idea is to focus on things that I can control and create systems that can support this concept.\n\nWhat do I do to control distractions?\n\nI have some tools and systems I use to help me don't on the procrastination rabbit hole, but I'm still improving it.\n\n### Mobile\n\n- Whenever I'm working, I put my phone in airplane mode.\n- Set up social media to not send too many notifications, just the good amount that I find healthy.\n- Depending on the social media, I delete it from my phone and just take a break from it.\n- I have a \"list\" on my phone to remember the habits I want to cultivate daily.\n\n### Desktop\n\n- I use an extension called Work Mode to block social media — or any other website I configure — when I'm working.\n- Twitter\n  - I use an extension called Demetricator to remove the number of followers, likes, retweets. I think it helps me focus on some content and not too much on trendy things.\n  - I usually use lists instead of following people. As I have a small number of people I follow, Twitter's home doesn't have too much content there. I open, don't see anything new, and close the app.\n- Ads are very distracting too, and most of the time, they are not interesting to me. I AdBlock them.\n- As I told you in the beginning, I usually use YouTube to listen to music while studying or working. So instead of opening the website, I have a Spotify playlist to work on and a bookmarked playlist on YouTube. So every time I want to listen to music while working, it's just basically one click — instead of hours of procrastination.\n\n### System\n\nBut I'm not only distracted by these things. I'm also distracted by the future or the next things I want to do on that day.\n\nI do two simple things here: one thing at a time and being conscious about my day.\n\nThe one thing concept is very simple: Instead of multitasking, I focus on only one thing. My head is thinking only about that one thing. It has a start, middle, and end. After finishing it, I can think about other things.\n\nEven though it's simple, it's also difficult to execute. My head is always thinking about the future and it brings me a lot of anxiety. What is the next thing? Everything is planned? Can I do everything I plan today?\n\nTo focus on that one thing is a constant battle against my head and thoughts.\n\nAnd to be conscious about my day is to plan. I create a simple list of things I want to do and prioritize it. Sometimes I put too many things. Sometimes I put not that many. So I usually adjust through the day.\n\nPlanning is also a battle against my inner ambitions. I want everything. For today! But it's not how things work. I won't have time to do everything I want, so saying no is crucial.\n\nPlanning also helps me calm my anxiety. I planned, so I know what I need to do. I don't need to be constantly debating with my brain what are the next things.\n\nOne thing that I also learned was to create space for serendipity. I don't want to make my calendar works as lego and place every little detail there. Without any space to breathe and use my intuition. Time for reflections is so important in my life that I have \"meetings\" on my calendar to have time to just think about anything.\n\n---\n\nI do want to do great things and time is one of the things that we can't waste. If most of my time I'm wasting on useless things, I won't accomplish my goals and live my life the way I want. Focusing on things I can control and systems to fight distractions and procrastination is the way to go.\n",
  },
  {
    url: '/on-leaving',
    title: 'On Leaving',
    content:
      "## As a Sansei\n\nSince I was a child, I was immersed in Japanese culture.\n\nAt home, my `ba-chans` and `ji-chans` (grandparents) always tried to communicate in Japanese with me. The amazing Japanese food was part of my every day. And I used the manners daily.\n\nEvery Sansei (Sansei stands for \"the third generation of Japanese people born in another country\") should remember using these phrases:\n\n- おやすみなさい (good night) before going to bed\n- or いってきます (see you later) before leaving the house\n- or いただきます (let's eat or thanks for the food) before starting to eat the food\n\nThree days a week I also went to a 日本語学校 (Japanese school) to learn Japanese, but also be immersed in the culture. Made a lot of friends who I relate to. Participated in Undokai (it's a Japanese sports day) with all my friends' families.\n\nJapan is part of me.\n\n## The Japan trip\n\nIn 2019 I had the opportunity to take vacation days and travel to Japan with my friends. It was an amazing experience that [I documented with photos and an article](https://leandrotk.medium.com/hist%C3%B3rias-do-jap%C3%A3o-13a0cddd9ac) (Portuguese content!).\n\nWith all trips, it comes with what we call in Portuguese \"Perrengues\" (it's a funny way to say \"travel problems\").\n\nBut even though I had travel issues, I had unforgettable moments there. I went to a lot of different places (Tokyo, Kyoto, Osaka, Hiroshima, Yokohama, and Okayama), tried different foods (most of them remember me of my family's food), and could enjoy the beautiful places.\n\nIf there’s one thing travel teaches us, it’s that the journey is just as important as the destination. And the journey showed a new possibility. The possibility of experiencing this culture, that's new and part of me at the same time.\n\nComing back home, to my lovely country Brazil, I decided to plan and prepare (mentally and also technically) to move to Japan and have this new experience in my life.\n\nI had many different opportunities in terms of moving abroad, but this travel made a huge difference in my decision.\n\n## Companies in Japan & SmartNews\n\nIf I received an offer from a Japanese company, I think it would be an easy decision as I wanted to experience this. But I also thought about my career. So I was looking for a company that could provide me a great career experience:\n\n- in software engineering\n- an international culture\n- a place I could use English to communicate as I'm still (re)learning Japanese\n- a good culture, interesting products, and technical challenges\n\nSmartNews was one of the companies that caught my attention. I attended different events like the \"_Life in a Japanese Unicorn as a Software Engineer_\" that was very interesting to understand the engineers' perspectives about working at SmartNews. Even though I needed to wake up at 6 a.m. to attend these events, it was worth it.\n\nNot only did I attend these events but I also [read the career page](https://careers.smartnews.com/) and watched some videos about [working at SmartNews](https://www.youtube.com/watch?v=VmXoI6XbgS8&t=5s&ab_channel=SmartNews) and the [engineering challenges](https://www.youtube.com/watch?v=mJ9sWRSvU8g&ab_channel=SmartNews).\n\nI liked the company's mission and values. My favorite value is the `For the Common Good` (Be a valuable contributor to society. Make a direct commitment to build a better world and help the content ecosystem thrive).\n\nKnowing that the work you do has a real impact on society is gratifying.\n\nThrough the interviews, I could understand a bit more of the company's culture and how diverse and global they are. I was looking to work in an international environment with a lot of different cultures that I could learn from every single day.\n\nI am also sure that SmartNews' interviews were the toughest process I participated in my entire career. The company has a high hiring bar for engineering talents and it will be amazing to work with so many interesting and talented people.\n\nAnd the reason the company has a high hiring bar for engineers is because of the complex and interesting technical challenges it has to provide the best experience for the users.\n\nIt was great to be challenged in the interviews and also have the opportunity to interview them, ask a lot of questions to make my decision. And I made.\n\n## Why am I moving to Tokyo?\n\nI don't have one big reason to move to Japan or more specifically Tokyo. Part of me just wants to go YOLO, have this experience, and see what happens next. The other part is way more conscious and rational. So I needed to document a list of reasons why to please the rational TK.\n\nJapan is part of me. I joke with my friends that in Brazil I feel I'm Japanese. In Japan, I feel I'm Brazilian. But the Japanese culture was always part of me and my family and I want to explore more this part of me.\n\nTraveling within Brazil and to other countries made me rethink how things are, learn how to make things differently, and embrace new cultures.\n\nBeing in another country is a huge opportunity to immerse me in the culture and learn the language. I had this opportunity of learning Japanese when I was a child, but I missed it. Now that I have the \"second chance\", it'll be awesome to learn a third language and be immersed in the culture. Learning a local language is part of knowing the culture in depth.\n\nTokyo has an international vibe and this could be a big factor in terms of adaptability. I like nature, but I love being where things happen. Maybe this is why I always liked living in Sao Paulo. They have similarities in terms of infrastructure and convenience, even though Tokyo is much safer.\n\nI'm also aware of the work culture in Japan. But as SmartNews is a more \"Silicon Valley\" kind of company, I didn't worry about it. Also, in Tokyo is easier to find more international companies that have a better culture fit with me.\n\nAnd finally, I know that Japan is not a perfect country, like any other country in the world, so I'm setting the right expectations to not be frustrated when starting living there. I'll probably like some things and dislike others. It's part of the trade-off.\n\n## Point of discomfort & Failure\n\n> “Do something that makes you uncomfortable every day. Get out of your comfort zone.” - David Goggins\n\nSeeking discomfort to learn more and grow is one of the things I'm thinking about a lot these days. And what's the most uncomfortable environment if not moving abroad, changing jobs, learning a new language, and embracing a new culture at the same time?\n\nI keep asking myself which one is riskier: to do and fail or not to do and have regret?\n\nAs Kobe Bryant said, [failure doesn't exist](https://www.youtube.com/watch?v=js8OfeEL4jI&ab_channel=MykChiz). If you \"fail\" Monday, try Tuesday. If you \"fail\" Tuesday, try Wednesday. I want to keep going, keep growing, and [enable myself to understand more about the world (and about myself)](/designing-my-lifes-system).\n\nI usually have two different pains: the pain of discipline or the pain of regret. And I want to always consciously choose the pain of discipline.\n\nI have a lot of plans for my life, experiences I want to have, and things I want to learn. [I don't see myself settling down on things I know](https://twitter.com/wordsofteekay/status/1443936035105292288), and I want to use this intellectual vitality to get to know everything. With no priority in mind:\n\n- _Learn Japanese_ (日本語のべんきょうがんばてね！)\n- _Photography_: I can't wait to take photos of the beautiful city of Tokyo.\n- _Filmography_: I've been studying it and it's fascinating the art of capturing feelings and behavior. I see myself doing long-format videos/documentaries about things I find interesting.\n- _Books_: I keep [collecting books](https://www.goodreads.com/iamteekay) to help me understand the world.\n- _Traveling_: embracing the culture won't happen in my apartment. I want to travel as much as possible and get to know the beautiful places in Japan's provinces, meet new people.\n- _Writing_: I've been blogging for 7 years now. But mostly about programming. I want to expand the topics and write about other things I find interesting like, culture, languages, travel.\n- _Tech_: I was in backend, fullstack, and frontend roles. I want to have time (and energy) to learn more about system programming and data science (I want to learn these things with my future colleagues as SmartNews is well-known as a Machine Learning company). I'm also doing [independent research on web performance](https://github.com/imteekay/web-performance-research), [web development](https://github.com/imteekay/webdev-research), and [devtools](https://github.com/imteekay/devtools-research).\n\nWell, I think I have a lot of things to do and my life is just starting. I'm pretty excited about the future and my journey to become the version of myself.\n\n> \"Be curious. Read widely. Try new things.\"\n\n## Resources\n\n- [Devtools Research](https://github.com/imteekay/devtools-research)\n- [Web Performance Research](https://github.com/imteekay/web-performance-research)\n- [Web Development Research](https://github.com/imteekay/webdev-research)\n- [Designing my life's System](/designing-my-lifes-system)\n- [Histórias do Japão](https://leandrotk.medium.com/hist%C3%B3rias-do-jap%C3%A3o-13a0cddd9ac)\n",
  },
  {
    url: '/optimizing-the-performance-of-a-react-progressive-web-app',
    title: 'Optimizing the Performance of a React Progressive Web App',
    content:
      "In the last quarter, I started working in a new team with different business goals. It was a great team, really fun to work with, and we did a lot of amazing work that I'm proud of.\n\nOne of the projects we managed in the last 4 months was web performance improvements for the application we were working on. This post intends to share the improvements we made and the things we learned throughout this process.\n\n## Context\n\nBefore we start a conversation about web performance, it's important to show the context behind this work.\n\nThe first thing I want to mention is the fact that the application (PWA) we started to work on had (actually it still has) most parts of the codebase written 2 years ago. It's a React PWA using Webpack 3, Babel 6, react-redux 5, and so on. A small number of hooks. Most classes components.\n\nThe project didn't have real ownership of a team or responsible engineer to take care of the codebase. Different teams need to add features here and there in the PWA but don't actually own the codebase. Effect: the codebase grows in features, bugs, and tech debt, but it is not improved nor refactored.\n\nWith this context, we already had a lot of space to improve the codebase. This project was our focus and started to be our own responsibility as well.\n\nMy colleague and I became \"Service Owners\" for this project. The idea of the \"Service Owners\" is someone (or two people in this case) to be the focal point to clear doubts, manage the tech debts, issues, bugs, etc. Basically, someone that takes care of a project.\n\nOur team was focused on providing the best experience for house owners (landlords): to ease their understanding of the product, register new houses or apartments, and manage the rental and sale of theirs houses.\n\nTogether with the product manager and designer, we created a roadmap of features we wanted to ship that quarter. At the same time, performance is a critical piece of the puzzle to provide a good experience for users. We can start with the basic two \"metrics\": page-load and time to interactivity. There's a correlation (and sometimes causality) between these metrics and user experience.\n\nWe also wanted to ship A/B tests and make sure that performance was not a variable that could affect the results of these tests. Basically, we wanted to prevent performance regressions to not influence the tests (but we needed metrics - we'll talk about it soon!).\n\nOur team was not a performance expert team. But the company has a team called Core UX, mainly focused on Web Performance. A team that had experience with frontend performance in the first 3 quarters of 2020.\n\n## The Process\n\nOur first idea was to understand the metrics we wanted to track and take care of and do \"discovery\" tasks to understand potential issues and how we could improve the user experience and app performance. Along with that, we also tried to have a channel with the web performance team to discuss, learn from them, ask questions, and try to find performance issues and fix them.\n\nSo we opened a new Slack channel to ease this whole idea and have a bi-weekly meeting with them to show what we were working on, what they were working on, discuss possibilities to improve performance, and have time to ask questions and open discussions.\n\nWith this open relationship, we could learn faster and prioritize low-hanging fruit kind of tasks to have faster results with little or no effort at all. We'll discuss this in-depth later in the Performance Improvements section.\n\nThe whole process was documented: the meetings, our learning, our discoveries, and the performance fixes.\n\n## Metrics & Measure\n\nWe had the first discussion about the metrics we wanted to track and my team started to learn more about them. For us that didn't have much familiarity, at first, it was a bunch of acronyms we didn't truly understand. FCP, LCP, FID? What's that?\n\nTo understand these terms, I like to first understand the user experience metrics, because it's all linked together.\n\nSo, for user experience metrics, I like this User-centric performance metrics article by Google where it defines these metrics:\n\n- **Perceived load speed**: how quickly a page can load and render all of its visual elements to the screen.\n- **Load & Runtime responsiveness**: how quickly a page can load and execute any required JavaScript code in order for components to respond quickly to user interaction\n- **Visual stability**: do elements on the page shift in ways that users don't expect and potentially interfere with their interactions?\n- **Smoothness**: do transitions and animations render at a consistent frame rate and flow fluidly from one state to the next?\n\nI like this because it's very relatable. As website users, we can understand these metrics (and possible frustration when using some \"bad-performance\" kind of websites).\n\nThis is also interesting because we can map the user-centric metrics to the performance metrics we commonly see.\n\n- **First contentful paint (FCP)**: measures the time from when the page starts loading to when any part of the page's content is rendered on the screen.\n- **Largest contentful paint (LCP)**: measures the time from when the page starts loading to when the largest text block or image element is rendered on the screen.\n- **First input delay (FID)**: measures the time from when a user first interacts with your site (i.e. when they click a link, tap a button, or use a custom, JavaScript-powered control) to the time when the browser is actually able to respond to that interaction.\n- **Time to Interactive (TTI)**: measures the time from when the page starts loading to when it's visually rendered, its initial scripts (if any) have loaded, and it's capable of reliably responding to user input quickly.\n- **Total blocking time (TBT)**: measures the total amount of time between FCP and TTI where the main thread was blocked for long enough to prevent input responsiveness.\n- **Cumulative layout shift (CLS)**: measures the cumulative score of all unexpected layout shifts that occur between when the page starts loading and when its lifecycle state changes to hidden.\n\nI built a simple table to map the performance metrics to the user-centric metrics to be easier to understand each acronym.\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/metrics-table.png\">\n\nAs I said earlier, this relation is very interesting and makes us focus not only on bits and bytes but also on the user experience as a whole.\n\n## Tooling, Audit & Knowledge Sharing\n\nAfter having a better understanding of user experience and performance metrics, we wanted to start tracking them. There is a difference between Lab and Field metrics. According to Google:\n\n- **Lab metrics:** using tools to simulate a page load in a consistent, controlled environment.\n- **Field metrics**: on real users actually loading and interacting with the page.\n\n### Lab Metrics\n\nFor the lab metrics, we set up the Lighthouse in our CI using [Lighthouse CI](https://github.com/GoogleChrome/lighthouse-ci). So, for every Pull Request (PR) opened, we run the Lighthouse to gather performance-related data and lock PRs until we fix the performance issue.\n\nWith this tool, we can validate various aspects of the PWA (accessibility, SEO, best practices, and performance), but also add assertions to break PRs when it surpasses a budget threshold we set.\n\nFor example, we can add assertions related to JavaScript and images sizes (in bytes):\n\n```python\nassertions: {\n  'resource-summary:script:size': [\n    'error',\n    { maxNumericValue: 1000000 },\n  ],\n  'resource-summary:image:size': [\n    'error',\n    { maxNumericValue: 100000 },\n  ],\n  'resource-summary:total:size': [\n    'error',\n    { maxNumericValue: 1000000 },\n  ],\n},\n```\n\nThis JavaScript object is part of the configuration we can use to gather different info about performance. To better understand the configuration for Lighthouse CI, take a look at this docs: [Lighthouse CI Configuration](https://github.com/GoogleChrome/lighthouse-ci/blob/master/docs/configuration.md).\n\nAnother very cool tool we are using for lab metrics is Speed Curve. It's super simple to set up and start gathering data. This tool works better for \"unlogged pages\" because we add the URL of the website, and based on the website load and interaction, it will collect performance metrics.\n\nThe Speed Curve dashboard is very flexible to show (or hide) the metrics we want to focus on. In our case, we wanted to see the evolution of the JavaScript total size, First Contentful Paint, Largest Contentful Paint, Cumulative Layout Shift, JS Total Blocking Time, Backend (TTFB) Time, and Lighthouse Performance Score.\n\nThis is working very cool for our landing and home pages.\n\nThe last tool we set up is an in-house tool the performance team built. This is a tool to analyze the app bundles and it has 3 main features now:\n\n- **Bundle Analyze Report**: collects and saves the bundle analyzer HTML results.\n- **Bundle Budgets**: sets up a budget configuration to add a threshold for the bundle sizes. It breaks the PR if the size of a bundle surpasses the threshold.\n- **Bundle Changes:** shows the bundle size changes between the PR and the master (or main) branch. It helps us easily answer \"did it increase/decrease the bundle size for X?\"\n\nThis tool is run in our CI pipeline for every PR and the result is shown in the Github PR (it uses [Danger](https://github.com/danger/danger-js) behind it).\n\nThese tools are very interesting because\n\n- it helps us prevent performance regressions\n- it also creates awareness about web performance, its metrics, and share knowledge\n\n### Field Metrics\n\nFor now, we are using [Instana](https://www.instana.com/) to collect Real User performance-related data.\n\nThe next step for Real User Monitoring (RUM) is to track more user behavior in our application to gather [web vitals metrics](https://github.com/GoogleChrome/web-vitals) in the PWA flow.\n\n## Performance Improvements\n\nIn this section, I want to detail the process behind each discovery and fixes we did to improve performance and user experience in our application.\n\n### Landing Page\n\nWe started with our landing page. The first action was to analyze the JavaScript bundle size using [Webpack Bundle Analyzer](https://www.npmjs.com/package/webpack-bundle-analyzer).\n\n**Side note**: 2 years ago, the team responsible for the landing page decided to use a tool to develop the landing page with react but in the build time, we remove the react from the application to reduce the bundle size served in the landing page.\n\nAnd this is what we got:\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/react-on-lp.png\">\n\nWe can analyze a lot of things here, but one that got our attention was the React library in our landing page bundle. As I wrote above, in the side note, React is not being used in production, and we are unintentionally serving it in production making our users download the library without the need to do this.\n\n```jsx\n// components/XYZ.js\nimport React from 'react';\n\nexport const A_CONSTANT = 'A_CONSTANT';\n```\n\nWe had a constant inside a React component file. And we were importing that constant in the landing page.\n\n```jsx\n// landing.js\nimport { A_CONSTANT } from 'components/XYZ';\n```\n\nSo importing this constant, we were also importing React.\n\nA possible simple fix was to separate this constant outside the React component file and import it from this new file.\n\n```jsx\n// components/XYZ/constants.js\nexport const A_CONSTANT = 'A_CONSTANT';\n```\n\nAnd import the constant from the new file:\n\n```jsx\n// landing.js\nimport { A_CONSTANT } from 'components/XYZ/constants';\n```\n\nLet's see the bundle size impact after this change:\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/befor-after-react.png\">\n\nWe reduced 95KB! It's interesting to think we can have a huge impact on a small change after carefully analyzing our bundles. This will be the process behind each improvement we did for the rest of this article:\n\n1. Analyze the bundles\n2. Fix the performance issue\n3. Gather results & keep track the metrics\n\nWe run again the bundle analyzer and we got this:\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/lp-with-appboy.png\">\n\nThe first things that got our attention were the `appboy.min.js` and the `transit.js` libraries. The `appboy` is the Braze, a library we use for communication, and the `transit` is a library to transform JSON format data into our app state.\n\nThe `Braze` library was very similar to the React library. It was an `import` statement in a file that the landing page was using but not really using the `Braze`.\n\n```jsx\n// braze.js\nimport braze from 'appboy-web-sdk';\n\nexport const aFunction = (brazeInstance = braze) => {\n  // do something with braze\n};\n```\n\nIt was importing Braze in the file and using the instance as a default value for a function. The simple solution was to remove the import statement and enforce that every place that was using the `aFunction` function passes the braze instance. So we don't need to import Braze and add a default value to the parameter:\n\n```jsx\n// braze.js\nexport const aFunction = (brazeInstance) => {\n  // do something with braze\n};\n```\n\nRunning the bundle analyzer again, we got an astonishing result.\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/before-after-appboy.png\">\n\nThe AnnounceYourHouse landing page was reduced to 90 KB. We could remove almost 50% of the main landing bundle.\n\nWe also improved a lot the bundle size of the PriceSuggestion landing page. From 115 KB to 4 KB was an amazing result.\n\nFor the `transit` library, we did a temporary workaround solution. It was importing the library to transform the string JSON saved in the local storage to get info from a single attribute from this object.\n\nThe temporary solution was to verify if the string included the info we wanted and remove the need to use the `transit` library.\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/befor-after-transit-js.png\">\n\nWe could improved a lot the bundle size of the main landing. Removing almost 50% of the bundle.\n\nAs we saw in the metrics section, we had set up the Speed Curve to track the performance of some pages in all this journey. So, for every improvement we made in our application, we keep track of the metrics in these tools.\n\nThe total size of the landing page reduced drastically: -2.16 MB.\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/speed-curve-total-size.png\">\n\nThe Lighthouse Performance score was from 73 to 97:\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/speed-curve-lighthouse-score.png\">\n\nThe Largest Contentful Paint was improved in 1s:\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/speed-curve-lcp.png\">\n\n### Vendor Chunk\n\nWhen running `npm run bundle:analyzer`, we also notice a big dependency in our vendor chunk.\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/vendor-icons.png\">\n\nIn the vendor chunk, we noticed all the icons from Material UI. Every time a user enters the website, and if the chunk is not cached in the browser, it would need to download the whole chunk. If it's a big chunk to download, it has an impact on the performance and consequently on the user experience.\n\nThis is a [common problem](https://material-ui.com/guides/minimizing-bundle-size/) when importing a Material UI icon in a React component.\n\nOne of our components was using an internal component library that used the \"named import\" style to import the Material UI icon. This, without a proper babel plugin, also adds the rest of the unused icons to the vendor chunk.\n\nWe came up with two solutions:\n\n1. Fix the import from this internal component library we had stopping the use of named import.\n2. Add the babel plugin and configure the app to not add unused modules.\n\nAs this internal component library was the first and the deprecated version of our design system, we didn't want to keep maintaining it. The best approach was to not use this library anymore and move all the codebase to use the new design system library (and we're working on it!).\n\nThis performance project was not our main project in the quarter so we had less time to focus on it in the sprint. The babel plugin was a more straightforward and simple solution for us at that moment.\n\nWe basically needed to add this new babel plugin `babel-plugin-transform-imports` and configure the `babelrc`:\n\n```jsx\n[\n  'babel-plugin-transform-imports',\n  {\n    '@material-ui/core': {\n      transform: '@material-ui/core/esm/${member}',\n      preventFullImport: true,\n    },\n    '@material-ui/icons': {\n      transform: '@material-ui/icons/esm/${member}',\n      preventFullImport: true,\n    },\n  },\n];\n```\n\nAnd with it, we prevent the full import of the library in the vendor chunk.\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/before-after-material-ui.png\">\n\nThe vendor became way smaller. We also had some impact in the main chunk (the next chunk will talk soon).\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/results-material-ui.png\">\n\nWith this simple analysis and configuration, we could reduce the vendor chunk by more than 50% (it's still 2.83 MB and could be improved. We will see later!) and the main chunk by 28%.\n\nA huge improvement for the whole app as these chunks were downloaded on each page, if not cached in the browser.\n\n### Main Chunk\n\nThe main chunk has some common modules among all parts of the application. But after running the bundle analyzer, we got this:\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/main-chunk-before.png\">\n\nThe main chunk is the bottom-left block in the bundle. One thing that got our attention was some containers and components in the bundle. Why are there some components that are specific to only one page but we are making our users download the whole main chunk?\n\nThe issue was simple: our code splitting was not working properly.\n\nOur initial idea was to make sure all routes had dynamic import for our components to code split in each router entry point. And this was the problem: not all routes entry points had loadable components, so they were joined in the main chunk instead of creates their own chunk for that specific route and page.\n\nIn this application we were using, at that time, `react-loadable`, so the idea was to simply create these loadables:\n\n```jsx\nimport Loadable from 'react-loadable';\n\nexport default Loadable({\n  loader: () => import(/* webpackChunkName: \"component\" */ './Component'),\n  loading: () => null,\n});\n```\n\nAnd use them for each route entry point.\n\nRunning bundle analyzer, we got this:\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/main-chunk-after.png\">\n\nThe main chunk is way smaller and Webpack created more page-specific chunks as well.\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/results-code-splitting.png\">\n\nThe result was huge. The main chunk got more than 50% smaller and the vendor chunk also decreased by 29%.\n\n### Caching Biggest Dependencies\n\nReading this article, you probably saw some big dependencies in our bundle like firebase, braze, immutable, and so on.\n\nEvery time we do a new product release, our build system generate a new bundle with the chunks. If anything related to the vendor chunk changes, Webpack will generate a new hash for the chunk. So the browser will not have a cached version for this chunk and it will make the user download it again.\n\nBut sometimes, or most of the time, we don't really change these biggest dependencies (only when the dependency is upgraded), and we are making our users paying for that huge chunk.\n\nOur idea was to split these biggest dependencies in its own chunk and make sure the browser has a cached version of this chunk and the user doesn't need to download it again until it is needed.\n\nAs we were using Webpack 3 at that time, we needed to use the `CommonsChunkPlugin` to split these dependencies in its own chunk.\n\nWe created a list of all biggest dependencies:\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/biggest-deps-table.png\">\n\nIt was mapped as a list data structure in our Webpack config as well:\n\n```jsx\nconst VENDOR_LIBRARIES = [\n  {\n    name: '@firebase',\n    label: 'firebase',\n  },\n  {\n    name: '@braze',\n    label: 'braze',\n  },\n  {\n    name: 'transit-js',\n    label: 'transit-js',\n  },\n  {\n    name: '@material-ui(?!\\\\/icons)',\n    label: 'material-ui',\n  },\n  {\n    name: 'react-dom',\n    label: 'react-dom',\n  },\n  {\n    name: 'amplitude-js',\n    label: 'amplitude-js',\n  },\n  {\n    name: 'immutable',\n    label: 'immutable',\n  },\n  {\n    name: 'raven-js',\n    label: 'raven-js',\n  },\n];\n```\n\nAlong with `CommonsChunkPlugin`, we just needed to iterate through this list to create each chunk.\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/biggest-deps-later.png\">\n\nWe can see that the vendor chunk got way smaller and some new chunks were created.\n\nRunning the application, we can also test the download of each separate chunk.\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/biggest-deps-network.png\">\n\nAnd we got a really cool result:\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/results-biggest-deps.png\">\n\nThe user still needs to download the dependencies, but after download the first time, the browser will cache them and they won't need to be downloaded again until we bump their version. If we change the vendor chunk, Webpack only generates a new hash for the vendor and doesn't change the other dependencies.\n\nWe saw some nice improvements in the Speed Curve dashboard:\n\nAs expected, we saw a huge improvement in the JavaScript size: -1.43 MB\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/speed-curve-total-size-home.png\">\n\nDecreasing the JavaScript size also had an impact on the total time the user is blocked to interact with the page: -1.2s\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/speed-curve-js-total-blocking-time-home.png\">\n\nThe speed index is a metric to show how quickly the contents of a page are visibly populated. We improved the page to load 2.2s faster.\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/speed-curve-speed-index-home.png\">\n\nAnd the largest contentful paint went from 6s to 3.75s.\n\n<img src=\"/optimizing-the-performance-of-a-react-progressive-web-app/speed-curve-lcp-home.png\">\n\n## Recap\n\nTo recap what we saw in this article, let's see the list of things we did in this journey:\n\n- **Measure**: metrics as the foundation of performance improvements.\n- **Lock**: prevent regressions & scale the performance knowledge.\n- **Analyze**: with data and metrics, analyze the possible problems.\n- **Improvements**: code.\n- **Impact**: measure the before and the later picture.\n\nI would also recommend talking to more experienced people in this performance domain if it is possible.\n\n## Next steps\n\nWe have more things to do, but we didn't have time to focus on those things in the last quarter. This is a list of things that come to my mind now:\n\n- **More metrics**: rum for logged pages, ux metrics (engagement, bounce rate), business metrics (conversion).\n- **Manage requests**: server requests caching.\n- **More Analysis**: backend, chunks, prefetching, etc.\n- **Removable Dependencies**: analyze big dependencies that can be removable or replaced\n- **Webpack Upgrade**: bump to v5 - cache, optimization, code-splitting, tree shaking.\n- **Webpack Optimization**: the need to build faster.\n- **Keep studying**: learn more to discover more opportunities.\n\n## Resources\n\nI have some resources I used along the way while doing this project. I hope it can be helpful to you too: [Web Performance Studies](https://github.com/imteekay/web-performance-studies).\n\n### React\n\n- [Become a React Developer](https://www.educative.io/path/become-a-react-developer?aff=x8bV)\n- [React Development for Professionals](https://www.educative.io/path/react-development-for-professionals?aff=x8bV)\n- [React App Testing](https://www.educative.io/path/react-app-testing?aff=x8bV)\n- [React for Front-End Developers](https://www.educative.io/path/react-front-end-developer?aff=x8bV)\n- [React Deep Dive: From Beginner to Advanced](https://www.educative.io/courses/react-beginner-to-advanced?aff=x8bV)\n- [Test-driven Development with React](https://www.educative.io/courses/test-driven-react-development?aff=x8bV)\n- [The Road to learn React](https://www.educative.io/courses/the-road-to-learn-react?aff=x8bV)\n- [Reintroducing React: V16 and Beyond](https://www.educative.io/courses/reintroducing-react-v16-beyond?aff=x8bV)\n- [Advanced React Patterns With Hooks](https://www.educative.io/courses/advanced-react-patterns-with-hooks?aff=x8bV)\n- [React for Beginners Course](https://reactforbeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://advancedreact.com/friend/LEANDRO)\n\n### Redux\n\n- [Practical Redux](https://www.educative.io/courses/practical-redux?aff=x8bV)\n- [The Ultimate Guide to Redux](https://www.educative.io/courses/ultimate-guide-to-redux?aff=x8bV)\n- [Intermediate Redux with Redux Toolkit](https://www.educative.io/courses/intermediate-redux-toolkit?aff=x8bV)\n\n### Web\n\n- [Fundamentals of Web Programming](https://www.educative.io/path/fundamentals-web-programming?aff=x8bV)\n- [Become an EmberJS Developer](https://www.educative.io/path/become-an-ember-js-developer?aff=x8bV)\n- [Ace the Front End Interview](https://www.educative.io/path/ace-front-end-interview?aff=x8bV)\n- [Become a Front End Developer](https://www.educative.io/path/become-front-end-developer?aff=x8bV)\n- [Web Development: Unraveling HTML, CSS, and JavaScript](https://www.educative.io/courses/web-development-unraveling-html-css-js?aff=x8bV)\n- [Complete JavaScript Course: Build a Real World App from Scratch](https://www.educative.io/courses/the-complete-javascript-course-build-a-real-world-app-from-scratch?aff=x8bV)\n\n### TypeScript\n\n- [TypeScript for Front-End Developers](https://www.educative.io/path/typescript-for-front-end-developers?aff=x8bV)\n- [Using TypeScript with React](https://www.educative.io/courses/using-typescript-with-react?aff=x8bV)\n- [Learn TypeScript: The Complete Course for Beginners](https://www.educative.io/courses/learn-typescript-complete-course?aff=x8bV)\n- [Advanced TypeScript Masterclass](https://www.educative.io/courses/advanced-typescript-masterclass?aff=x8bV)\n\n### JavaScript\n\n- [JavaScript in Detail: From Beginner to Advanced](https://www.educative.io/courses/javascript-in-detail-from-beginner-to-advanced?aff=x8bV)\n- [Simplifying JavaScript: A Handy Guide for Software Engineers](https://www.educative.io/courses/simplifying-javascript-handy-guide?aff=x8bV)\n- [The Complete Guide to Modern JavaScript](https://www.educative.io/courses/complete-guide-to-modern-javascript?aff=x8bV)\n- [Learn Object-Oriented Programming in JavaScript](https://www.educative.io/courses/learn-object-oriented-programming-in-javascript?aff=x8bV)\n- [JavaScript In Practice: ES6 And Beyond](https://www.educative.io/courses/javascript-in-practice-es6-and-beyond?aff=x8bV)\n- [Data Structures for Coding Interviews in JavaScript](https://www.educative.io/courses/data-structures-coding-interviews-javascript?aff=x8bV)\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n- [ES6 Course](https://es6.io/friend/LEANDRO)\n- [Beginner JavaScript Course](https://beginnerjavascript.com/friend/LEANDRO)\n- [JavaScript Fundamentals Before Learning React](https://www.educative.io/courses/javascript-fundamentals-before-learning-react?aff=x8bV)\n- [Rediscovering JavaScript: ES6, ES7 & ES8](https://www.educative.io/courses/rediscovering-javascript?aff=x8bV)\n",
  },
  {
    url: '/performance-prefetch-next-pages-chunks',
    title: 'Performance: Prefetch Next Pages Chunks',
    content:
      'Web performance is one of the things I got really interested these days and I\'m get myself always learning, reading, and trying things out.\n\nThe idea of this post is to share some ideas about `prefetching` and how it can be a nice technique to speed up page load (of the next page the user will navigate to).\n\nOne common way to use prefetching ([resource hint](https://www.w3.org/TR/resource-hints/#prefetch)) is the declarative `link` tag together with the `rel="prefetch"` attribute. It looks like this:\n\n```html\n<link rel="prefetch" href="/next-page-bundle.js" />\n```\n\nIn this article, we will see this tag generated by Webpack prefetch import as I\'m doing in a React project.\n\nWe will create a fake web app from zero using create-react-app, set up different pages (routes), add an analyzer for webpack bundles, separate each page into loadables, and finally prefetch the next page.\n\n## [Set up routes](https://github.com/imteekay/prefetch-chunk/pull/1/files)\n\nFirst thing first, let\'s create the project using `create-react-app`. If you have the `npx` installed, you just need to do:\n\n```bash\n$ npx create-react-app prefetch-chunk\n```\n\nThis will scaffold the project for you. It uses Webpack under the hood to build the application.\n\nNow that we have an initialized project, let\'s add the `react-router` to the package.json.\n\n```bash\n$ yarn add react-router-dom\n```\n\nWe can use the `Router` and `Route` from `react-router` to build simple routes. Here will have a Home, Step1, Step2, and Step3 pages.\n\n```jsx\nimport React from \'react\';\nimport { BrowserRouter as Router, Switch, Route, Link } from \'react-router-dom\';\n\nconst Home = () => <h2>Home</h2>;\nconst Step1 = () => <h2>Step1</h2>;\nconst Step2 = () => <h2>Step2</h2>;\nconst Step3 = () => <h2>Step3</h2>;\n\nconst App = () => (\n  <Router>\n    <div>\n      <nav>\n        <ul>\n          <li>\n            <Link to="/">Home</Link>\n          </li>\n          <li>\n            <Link to="/step-1">Step 1</Link>\n          </li>\n          <li>\n            <Link to="/step-2">Step 2</Link>\n          </li>\n          <li>\n            <Link to="/step-3">Step 3</Link>\n          </li>\n        </ul>\n      </nav>\n\n      <Switch>\n        <Route path="/step-1">\n          <Step1 />\n        </Route>\n        <Route path="/step-2">\n          <Step2 />\n        </Route>\n        <Route path="/step-3">\n          <Step3 />\n        </Route>\n        <Route path="/">\n          <Home />\n        </Route>\n      </Switch>\n    </div>\n  </Router>\n);\n\nexport default App;\n```\n\nNow we have this 4 pages:\n\n- `/`: Home\n- `/step-1`: Step1\n- `/step-2`: Step2\n- `/step-3`: Step3\n\nGreat! Super simple! Routes set up.\n\n## [Add webpack-bundle-analyzer](https://github.com/imteekay/prefetch-chunk/pull/2/files)\n\nIn this section, we want to use the `webpack-bundle-analyzer` library to be able to analyze the Webpack bundles. Let\'s add it:\n\n```bash\n$ yarn add webpack-bundle-analyzer\n```\n\nTo analyze the bundles, we need to generate the stats from the bundles first and then use the library to analyze them. Something like this:\n\n```bash\n$ webpack-bundle-analyzer ./build/bundle-stats.json\n```\n\nSo I made a script to build first and then analyze:\n\n```json\n// package.json\n"analyze:bundle": "yarn build --stats && webpack-bundle-analyzer ./build/bundle-stats.json"\n```\n\nNow we can run it and see the stats:\n\n<img src="/performance-prefetch-next-pages-chunks/full-bundle-pre.png">\n\nThe biggest chunk is about some libraries in the `node_modules`. But if we look closely, we can see the main chunk:\n\n<img src="/performance-prefetch-next-pages-chunks/main-chunk-pre.png">\n\nThis is the main component we created for the routes.\n\n## [Separate pages in loadables](https://github.com/imteekay/prefetch-chunk/pull/3/files)\n\nNow that we have `webpack-bundle-analyzer`, we can split the pages into its own chunk and analyze them with this library.\n\nTo code split each route, we can use some libraries. For this article, we\'ll use `@loadable/component`:\n\n```bash\n$ yarn add @loadable/component\n```\n\nLet\'s break down the pages into its own folder and files using the loadable. The structure will look like this:\n\n```bash\nsrc\n│___ App.js\n│\n└─── Pages\n│     └───Home\n│       │___ Home.js\n│       │___ index.js\n│\n│     └───Step1\n│       │___ Step1.js\n│       │___ index.js\n│\n│     └───Step2\n│       │___ Step2.js\n│       │___ index.js\n│\n│     └───Step3\n│       │___ Step3.js\n│       │___ index.js\n```\n\nI didn\'t want to make the project structure super complex, so the `Pages` folder it is. Now let\'s see each folder how we can use the `loadable` to code split our application.\n\n- Home Page\n\n```jsx\n// src/Pages/Home/Home.js\nconst Home = () => <h2>Home</h2>;\nexport default Home;\n\n// src/Pages/Home/index.js\nimport loadable from \'@loadable/component\'\n\nexport default loadable(() => import(/* webpackChunkName: "Home" */ \'./Home\'));\n```\n\n- Step1 Page\n\n```jsx\n// src/Pages/Step1/Step1.js\nconst Home = () => <h2>Home</h2>;\nexport default Home;\n\n// src/Pages/Step1/index.js\nimport loadable from \'@loadable/component\'\n\nexport default loadable(() => import(/* webpackChunkName: "Step1" */ \'./Home\'));\n```\n\n- Step2 Page\n\n```jsx\n// src/Pages/Step2/Step2.js\nconst Home = () => <h2>Home</h2>;\nexport default Home;\n\n// src/Pages/Step2/index.js\nimport loadable from \'@loadable/component\'\n\nexport default loadable(() => import(/* webpackChunkName: "Step2" */ \'./Home\'));\n```\n\n- Step3 Page\n\n```jsx\n// src/Pages/Step3/Step3.js\nconst Home = () => <h2>Home</h2>;\nexport default Home;\n\n// src/Pages/Step3/index.js\nimport loadable from \'@loadable/component\'\n\nexport default loadable(() => import(/* webpackChunkName: "Step3" */ \'./Home\'));\n```\n\nGreat! Now we can import these loadables into the routes in our App.js:\n\n```jsx\nimport Step1 from \'./Pages/Step1\';\nimport Step2 from \'./Pages/Step2\';\nimport Step3 from \'./Pages/Step3\';\nimport Home from \'./Pages/Home\';\n\nconst App = () => (\n  <Router>\n    <Switch>\n      <Route path="/step-1">\n        <Step1 />\n      </Route>\n      <Route path="/step-2">\n        <Step2 />\n      </Route>\n      <Route path="/step-3">\n        <Step3 />\n      </Route>\n      <Route path="/">\n        <Home />\n      </Route>\n    </Switch>\n  </Router>\n);\n```\n\nThe App.js looks cleaner but we want to make sure that the code splitting worked. Run again:\n\n```bash\n$ yarn analyze:bundle\n```\n\nAnd the generated stats is:\n\n<img src="/performance-prefetch-next-pages-chunks/full-bundle-post.png">\n\nWe can some small chunks created there. Let\'s look closely:\n\n<img src="/performance-prefetch-next-pages-chunks/code-splitting.png">\n\nWe have the `Step1`, `Step2`, `Step3`, and the `Home` chunks created. Now we are sure the code splitting worked for our routes.\n\n## [Prefetch next page](https://github.com/imteekay/prefetch-chunk/pull/4/files)\n\nAs we learned before, a common way to prefetch resources (JavaScript bundles in our case) in HTML is to add a `link` tag with a `rel="prefetch"` in the application `head` tag.\n\n```jsx\n<link rel="prefetch" href="/next-page-bundle.js">\n```\n\nBut as we are building the application with a build tool (Webpack in our case), the chunks will have a hash, so it\'s not easy to know the chunk hash that was generated from this build tool.\n\nIn version 4, Webpack shipped a new feature to import chunks with this prefetch concept. We just need to import a module with the `webpackPrefetch: true` flag. Something like this:\n\n```jsx\nimport(/* webpackPrefetch: true */ \'path/to/the/module\');\n```\n\nThis is what we will do for each page. The user always starts on the `Home` page (`/`). The next probable page, she will visit is the `Step 1` page (`/step-1`). The next page is the `Step 2` page (`/step-2`), and then the `Step 3` page (`/step-3`). Let\'s break down this idea to make it easier to digest:\n\n- `Home` page: we prefetch `Step 1` page module.\n- `Step 1` page: we prefetch `Step 2` page module.\n- `Step 2` page: we prefetch `Step 3` page module.\n- `Step 3` page: we don\'t need to prefetch anything here.\n\nGreat, let\'s implement this!\n\nMy first attempt was to just add the import statement in each page component:\n\n```jsx\nimport(/* webpackPrefetch: true */ \'Pages/Step1/Step1\');\n```\n\nBut when I add this `import` to the home page, we\'ll get all the chunks downloaded:\n\n<img src="/performance-prefetch-next-pages-chunks/all-chunks-prefetched.png">\n\nAnd if we see the `head` tag, we\'ll get this:\n\n```jsx\n<script charset="utf-8" src="/static/js/Home.chunk.js"></script>\n<link rel="prefetch" as="script" href="/static/js/Step1.chunk.js">\n<link rel="prefetch" as="script" href="/static/js/Step2.chunk.js">\n<link rel="prefetch" as="script" href="/static/js/Step3.chunk.js">\n```\n\nSo for each component, it will try to prefetch the next page. This is why we have all the chunks downloaded in the `Home` page.\n\nSo one idea is to import each next page when the page component renders.\n\nAs we are changing the DOM, it\'s a side-effect, and call this in a `useEffect` hook. Let\'s see how it can work.\n\n```jsx\nconst Home = () => {\n  useEffect(() => {\n    import(/* webpackPrefetch: true */ \'Pages/Step1/Step1\');\n  }, []);\n\n  return (\n    <>\n      <nav>\n        <Link to="/step-1">Step 1</Link>\n      </nav>\n      <h2>Home</h2>\n    </>\n  );\n};\n```\n\nIf we go to the `Home` page and open the Network tab, we\'ll see the download of the `Home.chunk.js` as expected, but we also see the `Step1.chunk.js`.\n\n<img src="/performance-prefetch-next-pages-chunks/home-prefetch.png">\n\nAnd in the `head` tag, we\'ll find the following code:\n\n```jsx\n<script charset="utf-8" src="/static/js/Home.chunk.js"></script>\n<link rel="prefetch" as="script" href="/static/js/Step1.chunk.js">\n```\n\nSo we make sure that the `Home.chunk.js` is download to show the page, but the `Step1.chunk.js` will be downloaded when the browser is in the idle time (prefetching).\n\nWe do the same thing for the `Step 1` page, but now prefetching the `Step 2` page module:\n\n```jsx\nconst Step1 = () => {\n  useEffect(() => {\n    import(/* webpackPrefetch: true */ \'Pages/Step2/Step2\');\n  }, []);\n\n  return (\n    <>\n      <nav>\n        <Link to="/step-2">Step 2</Link>\n      </nav>\n      <h2>Step1</h2>\n    </>\n  );\n};\n```\n\nAnd now for the `Step 2` page:\n\n```jsx\nconst Step2 = () => {\n  useEffect(() => {\n    import(/* webpackPrefetch: true */ \'Pages/Step3/Step3\');\n  }, []);\n\n  return (\n    <>\n      <nav>\n        <Link to="/step-3">Step 3</Link>\n      </nav>\n      <h2>Step2</h2>\n    </>\n  );\n};\n```\n\n## Final Words\n\nTo recap what we\'ve learned:\n\n- [Set up routes](https://github.com/imteekay/prefetch-chunk/pull/1/files): add 4 different pages to use for prefetching purpose\n- [Add webpack-bundle-analyzer](https://github.com/imteekay/prefetch-chunk/pull/2/files): add library to make Webpack bundles easy to analyze\n- [Loadables for pages](https://github.com/imteekay/prefetch-chunk/pull/3/files): code splitting adding loadable for each page\n- [Prefetch next page](https://github.com/imteekay/prefetch-chunk/pull/4/files): using the Webpack prefetch feature to prefetch the next page\n\n## Resources\n\n### React\n\n- [Become a React Developer](https://www.educative.io/path/become-a-react-developer?aff=x8bV)\n- [React Development for Professionals](https://www.educative.io/path/react-development-for-professionals?aff=x8bV)\n- [React App Testing](https://www.educative.io/path/react-app-testing?aff=x8bV)\n- [React for Front-End Developers](https://www.educative.io/path/react-front-end-developer?aff=x8bV)\n- [React Deep Dive: From Beginner to Advanced](https://www.educative.io/courses/react-beginner-to-advanced?aff=x8bV)\n- [Test-driven Development with React](https://www.educative.io/courses/test-driven-react-development?aff=x8bV)\n- [The Road to learn React](https://www.educative.io/courses/the-road-to-learn-react?aff=x8bV)\n- [Reintroducing React: V16 and Beyond](https://www.educative.io/courses/reintroducing-react-v16-beyond?aff=x8bV)\n- [Advanced React Patterns With Hooks](https://www.educative.io/courses/advanced-react-patterns-with-hooks?aff=x8bV)\n- [React for Beginners Course](https://reactforbeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://advancedreact.com/friend/LEANDRO)\n\n### Redux\n\n- [Practical Redux](https://www.educative.io/courses/practical-redux?aff=x8bV)\n- [The Ultimate Guide to Redux](https://www.educative.io/courses/ultimate-guide-to-redux?aff=x8bV)\n- [Intermediate Redux with Redux Toolkit](https://www.educative.io/courses/intermediate-redux-toolkit?aff=x8bV)\n\n### Web\n\n- [Fundamentals of Web Programming](https://www.educative.io/path/fundamentals-web-programming?aff=x8bV)\n- [Become an EmberJS Developer](https://www.educative.io/path/become-an-ember-js-developer?aff=x8bV)\n- [Ace the Front End Interview](https://www.educative.io/path/ace-front-end-interview?aff=x8bV)\n- [Become a Front End Developer](https://www.educative.io/path/become-front-end-developer?aff=x8bV)\n- [Web Development: Unraveling HTML, CSS, and JavaScript](https://www.educative.io/courses/web-development-unraveling-html-css-js?aff=x8bV)\n- [Complete JavaScript Course: Build a Real World App from Scratch](https://www.educative.io/courses/the-complete-javascript-course-build-a-real-world-app-from-scratch?aff=x8bV)\n\n### TypeScript\n\n- [TypeScript for Front-End Developers](https://www.educative.io/path/typescript-for-front-end-developers?aff=x8bV)\n- [Using TypeScript with React](https://www.educative.io/courses/using-typescript-with-react?aff=x8bV)\n- [Learn TypeScript: The Complete Course for Beginners](https://www.educative.io/courses/learn-typescript-complete-course?aff=x8bV)\n- [Advanced TypeScript Masterclass](https://www.educative.io/courses/advanced-typescript-masterclass?aff=x8bV)\n\n### JavaScript\n\n- [JavaScript in Detail: From Beginner to Advanced](https://www.educative.io/courses/javascript-in-detail-from-beginner-to-advanced?aff=x8bV)\n- [Simplifying JavaScript: A Handy Guide for Software Engineers](https://www.educative.io/courses/simplifying-javascript-handy-guide?aff=x8bV)\n- [The Complete Guide to Modern JavaScript](https://www.educative.io/courses/complete-guide-to-modern-javascript?aff=x8bV)\n- [Learn Object-Oriented Programming in JavaScript](https://www.educative.io/courses/learn-object-oriented-programming-in-javascript?aff=x8bV)\n- [JavaScript In Practice: ES6 And Beyond](https://www.educative.io/courses/javascript-in-practice-es6-and-beyond?aff=x8bV)\n- [Data Structures for Coding Interviews in JavaScript](https://www.educative.io/courses/data-structures-coding-interviews-javascript?aff=x8bV)\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n- [ES6 Course](https://es6.io/friend/LEANDRO)\n- [Beginner JavaScript Course](https://beginnerjavascript.com/friend/LEANDRO)\n- [JavaScript Fundamentals Before Learning React](https://www.educative.io/courses/javascript-fundamentals-before-learning-react?aff=x8bV)\n- [Rediscovering JavaScript: ES6, ES7 & ES8](https://www.educative.io/courses/rediscovering-javascript?aff=x8bV)\n\nFor more resources on performance, take at my [Web Performance Studies](https://github.com/imteekay/web-performance-studies). It\'s a repository with all the resources I\'ve been consuming to learn about performance.\n',
  },
  {
    url: '/publisher-a-tooling-to-automate-the-process-to-publish-my-blog-posts',
    title:
      'Publisher, a tooling to automate the process to publish my blog posts',
    content:
      "As I'm building a writing habit, well, I'm writing more and more. Even though I use publishing blogs like [Medium](https://medium.com/@leandrotk_), [dev.to](https://dev.to/teekay), and [Hashnode](https://hashnode.com/@teekay), I like to post my content on [my own blog](http://leandrotk.github.io/tk).\n\nAs I wanted to build a simple website, this blog is basically an HTML, CSS with very little JavaScript website. But the thing is, the publishing process could be a lot better.\n\nHow does it work now?\n\nI manage the blog roadmap on Notion. It looks like this:\n\n<img src=\"/publisher-a-tooling-to-automate-the-process-to-publish-my-blog-posts/blog-roadmap.png\">\n\nIt's a simple kanban type of board. I like this board because I can get all my ideas into physical (or digital?) representation. I also use it to build a draft, polish and make it better and better to publish in the blog.\n\nSo I write my blog post using Notion. After I finish it, I copy the Notion writing and paste it into an online tool to transform markdown into HTML. And then I can use this HTML to create the actual post.\n\nBut this is just the body, the content for the page. I always need to create the whole HTML with the head content, body, and footer.\n\nThis process is tedious and boring. But good news, it can be automated. And this post is all about this automation. I want to show you the behind the scenes of this new tool I created and the learnings I got through this process.\n\n## Features\n\nMy main idea was to have a whole HTML article ready to publish. As I mentioned before, the `<head>` and `<footer>` sections don't change much. So I could use it as a \"template\".\n\nWith this template, I have the data that could change for each article I would write and publish. This data could be a variable in the template with this representation `{{ variableName }}`. An example:\n\n```html\n<h1>{{ title }}</h1>\n```\n\nNow I can use the template and replace the variables with real data, specific info for each article.\n\nThe second part is the body, the real post. In the template, it is represented by `{{ article }}`. This variable will be replaced by the HTML generated by Notion markdown.\n\nWhen we copy and paste notes from Notion, we get kind of a Markdown style. This project will transform this markdown into an HTML and use it as the `article` variable in the template.\n\nTo create the ideal template, I took a look of all variables I needed to create:\n\n- `title`\n- `description`\n- `date`\n- `tags`\n- `imageAlt`\n- `imageCover`\n- `photographerUrl`\n- `photographerName`\n- `article`\n- `keywords`\n\nWith these variables, I created the [template](https://github.com/imteekay/publisher/blob/master/examples/template.html).\n\nTo pass some of this information to build the HTML, I created a `json` file as the article config: `article.config.json`. There I have something like this:\n\n```json\n{\n  \"title\": \"React Hooks, Context API, and Pokemons\",\n  \"description\": \"Understanding how hooks and the context api work\",\n  \"date\": \"2020-04-21\",\n  \"tags\": [\"javascript\", \"react\"],\n  \"imageAlt\": \"The Ash from Pokemon\",\n  \"photographerUrl\": \"<https://www.instagram.com/kazuh.illust>\",\n  \"photographerName\": \"kazuh.yasiro\",\n  \"articleFile\": \"article.md\",\n  \"keywords\": \"javascript,react\"\n}\n```\n\nFirst step: the project should know how to open and read the template and the article config. With this data, I could use to populate the template.\n\nTemplate first:\n\n```ts\nconst templateContent: string = await getTemplateContent();\n```\n\nSo we basically need to implement the `getTemplateContent` function.\n\n```ts\nimport fs, { promises } from 'fs';\nimport { resolve } from 'path';\n\nconst { readFile } = promises;\n\nconst getTemplateContent = async (): Promise<string> => {\n  const contentTemplatePath = resolve(__dirname, '../examples/template.html');\n  return await readFile(contentTemplatePath, 'utf8');\n};\n```\n\nThe `resolve` with `__dirname` will get the absolute path to the directory from the source file that is running. And then go to the `examples/template.html` file. The `readFile` will asynchronously read and return the content from the template path.\n\nNow we have the template content. And we need to do the same thing for the article config.\n\n```ts\nconst getArticleConfig = async (): Promise<ArticleConfig> => {\n  const articleConfigPath = resolve(\n    __dirname,\n    '../examples/article.config.json',\n  );\n  const articleConfigContent = await readFile(articleConfigPath, 'utf8');\n  return JSON.parse(articleConfigContent);\n};\n```\n\nTwo different things here:\n\n- As the `article.config.json` has a json format, we need to transform this json string into an JavaScript object after reading the file\n- The return of the article config content will be an `ArticleConfig` as I defined in the function return type. Let's build it.\n\n```ts\ntype ArticleConfig = {\n  title: string;\n  description: string;\n  date: string;\n  tags: string[];\n  imageCover: string;\n  imageAlt: string;\n  photographerUrl: string;\n  photographerName: string;\n  articleFile: string;\n  keywords: string;\n};\n```\n\nWhen we get this content, we also use this new type.\n\n```ts\nconst articleConfig: ArticleConfig = await getArticleConfig();\n```\n\nNow we can use the `replace` method to fill the config data in the template content. Just to illustrate the idea, it would look like this:\n\n```ts\ntemplateContent.replace('title', articleConfig.title);\n```\n\nBut some variables appear more than one time in the template. Regex for the rescue. With this:\n\n```ts\nnew RegExp('\\\\{\\\\{(?:\\\\\\\\s+)?(title)(?:\\\\\\\\s+)?\\\\}\\\\}', 'g');\n```\n\n... I get all the strings that match `{{ title }}`. So I could build a function that receives a parameter to be found and use it in the title place.\n\n```ts\nconst getPattern = (find: string): RegExp =>\n  new RegExp('\\\\{\\\\{(?:\\\\\\\\s+)?(' + find + ')(?:\\\\\\\\s+)?\\\\}\\\\}', 'g');\n```\n\nNow we can replace all matches. An example for the title variable:\n\n```ts\ntemplateContent.replace(getPattern('title'), articleConfig.title);\n```\n\nBut we don't want to replace only the title variable, but all variables from the article config. Replace all!\n\n```ts\nconst buildArticle = (templateContent: string) => ({\n  with: (articleConfig: ArticleAttributes) =>\n    templateContent\n      .replace(getPattern('title'), articleConfig.title)\n      .replace(getPattern('description'), articleConfig.description)\n      .replace(getPattern('date'), articleConfig.date)\n      .replace(getPattern('tags'), articleConfig.articleTags)\n      .replace(getPattern('imageCover'), articleConfig.imageCover)\n      .replace(getPattern('imageAlt'), articleConfig.imageAlt)\n      .replace(getPattern('photographerUrl'), articleConfig.photographerUrl)\n      .replace(getPattern('photographerName'), articleConfig.photographerName)\n      .replace(getPattern('article'), articleConfig.articleBody)\n      .replace(getPattern('keywords'), articleConfig.keywords),\n});\n```\n\nNow I replace all! We use it like this:\n\n```ts\nconst article: string = buildArticle(templateContent).with(articleConfig);\n```\n\nBut we are missing two parts here:\n\n- `tags`\n- `article`\n\nIn the config json file, the `tags` is a list. So, for the list:\n\n```ts\n['javascript', 'react'];\n```\n\nThe final HTML would be:\n\n```html\n<a class=\"tag-link\" href=\"../../../tags/javascript.html\">javascript</a>\n<a class=\"tag-link\" href=\"../../../tags/react.html\">react</a>\n```\n\nSo I created another template: `tag_template.html` with the `{{ tag }}` variable. We just need to map the `tags` list and create each HTML tag template.\n\n```ts\nconst getArticleTags = async ({\n  tags,\n}: {\n  tags: string[];\n}): Promise<string> => {\n  const tagTemplatePath = resolve(__dirname, '../examples/tag_template.html');\n  const tagContent = await readFile(tagTemplatePath, 'utf8');\n  return tags.map(buildTag(tagContent)).join('');\n};\n```\n\nHere we:\n\n- get the tag template path\n- get the tag template content\n- map through the `tags` and build the final tag HTML based on the tag template\n\nThe `buildTag` is a function that returns another function.\n\n```ts\nconst buildTag =\n  (tagContent: string) =>\n  (tag: string): string =>\n    tagContent.replace(getPattern('tag'), tag);\n```\n\nIt receives the `tagContent` - it is the tag template content - and returns a function that receives a tag an build the final tag HTML. And now we call it to get the article tags.\n\n```ts\nconst articleTags: string = await getArticleTags(articleConfig);\n```\n\nAbout the article now. It looks like this:\n\n```ts\nconst getArticleBody = async ({\n  articleFile,\n}: {\n  articleFile: string;\n}): Promise<string> => {\n  const articleMarkdownPath = resolve(__dirname, `../examples/${articleFile}`);\n  const articleMarkdown = await readFile(articleMarkdownPath, 'utf8');\n  return fromMarkdownToHTML(articleMarkdown);\n};\n```\n\nIt receives the `articleFile`, we try to get the path, read the file, and get the markdown content. Then pass this content to `fromMarkdownToHTML` function to transform the markdown into an HTML.\n\nThis part I'm using an external library called `showdown`. It handles every little corner case to transform markdown into HTML.\n\n```ts\nimport showdown from 'showdown';\n\nconst fromMarkdownToHTML = (articleMarkdown: string): string => {\n  const converter = new showdown.Converter();\n  return converter.makeHtml(articleMarkdown);\n};\n```\n\nAnd now I have the tags and the article HTML:\n\n```ts\nconst templateContent: string = await getTemplateContent();\nconst articleConfig: ArticleConfig = await getArticleConfig();\nconst articleTags: string = await getArticleTags(articleConfig);\nconst articleBody: string = await getArticleBody(articleConfig);\n\nconst article: string = buildArticle(templateContent).with({\n  ...articleConfig,\n  articleTags,\n  articleBody,\n});\n```\n\nI missed one more thing! Before, I expected that I always needed to add the image cover path into the article config file. Something like this:\n\n```json\n{\n  \"imageCover\": \"an-image.png\"\n}\n```\n\nBut we could assume that the image name will be `cover`. The challenge was the extension. It can be `.png`, `.jpg`, `.jpeg`, or `.gif`.\n\nSo I built a function to get the right image extension. The idea is to search for the image in the folder. If it exists in the folder, return the extension.\n\nI started with the \"existing\" part.\n\n```ts\nfs.existsSync(`${folder}/${fileName}.${extension}`);\n```\n\nHere I'm using the `existsSync` function to find the file. If it exists in the folder, it returns true. Otherwise, false.\n\nI added this code into a function:\n\n```ts\nconst existsFile =\n  (folder: string, fileName: string) =>\n  (extension: string): boolean =>\n    fs.existsSync(`${folder}/${fileName}.${extension}`);\n```\n\nWhy did I do this way?\n\nUsing this function, I need to pass the `folder`, the `filename`, and the `extension`. The `folder` and the `filename` are always the same. The difference is the `extension`.\n\nSo I could build a function using curry. That way, I can build different functions for the same `folder` and `filename`. Like this:\n\n```ts\nconst hasFileWithExtension = existsFile(examplesFolder, imageName);\n\nhasFileWithExtension('jpeg'); // true or false\nhasFileWithExtension('jpg'); // true or false\nhasFileWithExtension('png'); // true or false\nhasFileWithExtension('gif'); // true or false\n```\n\nThe whole function would look like this:\n\n```ts\nconst getImageExtension = (): string => {\n  const examplesFolder: string = resolve(__dirname, `../examples`);\n  const imageName: string = 'cover';\n  const hasFileWithExtension = existsFile(examplesFolder, imageName);\n\n  if (hasFileWithExtension('jpeg')) {\n    return 'jpeg';\n  }\n\n  if (hasFileWithExtension('jpg')) {\n    return 'jpg';\n  }\n\n  if (hasFileWithExtension('png')) {\n    return 'png';\n  }\n\n  return 'gif';\n};\n```\n\nBut I didn't like this hardcoded string to represent the image extension. `enum` is really cool!\n\n```ts\nenum ImageExtension {\n  JPEG = 'jpeg',\n  JPG = 'jpg',\n  PNG = 'png',\n  GIF = 'gif',\n}\n```\n\nAnd the function now using our new enum `ImageExtension`:\n\n```ts\nconst getImageExtension = (): string => {\n  const examplesFolder: string = resolve(__dirname, `../examples`);\n  const imageName: string = 'cover';\n  const hasFileWithExtension = existsFile(examplesFolder, imageName);\n\n  if (hasFileWithExtension(ImageExtension.JPEG)) {\n    return ImageExtension.JPEG;\n  }\n\n  if (hasFileWithExtension(ImageExtension.JPG)) {\n    return ImageExtension.JPG;\n  }\n\n  if (hasFileWithExtension(ImageExtension.PNG)) {\n    return ImageExtension.PNG;\n  }\n\n  return ImageExtension.GIF;\n};\n```\n\nNow I have all the data to fill the template. Great!\n\nAs the HTML is done, I want to create the real HTML file with this data. I basically need to get the correct path, the HTML, and use the `writeFile` function to create this file.\n\nTo get the path, I needed to understand the pattern of my blog. It organizes the folder with the year, the month, the title, and the file is named `index.html`.\n\nAn example would be:\n\n```bash\n2020/04/publisher-a-tooling-to-blog-post-publishing/index.html\n```\n\nAt first, I thought about adding this data to the article config file. So every time I need to update this attribute from the article config to get the correct path.\n\nBut another interesting idea was to infer the path by some data we already have in the article config file. We have the `date` (e.g. `\"2020-04-21\"`) and the `title` (e.g. `\"Publisher: tooling to automate blog post publishing\"`).\n\nFrom the date, I can get the year and the month. From the title, I can generate the article folder. The `index.html` is always constant.\n\nThe string would like this:\n\n```ts\n`${year}/${month}/${slugifiedTitle}`;\n```\n\nFor the date, it is really simple. I can split by `-` and destructure:\n\n```\nconst [year, month]: string[] = date.split('-');\n```\n\nFor the `slugifiedTitle`, I built a function:\n\n```ts\nconst slugify = (title: string): string =>\n  title\n    .trim()\n    .toLowerCase()\n    .replace(/[^\\\\w\\\\s]/gi, '')\n    .replace(/[\\\\s]/g, '-');\n```\n\nIt removes the white spaces from the beginning and the end of the string. Then downcase the string. Then remove all special characters (keep only word and whitespace characters). And finally, replace all whitespaces with a `-`.\n\nThe whole function looks like this:\n\n```ts\nconst buildNewArticleFolderPath = ({\n  title,\n  date,\n}: {\n  title: string;\n  date: string;\n}): string => {\n  const [year, month]: string[] = date.split('-');\n  const slugifiedTitle: string = slugify(title);\n\n  return resolve(__dirname, `../../${year}/${month}/${slugifiedTitle}`);\n};\n```\n\nThis function tries to get the article folder. It doesn't generate the new file. This is why I didn't add the `/index.html` to the end of the final string.\n\nWhy did it do that? Because, before writing the new file, we always need to create the folder. I used `mkdir` with this folder path to create it.\n\n```ts\nconst newArticleFolderPath: string = buildNewArticleFolderPath(articleConfig);\nawait mkdir(newArticleFolderPath, { recursive: true });\n```\n\nAnd now I could use the folder the create the new article file in it.\n\n```ts\nconst newArticlePath: string = `${newArticleFolderPath}/index.html`;\nawait writeFile(newArticlePath, article);\n```\n\nOne thing we are missing here: as I added the image cover in the article config folder, I needed to copy it and paste it into the right place.\n\nFor the `2020/04/publisher-a-tooling-to-blog-post-publishing/index.html` example, the image cover would be in the assets folder:\n\n```bash\n2020/04/publisher-a-tooling-to-blog-post-publishing/assets/cover.png\n```\n\nTo do this, I need two things:\n\n- create a new `assets` folder with `mkdir`\n- copy the image file and paste it into the new folder with `copyFile`\n\nTo create the new folder, I just need the folder path. To copy and paste the image file, I need the current image path and the article image path.\n\nFor the folder, as I have the `newArticleFolderPath`, I just need to concatenate this path to the assets folder.\n\n```ts\nconst assetsFolder: string = `${newArticleFolderPath}/assets`;\n```\n\nFor the current image path, I have the `imageCoverFileName` with the correct extension. I just need to get the image cover path:\n\n```ts\nconst imageCoverExamplePath: string = resolve(\n  __dirname,\n  `../examples/${imageCoverFileName}`,\n);\n```\n\nTo get the future image path, I need to concatenate the image cover path and the image file name:\n\n```ts\nconst imageCoverPath: string = `${assetsFolder}/${imageCoverFileName}`;\n```\n\nWith all these data, I can create the new folder:\n\n```ts\nawait mkdir(assetsFolder, { recursive: true });\n```\n\nAnd copy and paste the image cover file:\n\n```ts\nawait copyFile(imageCoverExamplePath, imageCoverPath);\n```\n\nAs I was implementing this `paths` part, I saw I could group them all into a function `buildPaths`.\n\n```ts\nconst buildPaths = (newArticleFolderPath: string): ArticlePaths => {\n  const imageExtension: string = getImageExtension();\n  const imageCoverFileName: string = `cover.${imageExtension}`;\n  const newArticlePath: string = `${newArticleFolderPath}/index.html`;\n  const imageCoverExamplePath: string = resolve(\n    __dirname,\n    `../examples/${imageCoverFileName}`,\n  );\n  const assetsFolder: string = `${newArticleFolderPath}/assets`;\n  const imageCoverPath: string = `${assetsFolder}/${imageCoverFileName}`;\n\n  return {\n    newArticlePath,\n    imageCoverExamplePath,\n    imageCoverPath,\n    assetsFolder,\n    imageCoverFileName,\n  };\n};\n```\n\nI also created the `ArticlePaths` type:\n\n```ts\ntype ArticlePaths = {\n  newArticlePath: string;\n  imageCoverExamplePath: string;\n  imageCoverPath: string;\n  assetsFolder: string;\n  imageCoverFileName: string;\n};\n```\n\nAnd I could use the function to get all the path data I needed:\n\n```ts\nconst {\n  newArticlePath,\n  imageCoverExamplePath,\n  imageCoverPath,\n  assetsFolder,\n  imageCoverFileName,\n}: ArticlePaths = buildPaths(newArticleFolderPath);\n```\n\nThe last part of the algorithm now! I wanted to quickly validate the created post. So what if I could open the created post in a browser tab? That would be amazing!\n\nSo I did it:\n\n```ts\nawait open(newArticlePath);\n```\n\nHere I'm using the `open` library to simulate the terminal open command.\n\nAnd that was it!\n\n## Learnings\n\nThis project was a lot of fun! I learned some cool things through this process. I want to list them here:\n\n- As I'm [learning Typescript](/series/typescript-learnings), I wanted to quickly validate the code I was writing. So I configured `nodemon` to compile and run the code on every file save. It is cool to make the development process so dynamic.\n- I tried to use the new node `fs`'s `promises`: `readFile`, `mkdir`, `writeFile`, and `copyFile`. It is on `Stability: 2`.\n- I did a lot of [currying](/closure-currying-and-cool-abstractions) for some function to make it reusable.\n- Enums and [Types](/series/typescript-learnings/type-system) are good ways to make the state consistent in Typescript, but also make a good representation and documentation of all the project's data. [Data contracts](/thinking-in-data-contracts) is a really nice thing.\n- The tooling mindset. This is one of the things I really love about programming. Build toolings to automate repetitive tasks and make life easier.\n\nI hope it was good reading! Keep learning and coding!\n\n## Resources\n\n- [Thinking in data contracts](/thinking-in-data-contracts)\n- [Typescript Learnings](/series/typescript-learnings)\n- [Closures, Currying, and Cool Abstractions](/closure-currying-and-cool-abstractions)\n",
  },
  {
    url: '/react-hooks-context-api-and-pokemons',
    title: 'React Hooks, Context API, and Pokemons',
    content:
      "After 7 years of full stack development using Ruby, Python, and vanilla JavaScript, I'm now working mostly with JavaScript, Typescript, React, and Redux. The JavaScript community is great.. and fast. Tons of things are created \"overnight\", figuratively, but sometimes literally. And it is really difficult to keep up to date.\n\n> Mental note: I always feel I'm late at the JavaScript party. And I want to be there. Even though I don't really like parties.\n\n1 year working with React and Redux and I feel I need to learn new things like Hooks and the Context API to manage state. After reading some articles about it, I wanted to try these concepts, so I created a simple project as a laboratory to experiment with those things.\n\nSince I was a little boy, I'm passionate about Pokemon. It was a fun time playing Game Boy and conquering all the Leagues. Now, as a developer, I want to play around with the [Pokemon API](https://pokeapi.co/).\n\nSo basically I wanted to build a simple web page that I could share data among pieces of this page. I thought: what if I build a page with three boxes:\n\n- A box with the list of all existent pokemons\n- A box with the list of all captured pokemons\n- A box with input to add new pokemons to the list\n\nAnd I can build behavior or actions to each box:\n\n- For each pokemon in the first box, I can capture them and send to the second box\n- For each pokemon in the second box, I can release them and send to the first box\n- As a game god, I'm able to create pokemons by filling the input and send them to the first box\n\nOk, it is clear to me all the features we need to implement here. Lists & Actions. Let's begin!\n\n## Listing Pokemons\n\nThe basic feature I wanted to build first was listing pokemons. So for an array of objects, I want to list and show the `name` attribute of each one. And that's it.\n\nI'll start with the first box: the existent Pokemons. At first, I thought, I don't need the Pokemon API, Let's just mock the list and see if it works. With `useState`, I can declare my component state and use it.\n\nWe define it with a default value of a mock of Pokemons, just to test it.\n\n```javascript\nconst [pokemons] = useState([\n  { id: 1, name: 'Bulbasaur' },\n  { id: 2, name: 'Charmander' },\n  { id: 3, name: 'Squirtle' },\n]);\n```\n\nHere we a list of three Pokemon objects. The `useState` hook provides a pair of items: the current state and a function to let you update this created state.\n\nNow with the pokemons state, we can map it and render the name of each one.\n\n```javascript\n{\n  pokemons.map((pokemon) => <p>{pokemon.name}</p>);\n}\n```\n\nIt is just a map returning each Pokemon's name in a paragraph tag.\n\nThis is the whole component implemented:\n\n```javascript\nimport React, { useState } from 'react';\n\nconst PokemonsList = () => {\n  const [pokemons] = useState([\n    { id: 1, name: 'Bulbasaur' },\n    { id: 2, name: 'Charmander' },\n    { id: 3, name: 'Squirtle' },\n  ]);\n\n  return (\n    <div className=\"pokemons-list\">\n      <h2>Pokemons List</h2>\n\n      {pokemons.map((pokemon) => (\n        <div key={`${pokemon.id}-${pokemon.name}`}>\n          <p>{pokemon.id}</p>\n          <p>{pokemon.name}</p>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default PokemonsList;\n```\n\nJust a little tweak here:\n\n- Added the `key` in a combination of the pokemon's `id` and `name`\n- And render a paragraph for the `id` attribute (I was just testing it. But we will remove it later)\n\nGreat! Now we have the first list up and running.\n\nI want to make this same implementation but now for the captured pokemons. But for the captured pokemons, I want to make them as an empty list. Because when the \"game\" starts, I don't have any captured Pokemons, right? Right!\n\n```javascript\nconst [pokemons] = useState([]);\n```\n\nThat's it, really simple!\n\nThe whole component looks similar to the other:\n\n```javascript\nimport React, { useState } from 'react';\n\nconst CapturedPokemons = () => {\n  const [pokemons] = useState([]);\n\n  return (\n    <div className=\"pokedex\">\n      <h2>Captured Pokemons</h2>\n\n      {pokemons.map((pokemon) => (\n        <div key={`${pokemon.id}-${pokemon.name}`}>\n          <p>{pokemon.id}</p>\n          <p>{pokemon.name}</p>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default CapturedPokemons;\n```\n\nHere we map, but as the array is empty, it doesn't render anything.\n\nNow that I have the two main components, I can get them together in the `App` component:\n\n```javascript\nimport React from 'react';\nimport './App.css';\n\nimport PokemonsList from './PokemonsList';\nimport Pokedex from './Pokedex';\n\nconst App = () => (\n  <div className=\"App\">\n    <PokemonsList />\n    <Pokedex />\n  </div>\n);\n\nexport default App;\n```\n\n## Capturing & Releasing\n\nThis is the second part of our app. We will capture and release Pokemons. So let's think of the expected behavior.\n\nFor each Pokemon in the list of available Pokemons, I want to enable an action to capture them. The capture action will remove them from the list they were and add them to the list of captured Pokemons.\n\nThe release action will have similar behavior. But instead of moving from the available list to the captured list, it will be the reverse. We will move them from the captured list to the available list.\n\nSo both boxes need to share data to be able to add the Pokemon to the other list. How we do this as they are different components in the app? Let's talk about the React Context API.\n\nThe Context API was designed to make global data for a defined tree of React components. As the data is global, we can share it among components in this defined tree. So let's use it to share our simple Pokemon data between the two boxes.\n\n> Mental Note: \"Context is primarily used when some data needs to be accessible by many components at different nesting levels.\" - React Docs.\n\nUsing the API, we simply create a new context like that:\n\n```javascript\nimport { createContext } from 'react';\n\nconst PokemonContext = createContext();\n```\n\nNow, with the `PokemonContext`, we can use its provider. It will work as a component wrapper of a tree of components. It provides global data to these components and enables them to subscribe to any changes related to this context. It looks like this:\n\n```javascript\n<PokemonContext.Provider value={/* some value */}>\n```\n\nThe `value` prop is just a value that this context provides the wrapped components. What should we provide to the available and the captured lists?\n\n- `pokemons`: to list in the available list\n- `capturedPokemons`: to list in the captured list\n- `setPokemons`: to be able to update the available list\n- `setCapturedPokemons`: to be able to update the captured list\n\nAs I mentioned before in the `useState` part, this hook always provides a pair: the state and a function to update this state. This function handles and updates the context state. In other words, they are the `setPokemons` and `setCapturedPokemons`. How?\n\n```javascript\nconst [pokemons, setPokemons] = useState([\n  { id: 1, name: 'Bulbasaur' },\n  { id: 2, name: 'Charmander' },\n  { id: 3, name: 'Squirtle' },\n]);\n```\n\nNow we have the `setPokemons`.\n\n```javascript\nconst [capturedPokemons, setCapturedPokemons] = useState([]);\n```\n\nAnd now we also have the `setCapturedPokemons`.\n\nWith all these values in hand, we can now pass them to the provider's `value` prop.\n\n```javascript\nimport React, { createContext, useState } from 'react';\n\nexport const PokemonContext = createContext();\n\nexport const PokemonProvider = (props) => {\n  const [pokemons, setPokemons] = useState([\n    { id: 1, name: 'Bulbasaur' },\n    { id: 2, name: 'Charmander' },\n    { id: 3, name: 'Squirtle' },\n  ]);\n\n  const [capturedPokemons, setCapturedPokemons] = useState([]);\n\n  const providerValue = {\n    pokemons,\n    setPokemons,\n    capturedPokemons,\n    setCapturedPokemons,\n  };\n\n  return (\n    <PokemonContext.Provider value={providerValue}>\n      {props.children}\n    </PokemonContext.Provider>\n  );\n};\n```\n\nI created a `PokemonProvider` to wrap all these data and APIs to create the context and return the context provider with the defined value.\n\nBut how do we provide these data and APIs to the component? We need to do two main things:\n\n- Wrap the components into this context provider\n- Use the context in each component\n\nLet's wrap them first:\n\n```javascript\nconst App = () => (\n  <PokemonProvider>\n    <div className=\"App\">\n      <PokemonsList />\n      <Pokedex />\n    </div>\n  </PokemonProvider>\n);\n```\n\nAnd we use the context by using the `useContext` and passing the created `PokemonContext`. Like this:\n\n```javascript\nimport { useContext } from 'react';\nimport { PokemonContext } from './PokemonContext';\n\nuseContext(PokemonContext); // returns the context provider value we created\n```\n\nFor the available pokemons, we want to capture them, so it would be useful to have the `setCapturedPokemons` function API to update the captured pokemons. As the pokemon is captured, we need to remove it from the available list. `setPokemons` is also needed here. And to update each list, we need the current data. So basically we need everything from the context provider.\n\nWe need to build a button with an action to capture the pokemon:\n\n- `<button>` tag with an `onClick` calling the `capture` function and passing the Pokemon\n\n```javascript\n<button onClick={capture(pokemon)}>+</button>\n```\n\n- The `capture` function will update the `pokemons` and the `capturedPokemons` lists\n\n```javascript\nconst capture = (pokemon) => (event) => {\n  // update captured pokemons list\n  // update available pokemons list\n};\n```\n\nTo update the `capturedPokemons`, we can just call the `setCapturedPokemons` function with the current `capturedPokemons` and the pokemon to be captured.\n\n```javascript\nsetCapturedPokemons([...capturedPokemons, pokemon]);\n```\n\nAnd to update the `pokemons` list, just filter the pokemon that will be captured.\n\n```javascript\nsetPokemons(removePokemonFromList(pokemon));\n```\n\n`removePokemonFromList` is just a simple function to filter the pokemons by removing the captured pokemon.\n\n```javascript\nconst removePokemonFromList = (removedPokemon) =>\n  pokemons.filter((pokemon) => pokemon !== removedPokemon);\n```\n\nHow does the component look like now?\n\n```javascript\nimport React, { useContext } from 'react';\nimport { PokemonContext } from './PokemonContext';\n\nexport const PokemonsList = () => {\n  const { pokemons, setPokemons, capturedPokemons, setCapturedPokemons } =\n    useContext(PokemonContext);\n\n  const removePokemonFromList = (removedPokemon) =>\n    pokemons.filter((pokemon) => pokemon !== removedPokemon);\n\n  const capture = (pokemon) => () => {\n    setCapturedPokemons([...capturedPokemons, pokemon]);\n    setPokemons(removePokemonFromList(pokemon));\n  };\n\n  return (\n    <div className=\"pokemons-list\">\n      <h2>Pokemons List</h2>\n\n      {pokemons.map((pokemon) => (\n        <div key={`${pokemon.id}-${pokemon.name}`}>\n          <div>\n            <span>{pokemon.name}</span>\n            <button onClick={capture(pokemon)}>+</button>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default PokemonsList;\n```\n\nIt will look very similar for the captured pokemons component. Instead of `capture`, it will be a `release` function:\n\n```javascript\nimport React, { useContext } from 'react';\nimport { PokemonContext } from './PokemonContext';\n\nconst CapturedPokemons = () => {\n  const { pokemons, setPokemons, capturedPokemons, setCapturedPokemons } =\n    useContext(PokemonContext);\n\n  const releasePokemon = (releasedPokemon) =>\n    capturedPokemons.filter((pokemon) => pokemon !== releasedPokemon);\n\n  const release = (pokemon) => () => {\n    setCapturedPokemons(releasePokemon(pokemon));\n    setPokemons([...pokemons, pokemon]);\n  };\n\n  return (\n    <div className=\"captured-pokemons\">\n      <h2>CapturedPokemons</h2>\n\n      {capturedPokemons.map((pokemon) => (\n        <div key={`${pokemon.id}-${pokemon.name}`}>\n          <div>\n            <span>{pokemon.name}</span>\n            <button onClick={release(pokemon)}>-</button>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default CapturedPokemons;\n```\n\n## Reducing the complexity\n\nNow we use the `useState`, the Context API, context provider, the `useContext`. And more importantly, we can share data between Pokemon boxes.\n\nAnother way to manage the state is by using `useReducer` as an alternative for `useState`.\n\nThe reducer lifecycle works like this: the `useReducer` provides a `dispatch` function. With this function, we can dispatch an `action` inside a component. The `reducer` receives the action and the state. It understands the type of action, handles the data, and return a new state. Now, the new state can be used in the component.\n\nAs an exercise and to have a better understanding of this hook, I tried to replace the `useState` with it.\n\nThe `useState` was inside the `PokemonProvider`. We can redefine the initial state for the available and the captured pokemons in this data structure:\n\n```javascript\nconst defaultState = {\n  pokemons: [\n    { id: 1, name: 'Bulbasaur' },\n    { id: 2, name: 'Charmander' },\n    { id: 3, name: 'Squirtle' },\n  ],\n  capturedPokemons: [],\n};\n```\n\nAnd pass this value to the `useReducer`:\n\n```javascript\nconst [state, dispatch] = useReducer(pokemonReducer, defaultState);\n```\n\nThe `useReducer` receives two parameters: the reducer and the initial state. Let's build the `pokemonReducer` now.\n\nThe reducer receives the current state and the action that was dispatched.\n\n```javascript\nconst pokemonReducer = (state, action) => // returns the new state based on the action type\n```\n\nHere we get the action type and return a new state. The action is an object. It looks like this:\n\n```javascript\n{\n  type: 'AN_ACTION_TYPE';\n}\n```\n\nBut could also be bigger:\n\n```javascript\n{\n  type: 'AN_ACTION_TYPE',\n  pokemon: {\n    name: 'Pikachu'\n  }\n}\n```\n\nThis is the case, we pass a Pokemon to the action object. Let's pause for a minute and think about what we want to do inside the reducer.\n\nHere, we usually update data and handle actions. Actions are dispatched. So actions are behavior. And the behavior from our app are: capture and release! These are the action we need to handle here.\n\nThis is what our reducer will look like:\n\n```javascript\nconst pokemonReducer = (state, action) => {\n  switch (action.type) {\n    case 'CAPTURE':\n    // handle capture and return new state\n    case 'RELEASE':\n    // handle release and return new state\n    default:\n      return state;\n  }\n};\n```\n\nIf our action has a type `CAPTURE`, we handle it in one way. If our action type is the `RELEASE`, we handle it in another way. If the action type doesn't match any of these types, just return the current state.\n\nWhen we capture the pokemon, we need to update both lists: remove the pokemon from the available list and add it to the captured list. This state is what we need to return from the reducer.\n\n```javascript\nconst getPokemonsList = (pokemons, capturedPokemon) =>\n  pokemons.filter((pokemon) => pokemon !== capturedPokemon);\n\nconst capturePokemon = (pokemon, state) => ({\n  pokemons: getPokemonsList(state.pokemons, pokemon),\n  capturedPokemons: [...state.capturedPokemons, pokemon],\n});\n```\n\nThe `capturePokemon` function just returns the updated lists. The `getPokemonsList` removes the captured pokemon from the available list.\n\nAnd we use this new function in the reducer:\n\n```javascript\nconst pokemonReducer = (state, action) => {\n  switch (action.type) {\n    case 'CAPTURE':\n      return capturePokemon(action.pokemon, state);\n    case 'RELEASE':\n    // handle release and return new state\n    default:\n      return state;\n  }\n};\n```\n\nNow the `release` function!\n\n```javascript\nconst getCapturedPokemons = (capturedPokemons, releasedPokemon) =>\n  capturedPokemons.filter((pokemon) => pokemon !== releasedPokemon);\n\nconst releasePokemon = (releasedPokemon, state) => ({\n  pokemons: [...state.pokemons, releasedPokemon],\n  capturedPokemons: getCapturedPokemons(\n    state.capturedPokemons,\n    releasedPokemon,\n  ),\n});\n```\n\nThe `getCapturedPokemons` remove the released pokemon from the captured list. The `releasePokemon` function returns the updated lists.\n\nOur reducer looks like this now:\n\n```javascript\nconst pokemonReducer = (state, action) => {\n  switch (action.type) {\n    case 'CAPTURE':\n      return capturePokemon(action.pokemon, state);\n    case 'RELEASE':\n      return releasePokemon(action.pokemon, state);\n    default:\n      return state;\n  }\n};\n```\n\nJust one minor refactor: action types! These are strings and we can extract them into a constant and provide for the dispatcher.\n\n```javascript\nexport const CAPTURE = 'CAPTURE';\nexport const RELEASE = 'RELEASE';\n```\n\nAnd the reducer:\n\n```javascript\nconst pokemonReducer = (state, action) => {\n  switch (action.type) {\n    case CAPTURE:\n      return capturePokemon(action.pokemon, state);\n    case RELEASE:\n      return releasePokemon(action.pokemon, state);\n    default:\n      return state;\n  }\n};\n```\n\nThe entire reducer file looks like this:\n\n```javascript\nexport const CAPTURE = 'CAPTURE';\nexport const RELEASE = 'RELEASE';\n\nconst getCapturedPokemons = (capturedPokemons, releasedPokemon) =>\n  capturedPokemons.filter((pokemon) => pokemon !== releasedPokemon);\n\nconst releasePokemon = (releasedPokemon, state) => ({\n  pokemons: [...state.pokemons, releasedPokemon],\n  capturedPokemons: getCapturedPokemons(\n    state.capturedPokemons,\n    releasedPokemon,\n  ),\n});\n\nconst getPokemonsList = (pokemons, capturedPokemon) =>\n  pokemons.filter((pokemon) => pokemon !== capturedPokemon);\n\nconst capturePokemon = (pokemon, state) => ({\n  pokemons: getPokemonsList(state.pokemons, pokemon),\n  capturedPokemons: [...state.capturedPokemons, pokemon],\n});\n\nexport const pokemonReducer = (state, action) => {\n  switch (action.type) {\n    case CAPTURE:\n      return capturePokemon(action.pokemon, state);\n    case RELEASE:\n      return releasePokemon(action.pokemon, state);\n    default:\n      return state;\n  }\n};\n```\n\nAs the reducer is now implemented, we can import it into our provider and use it in the `useReducer` hook.\n\n```javascript\nconst [state, dispatch] = useReducer(pokemonReducer, defaultState);\n```\n\nAs we are inside the `PokemonProvider`, we want to provide some value to the consuming components: the capture and release actions.\n\nThese functions just need to dispatch the correct action type and pass the pokemon to the reducer.\n\n- The `capture` function: it receives the pokemon and returns a new function that dispatches an action with the type `CAPTURE` and the captured pokemon.\n\n```javascript\nconst capture = (pokemon) => () => {\n  dispatch({ type: CAPTURE, pokemon });\n};\n```\n\n- The `release` function: it receives the pokemon and returns a new function that dispatches an action with the type `RELEASE` and the release pokemon.\n\n```javascript\nconst release = (pokemon) => () => {\n  dispatch({ type: RELEASE, pokemon });\n};\n```\n\nNow with the state and the actions implemented, we can provide these values to the consuming components. Just update the provider value prop.\n\n```javascript\nconst { pokemons, capturedPokemons } = state;\n\nconst providerValue = {\n  pokemons,\n  capturedPokemons,\n  release,\n  capture,\n};\n\n<PokemonContext.Provider value={providerValue}>\n  {props.children}\n</PokemonContext.Provider>;\n```\n\nGreat! Now back to the component. Let's use these new actions. All the capture and release logics are encapsulated in our provider and reducer. Our component is pretty clean now. The `useContext` will look like this:\n\n```javascript\nconst { pokemons, capture } = useContext(PokemonContext);\n```\n\nAnd the whole component:\n\n```javascript\nimport React, { useContext } from 'react';\nimport { PokemonContext } from './PokemonContext';\n\nconst PokemonsList = () => {\n  const { pokemons, capture } = useContext(PokemonContext);\n\n  return (\n    <div className=\"pokemons-list\">\n      <h2>Pokemons List</h2>\n\n      {pokemons.map((pokemon) => (\n        <div key={`${pokemon.id}-${pokemon.name}`}>\n          <span>{pokemon.name}</span>\n          <button onClick={capture(pokemon)}>+</button>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default PokemonsList;\n```\n\nFor the captured pokemons component, it will look the very similar. The `useContext`:\n\n```javascript\nconst { capturedPokemons, release } = useContext(PokemonContext);\n```\n\nAnd the whole component:\n\n```javascript\nimport React, { useContext } from 'react';\nimport { PokemonContext } from './PokemonContext';\n\nconst Pokedex = () => {\n  const { capturedPokemons, release } = useContext(PokemonContext);\n\n  return (\n    <div className=\"pokedex\">\n      <h2>Pokedex</h2>\n\n      {capturedPokemons.map((pokemon) => (\n        <div key={`${pokemon.id}-${pokemon.name}`}>\n          <span>{pokemon.name}</span>\n          <button onClick={release(pokemon)}>-</button>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default Pokedex;\n```\n\nNo logic. Just UI. Very clean.\n\n## Pokemon God: The Creator\n\nNow that we have the communication between the two lists, I want to build a third box. This will how we create new Pokemons. But it is just a simple input and submit button. When we add a pokemon name into the input and press the button, it will dispatch an action to add this pokemon to the available list.\n\nAs we need to access the available list to update it, we need to share the state. So our component will be wrapped by our `PokemonProvider` together with the other components.\n\n```javascript\nconst App = () => (\n  <PokemonProvider>\n    <div className=\"main\">\n      <PokemonsList />\n      <Pokedex />\n    </div>\n    <PokemonForm />\n  </PokemonProvider>\n);\n```\n\nLet's build the `PokemonForm` component now. The form is pretty straightforward:\n\n```javascript\n<form onSubmit={handleFormSubmit}>\n  <input type=\"text\" placeholder=\"pokemon name\" onChange={handleNameOnChange} />\n  <input type=\"submit\" value=\"Add\" />\n</form>\n```\n\nWe have a form, an input, and a button. To sum up, we also have a function to handle the form submit and another function to handle the input on change.\n\nThe `handleNameOnChange` will be called every time the user type or remove a character. I wanted to build a local state, a representation of the pokemon name. With this state, we can use it to dispatch when submitting the form.\n\nAs we want to try hooks, we will use `useState` to handle this local state.\n\n```javascript\nconst [pokemonName, setPokemonName] = useState();\n\nconst handleNameOnChange = (e) => setPokemonName(e.target.value);\n```\n\nWe use the `setPokemonName` to update the `pokemonName` every time the user interacts with the input.\n\nAnd the `handleFormSubmit` is a function to dispatch the new pokemon to be added to the available list.\n\n```javascript\nconst handleFormSubmit = (e) => {\n  e.preventDefault();\n  addPokemon({\n    id: generateID(),\n    name: pokemonName,\n  });\n};\n```\n\nThe `addPokemon` is the API we will build later. It receives the pokemon: id and name. The name is the local state we defined: `pokemonName`.\n\nThe `generateID` is just a simple function I built to generate a random number. It looks like this:\n\n```javascript\nexport const generateID = () => {\n  const a = Math.random().toString(36).substring(2, 15);\n\n  const b = Math.random().toString(36).substring(2, 15);\n\n  return a + b;\n};\n```\n\nThe `addPokemon` will be provided by the context api we build. That way, this function can receive the new Pokemon and add to the available list. It looks like this:\n\n```javascript\nconst addPokemon = (pokemon) => {\n  dispatch({ type: ADD_POKEMON, pokemon });\n};\n```\n\nIt will dispatch this action type `ADD_POKEMON` and also pass the Pokemon.\n\nIn our reducer, we add the case for the `ADD_POKEMON` and handle the state to add the new pokemon to state.\n\n```javascript\nconst pokemonReducer = (state, action) => {\n  switch (action.type) {\n    case CAPTURE:\n      return capturePokemon(action.pokemon, state);\n    case RELEASE:\n      return releasePokemon(action.pokemon, state);\n    case ADD_POKEMON:\n      return addPokemon(action.pokemon, state);\n    default:\n      return state;\n  }\n};\n```\n\nAnd the `addPokemon` function will be:\n\n```javascript\nconst addPokemon = (pokemon, state) => ({\n  pokemons: [...state.pokemons, pokemon],\n  capturedPokemons: state.capturedPokemons,\n});\n```\n\nAnother approach is to destructure the state and change only the pokemons attribute. Like this:\n\n```javascript\nconst addPokemon = (pokemon, state) => ({\n  ...state,\n  pokemons: [...state.pokemons, pokemon],\n});\n```\n\nBack to our component, we just need to make the `useContext` provides the `addPokemon` dispatch API based on the `PokemonContext`:\n\n```javascript\nconst { addPokemon } = useContext(PokemonContext);\n```\n\nAnd the whole component looks like this:\n\n```javascript\nimport React, { useContext, useState } from 'react';\nimport { PokemonContext } from './PokemonContext';\nimport { generateID } from './utils';\n\nconst PokemonForm = () => {\n  const [pokemonName, setPokemonName] = useState();\n  const { addPokemon } = useContext(PokemonContext);\n\n  const handleNameOnChange = (e) => setPokemonName(e.target.value);\n\n  const handleFormSubmit = (e) => {\n    e.preventDefault();\n    addPokemon({\n      id: generateID(),\n      name: pokemonName,\n    });\n  };\n\n  return (\n    <form onSubmit={handleFormSubmit}>\n      <input\n        type=\"text\"\n        placeholder=\"pokemon name\"\n        onChange={handleNameOnChange}\n      />\n      <input type=\"submit\" value=\"Add\" />\n    </form>\n  );\n};\n\nexport default PokemonForm;\n```\n\nNow we have the available pokemons list, the captured pokemons list, and the third box to create new pokemons.\n\n## Pokemon Effects\n\nNow that we have our app almost complete, we can replace the mocked pokemons with a list of pokemons from the PokeAPI.\n\nSo, inside the function component, we can't do side effects like logging or subscriptions. This is why the `useEffect` hook exists. With this hook, we can fetch pokemons (a side-effect), and add to the list.\n\nFetching the PokeAPI will look like this:\n\n```javascript\nconst url = 'https://pokeapi.co/api/v2/pokemon';\nconst response = await fetch(url);\nconst data = await response.json();\ndata.results; // [{ name: 'bulbasaur', url: 'https://pokeapi.co/api/v2/pokemon/1/' }, ...]\n```\n\nThe `results` attribute is the list of fetched pokemons. With this data, we will be able to add to the pokemons list.\n\nLet's get the request code inside the `useEffect`:\n\n```javascript\nuseEffect(() => {\n  const fetchPokemons = async () => {\n    const response = await fetch(url);\n    const data = await response.json();\n    data.results; // update the pokemons list with this data\n  };\n\n  fetchPokemons();\n}, []);\n```\n\nTo be able to the `async-await`, we need to create a function and call it later. The empty array is a parameter to make the `useEffect` knows the dependencies it will look up to re-run.\n\nThe default behavior is to run the effect of every completed render. If we add a dependency to this list, the `useEffect` will only re-run when the dependency changes, instead of running in all completed renders.\n\nNow, that we fetched the pokemons, we need to update the list. It's an action, a new behavior. We need to use the dispatch again, implement a new type in the reducer, and update the state in the context provider.\n\nIn the `PokemonContext`, we create the `addPokemons` function to provide an API to the consuming component uses it.\n\n```javascript\nconst addPokemons = (pokemons) => {\n  dispatch({ type: ADD_POKEMONS, pokemons });\n};\n```\n\nIt receives pokemons and dispatches a new action: `ADD_POKEMONS`.\n\nAt the reducer, we add this new type, expect the pokemons, and call a function to add the pokemons to the available list state.\n\n```javascript\nconst pokemonReducer = (state, action) => {\n  switch (action.type) {\n    case CAPTURE:\n      return capturePokemon(action.pokemon, state);\n    case RELEASE:\n      return releasePokemon(action.pokemon, state);\n    case ADD_POKEMON:\n      return addPokemon(action.pokemon, state);\n    case ADD_POKEMONS:\n      return addPokemons(action.pokemons, state);\n    default:\n      return state;\n  }\n};\n```\n\nThe `addPokemons` function just add the pokemons to the list:\n\n```javascript\nconst addPokemons = (pokemons, state) => ({\n  pokemons: pokemons,\n  capturedPokemons: state.capturedPokemons,\n});\n```\n\nWe can refactor this by doing a state destructuring and the object property value shorthand:\n\n```javascript\nconst addPokemons = (pokemons, state) => ({\n  ...state,\n  pokemons,\n});\n```\n\nAs we provide this function API to the consuming component now, we can use the `useContext` to get it.\n\n```javascript\nconst { addPokemons } = useContext(PokemonContext);\n```\n\nThe whole component looks like this:\n\n```javascript\nimport React, { useContext, useEffect } from 'react';\nimport { PokemonContext } from './PokemonContext';\n\nconst url = 'https://pokeapi.co/api/v2/pokemon';\n\nexport const PokemonsList = () => {\n  const { state, capture, addPokemons } = useContext(PokemonContext);\n\n  useEffect(() => {\n    const fetchPokemons = async () => {\n      const response = await fetch(url);\n      const data = await response.json();\n      addPokemons(data.results);\n    };\n\n    fetchPokemons();\n  }, [addPokemons]);\n\n  return (\n    <div className=\"pokemons-list\">\n      <h2>Pokemons List</h2>\n\n      {state.pokemons.map((pokemon) => (\n        <div key={pokemon.name}>\n          <div>\n            <span>{pokemon.name}</span>\n            <button onClick={capture(pokemon)}>+</button>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default PokemonsList;\n```\n\n## Wrapping up\n\nThis was my attempt to share my learnings and experience while trying hooks in a mini side-project. We learned how to handle local state with `useState`, building a global state with the `Context API`, how to rewrite and replace the `useState` with `useReducer`, and doing side-effects within the `useEffect`.\n\n> Disclaimer: it was just an experimental project. Just for learning purposes. I don't have the answer about Hooks's good practices or how to make it scalable in big projects.\n\nI hope it was good reading! Keep learning and coding!\n\n## Resources\n\n- [React Docs: Context](https://reactjs.org/docs/context.html)\n- [React Docs: Hooks](https://reactjs.org/docs/hooks-reference.html)\n- [Pokemon Hooks side-project: source code](https://github.com/imteekay/pokehooks-labs)\n- [Beginner JavaScript Course](https://BeginnerJavaScript.com/friend/LEANDRO)\n- [React for Beginners Course](https://ReactForBeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://AdvancedReact.com/friend/LEANDRO)\n- [ES6 Course](https://ES6.io/friend/LEANDRO)\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n- [The Road to learn React](https://www.educative.io/courses/the-road-to-learn-react?aff=x8bV)\n- [JavaScript Fundamentals Before Learning React](https://www.educative.io/courses/javascript-fundamentals-before-learning-react?aff=x8bV)\n- [Reintroducing React: V16 and Beyond](https://www.educative.io/courses/reintroducing-react-v16-beyond?aff=x8bV)\n- [Advanced React Patterns With Hooks](https://www.educative.io/courses/advanced-react-patterns-with-hooks?aff=x8bV)\n- [Practical Redux](https://www.educative.io/courses/practical-redux?aff=x8bV)\n- [Learn React by building an App](https://alterclass.io/?ref=5ec57f513c1321001703dcd2)\n",
  },
  {
    url: '/react-query-complex-dependent-queries',
    title: 'react-query: complex dependent queries',
    content:
      "A few months ago I wrote a blog post about my latest project working on [developer experience and software maintainability in frontend engineering](/dx-and-software-maintainability-in-frontend-engineering). I started exploring many problems and opportunities in our current frontend application and one of my focuses was how we currently build the frontend and improve the foundation. Things like error handling, data fetching, state management, web performance, and so on.\n\nAmong all these topics, I started [exploring data fetching solutions](/data-fetching-in-react-with-react-query) and got to build PoCs (Proofs-of-Concept) for react-query to test various use cases in our application. Together with a colleague, we wrote an ADR (Architecture Design Record) to spread the adoption idea and how it would change our current architecture (our apps heavily use Redux for client state management and server cache).\n\nAfter the adoption, we are now in a phase that different use cases are showing up. The idea is to help architect solutions for these different challenges and write down documents to guide the entire organization.\n\n## A simple Dependent Query\n\nreact-query has a simple declarative way to handle dependent queries: a parameter called `enabled`. The react-query doc shows an example:\n\n```jsx\n// Get the user\nconst { data: user } = useQuery(['user', email], getUserByEmail);\nconst userId = user?.id;\n\n// Then get the user's projects\nconst { data: projects } = useQuery(['projects', userId], getProjectsByUser, {\n  // The query will not execute until the userId exists\n  enabled: !!userId,\n});\n```\n\nThe first query requests the user based on the email. And the query that requests the projects depends on the user id, got from the previous request. The query will only request if the `userId` exists.\n\nWe can use these two hooks in the same component and make the later triggers only if the first succeeds and return the user data to be used later on.\n\n## A more complex Dependent Query\n\nThe Landlord Landing Page has a complex form and it requires dependent queries for its requests. It looks like this:\n\n<img src=\"/react-query-complex-dependent-queries/diagram.png\">\n\nWhen the user fills the CEP/Zipcode, it requests the CEP data in the BFF (Backend For Frontend) service to get the address-related data and use it to request the GooglePlace API.\n\nThe GooglePlace API requests more data related to the address, specifically the latitude and longitude to query the region's data in the BFF's API.\n\nThe form fields component declares all these three queries:\n\n```jsx\nconst { data } = useCEP(cep);\nconst { data: googleData } = useGooglePlaceAPI(data);\n\nuseRegion({\n  lat: googleData?.latitude,\n  lng: googleData?.longitude,\n});\n```\n\nWe first query the CEP data and pass it to the `useGooglePlaceAPI` hook and there you can enable or disable the google place API query:\n\n```jsx\nconst requestGoogleAPI =\n  (completeAddress, { language, GOOGLE_LIBRARIES }) =>\n  async () => {\n    const googleAPI = await loadGoogleApi(\n      GOOGLE_API_KEY,\n      language,\n      GOOGLE_LIBRARIES,\n    );\n\n    return parseAddress(await googleAPI.getPlaceFromAddress(completeAddress));\n  };\n\nexport const isGoogleQueryEnabled = (completeAddress = '') =>\n  completeAddress.length > 0;\n\nexport const useGooglePlaceAPI = (\n  data = { completeAddress: '' },\n  { language, googleLibraries: GOOGLE_LIBRARIES } = defaultGoogleAPIConfig,\n) =>\n  useQuery(\n    [QUERY_KEY, PLACE_KEY, data.completeAddress],\n    requestGoogleAPI(data.completeAddress, { language, GOOGLE_LIBRARIES }),\n    {\n      enabled: isGoogleQueryEnabled(data.completeAddress),\n    },\n  );\n```\n\nThe google place API request only triggers if it has the `completeAddress`.\n\nAfter getting the latitude and longitude, we can request the region API:\n\n```jsx\nconst fetchRegion = (lat, lng) => () => getRegion(lat, lng);\n\nexport const isRegionFetchEnabled = (lat, lng) =>\n  lat !== undefined && lng !== undefined;\n\nexport const useRegion = ({ lat, lng }) =>\n  useQuery([REGION_KEY, lat, lng], fetchRegion(lat, lng), {\n    enabled: isRegionFetchEnabled(lat, lng),\n  });\n```\n\nIt works very similarly to the previous hook. To trigger the `fetchRegion` request, it needs to have the `lat` and `lng` parameters. We verify them to enable the query.\n\n## Final words\n\nreact-query solves data fetching in a very simple way with a nice API. It makes complex topics live revalidation, server cache, and dependent queries easier to implement.\n\nIt has been the obvious solution for me when it comes to this specific data fetching challenge.\n\n## Resources\n\n- [Doc: Dependent Queries](https://react-query.tanstack.com/guides/dependent-queries)\n- [DX & Software Maintainability in Frontend Engineering](/dx-and-software-maintainability-in-frontend-engineering)\n- [Data Fetching in React with react-query](/data-fetching-in-react-with-react-query)\n",
  },
  {
    url: '/slow-living',
    title: 'Slow Living',
    content:
      "> \"Now I'm shaking, drinking all this coffee. These last few weeks have been exhausting. I'm lost in my imagination.\"\n\nIn these 8 years I've been doing software engineering, sometimes we had to experience a rush to finish some projects, mostly at the end of a quarter or the end of the year.\n\nThese are not good experiences at all and I always get myself reflecting on these moments. What could we have done better? Is it the planning, the process, the strategy, or maybe the team?\n\nIt's always good to reflect on these topics to not repeat it as a team or as a company. But I myself started to think that this is not the kind of life I plan to have. Not for now. Not for my future.\n\nWake up, get a cup of coffee, not enjoying the morning, the breakfast, and be so mentally accelerated. No good. At least for me.\n\nI want to be able to be mentally healthy, do things properly, be present, enjoy moments. I don't want to be a productivity machine. The 20 years old TK would love to be as much productive as possible. But the current TK doesn't really enjoy the rush and doing things without quality. I don't need to live like playing Tetris, where I would fill every time in my calendar with a thing to do, just for the sake of being productive.\n\nI want to be productive, achieve my goals, but I also want to enjoy all the processes behind it. Making it sustainable for the long run is something I carefully think about.\n\nSo I started learning about `Slow Living` and made a list of things I'm applying in my daily life. It's nothing new or out of this world. It's pretty simple actually. Just applying some concepts on a daily basis is helping me reflect on my lifestyle, my actions, my habits, and how I truly want to live my life.\n\nI always preferred to be intentional about my life choices instead of just being reactive or letting life decide for me.\n\nThis is what I'm learning and applying:\n\n## Expectation vs Reality\n\nThe idea here is super simple: be able to set the real expectations instead of thinking you can do everything. Be realistic. Instead of adding 100 things to do to my daily ToDo list, think reasonably about the work I want to do in the day.\n\n`Learn to say no`. This is truly important! As a curious person, I want to learn everything, embrace the world, and just do things.. from photography to computer science. from book reading to running. and so on. Learning to say no is pretty hard but very necessary.\n\n`Constantly prioritize` to do only the things that really matter to you. I try to prioritize the things that truly give me happiness. There are things that I love to do, there are things I like to do. And it's a fine line between these two boxes. We have moments in life and these boxes will always change over time, so to re-prioritize this list of things will always be an important daily task for me.\n\n`Be patient`. Good things take time. When we are not patient, we tend to do everything faster, sometimes - or most of the time - without any quality, only to accomplish the goal as fast as possible. Now I prefer the balance and constantly trying to apply the \"life is not a sprint, it's a marathon\" kind of rule.\n\nAnd finally, we are able to be productive without being productivity machines. Slow living is not about doing things slowly but experiencing life to the fullest.\n\n## Be present\n\nAs I wrote above, the idea of slow living is about being present and experiencing life to the fullest. In our current world where we are bombarded by information, to simplify my life, I want to keep only the health habits and cut the attention seekers like social media, so I uninstalled all the social media like Twitter, Instagram, Facebook, Linkedin from my phone (I also deactivated Facebook and Instagram). For the web version, I added the `Work Mode` browser extension to block all these social media.\n\nThe other thing I'm trying to apply in my life is the idea of deep work, to get my attention in that one thing and get most of it. Multitasking is a real problem for me, so I'm always paying attention to this when I'm doing that one thing. I don't want to rush and get many things done just to check all the things on my list, quality is important for me.\n\nTo be present is for everything in my life: be present with people I love, at work, just appreciating life and nature.\n\n## Take time to recharge\n\nI'm always trying to do things, be active, and I don't take seriously \"sleep and rest\" (I should and I'm working on it!), so the first thing is to give the permission to pause and slow down. I don't need to be \"productive\" every single minute. To relax and recharge is really important to do great work.\n\nSelf-awareness is also very important. As far as I know myself, I was always an introverted person, so taking time for myself is very important. I like to be social, meet interesting people, but I also need time for myself. This is one way - one of the best - that makes me relax and recharge.\n\nMeditation and stretching are habits I'm trying to build along the way. I believe in mindfulness and it's helping me relieve stress. I feel that stretching is relaxing for my body in the same way meditation is relaxing for my mind.\n\n---\n\nWe live in a world with so much information and attention seekers that I wanted to pause everything and rethink how I really want to live my life. I don't want to follow what people say. I want to experiment myself tools, ideas, concepts, and lifestyle and see if it fits well for me.\n\nTime to reflect about life is so damn important but so rare in these days where we are constantly doing, watching, listening, but not pausing to rethink ideas or reflect on how the system works.\n\nI hope this post can be the starting point to reflect on your own life the same way I started on my own.\n\n## Inspirations\n\n- [Malama Life](https://www.youtube.com/channel/UCDn5zbDIhRG97O2rqia9Gag)\n- [Halle Burns](https://www.youtube.com/channel/UCqPwe2Y-GIDr81qnke0qy4A)\n- [simply by christine](https://www.youtube.com/channel/UCZqVfLvSXSGnVT_awp9WBMw)\n",
  },
  {
    url: '/tdd-functions-and-react-components',
    title: 'TDD, simple functions, and React components',
    content:
      "This is part of my studies on how to build sustainable and consistent software. In this post, we will talk about the thinking behind the testing driven development and how to apply this knowledge to simple functions, web accessibility, and React components, mostly with Jest and React Testing Library.\n\nAutomated tests are a big part of software development. It gives us, developers, confidence to ship code to\nbe there, but we increase the confidence that the software will be up and running and working appropriately.\n\nI began my software career in the Ruby community writing tests from the first day I learned the language. The Ruby (and Rails) community was always strong in the testing automation area. It helped shape my mindset on how to write good software.\n\nSo using Ruby and Rails, I did a lot of backend stuff like background jobs, data structure modeling, API building, and so on. In this scope, the user is always one: the developer user. If building an API, the user would be the developer that's consuming the API. If building the models, the user would be the developer that will use this model.\n\nNow doing a lof of frontend stuff too, after 1 intense year of building PWAs using mostly React and Redux, at first some thoughts came to my mind:\n\n- TDD is impossible when building UI stuff. How do I know if it is a div or span?\n- Testing can be \"complex\". Should I shallow or should I mount? Test everything? Ensure every div should be the right place?\n\nSo I started re-thinking about these testing practices and how to make it productive.\n\nTDD is possible. If I'm wondering if I should expect a div or a span, I'm probably testing the wrong thing. Remember: tests should give us the confidence to ship, not necessarily to cover every bit or implementation details. We will dive into this topic later!\n\nI want to build tests that:\n\n- Ensure the software works appropriately\n- Give the confidence to ship code to production\n- Make us think about software design\n\nAnd tests that make software:\n\n- Easy to maintain\n- Easy to refactor\n\n## Testing Driven Development\n\nTDD shouldn't be complex. It is just a process of 3 steps:\n\n- Make a test\n- Make it run\n- Make it right\n\nWe start writing a simple test to cover how we expect the software works. Then we make the first implementation of the code (class, function, script, etc). Now the software is behaving. It works as expected. Time to make it right. Time to make it better.\n\nThe goal is a clean code that works. We solve the \"that works\" problem first and then make the code clean.\n\nIt is pretty simple. And it should be. I didn't say it is easy. But it is simple, straightforward, just 3 steps. Every time you exercise this process of writing tests first, code after, and then refactoring, you feel more confident.\n\nOne good technique when writing your tests first is to think about use cases and simulate how it should be used (as a function, component, or used by a real user).\n\n## Functions\n\nLet's apply this TDD thing into simple functions.\n\nSome time ago I was implementing a draft feature for a real estate registration flow. Part of the feature was to show a modal if the user had a not finished real estate. The function we will implement is the one that answers if the user has at least one real estate draft.\n\nSo first step: writing the test! Let's think of the use cases of this function. It always responds a boolean: true or false.\n\n- Has no unsaved real estate draft: `false`\n- Has at least one unsaved real estate draft: `true`\n\nLet's write the tests that represent this behavior:\n\n```javascript\ndescribe('hasRealEstateDraft', () => {\n  describe('with real estate drafts', () => {\n    it('returns true', () => {\n      const realEstateDrafts = [\n        {\n          address: 'São Paulo',\n          status: 'UNSAVED',\n        },\n      ];\n\n      expect(hasRealEstateDraft(realEstateDrafts)).toBeTruthy();\n    });\n  });\n\n  describe('with not drafts', () => {\n    it('returns false', () => {\n      expect(hasRealEstateDraft([])).toBeFalsy();\n    });\n  });\n});\n```\n\nWe wrote the tests. But when running it, it shows go red: 2 broken tests because we do not have the function implemented yet.\n\nSecond step: make it run! In this case, it is pretty simple. We need to receive this array object and return if it has or hasn't at least one real estate draft.\n\n```javascript\nconst hasRealEstateDraft = (realEstateDrafts) => realEstateDrafts.length > 0;\n```\n\nGreat! Simple function. Simple tests. We could go to step 3: make it right! But in this case, our function is really simple and we've already got it right.\n\nBut now we need the function to get the real estate drafts and pass it to the `hasRealEstateDraft`.\n\nWhich use case we can think of?\n\n- An empty list of real estates\n- Only saved real estates\n- Only unsaved real estates\n- Mixed: save and unsaved real estates\n\nLet's write the tests to represent it:\n\n```javascript\ndescribe('getRealEstateDrafts', () => {\n  describe('with an empty list', () => {\n    it('returns an empty list', () => {\n      const realEstates = [];\n\n      expect(getRealEstateDrafts(realEstates)).toMatchObject([]);\n    });\n  });\n\n  describe('with only unsaved real estates', () => {\n    it('returns the drafts', () => {\n      const realEstates = [\n        {\n          address: 'São Paulo',\n          status: 'UNSAVED',\n        },\n        {\n          address: 'Tokyo',\n          status: 'UNSAVED',\n        },\n      ];\n\n      expect(getRealEstateDrafts(realEstates)).toMatchObject(realEstates);\n    });\n  });\n\n  describe('with only saved real estates', () => {\n    it('returns an empty list', () => {\n      const realEstates = [\n        {\n          address: 'São Paulo',\n          status: 'SAVED',\n        },\n        {\n          address: 'Tokyo',\n          status: 'SAVED',\n        },\n      ];\n\n      expect(getRealEstateDrafts(realEstates)).toMatchObject([]);\n    });\n  });\n\n  describe('with saved and unsaved real estates', () => {\n    it('returns the drafts', () => {\n      const realEstates = [\n        {\n          address: 'São Paulo',\n          status: 'SAVED',\n        },\n        {\n          address: 'Tokyo',\n          status: 'UNSAVED',\n        },\n      ];\n\n      expect(getRealEstateDrafts(realEstates)).toMatchObject([\n        {\n          address: 'Tokyo',\n          status: 'UNSAVED',\n        },\n      ]);\n    });\n  });\n});\n```\n\nGreat! We run the tests. It doesn't work.. yet! Now implement the function.\n\n```javascript\nconst getRealEstatesDrafts = (realEstates) => {\n  const unsavedRealEstates = realEstates.filter(\n    (realEstate) => realEstate.status === 'UNSAVED',\n  );\n  return unsavedRealEstates;\n};\n```\n\nWe simply filter by the real estate status and return it. Great, the tests are passing, the bar is green! And the software is behaving, but we can make it better: step 3!\n\nWhat about extracting the anonymous function within the `filter` function and make the `'UNSAVED'` be represented by an enum?\n\n```javascript\nconst STATUS = {\n  UNSAVED: 'UNSAVED',\n  SAVED: 'SAVED',\n};\n\nconst byUnsaved = (realEstate) => realEstate.status === STATUS.UNSAVED;\n\nconst getRealEstatesDrafts = (realEstates) => realEstates.filter(byUnsaved);\n```\n\nThe tests are still passing and we have a better solution.\n\nOne thing to have in mind here: I isolated the data source from the logic. What does it mean? We get the data from local storage (data source), but we test only the functions responsible to the logic to get drafts and see if it has at least one draft. The functions with the logic, we ensure that it works and it is clean code.\n\nIf we get the `localStorage` inside our functions, it becomes hard to test. So we separate the responsibility and make the tests easy to write. Pure functions are easier to maintain and simpler to write tests.\n\n## React Components\n\nNow let's talk about React components. Back to the introduction, we talked about writing tests that test implementation details. And now we will see how we can make it better, more sustainable, and have more confidence.\n\nA couple of days ago I was planning to build the new onboarding information for the real estate owner. It is basically a bunch of pages with the same design, but it changes the icon, title, and description of the pages.\n\n<img src=\"/tdd-functions-and-react-components/ui.png\">\n\nI wanted to build just one component: `Content` and pass the information needed to render the correct icon, title, and description. I would pass `businessContext` and `step` as props and it would render the correct content to the onboarding page.\n\nWe don't want to know if we will render a div or paragraph tag. Our test needs to ensure that for a given business context and step, the correct content will be there. So I came with these use cases:\n\n- The first step of the rental business context\n- Last step of the rental business context\n- The first step of the sales business context\n- Last step of the sales business context\n\nLet's see the tests:\n\n```javascript\ndescribe('Content', () => {\n  describe('in the rental context', () => {\n    const defaultProps = {\n      businessContext: BUSINESS_CONTEXT.RENTAL,\n    };\n\n    it('renders the title and description for the first step', () => {\n      const step = 0;\n      const { getByText } = render(<Content {...defaultProps} step={step} />);\n\n      expect(getByText('the first step title')).toBeInTheDocument();\n      expect(getByText('the first step description')).toBeInTheDocument();\n    });\n\n    it('renders the title and description for the forth step', () => {\n      const step = 3;\n      const { getByText } = render(<Content {...defaultProps} step={step} />);\n\n      expect(getByText('the last step title')).toBeInTheDocument();\n      expect(getByText('the last step description')).toBeInTheDocument();\n    });\n  });\n\n  describe('in the sales context', () => {\n    const defaultProps = {\n      businessContext: BUSINESS_CONTEXT.SALE,\n    };\n\n    it('renders the title and description for the first step', () => {\n      const step = 0;\n      const { getByText } = render(<Content {...defaultProps} step={step} />);\n\n      expect(getByText('the first step title')).toBeInTheDocument();\n      expect(getByText('the first step description')).toBeInTheDocument();\n    });\n\n    it('renders the title and description for the last step', () => {\n      const step = 6;\n      const { getByText } = render(<Content {...defaultProps} step={step} />);\n\n      expect(getByText('the last step title')).toBeInTheDocument();\n      expect(getByText('the last step description')).toBeInTheDocument();\n    });\n  });\n});\n```\n\nWe have one `describe` block for each business context and an `it` block for each step. I also created an accessibility test to ensure the component we are building is accessible.\n\n```javascript\nit('has not accessibility violations', async () => {\n  const props = {\n    businessContext: BUSINESS_CONTEXT.SALE,\n    step: 0,\n  };\n\n  const { container } = render(<Content {...props} />);\n  const results = await axe(container);\n\n  expect(results).toHaveNoViolations();\n});\n```\n\nNow we need to make it run! Basically, the UI part of this component is just the icon, the title, and the description. Something like:\n\n```javascript\n<Fragment>\n  <Icon />\n  <h1>{title}</h1>\n  <p>{description}</p>\n</Fragment>\n```\n\nWe just need to build the logic to get all these correct data. As I have the `businessContext` and the `step` in this component, I wanted to just do something like\n\n```javascript\ncontent[businessContext][step];\n```\n\nAnd it gets the correct content. So I built a data structure to work that way.\n\n```javascript\nconst onboardingStepsContent = {\n  alugar: {\n    0: {\n      Icon: Home,\n      title: 'first step title',\n      description: 'first step description',\n    },\n    // ...\n  },\n  vender: {\n    0: {\n      Icon: Home,\n      title: 'first step title',\n      description: 'first step description',\n    },\n    // ...\n  },\n};\n```\n\nIt's just an object with the first keys as the business context data and for each business context, it has keys that represent each step of the onboarding. And our component would be:\n\n```javascript\nconst Content = ({ businessContext, step }) => {\n  const onboardingStepsContent = {\n    alugar: {\n      0: {\n        Icon: Home,\n        title: 'first step title',\n        description: 'first step description',\n      },\n      // ...\n    },\n    vender: {\n      0: {\n        Icon: Home,\n        title: 'first step title',\n        description: 'first step description',\n      },\n      // ...\n    },\n  };\n\n  const { Icon, title, description } =\n    onboardingStepsContent[businessContext][step];\n\n  return (\n    <Fragment>\n      <Icon />\n      <h1>{title}</h1>\n      <p>{description}</p>\n    </Fragment>\n  );\n};\n```\n\nIt works! Now let's make it better. I wanted to make the get content more resilient. What if it receives a step that doesn't exist for example? These are the use cases:\n\n- The first step of the rental business context\n- Last step of the rental business context\n- The first step of the sales business context\n- Last step of the sales business context\n- Inexistent step of the rental business context\n- Inexistent step of the sales business context\n\nLet's see the tests:\n\n```javascript\ndescribe('getOnboardingStepContent', () => {\n  describe('when it receives existent businessContext and step', () => {\n    it('returns the correct content for the step in \"alugar\" businessContext', () => {\n      const businessContext = 'alugar';\n      const step = 0;\n\n      expect(getOnboardingStepContent({ businessContext, step })).toMatchObject(\n        {\n          Icon: Home,\n          title: 'first step title',\n          description: 'first step description',\n        },\n      );\n    });\n\n    it('returns the correct content for the step in \"vender\" businessContext', () => {\n      const businessContext = 'vender';\n      const step = 5;\n\n      expect(getOnboardingStepContent({ businessContext, step })).toMatchObject(\n        {\n          Icon: ContractSign,\n          title: 'last step title',\n          description: 'last step description',\n        },\n      );\n    });\n  });\n\n  describe('when it receives inexistent step for a given businessContext', () => {\n    it('returns the first step of \"alugar\" businessContext', () => {\n      const businessContext = 'alugar';\n      const step = 7;\n\n      expect(getOnboardingStepContent({ businessContext, step })).toMatchObject(\n        {\n          Icon: Home,\n          title: 'first step title',\n          description: 'first step description',\n        },\n      );\n    });\n\n    it('returns the first step of \"vender\" businessContext', () => {\n      const businessContext = 'vender';\n      const step = 10;\n\n      expect(getOnboardingStepContent({ businessContext, step })).toMatchObject(\n        {\n          Icon: Home,\n          title: 'first step title',\n          description: 'first step description',\n        },\n      );\n    });\n  });\n});\n```\n\nGreat! Now let's build our `getOnboardingStepContent` function to handle this logic.\n\n```javascript\nconst getOnboardingStepContent = ({ businessContext, step }) => {\n  const content = onboardingStepsContent[businessContext][step];\n\n  return content ? content : onboardingStepsContent[businessContext][0];\n};\n```\n\nWe try to get content. If we have it, just return it. If we don't have it, return the first step of the onboarding.\n\nNeat! But we can improve it. What about using the `||` operator? No need to assign to a variable, no need to use a ternary.\n\n```javascript\nconst getOnboardingStepContent = ({ businessContext, step }) =>\n  onboardingStepsContent[businessContext][step] ||\n  onboardingStepsContent[businessContext][0];\n```\n\nIf it finds the content, just return it. If it didn't find, return the first step of the given business context.\n\nNow our component is only UI.\n\n```javascript\nconst Content = ({ businessContext, step }) => {\n  const { Icon, title, description } = getOnboardingStepContent({\n    businessContext,\n    step,\n  });\n\n  return (\n    <Fragment>\n      <Icon />\n      <h1>{title}</h1>\n      <p>{description}</p>\n    </Fragment>\n  );\n};\n```\n\n---\n\n## Final thoughts\n\nI like to think deeply about the tests I'm writing. And I think all developers should too. It does need to give us the confidence to ship more code and have a bigger impact on the market we are working on.\n\nLike all code, when we write smelly and bad tests, it influences other developers to follow the \"pattern\". It gets worse in bigger companies. It scales badly. But we are always able to stop, reflect on the status quo, and take action to make it better.\n\nI shared some resources I found interesting reading and learning. If you want to get a great introduction to TDD, I really recommend TDD by example, a book from Kent Beck.\n\nI will write more about tests, TDD, and React. And how we can make our software more consistent and feel safe when shipping code to production.\n\n---\n\n## Dependencies\n\n- [jest-axe](https://github.com/nickcolley/jest-axe): jest matchers for testing accessibility\n- [testing-library/react-testing-library](https://github.com/testing-library/react-testing-library): testing utilities to help test react\n- [testing-library/jest-dom](https://github.com/testing-library/jest-dom): jest matchers to test the state of the DOM\n\n## Resources\n\n- [Beginner JavaScript Course](https://BeginnerJavaScript.com/friend/LEANDRO)\n- [React for Beginners Course](https://ReactForBeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://AdvancedReact.com/friend/LEANDRO)\n- [ES6 Course](https://ES6.io/friend/LEANDRO)\n- [The Road to learn React](https://www.educative.io/courses/the-road-to-learn-react?aff=x8bV)\n- [JavaScript Fundamentals Before Learning React](https://www.educative.io/courses/javascript-fundamentals-before-learning-react?aff=x8bV)\n- [Reintroducing React: V16 and Beyond](https://www.educative.io/courses/reintroducing-react-v16-beyond?aff=x8bV)\n- [Advanced React Patterns With Hooks](https://www.educative.io/courses/advanced-react-patterns-with-hooks?aff=x8bV)\n- [Practical Redux](https://www.educative.io/courses/practical-redux?aff=x8bV)\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n- [Test Driven Development by example book by Kent Beck](https://www.amazon.com/Test-Driven-Development-Kent-Beck/dp/0321146530)\n- [Testable Javascript book by Mark Ethan Trostler](https://www.amazon.com/Testable-JavaScript-Ensuring-Reliable-Code/dp/1449323391/ref=sr_1_8?dchild=1&keywords=testing+javascript&qid=1585274935&s=books&sr=1-8)\n- [Blog post source code](https://github.com/tk-notes/blog/tree/master/tdd-functions-and-react-components)\n- [Testing React applications with jest, jest-axe, and react-testing-library](https://medium.com/hackernoon/testing-react-with-jest-axe-and-react-testing-library-accessibility-34b952240f53)\n- [Modern React testing, part 3: Jest and React Testing Library](https://blog.sapegin.me/all/react-testing-3-jest-and-react-testing-library/)\n- [What we found when we tested tools on the world’s least-accessible webpage](https://accessibility.blog.gov.uk/2017/02/24/what-we-found-when-we-tested-tools-on-the-worlds-least-accessible-webpage/)\n- [Testing Implementation Details](https://kentcdodds.com/blog/testing-implementation-details)\n- [Learn React by building an App](https://alterclass.io/?ref=5ec57f513c1321001703dcd2)\n",
  },
  {
    url: '/thinking-in-data-contracts',
    title: 'Thinking in data contracts',
    content:
      "In frontend development, it is common to consume API data and use it to render user interfaces. But sometimes, the API data is not exactly how we want to work with. So we manage to map the API data into the App state.\n\nBut it doesn't need to be complex. It can be just a simple mapper function, an API data contract, and the App state contract.\n\nI'll show an example in the context of a Redux app and how we can make the state consistent.\n\nWe start with the initial state contract.\n\n```typescript\ntype Person = {\n  id: number;\n  name: string;\n  email: string;\n};\n```\n\nAnd use the contract type in the initial state definition:\n\n```typescript\nconst initialState: Person = {\n  id: 0,\n  name: 'TK',\n  email: 'tk@mail.com',\n};\n```\n\nAfter the app state definition, we can think of the API contract. We can just implement a type `PersonAPI` with all the types needed for the data.\n\n```typescript\ntype PersonAPI = {\n  id: number;\n  name: string;\n  email: string;\n};\n```\n\nNow that we have our contract defined, we can work with the data mapping. it doesn't need to be a super complex class. It can be a simple pure function, receiving `PersonAPI` data and transforming it into a `Person` data.\n\n```typescript\nconst fromAPI = (person: PersonAPI): Person => ({\n  id: person.id,\n  name: person.name,\n  email: person.email,\n});\n```\n\nThat's pretty simple! And how do we use it?\n\n```typescript\nconst payloadAPI = {\n  id: 1,\n  name: 'TK',\n  email: 'tk@mail.com',\n};\n\nconst person: Person = fromAPI(payloadAPI); // { id: 1, name: 'TK', email: 'tk@mail.com' }\n```\n\nData comes in. Data comes out. Everything pure.\n\nHere we have a very simple mapping, no involved logic. But what if the API data we receive has no `name`, but `firstName` and `lastName`? We want to transform the `firstName` and `lastName` into a `name` attribute in the `Person` contract.\n\nThe `PersonAPI` type:\n\n```typescript\ntype PersonAPI = {\n  id: number;\n  firstName: string;\n  lastname: string;\n  email: string;\n};\n```\n\nThe `Person` type:\n\n```typescript\ntype Person = {\n  id: number;\n  name: string;\n  email: string;\n};\n```\n\nIn our `name`, we need to join strings. Basically doing string interpolation:\n\n```typescript\n`${person.firstName} ${person.lastName}`;\n```\n\nSo our mapping function would be something like:\n\n```typescript\nconst fromAPI = (person: PersonAPI): Person => ({\n  id: person.id,\n  name: `${person.firstName} ${person.lastName}`,\n  email: person.email,\n});\n```\n\nGreat! Transforming data for UI rendering.\n\nNext step: imagine our `lastName` is an optional database column. So the API endpoint can return it... or not!\n\nWe can use the Typescript `Optional Property`. It tells us: \"It is an optional property, it has this type, but the data can be here... or not!\"\n\nSo we use it in our API contract:\n\n```typescript\ntype PersonAPI = {\n  id: number;\n  firstName: string;\n  lastName?: string;\n  email: string;\n};\n```\n\nNice! Now we know that we need to do some kind of logic to build the `name` attribute.\n\n- It has the `lastName` property: concat `firstName` and `lastName`\n- It hasn't the `lastName`: just return the `firstName` value\n\n```typescript\nconst fromAPI = (person: PersonAPI): Person => {\n  let name: string;\n  if (person.lastName) {\n    name = `${person.firstName} ${person.lastName}`;\n  } else {\n    person.firstName;\n  }\n  return {\n    id: person.id,\n    name,\n    email: person.email,\n  };\n};\n```\n\nBut we can also transform this `let` statement into a `const` by doing a ternary operation:\n\n```typescript\nconst fromAPI = (person: PersonAPI): Person => {\n  const name: string = person.lastName\n    ? `${person.firstName} ${person.lastName}`\n    : person.firstName;\n  return {\n    id: person.id,\n    name,\n    email: person.email,\n  };\n};\n```\n\nOr better: separate its responsibility into a function that builds the name!\n\n```typescript\nconst buildPersonName = (person: PersonAPI): string =>\n  person.lastName ? `${person.firstName} ${person.lastName}` : person.firstName;\nconst fromAPI = (person: PersonAPI): Person => {\n  const name: string = buildPersonName(person);\n  return {\n    id: person.id,\n    name,\n    email: person.email,\n  };\n};\n```\n\nWe separate the responsibility of each function. Great! It is easier to test our functions now.\n\nNext phase: using the API data to build a new app state. Imagine we want to know if the person is active. The business rule is: the person status should be `active` and the last visit should be within this week (in the last 7 days).\n\nOur API contract first:\n\n```typescript\ntype PersonAPI = {\n  id: number;\n  firstName: string;\n  lastName?: string;\n  email: string;\n  status: string;\n  lastVisit: Date;\n};\n```\n\nWe will use these properties: `status` and `lastVisit`.\n\nOur app state contract second:\n\n```typescript\ntype Person = {\n  id: number;\n  name: string;\n  email: string;\n  active: boolean;\n};\n```\n\nThe business rule now:\n\n- Person status should be `active`\n\n```typescript\nperson.status === 'active';\n```\n\n- Person last visit should be in the last 7 days\n\n```typescript\nperson.lastVisit >= new Date(Date.now() - 7 * 24 * 3600 * 1000);\n```\n\nNow our mapping function:\n\n```typescript\nconst fromAPI = (person: PersonAPI): Person => {\n  const name: string = buildPersonName(person);\n  const active: boolean =\n    person.status === 'active' &&\n    person.lastVisit >= new Date(Date.now() - 7 * 24 * 3600 * 1000);\n  return {\n    id: person.id,\n    name,\n    email: person.email,\n    active,\n  };\n};\n```\n\nLet's refactor it! We will start with the `status` thing. `'active'` is a string. To define it in a data structure and enable reusability, we can use Typescript's Enum.\n\n```typescript\nenum PersonStatus {\n  Active = 'active',\n  Inactive = 'inactive',\n}\n```\n\nWe use it like:\n\n```typescript\nPersonStatus.Active; // 'active'\nPersonStatus.Inactive; // 'inactive'\n```\n\nThe person status logic comes easy with this feature:\n\n```typescript\nperson.status === PersonStatus.Active;\n```\n\nNow the last visit thing. Instead of random numbers, what about making it a little bit more descriptive? This is 1 day in milliseconds:\n\n```typescript\nconst oneDayInMilliseconds: number = 24 * 3600 * 1000;\n```\n\nThis is 7 days in milliseconds:\n\n```typescript\nconst sevenDaysInMilliseconds: number = oneDayInMilliseconds * 7;\n```\n\nAnd this is a week ago:\n\n```typescript\nconst weekAgo: Date = new Date(Date.now() - sevenDaysInMilliseconds);\n```\n\nNow our logic comes easy:\n\n```typescript\nperson.lastVisit >= weekAgo;\n```\n\nWe can now join all together in a function called `isActive` that returns a boolean?\n\n```typescript\nconst isActive = (person: PersonAPI): boolean => {\n  const oneDayInMilliseconds: number = 24 * 3600 * 1000;\n  const sevenDaysInMilliseconds: number = oneDayInMilliseconds * 7;\n  const weekAgo: Date = new Date(Date.now() - sevenDaysInMilliseconds);\n  return person.status === PersonStatus.Active && person.lastVisit >= weekAgo;\n};\n```\n\nI really want to separate the `weekAgo` \"logic\" into a new function. And I also want to name the statements.\n\n```typescript\nconst getWeekAgo = (): Date => {\n  const oneDayInMilliseconds: number = 24 * 3600 * 1000;\n  const sevenDaysInMilliseconds: number = oneDayInMilliseconds * 7;\n  return new Date(Date.now() - sevenDaysInMilliseconds);\n};\nconst weekAgo: Date = getWeekAgo();\n```\n\nNaming our statements, it looks like:\n\n```typescript\nconst hasActiveStatus: boolean = person.status === PersonStatus.Active;\nconst lastVisitInSevenDays: boolean = person.lastVisit >= weekAgo;\n```\n\nSo our final `isActive` function looks beautiful:\n\n```typescript\nconst isActive = (person: PersonAPI): boolean => {\n  const weekAgo: Date = getWeekAgo();\n  const hasActiveStatus: boolean = person.status === PersonStatus.Active;\n  const lastVisitInSevenDays: boolean = person.lastVisit >= weekAgo;\n  return hasActiveStatus && lastVisitInSevenDays;\n};\n```\n\nAnd our mapping function keeps simple:\n\n```typescript\nconst fromAPI = (person: PersonAPI): Person => {\n  const name: string = buildPersonName(person);\n  const active: boolean = isActive(person);\n  return {\n    id: person.id,\n    name,\n    email: person.email,\n    active,\n  };\n};\n```\n\nJust a few tweaks: Object Property Value Shorthand for `id` and `email`.\n\n```typescript\nconst fromAPI = (person: PersonAPI): Person => {\n  const { id, email }: PersonAPI = person;\n  const name: string = buildPersonName(person);\n  const active: boolean = isActive(person);\n  return {\n    id,\n    name,\n    email,\n    active,\n  };\n};\n```\n\n## Learnings\n\nSo what have we learned here?\n\n- Data contracts help us better define our data structures, the state we want in our frontend to render UI properly.\n- It also serves as good documentation: a better understanding of our API response and the app state we need to deal with.\n- Another cool benefit is when we define the data types and use it in the initial state. [We make our system really consistent](/consistent-state-management-in-react-and-redux) if we preserve the state contract across the application.\n- It doesn't need to be complex. Simple & pure functions only. Separate the responsibility of each function and we are good to go. It also helps us when testing.\n\nI hope I could show a good overview of the data contracts, simples functions, and the single responsibility principle. In software engineering, it is really easy to make everything complex and mess it up. But if we think carefully about our data, the data structures we are using, and how we manage complexity and logic, I think we have a good chance of building good software.\n\n## Resources\n\n- [Beginner JavaScript Course](https://BeginnerJavaScript.com/friend/LEANDRO)\n- [React for Beginners Course](https://ReactForBeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://AdvancedReact.com/friend/LEANDRO)\n- [ES6 Course](https://ES6.io/friend/LEANDRO)\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n",
  },
  {
    url: '/thoughts-on-my-productivity',
    title: 'Thoughts on my productivity',
    content:
      "_**TLDR**_: Think about my energy. Think about prioritization. Think about tasks planning. Think about removing distractions.\n\n## Energy\n\nProductivity is about the energy I put into tasks. Strive to think about quality, instead of only quantity of thing you get done in the end of the day.\n\nStrive to be physically and mentally well. Eat healthy. Do exercises. Sleep well. De-stress.\n\n## Task Planning & Prioritization\n\nRealise you won't get done a thousand things in a single day.\n\nPrioritization is so important. Design your tasks to get done the most important and impactful things.\n\nPlan to get things done. It is easy to do other things not related to things you really need to get done. Planning your day, or the things you want to do is a way to be productive and not procrastinating all day.\n\n## Focus & Distractions\n\nDesign your environment to be focused on your tasks: get a good headphone, stay away from loud places with too many people, silence the phone.\n",
  },
  {
    url: '/understanding-the-basics-of-ruby-on-rails-http-mvc-and-routes',
    title: 'Understanding the basics of Ruby on Rails: HTTP, MVC, and Routes',
    content:
      'After learning your [first programming language](https://medium.freecodecamp.org/learning-ruby-from-zero-to-hero-90ad4eecc82d), you may ask what can you do with programming: AI/Machine Learning? Hardware development? Mobile apps? Or maybe you want to start developing web applications! :)\n\nHere we’ll understand the basics of how the web, the routes, and the MVC architecture work using the Ruby on Rails web framework. Let’s dive into the web world.\n\nBefore learning web development with Rails, I really recommend learning about [Ruby first](https://medium.freecodecamp.org/learning-ruby-from-zero-to-hero-90ad4eecc82d).\n\n### How does the web work?\n\nThe web has a bunch of layers ([Application, TCP, Internet, Hardware layers](https://web.stanford.edu/class/msande91si/www-spr04/readings/week1/InternetWhitepaper.htm)) that are all connected. But basically, it works through **HTTP** (Hypertext Transfer Protocol).\n\n> The Hypertext Transfer Protocol (HTTP) is an application protocol for distributed, collaborative, hypermedia information systems. — Wikipedia\n\nThe **HTTP** works like a request — response cycle in the client — server model.\n\nWe have a web browser (Google Chrome, for example). So we type the `www.google.com` URL, and the client submits the HTTP request (request message) to the server. The server returns the HTTP response (response message — in that case, the response is the HTML from Google’s website).\n\n![](https://cdn-images-1.medium.com/max/1600/1*0HsqvxES_m9Serhg8xW2Xg.png)\n\nThe client does the request and receives the response from the server. The client handles the UI and user interactions. On the server, we can store and retrieve data (on databases), process logic on the background (workers/jobs), and a lot of other things.\n\nIf you want to deeply understand it, I’ll suggest some resources. I am a big fan of [Preethi](https://medium.com/@preethikasireddy)’s posts. Here a series of **3 parts**:\n\n- [A Primer for Newcomers to Web Development](https://medium.freecodecamp.org/how-the-web-works-a-primer-for-newcomers-to-web-development-or-anyone-really-b4584e63585c)\n\n- [Client-Server Model & the Structure of a Web Application](https://medium.freecodecamp.org/how-the-web-works-part-ii-client-server-model-the-structure-of-a-web-application-735b4b6d76e3)\n\n- [HTTP & REST](https://medium.freecodecamp.org/how-the-web-works-part-iii-http-rest-e61bc50fa0a)\n\n### The MVC architecture and Rails Routes\n\n![](https://cdn-images-1.medium.com/max/1600/1*eDPWR3lYGm1ogbef2beyHA.png)\n\nNow that we understand how the Web works, we’ll study the MVC architecture and Rails Routes.\n\nMVC stands for Model, View, and Controller.\n\nOn this architecture, we have the “separation of the concerns” among Models, Views and, Controllers. Each part has its own responsibility. Let’s dive into each part.\n\n#### Model\n\n> “Maintains the relationship between Object and Database and handles validation, association, transactions”\n\nThis means that the model will maintain an extreme relation with the Database. Each model (can) represent a database table (in case of SQL databases). This model object gains capabilities (inherited from ActiveRecord — Rails class) to retrieve, save, edit, and delete data from database table. We use model objects as a layer between our application and the database.\n\nBesides that relation with the database, the model can create **validations**and **associations** between models.\n\n#### View\n\n> “A presentation of data in a particular format, triggered by a controller’s decision to present the data.”\n\nThis is the presentation of the request’s response. This presentation can be in a bunch of format types: PDF, HTML, JSON, etc. The final result of a view will likely be the user interface (UI) — Part of the “Client.”\n\nFor most pages on the web, the views will be an HTML styled with CSS and JS. But we can implement PDFs of user behavior on a [Travel digital product](https://www.worldpackers.com/) to show all employees how people use their website, too.\n\n#### Controller\n\n> “The facility within the application that directs traffic, on the one hand querying the models for specific data, and on the other hand organizing that data (searching, sorting) into a form that fits the needs of a given view.”\n\nThe controller is the “Maestro.” It takes care of the flow: uses models to do queries, parses data, and make decisions about in which format you’ll present the data.\n\n![](https://cdn-images-1.medium.com/max/1600/1*KK61kGXrkaFBDfY7uWukyQ.png)\n\n### MVC & Routes cycle on a Rails application\n\nSo imagine that we work at a [Travel Startup](https://www.worldpackers.com). Part of the product is to present a [list of great articles about travel stories and tips](https://www.worldpackers.com/articles) to travelers.\n\nJust think from the traveler’s perspective. You go to `www.worldpackers.com/articles` and you see a beautiful page listing a bunch of great articles.\n\nWhen you type this URL in the browser, it makes a request to the server. In the server, we have the Rails web application. The Rails Router verifies if there is an entry matching the requested URL.\n\nWe just need to configure the routes for this line:\n\n```ruby\nresources :articles\n```\n\nThis will create RESTful routes for articles. If we run `bundle exec rake routes`, it will show the list of paths created.\n\n```shell\nHTTP VERB   PATH                          Controller#Action\nGET         /articles(.:format)           articles#index\nPOST        /articles(.:format)           articles#create\nGET         /articles/new(.:format)       articles#new\nGET         /articles/:id/edit(.:format)  articles#edit\nGET         /articles/:id(.:format)       articles#show\nPATCH       /articles/:id(.:format)       articles#update\nPUT         /articles/:id(.:format)       articles#update\nDELETE      /articles/:id(.:format)       articles#destroy\n```\n\nThe HTTP verb can be `GET`, `POST`, `PATCH`, `PUT`, or `DELETE`. And we know how Rails maps each `PATH` to the right `controller` and `action`. Read more [here](http://guides.rubyonrails.org/routing.html).\n\nIn our case, the server will receive `/articles` path and `GET` as the HTTP verb. It will map to `ArticlesController` and `index` action.\n\nIn the **controller**`ArticlesController` we use the **model** `Article` to get all articles in the database and render the **view** `index.html.erb` as the server response (the UI).\n\n```ruby\nclass ArticlesController < ApplicationController\n  def index\n    @articles = Article.all\n  end\nend\n```\n\nBy convention, this controller will render the view in `views/articles/index.html.erb`. Basically, it’s a plain HTML file powered by Ruby.\n\nThe Rails request-response cycle is one of the first concepts you need to understand when you start learning web development.\n\nThe user does stuff (request to the server), the the Rails application has the router to map the URL path to the right controller. In the controller, we can do all things with a model (or more than one model) — meaning getting, saving, editing, deleting data — and render a view to the user.\n\n### That’s all!\n\nWe learned a lot here. I hope you guys appreciate the content and learn more about how the MVC architecture and routing work on Rails.\n\nThis is one more step forward in my journey to learning and mastering Rails and web development. You can see the documentation of my complete journey here on my [Renaissance Developer publication](https://medium.com/the-renaissance-developer).\n\nIf you want a complete [Ruby](https://onemonth.com/courses/ruby?mbsy=lG6tt&mbsy_source=97541b09-e3ab-45d7-a9b1-dbc77028e008&campaignid=33446&discount_code=TKRuby1) and [Rails](https://onemonth.com/courses/rails?mbsy=lG6tz&mbsy_source=d2442db6-e764-401a-a394-a9c081468830&discount_code=TKRuby1&campaignid=33448) course, learn real-world coding skills and build projects, try [One Month Ruby Bootcamp](https://onemonth.com/courses/ruby?mbsy=lG6tt&mbsy_source=97541b09-e3ab-45d7-a9b1-dbc77028e008&campaignid=33446&discount_code=TKRuby1) and [Rails Bootcamp](https://onemonth.com/courses/rails?mbsy=lG6tz&mbsy_source=d2442db6-e764-401a-a394-a9c081468830&discount_code=TKRuby1&campaignid=33448). See you there ☺\n\nHave fun, and keep learning and coding.\n',
  },
  {
    url: '/understanding-the-basics-of-ruby-on-rails-sql-databases-and-how-they-work',
    title:
      'Understanding the basics of Ruby on Rails: SQL Databases and how they work',
    content:
      'After [learning about Ruby](https://medium.freecodecamp.org/learning-ruby-from-zero-to-hero-90ad4eecc82d), the first step we took was to understand how the [web and the Ruby on Rails request-response cycle](https://medium.com/the-renaissance-developer/ruby-on-rails-http-mvc-and-routes-f02215a46a84) work.\n\nNow it’s time to learn about databases and how they connect with Ruby on Rails. Basically, the answer is the Model: the `M` from `MVC` , as we learned [here](https://medium.com/the-renaissance-developer/ruby-on-rails-http-mvc-and-routes-f02215a46a84).\n\nBefore learning web development with Rails, I really recommend learning about [Ruby first](https://medium.freecodecamp.org/learning-ruby-from-zero-to-hero-90ad4eecc82d).\n\nLet’s begin!\n\n### What is a database?\n\nHmmm… The first thought that comes to my mind is something that stores data.\n\nBut this definition is quite imprecise! An array, a hash, a linked list, or any data structure can be something that is able to store data.\n\nWhen you turn off the computer, you lose all data values that were stored in that array (the same as all data structures). So it’s not a good idea to store all my `precious data`.\n\n![](https://cdn-images-1.medium.com/max/1600/1*p1Yw2imC4HhUPaEfssliXw.gif)\n\nWe need to solve two problems here:\n\n1. Store data and get it anytime we want.\n\n2. Store data in an organized and structured way, so we can get it easily.\n\nShould I store all the data in a notepad? Just put all the information inside it separated by commas, save the `txt file`, and done. Now I can open it and get all the data I want. We can store data and get it anytime… problem solved!\n\nWe solved this problem, but we missed the other. Now all the data is stored and we won’t lose it. But it’s not well-structured in the file. We need the rule to store and get data in an organized and well-structured form.\n\nLet’s think about how can we organize the data in a well-structured way.\n\n**What about organizing all the data in tables?**\n\n![](https://cdn-images-1.medium.com/max/1600/1*QzMTJf39jdsi_alIWlGxig.jpeg)\n\nSo, here’s we have: the table’s header (columns name: First Name, Last Name, Address, etc) containing values that we’ll store. For example, if we want to store the **string “Mickey”** (the value), it’ll be stored in the **“First Name”** column.\n\n- **Table**: let’s say **People**\n\n- **Columns**: **First name**, **Last Name**, **Address**, etc\n\n- **Rows**: in this case, we can say that a row can be a **person** with, for example, first name “Mickey” and last name “Mouse,” address “123 Fantasy Way,” etc.\n\n- **Fields**: all data stored in the database.\n\nAnd now we have a well-structured way to store data**: in a Table!**\n\n### How about get, delete, insert, and update data?\n\nWe’ll use SQL language (I’ll not mention NoSQL world!) to manipulate the data. Let’s get the basics.\n\n1. **GET:** if we want to get all data (**person**) from **People** table, we need to select it from that table.\n\n```sql\nSELECT * FROM People;\n```\n\nThe (**\\*)** symbol means that it will select all columns from **People** table. If we can get all columns, we can specify which columns we need for this select.\n\n```sql\nSELECT firstname, lastname, age FROM People;\n```\n\n2. **DELETE:** we want to delete all data from our **People** table.\n\n```sql\nDELETE FROM People;\n```\n\nBut it’s not common to delete all data from a table. We usually use a condition to delete, like “I want to delete all people under 21 years old.” We will learn how later in this post!\n\n3. **INSERT:** we will insert/store data into the table.\n\n```sql\nINSERT INTO People VALUES (\'Leandro\', \'Tk\', \'My Address 123\', \'São Paulo\', 23);\n```\n\nor we can specify into which columns we want to insert data.\n\n```sql\nINSERT INTO People (firstname, lastname, age) VALUES (\'Leandro\', \'Tk\', 23);\n```\n\n4. **UPDATE:** we have stored the data, but we want to update it.\n\n```sql\nUPDATE People SET firstname=\'Gennady\', lastname=\'korotkevich\';\n```\n\n### Using conditions in our queries\n\nNow we can use SQL language to query (select, delete, insert, update) data.\n\n- But what if we want to delete just records with the last name **Kinoshita**?\n\n- Or if we want to update a specific person with first name **Leandro**and last name **Kinoshita**?\n\n- Or just select all data from the people table and sort it by age from younger to older?\n\nYeah, we use conditions like **where**and **order by,**and operators like **or**and **and**. Let’s see some examples:\n\n- Deleting all records from the people table with last name **Kinoshita**.\n\n```sql\nDELETE From People WHERE lastname="Kinoshita";\n```\n\n- Updating all records from the people table with first name **Leandro** and last name **Kinoshita**.\n\n```sql\nUPDATE People SET firstname="Gennady" WHERE firstname="Leandro" AND lastname="Kinoshita";\n```\n\n- Selecting all records from the people table but ordering them by age (in ascending order → ASC).\n\n```sql\nSELECT * FROM People ORDER BY age;\n```\n\n#### Relationship between tables\n\nWe know how to execute queries (with or without conditions). Let’s understand how the tables’ relationships work.\n\n- **One to One (1–1)**: it’s about a relationship between two tables in which one can only belong with the other. **e.g.** A person has one passport and that passport belongs to that specific person. So in this example, we have table People, table Passports and a 1–1 relationship.\n\n- **One to Many (1-n)**: it’s about a relationship between two tables in which a record from one table can reference many records from another. **e.g.** Imagine an e-commerce platform: users, orders, products, payments, etc. A user can have many orders, and each order belongs to that specific user. So in this example, we have table Users, table Orders, and a 1-n relationship.\n\n- **Many to Many (n-n)**: it’s about a relationship between two tables in which a record from one table can reference many records from another. And a record from another can also reference many records from the one. **e.g.** We have again the e-commerce platform: we divide products into categories. A category has many products (category Technology has many products like cell phones, notebooks, etc) and a product can belong to many categories (product Cellphone belongs to the Technology and Electronics Categories). So in this example, we have table Products, table Categories, and an n-n relationship.\n\n### Rails Mode ON\n\nWe now understand the meaning of databases, we’ve tried some basic queries, and have talked about the relationship between tables. But how can we use that knowledge in the **Ruby on Rails and web development World**?\n\nFirst of all: **Rails** is **Rails**. The **Database** is **Database**. Is it obvious? But people usually get confused about that.\n\nA User model **can** represent a Users table. But the model isn’t the table.\n\n- In the **database**, we have tables and rows.\n\n- On **rails**, we have models (classes) and objects.\n\nImagine a blog site. The blog needs an author for each post. So we create an **Authors** table with some columns (first_name, last_name, etc):\n\n```\nrails g migration CreateAuthors\n```\n\nIn the migration, we add columns `first_name`, `last_name`, `email`, `birthday`, `created_at`, and `updated_at`. (`created_at` and `updated_at` are created by the `t.timestamps` code).\n\n```ruby\nclass CreateAuthors < ActiveRecord::Migration[5.0]\n  def change\n    create_table :authors do |t|\n      t.string :first_name\n      t.string :last_name\n      t.string :email\n      t.date :birthday\n      t.timestamps\n    end\n  end\nend\n\n```\n\nSo we create a migration (Ruby code), run the `rake db:migrate` command in the terminal, and it generates a table `Authors` with `first_name`, `last_name`, `email`, `birthday`, `created_at`, and `updated_at` columns.\n\nBack to Rails — we can create an `Author` model:\n\n```ruby\nclass Author < ActiveRecord::Base\n\nend\n```\n\nSo now we have an `Authors` table with some columns and an `Author` model.\n\n#### Using the Rails Console\n\nOpen the terminal and type `bundle exec rails c`. Remember, we are in the **RAILS** console, so we have classes, objects, attributes, etc.\n\n```ruby\nauthor = Author.new\n=> #<Author id: nil, first_name: nil, last_name: nil>\nauthor.first_name = "Leandro"\n=> "Leandro"\nauthor.last_name = "Tk"\n=> "Tk"\nauthor.save\n=> #<Author id: 1, first_name: "Leandro", last_name: "Tk">\n```\n\n### Relationships on Rails\n\nWe created an `Authors` table/model. What we need now is a `Posts` table/model. An author has many posts and a post belongs to a specific author. The relationship here is **one to many** (**1-n**). Remember?\n\nSo when we create a `Posts` table, we need to store a reference to the post’s author (column **author_id** in the **Posts** table). It’s known as the `Foreign Key`.\n\nAnd how do we relate the models?\n\n#### author has_many posts\n\n```ruby\nclass Author < ActiveRecord::Base\n\n  has_many :posts\n\nend\n```\n\n#### post belongs_to an author\n\n```ruby\nclass Post < ActiveRecord::Base\n\n  belongs_to :author\n\nend\n```\n\n#### Using the Rails Console\n\n```ruby\nauthor = Author.new\n=> #<Author id: nil, first_name: nil, last_name: nil>\nauthor.first_name = "Leandro"\n=> "Leandro"\nauthor.last_name = "Tk"\n=> "Tk"\nauthor.save\n=> #<Author id: 1, first_name: "Leandro", last_name: "Tk">\n\npost = Post.new(title: "Database & Rails", text: "Lorem Ipsum...")\n=> #<Post id: 1, title: "Database & Rails", text: "Lorem Ipsum...", author_id: nil>\npost.author\n=> nil\npost.author = author\n=> #<Author id: 1, first_name: "Leandro", last_name: "Tk">\npost\n=> #<Post id: 1, title: "Database & Rails", text: "Lorem Ipsum...", author_id: 1>\npost.save\n=> #<Post id: 1, title: "Database & Rails", text: "Lorem Ipsum...", author_id: 1>\n```\n\n- Quick explanation about `has_many` and `belongs_to`. Both `codes` are methods defined on `ActiveRecord` class. You can see that we create our models inheriting from `ActiveRecord::Base`.\n\nRemember in my [Ruby Foundation](https://medium.freecodecamp.org/learning-ruby-from-zero-to-hero-90ad4eecc82d) article that we learned about Object Oriented Programming, the Inheritance part? This is why we can use `has_many` and `belongs_to` methods without defining it anywhere on our application. Rails handles it for us.\n\nIf you want to understand this concept deeply, clone the [Rails repo](https://github.com/rails/rails) or check out the [Behind the Scenes of the ‘Has Many’ Active Record Association](http://callahan.io/blog/2014/10/08/behind-the-scenes-of-the-has-many-active-record-association/).\n\n### Queries on Rails\n\nWe can query using ActiveRecord methods:\n\n- **all**: Get all objects from a specific model.\n\n```ruby\nPost.all\n=> [#<Post id: 1, title: "Database & Rails", text: "Lorem Ipsum...", author_id: 1>]\n```\n\nBehind the scenes, it is executing the `SELECT * FROM posts` query.\n\n- **find**: Using find we can get the object by the id (primary key).\n\n```ruby\nPost.find(1)\n=> #<Post id: 1, title: "Database & Rails", text: "Lorem Ipsum...", author_id: 1>\n```\n\nBehind the scenes, it is executing `SELECT * FROM posts WHERE id = 1` query.\n\n- **where**: Get the objects that pass the conditions.\n\n```ruby\nPost.where(title: "Database & Rails")\n=> [#<Post id: 1, title: "Database & Rails", text: "Lorem Ipsum...", author_id: 1>]\nPost.where(title: "Database & Rails").first\n=> #<Post id: 1, title: "Database & Rails", text: "Lorem Ipsum...", author_id: 1>\n```\n\nBehind the scenes, it is executing `SELECT * FROM posts WHERE title = \'Database & Rails\'`query.\n\n- **order**: Sort all objects based on a column.\n\n```ruby\nPost.all\n=> [#<Post id: 1, title: "Database & Rails", text: "Lorem Ipsum...", created_at: "2015-10-13 20:00:00", author_id: 1>, #<Post id: 2, title: "Ruby on Rails: HTTP, MVC and Routes", text: "Lorem Ipsum2...", created_at: "2015-10-13 21:00:00", author_id: 1>]\nPost.order("created_at DESC")\n=> [#<Post id: 2, title: "Ruby on Rails: HTTP, MVC and Routes", text: "Lorem Ipsum2...", created_at: "2015-10-13 20:00:00", author_id: 1>, #<Post id: 1, title: "Database & Rails", text: "Lorem Ipsum...", created_at: "2015-10-13 21:00:00", author_id: 1>]\n```\n\nBehind the scenes, it is executing `SELECT * FROM posts ORDER BY created_at DESC` query.\n\n### That’s all!\n\nWe learned a lot here. I hope you guys appreciate the content and learn more about how the Databases and Rails models work.\n\nThis is one more step forward in my journey to learning and mastering Rails and web development. You can see the documentation of my complete journey here on my [Renaissance Developer publication](https://medium.com/the-renaissance-developer).\n\nIf you want a complete [Ruby](https://onemonth.com/courses/ruby?mbsy=lG6tt&mbsy_source=97541b09-e3ab-45d7-a9b1-dbc77028e008&campaignid=33446&discount_code=TKRuby1) and [Rails](https://onemonth.com/courses/rails?mbsy=lG6tz&mbsy_source=d2442db6-e764-401a-a394-a9c081468830&discount_code=TKRuby1&campaignid=33448) course, learn real-world coding skills and build projects, try [One Month Ruby Bootcamp](https://onemonth.com/courses/ruby?mbsy=lG6tt&mbsy_source=97541b09-e3ab-45d7-a9b1-dbc77028e008&campaignid=33446&discount_code=TKRuby1) and [Rails Bootcamp](https://onemonth.com/courses/rails?mbsy=lG6tz&mbsy_source=d2442db6-e764-401a-a394-a9c081468830&discount_code=TKRuby1&campaignid=33448). See you there ☺\n\nHave fun, and keep learning and coding.\n',
  },
  {
    url: '/ux-studies-with-react-typescript-and-testing-library',
    title: 'UX Studies with React, TypeScript, and Testing Library',
    content:
      "I'm always willing to learn more and more. As a software engineer, the thirst for knowledge increased a lot. We have a lot of things to learn daily. But I wanted to master the foundation. To make me a better developer, I wanted to understand more about how to create great product experiences.\n\nThis post is my attempt to illustrate a Proof of Concept (PoC) I built to try some ideas as experiments.\n\nI had some topics in mind to build this. It needs to strive for:\n\n- High-quality software\n- User Experience\n\nWhen I say high-quality software, it can have so many different meanings. But I want to focus on three parts:\n\n- Clean Code: Strive to write human-readable code, that is easy to read and simple to maintain. Separate responsibility for functions and components.\n- Good test coverage: It's actually not about coverage. It's about tests that cover important parts of components' behavior without knowing too much about implementation details.\n- Consistent state management: I want to build with software that enables the app to have consistent data. Predictability is important.\n\nAnd user experience is the main focus of this PoC. The software and techniques are the foundation to enable good experience for users.\n\nTo make the state consistent, I wanted a type system. So I chose Typescript. This was the first time I'm using Typescript with React. This project also allowed me to build custom hooks and test it properly.\n\n## Setting up the project\n\nI came across this library called [tsdx](https://github.com/jaredpalmer/tsdx) that sets up all the Typescript configuration for you. It's mainly used to build packages. As this was a simple side project, I didn't mind giving it a try.\n\nAfter installing it, I chose the react template and I was ready to code. But before the fun part, I wanted to set up the test configuration too. [React Testing Library](https://github.com/testing-library/react-testing-library) as the main library together with [jest-dom](https://github.com/testing-library/jest-dom) to provide some awesome custom methods (I really like the `toBeInTheDocument` matcher).\n\nWith all installed, I overwrote the jest config by adding a new `jest.config.js`:\n\n```tsx\nmodule.exports = {\n  verbose: true,\n  setupFilesAfterEnv: ['./setupTests.ts'],\n};\n```\n\nAnd a `setupTests.ts` to import everything I need.\n\n```tsx\nimport '@testing-library/jest-dom';\n```\n\nIn this case, I just had the `jest-dom` library to import. This way, I don't need to import this package in my test files. Now it works out of the box.\n\nTo test this installation and configuration, I built a simple component:\n\n```tsx\nexport const Thing = () => <h1>I'm TK</h1>;\n```\n\nIn my test, I wanted to render it and see if it was in the DOM.\n\n```tsx\nimport React from 'react';\nimport { render } from '@testing-library/react';\nimport { Thing } from '../index';\n\ndescribe('Thing', () => {\n  it('renders the correct text in the document', () => {\n    const { getByText } = render(<Thing />);\n\n    expect(getByText(\"I'm TK\")).toBeInTheDocument();\n  });\n});\n```\n\nAnd we are ready for the next step now!\n\n## Configuring routes\n\nHere I'll have only two routes for now. The home page and the search page - even though I'll do nothing about the home page.\n\nFor this project, I'm using the `react-router-dom` library to handle all things router. It's simple, easy, and fun to work with.\n\nAfter installing it, I added the router components in the `app.tsx`.\n\n```tsx\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\n\nexport const App = () => (\n  <Router>\n    <Switch>\n      <Route path=\"/search\">\n        <h1>It's the search!</h1>\n      </Route>\n      <Route path=\"/\">\n        <h1>It's Home</h1>\n      </Route>\n    </Switch>\n  </Router>\n);\n```\n\nNow if we enter the `localhost:1234`, we see the title `It's Home`. Go to the `localhost:1234/search`, we see the text `It's the search!`.\n\nBefore we continue to start implementing our search page, I wanted to build a simple menu to switch between home and search pages without manipulating the URL. For this project, I'm using [Material UI](https://material-ui.com/) to build the UI foundation.\n\nFor now, we are just installing the `@material-ui/core`.\n\nTo build the menu, we have the button to open the menu options. In this case \"home\" and \"search\" options. But to build a better component abstraction, I prefer to hide the content (link and label) for the menu items and make the `Menu` component receive this data as a prop. This way, the menu doesn't know about the items, it will just iterate through the items list and render them.\n\nIt looks like this:\n\n```tsx\nimport React, { Fragment, useState, MouseEvent } from 'react';\nimport { Link } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport MuiMenu from '@material-ui/core/Menu';\nimport MuiMenuItem from '@material-ui/core/MenuItem';\n\nimport { MenuItem } from '../../types/MenuItem';\n\ntype MenuPropsType = { menuItems: MenuItem[] };\n\nexport const Menu = ({ menuItems }: MenuPropsType) => {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\n  const handleClick = (event: MouseEvent<HTMLButtonElement>): void => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = (): void => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <Fragment>\n      <Button aria-controls=\"menu\" aria-haspopup=\"true\" onClick={handleClick}>\n        Open Menu\n      </Button>\n      <MuiMenu\n        id=\"simple-menu\"\n        anchorEl={anchorEl}\n        keepMounted\n        open={Boolean(anchorEl)}\n        onClose={handleClose}\n      >\n        {menuItems.map((item: MenuItem) => (\n          <Link to={item.linkTo} onClick={handleClose} key={item.key}>\n            <MuiMenuItem>{item.label}</MuiMenuItem>\n          </Link>\n        ))}\n      </MuiMenu>\n    </Fragment>\n  );\n};\n\nexport default Menu;\n```\n\nDon't panic! I know it is a huge block of code, but it is pretty simple. the `Fragment` wrap the `Button` and `MuiMenu` (`Mui` stands for Material UI. I needed to rename the component because the component I'm building is also called menu).\n\nIt receives the `menuItems` as a prop and maps through it to build the menu item wrapped by the `Link` component. Link is a component from react-router to link to a given URL.\n\nThe menu behavior is also simple: we bind the `handleClick` function to the button's `onClick`. That way, we can change `anchorEl` when the button is triggered (or clicked if you prefer). The `anchorEl` is just a component state that represents the Mui menu element to open the menu switch. So it will open the menu items to let the user chooses one of those.\n\nNow, how do we use this component?\n\n```tsx\nimport { Menu } from './components/Menu';\nimport { MenuItem } from './types/MenuItem';\n\nconst menuItems: MenuItem[] = [\n  {\n    linkTo: '/',\n    label: 'Home',\n    key: 'link-to-home',\n  },\n  {\n    linkTo: '/search',\n    label: 'Search',\n    key: 'link-to-search',\n  },\n];\n\n<Menu menuItems={menuItems} />;\n```\n\nThe `menuItems` is a list of objects. The object has the correct contract expected by the `Menu` component. The type `MenuItem` ensures that the contract is correct. It is just a Typescript `type`:\n\n```tsx\nexport type MenuItem = {\n  linkTo: string;\n  label: string;\n  key: string;\n};\n```\n\n## Search\n\nNow we are ready to build the search page with all the products and a great experience. But before building the list of products, I wanted to create a fetch function to handle the request for products. As I don't have an API of products yet, I can just mock the fetch request.\n\nAt first, I just built the fetching with `useEffect` in the `Search` component. The idea would look like this:\n\n```tsx\nimport React, { useState, useEffect } from 'react';\nimport { getProducts } from 'api';\n\nexport const Search = () => {\n  const [products, setProducts] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [hasError, setHasError] = useState(false);\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        setIsLoading(true);\n\n        const fetchedProducts = await getProducts();\n\n        setIsLoading(false);\n        setProducts(fetchedProducts);\n      } catch (error) {\n        setIsLoading(false);\n        setHasError(true);\n      }\n    };\n\n    fetchProducts();\n  }, []);\n};\n```\n\nI have:\n\n- `products` initialized as an empty array\n- `isLoading` initialized as false\n- `hasError` initialized as false\n- The `fetchProducts` is an async function that calls `getProducts` from the `api` module. As we don't have a proper API for products yet, this `getProducts` would return a mock data.\n- When the `fetchProducts` is executed, we set the `isLoading` to true, fetch the products, and then set the `isLoading` to false, because the fetching finished, and the set the fetched products into `products` to be used in the component.\n- If it gets any error in the fetching, we catch them, set the `isLoading` to false, and the `hasError` to true. In this context, the component will know that we had an error while fetching and can handle this case.\n- Everything is encapsulated into a `useEffect` because we are doing a side effect here.\n\nTo handle all the state logic (when to update each part for the specific context), we can extract it to a simple reducer.\n\n```tsx\nimport { State, FetchActionType, FetchAction } from './types';\n\nexport const fetchReducer = (state: State, action: FetchAction): State => {\n  switch (action.type) {\n    case FetchActionType.FETCH_INIT:\n      return {\n        ...state,\n        isLoading: true,\n        hasError: false,\n      };\n    case FetchActionType.FETCH_SUCCESS:\n      return {\n        ...state,\n        hasError: false,\n        isLoading: false,\n        data: action.payload,\n      };\n    case FetchActionType.FETCH_ERROR:\n      return {\n        ...state,\n        hasError: true,\n        isLoading: false,\n      };\n    default:\n      return state;\n  }\n};\n```\n\nThe idea here is to separate each action type and handle each state update. So the `fetchReducer` will receive the state and the action and it will return a new state. This part is interesting because it gets the current state and then returns a new state, but we keep the state contract by using the `State` type.\n\nAnd for each action type, we will update the state the right way.\n\n- `FETCH_INIT`: `isLoading` is true and `hasError` is false.\n- `FETCH_SUCCESS`: `hasError` is false, `isLoading` is false, and the data (products) is updated.\n- `FETCH_ERROR`: `hasError` is true and `isLoading` is false.\n\nIn case it doesn't match any action type, just return the current state.\n\nThe `FetchActionType` is a simple Typescript enum:\n\n```tsx\nexport enum FetchActionType {\n  FETCH_INIT = 'FETCH_INIT',\n  FETCH_SUCCESS = 'FETCH_SUCCESS',\n  FETCH_ERROR = 'FETCH_ERROR',\n}\n```\n\nAnd the `State` is just a simple type:\n\n```tsx\nexport type ProductType = {\n  name: string;\n  price: number;\n  imageUrl: string;\n  description: string;\n  isShippingFree: boolean;\n  discount: number;\n};\n\nexport type Data = ProductType[];\n\nexport type State = {\n  isLoading: boolean;\n  hasError: boolean;\n  data: Data;\n};\n```\n\nWith this new reducer, now we can `useReducer` in our fetch. We pass the new reducer and the initial state to it:\n\n```tsx\nconst initialState: State = {\n  isLoading: false,\n  hasError: false,\n  data: fakeData,\n};\n\nconst [state, dispatch] = useReducer(fetchReducer, initialState);\n\nuseEffect(() => {\n  const fetchAPI = async () => {\n    dispatch({ type: FetchActionType.FETCH_INIT });\n\n    try {\n      const payload = await fetchProducts();\n\n      dispatch({\n        type: FetchActionType.FETCH_SUCCESS,\n        payload,\n      });\n    } catch (error) {\n      dispatch({ type: FetchActionType.FETCH_ERROR });\n    }\n  };\n\n  fetchAPI();\n}, []);\n```\n\nThe `initialState` has the same contract type. And we pass it to the `useReducer` together with the `fetchReducer` we just built. The `useReducer` provides the state and a function called `dispatch` to call actions to update our state.\n\n- State fetching: dispatch `FETCH_INIT`\n- Finished fetch: dispatch `FETCH_SUCCESS` with the products payload\n- Get an error while fetching: dispatch `FETCH_ERROR`\n\nThis abstraction got very big and can be very verbose in our component. We could extract it as a separate hook called `useProductFetchAPI`.\n\n```tsx\nexport const useProductFetchAPI = (): State => {\n  const initialState: State = {\n    isLoading: false,\n    hasError: false,\n    data: fakeData,\n  };\n\n  const [state, dispatch] = useReducer(fetchReducer, initialState);\n\n  useEffect(() => {\n    const fetchAPI = async () => {\n      dispatch({ type: FetchActionType.FETCH_INIT });\n\n      try {\n        const payload = await fetchProducts();\n\n        dispatch({\n          type: FetchActionType.FETCH_SUCCESS,\n          payload,\n        });\n      } catch (error) {\n        dispatch({ type: FetchActionType.FETCH_ERROR });\n      }\n    };\n\n    fetchAPI();\n  }, []);\n\n  return state;\n};\n```\n\nIt is just a function that wraps our fetch operation. Now, in the `Search` component, we can import and call it.\n\n```tsx\nexport const Search = () => {\n  const { isLoading, hasError, data }: State = useProductFetchAPI();\n};\n```\n\nWe have all the API: `isLoading`, `hasError`, and `data` to use in our component. With this API, we can render a loading spinner or a skeleton based on the `isLoading` data. We can render an error message based on the `hasError` value. Or just render the list of products using the `data`.\n\nBefore starting implementing our products list, I want to stop and add tests for our custom hook. We have two parts to test here: the reducer and the custom hook.\n\nThe reducer is easier as it is just a pure function. It receives value, process, and returns a new value. No side-effect. Everything deterministic.\n\nTo cover all the possibilities of this reducer, I created three contexts: `FETCH_INIT`, `FETCH_SUCCESS`, and `FETCH_ERROR` actions.\n\nBefore implementing anything, I set up the initial data to work with.\n\n```tsx\nconst initialData: Data = [];\nconst initialState: State = {\n  isLoading: false,\n  hasError: false,\n  data: initialData,\n};\n```\n\nNow I can pass this initial state for the reducer together with the specific action I want to cover. For this first test, I wanted to cover the `FETCH_INIT` action:\n\n```tsx\ndescribe('when dispatch FETCH_INIT action', () => {\n  it('returns the isLoading as true without any error', () => {\n    const action: FetchAction = {\n      type: FetchActionType.FETCH_INIT,\n    };\n\n    expect(fetchReducer(initialState, action)).toEqual({\n      isLoading: true,\n      hasError: false,\n      data: initialData,\n    });\n  });\n});\n```\n\nIt's pretty simple. It receives the initial state and the action, and we expect the proper return value: the new state with the `isLoading` as `true`.\n\nThe `FETCH_ERROR` is pretty similar:\n\n```tsx\ndescribe('when dispatch FETCH_ERROR action', () => {\n  it('returns the isLoading as true without any error', () => {\n    const action: FetchAction = {\n      type: FetchActionType.FETCH_ERROR,\n    };\n\n    expect(fetchReducer(initialState, action)).toEqual({\n      isLoading: false,\n      hasError: true,\n      data: [],\n    });\n  });\n});\n```\n\nBut we pass a different action and expect the `hasError` to be `true`.\n\nThe `FETCH_SUCCESS` is a bit complex as we just need to build a new state and add it to the payload attribute in the action.\n\n```tsx\ndescribe('when dispatch FETCH_SUCCESS action', () => {\n  it('returns the the API data', () => {\n    const product: ProductType = {\n      name: 'iPhone',\n      price: 3500,\n      imageUrl: 'image-url.png',\n      description: 'Apple mobile phone',\n      isShippingFree: true,\n      discount: 0,\n    };\n\n    const action: FetchAction = {\n      type: FetchActionType.FETCH_SUCCESS,\n      payload: [product],\n    };\n\n    expect(fetchReducer(initialState, action)).toEqual({\n      isLoading: false,\n      hasError: false,\n      data: [product],\n    });\n  });\n});\n```\n\nBut nothing too complex here. The new data is there. A list of products. In this case, just one, the iPhone product.\n\nThe second test will cover the custom hook we built. In these tests, I wrote three contexts: a time-out request, a failed network request, and a success request.\n\nHere, as I'm using `axios` to fetch data (when I have an API to fetch the data, I will use it properly), I'm using `axios-mock-adapter` to mock each context for our tests.\n\nThe set up first: Initializing our data and set up an axios mock.\n\n```tsx\nconst mock: MockAdapter = new MockAdapter(axios);\nconst url: string = '/search';\nconst initialData: Data = [];\n```\n\nWe start implementing a test for the timeout request:\n\n```tsx\nit('handles error on timed-out api request', async () => {\n  mock.onGet(url).timeout();\n\n  const { result, waitForNextUpdate } = renderHook(() =>\n    useProductFetchAPI(url, initialData),\n  );\n\n  await waitForNextUpdate();\n\n  const { isLoading, hasError, data }: State = result.current;\n\n  expect(isLoading).toEqual(false);\n  expect(hasError).toEqual(true);\n  expect(data).toEqual(initialData);\n});\n```\n\nWe set up the mock to return a timeout. The test calls the `useProductFetchAPI`, wait for an update, and then we can get the state. The `isLoading` is false, the `data` is still the same (an empty list), and the `hasError` is now true as expected.\n\nThe network request is pretty much the same behavior. The only difference is that the mock will have a network error instead of a timeout.\n\n```tsx\nit('handles error on failed network api request', async () => {\n  mock.onGet(url).networkError();\n\n  const { result, waitForNextUpdate } = renderHook(() =>\n    useFetchAPI(url, initialData),\n  );\n\n  await waitForNextUpdate();\n\n  const { isLoading, hasError, data }: State = result.current;\n\n  expect(isLoading).toEqual(false);\n  expect(hasError).toEqual(true);\n  expect(data).toEqual(initialData);\n});\n```\n\nAnd for the success case, we need to create a product object to use it as a request-response data. We also expect the `data` to be a list of this product object. The `hasError` and the `isLoading` are false in this case.\n\n```tsx\nit('gets and updates data from the api request', async () => {\n  const product: ProductType = {\n    name: 'iPhone',\n    price: 3500,\n    imageUrl: 'image-url.png',\n    description: 'Apple mobile phone',\n    isShippingFree: true,\n    discount: 0,\n  };\n\n  const mockedResponseData: Data = [product];\n\n  mock.onGet(url).reply(200, mockedResponseData);\n\n  const { result, waitForNextUpdate } = renderHook(() =>\n    useFetchAPI(url, initialData),\n  );\n\n  await waitForNextUpdate();\n\n  const { isLoading, hasError, data }: State = result.current;\n\n  expect(isLoading).toEqual(false);\n  expect(hasError).toEqual(false);\n  expect(data).toEqual([product]);\n});\n```\n\nGreat. We covered everything we needed for this custom hook and the reducer we created. Now we can focus on building the products list.\n\n## Products list\n\nThe idea of the products list is to list products that have some information: title, description, price, discount, and if it has free shipping. The final product card would look like this:\n\n<img src=\"/ux-studies-with-react-typescript-and-testing-library/product-card.png\">\n\nTo build this card, I created the foundation for the product component:\n\n```tsx\nconst Product = () => (\n  <Box>\n    <Image />\n    <TitleDescription />\n    <Price />\n    <Tag />\n  </Box>\n);\n```\n\nTo build the product, we will need to build each component that is inside it.\n\nBut before start building the product component, I want to show the `JSON` data that the fake API will return for us.\n\n```tsx\n{\n  imageUrl: 'a-url-for-tokyo-tower.png',\n  name: 'Tokyo Tower',\n  description: 'Some description here',\n  price: 45,\n  discount: 20,\n  isShippingFree: true,\n}\n```\n\nThis data is passed from the `Search` component to the `ProductList` component:\n\n```tsx\nexport const Search = () => {\n  const { isLoading, hasError, data }: State = useProductFetchAPI();\n\n  if (hasError) {\n    return <h2>Error</h2>;\n  }\n\n  return <ProductList products={data} isLoading={isLoading} />;\n};\n```\n\nAs I'm using Typescript, I can enforce the static types for the component props. In this case, I have the prop `products` and the `isLoading`.\n\nI built a `ProductListPropsType` type to handle the product list props.\n\n```tsx\ntype ProductListPropsType = {\n  products: ProductType[];\n  isLoading: boolean;\n};\n```\n\nAnd the `ProductType` is a simple type representing the product:\n\n```tsx\nexport type ProductType = {\n  name: string;\n  price: number;\n  imageUrl: string;\n  description: string;\n  isShippingFree: boolean;\n  discount: number;\n};\n```\n\nTo build the ProductList, I'll use the `Grid` component from Material UI. First, we have a grid container and then, for each product, we will render a grid item.\n\n```tsx\nexport const ProductList = ({ products, isLoading }: ProductListPropsType) => (\n  <Grid container spacing={3}>\n    {products.map((product) => (\n      <Grid\n        item\n        xs={6}\n        md={3}\n        key={`grid-${product.name}-${product.description}-${product.price}`}\n      >\n        <Product\n          key={`product-${product.name}-${product.description}-${product.price}`}\n          imageUrl={product.imageUrl}\n          name={product.name}\n          description={product.description}\n          price={product.price}\n          discount={product.discount}\n          isShippingFree={product.isShippingFree}\n          isLoading={isLoading}\n        />\n      </Grid>\n    ))}\n  </Grid>\n);\n```\n\nThe `Grid` item will display 2 items per row for mobile as we use the value `6` for each column. And for the desktop version, it will render 4 items per row.\n\nWe iterate through the `products` list and render the `Product` component passing all the data it will need.\n\nNow we can focus on building the `Product` component.\n\nLet's start with the easiest one: the `Tag`. We will pass three data to this component. `label`, `isVisible`, and `isLoading`. When it is not visible, we just return `null` to don't render it. If it is loading, we will render a `Skeleton` component from Material UI. But after loading it, we render the tag info with the `Free Shipping` label.\n\n```tsx\nexport const Tag = ({ label, isVisible, isLoading }: TagProps) => {\n  if (!isVisible) return null;\n  if (isLoading) {\n    return (\n      <Skeleton width=\"110px\" height=\"40px\" data-testid=\"tag-skeleton-loader\" />\n    );\n  }\n\n  return (\n    <Box mt={1} data-testid=\"tag-label-wrapper\">\n      <span style={tabStyle}>{label}</span>\n    </Box>\n  );\n};\n```\n\nThe `TagProps` is a simple type:\n\n```tsx\ntype TagProps = {\n  label: string;\n  isVisible: boolean;\n  isLoading: boolean;\n};\n```\n\nI'm also using an object to style the `span`:\n\n```tsx\nconst tabStyle = {\n  padding: '4px 8px',\n  backgroundColor: '#f2f3fe',\n  color: '#87a7ff',\n  borderRadius: '4px',\n};\n```\n\nI also wanted to build tests for this component trying to think of its behavior:\n\n- when it's not visible: the tag will not be in the document.\n\n```tsx\ndescribe('when is not visible', () => {\n  it('does not render anything', () => {\n    const { queryByTestId } = render(\n      <Tag label=\"a label\" isVisible={false} isLoading={false} />,\n    );\n\n    expect(queryByTestId('tag-label-wrapper')).not.toBeInTheDocument();\n  });\n});\n```\n\n- when it's loading: the skeleton will be in the document.\n\n```tsx\ndescribe('when is loading', () => {\n  it('renders the tag label', () => {\n    const { queryByTestId } = render(\n      <Tag label=\"a label\" isVisible isLoading />,\n    );\n\n    expect(queryByTestId('tag-skeleton-loader')).toBeInTheDocument();\n  });\n});\n```\n\n- when it's ready to render: the tag will be in the document.\n\n```tsx\ndescribe('when is visible and not loading', () => {\n  it('renders the tag label', () => {\n    render(<Tag label=\"a label\" isVisible isLoading={false} />);\n\n    expect(screen.getByText('a label')).toBeInTheDocument();\n  });\n});\n```\n\n- bonus point: accessibility. I also built an automated test to cover accessibility violations using `jest-axe`.\n\n```tsx\nit('has no accessibility violations', async () => {\n  const { container } = render(\n    <Tag label=\"a label\" isVisible isLoading={false} />,\n  );\n\n  const results = await axe(container);\n\n  expect(results).toHaveNoViolations();\n});\n```\n\nWe are ready to implement another component: the `TitleDescription`. It will work almost similar to the `Tag` component. It receives some props: `name`, `description`, and `isLoading`.\n\nAs we have the `Product` type with the type definition for the `name` and the `description`, I wanted to reuse it. I tried different things - and you can [take a look here for more details](/series/typescript-learnings/interesting-types) - and I found the `Pick` type. With that, I could get the `name` and the `description` from the `ProductType`:\n\n```tsx\ntype TitleDescriptionType = Pick<ProductType, 'name' | 'description'>;\n```\n\nWith this new type, I could create the `TitleDescriptionPropsType` for the component:\n\n```tsx\ntype TitleDescriptionPropsType = TitleDescriptionType & {\n  isLoading: boolean;\n};\n```\n\nNow working inside the component, If the `isLoading` is true, the component renders the proper skeleton component before it renders the actual title and description texts.\n\n```tsx\nif (isLoading) {\n  return (\n    <Fragment>\n      <Skeleton width=\"60%\" height=\"24px\" data-testid=\"name-skeleton-loader\" />\n      <Skeleton\n        style={descriptionSkeletonStyle}\n        height=\"20px\"\n        data-testid=\"description-skeleton-loader\"\n      />\n    </Fragment>\n  );\n}\n```\n\nIf the component is not loading anymore, we render the title and description texts. Here we use the `Typography` component.\n\n```tsx\nreturn (\n  <Fragment>\n    <Typography data-testid=\"product-name\">{name}</Typography>\n    <Typography\n      data-testid=\"product-description\"\n      color=\"textSecondary\"\n      variant=\"body2\"\n      style={descriptionStyle}\n    >\n      {description}\n    </Typography>\n  </Fragment>\n);\n```\n\nFor the tests, we want three things:\n\n- when it is loading, the component renders the skeletons\n- when it is not loading anymore, the component renders the texts\n- make sure the component doesn't violate the accessibility\n\nWe will use the same idea we use for the `Tag` tests: see if it in the document or not based on the state.\n\nWhen it is loading, we want to see if the skeleton is in the document, but the title and description texts are not.\n\n```tsx\ndescribe('when is loading', () => {\n  it('does not render anything', () => {\n    const { queryByTestId } = render(\n      <TitleDescription\n        name={product.name}\n        description={product.description}\n        isLoading\n      />,\n    );\n\n    expect(queryByTestId('name-skeleton-loader')).toBeInTheDocument();\n    expect(queryByTestId('description-skeleton-loader')).toBeInTheDocument();\n    expect(queryByTestId('product-name')).not.toBeInTheDocument();\n    expect(queryByTestId('product-description')).not.toBeInTheDocument();\n  });\n});\n```\n\nWhen it is not loading anymore, it renders the texts in the DOM:\n\n```tsx\ndescribe('when finished loading', () => {\n  it('renders the product name and description', () => {\n    render(\n      <TitleDescription\n        name={product.name}\n        description={product.description}\n        isLoading={false}\n      />,\n    );\n\n    expect(screen.getByText(product.name)).toBeInTheDocument();\n    expect(screen.getByText(product.description)).toBeInTheDocument();\n  });\n});\n```\n\nAnd a simple test to cover accessibility issues:\n\n```tsx\nit('has no accessibility violations', async () => {\n  const { container } = render(\n    <TitleDescription\n      name={product.name}\n      description={product.description}\n      isLoading={false}\n    />,\n  );\n\n  const results = await axe(container);\n\n  expect(results).toHaveNoViolations();\n});\n```\n\nThe next component is the `Price`. In this component we will provide a skeleton when it is still loading as we did in the other component, and add three different components here:\n\n- `PriceWithDiscount`: we apply the discount into the original price and render it\n- `OriginalPrice`: it just renders the product price\n- `Discount`: it renders the discount percentage when the product has a discount\n\nBut before I start implementing these components, I wanted to structure the data to be used. The `price` and the `discount` values are numbers. So let's build a function called `getPriceInfo` that receives the `price` and the `discount` and it will return this data:\n\n```tsx\n{\n  priceWithDiscount,\n  originalPrice,\n  discountOff,\n  hasDiscount,\n};\n```\n\nWith this type contract:\n\n```tsx\ntype PriceInfoType = {\n  priceWithDiscount: string;\n  originalPrice: string;\n  discountOff: string;\n  hasDiscount: boolean;\n};\n```\n\nIn this function, it will get the `discount` and transform it into a `boolean`, then apply the `discount` to build the `priceWithDiscount`, use the `hasDiscount` to build the discount percentage, and build the `originalPrice` with the dollar sign:\n\n```tsx\nexport const applyDiscount = (price: number, discount: number): number =>\n  price - (price * discount) / 100;\n\nexport const getPriceInfo = (\n  price: number,\n  discount: number,\n): PriceInfoType => {\n  const hasDiscount: boolean = Boolean(discount);\n  const priceWithDiscount: string = hasDiscount\n    ? `$${applyDiscount(price, discount)}`\n    : `$${price}`;\n\n  const originalPrice: string = `$${price}`;\n  const discountOff: string = hasDiscount ? `${discount}% OFF` : '';\n\n  return {\n    priceWithDiscount,\n    originalPrice,\n    discountOff,\n    hasDiscount,\n  };\n};\n```\n\nHere I also built an `applytDiscount` function to extract the discount calculation.\n\nI added some tests to cover these functions. As they are pure functions, we just need to pass some values and expect new data.\n\nTest for the `applyDiscount`:\n\n```tsx\ndescribe('applyDiscount', () => {\n  it('applies 20% discount in the price', () => {\n    expect(applyDiscount(100, 20)).toEqual(80);\n  });\n\n  it('applies 95% discount in the price', () => {\n    expect(applyDiscount(100, 95)).toEqual(5);\n  });\n});\n```\n\nTest for the `getPriceInfo`:\n\n```tsx\ndescribe('getPriceInfo', () => {\n  describe('with discount', () => {\n    it('returns the correct price info', () => {\n      expect(getPriceInfo(100, 20)).toMatchObject({\n        priceWithDiscount: '$80',\n        originalPrice: '$100',\n        discountOff: '20% OFF',\n        hasDiscount: true,\n      });\n    });\n  });\n\n  describe('without discount', () => {\n    it('returns the correct price info', () => {\n      expect(getPriceInfo(100, 0)).toMatchObject({\n        priceWithDiscount: '$100',\n        originalPrice: '$100',\n        discountOff: '',\n        hasDiscount: false,\n      });\n    });\n  });\n});\n```\n\nNow we can use the `getPriceInfo` in the `Price` components to get this structure data and pass down for the other components like this:\n\n```tsx\nexport const Price = ({ price, discount, isLoading }: PricePropsType) => {\n  if (isLoading) {\n    return (\n      <Skeleton width=\"80%\" height=\"18px\" data-testid=\"price-skeleton-loader\" />\n    );\n  }\n\n  const {\n    priceWithDiscount,\n    originalPrice,\n    discountOff,\n    hasDiscount,\n  }: PriceInfoType = getPriceInfo(price, discount);\n\n  return (\n    <Fragment>\n      <PriceWithDiscount price={priceWithDiscount} />\n      <OriginalPrice hasDiscount={hasDiscount} price={originalPrice} />\n      <Discount hasDiscount={hasDiscount} discountOff={discountOff} />\n    </Fragment>\n  );\n};\n```\n\nAs we talked earlier, when it is loading, we just render the `Skeleton` component. When it finishes the loading, it will build the structured data and render the price info. Let's build each component now!\n\nLet's start with the `OriginalPrice`. We just need to pass the `price` as a prop and it renders with the `Typography` component.\n\n```tsx\ntype OriginalPricePropsType = {\n  price: string;\n};\n\nexport const OriginalPrice = ({ price }: OriginalPricePropsType) => (\n  <Typography display=\"inline\" style={originalPriceStyle} color=\"textSecondary\">\n    {price}\n  </Typography>\n);\n```\n\nVery simple! Let's add a test now.\n\nJust pass a price and see it if was rendered in the DOM:\n\n```tsx\nit('shows the price', () => {\n  const price = '$200';\n  render(<OriginalPrice price={price} />);\n  expect(screen.getByText(price)).toBeInTheDocument();\n});\n```\n\nI also added a test to cover accessibility issues:\n\n```tsx\nit('has no accessibility violations', async () => {\n  const { container } = render(<OriginalPrice price=\"$200\" />);\n  const results = await axe(container);\n\n  expect(results).toHaveNoViolations();\n});\n```\n\nThe `PriceWithDiscount` component has a very similar implementation, but we pass the `hasDiscount` boolean to render this price or not. If it has a discount, render the price with the discount. Otherwise, it won't render anything.\n\n```tsx\ntype PricePropsType = {\n  hasDiscount: boolean;\n  price: string;\n};\n```\n\nThe props type has the `hasDiscount` and the `price`. And the component just renders things based on the `hasDiscount` value.\n\n```tsx\nexport const PriceWithDiscount = ({ price, hasDiscount }: PricePropsType) => {\n  if (!hasDiscount) {\n    return null;\n  }\n\n  return (\n    <Typography display=\"inline\" style={priceWithDiscountStyle}>\n      {price}\n    </Typography>\n  );\n};\n```\n\nThe tests will cover this logic when it has or doesn't have the discount. If it hasn't the discount, the prices will not be rendered.\n\n```tsx\ndescribe('when the product has no discount', () => {\n  it('shows nothing', () => {\n    const { queryByTestId } = render(\n      <PriceWithDiscount hasDiscount={false} price=\"\" />,\n    );\n\n    expect(queryByTestId('discount-off-label')).not.toBeInTheDocument();\n  });\n});\n```\n\nIf it has the discount, it will be the rendered in the DOM:\n\n```tsx\ndescribe('when the product has a discount', () => {\n  it('shows the price', () => {\n    const price = '$200';\n    render(<PriceWithDiscount hasDiscount price={price} />);\n    expect(screen.getByText(price)).toBeInTheDocument();\n  });\n});\n```\n\nAnd as always, a test to cover accessibility violations:\n\n```tsx\nit('has no accessibility violations', async () => {\n  const { container } = render(<PriceWithDiscount hasDiscount price=\"$200\" />);\n\n  const results = await axe(container);\n\n  expect(results).toHaveNoViolations();\n});\n```\n\nThe `Discount` component is pretty much the same as the `PriceWithDiscount`. Render the discount tag if the product has a discount:\n\n```tsx\ntype DiscountPropsType = {\n  hasDiscount: boolean;\n  discountOff: string;\n};\n\nexport const Discount = ({ hasDiscount, discountOff }: DiscountPropsType) => {\n  if (!hasDiscount) {\n    return null;\n  }\n\n  return (\n    <Typography\n      display=\"inline\"\n      color=\"secondary\"\n      data-testid=\"discount-off-label\"\n    >\n      {discountOff}\n    </Typography>\n  );\n};\n```\n\nAnd all the tests we did for the other component, we do the same thing for the `Discount` component:\n\n```tsx\ndescribe('Discount', () => {\n  describe('when the product has a discount', () => {\n    it('shows the discount label', () => {\n      const discountOff = '20% OFF';\n      render(<Discount hasDiscount discountOff={discountOff} />);\n      expect(screen.getByText(discountOff)).toBeInTheDocument();\n    });\n  });\n\n  describe('when the product has no discount', () => {\n    it('shows nothing', () => {\n      const { queryByTestId } = render(\n        <Discount hasDiscount={false} discountOff=\"\" />,\n      );\n\n      expect(queryByTestId('discount-off-label')).not.toBeInTheDocument();\n    });\n  });\n\n  it('has no accessibility violations', async () => {\n    const { container } = render(\n      <Discount hasDiscount discountOff=\"20% OFF\" />,\n    );\n\n    const results = await axe(container);\n\n    expect(results).toHaveNoViolations();\n  });\n});\n```\n\nNow we will build an `Image` component. This component has the basic skeleton as any other component we've built. If it is loading, wait to render the image source and render the skeleton instead. When it finishes the loading, we will render the image, but only if the component is in the intersection of the browser window.\n\nWhat does it mean? When you are on a website on your mobile device, you'll probably see the first 4 products. They will render the skeleton and then the image. But below these 4 products, as you're not seeing any of them, it doesn't matter if we are rendering them or not. And we can choose to not render them. Not for now. But on-demand. When you are scrolling, if the product's image is at the intersection of the browser window, we start rendering the image source.\n\nThat way we gain performance by speeding up the page load time and reduce the cost by requesting images on demand.\n\nWe will use the Intersection Observer API to download images on demand. But before writing any code about this technology, let's start building our component with the image and the skeleton view.\n\nImage props will have this object:\n\n```tsx\n{\n  imageUrl,\n  imageAlt,\n  width,\n  isLoading,\n  imageWrapperStyle,\n  imageStyle,\n}\n```\n\nThe `imageUrl`, `imageAlt`, and the `isLoading` props are passed by the product component. The `width` is an attribute for the skeleton and the image tag. The `imageWrapperStyle` and the `imageStyle` are props that have a default value in the image component. We'll talk about this later.\n\nLet's add a type for this props:\n\n```tsx\ntype ImageUrlType = Pick<ProductType, 'imageUrl'>;\ntype ImageAttrType = { imageAlt: string; width: string };\ntype ImageStateType = { isLoading: boolean };\ntype ImageStyleType = {\n  imageWrapperStyle: CSSProperties;\n  imageStyle: CSSProperties;\n};\n\nexport type ImagePropsType = ImageUrlType &\n  ImageAttrType &\n  ImageStateType &\n  ImageStyleType;\n```\n\nThe idea here is to give meaning for the types and then compose everything. We can get the `imageUrl` from the `ProductType`. The attribute type will have the `imageAlt` and the `width`. The image state has the `isLoading` state. And the image style has some `CSSProperties`.\n\nAt first, the component would like this:\n\n```tsx\nexport const Image = ({\n  imageUrl,\n  imageAlt,\n  width,\n  isLoading,\n  imageWrapperStyle,\n  imageStyle,\n}: ImagePropsType) => {\n  if (isLoading) {\n    <Skeleton\n      variant=\"rect\"\n      width={width}\n      data-testid=\"image-skeleton-loader\"\n    />;\n  }\n\n  return <img src={imageUrl} alt={imageAlt} width={width} style={imageStyle} />;\n};\n```\n\nLet's build the code to make the intersection observer works.\n\nThe idea of the intersection observer is to receive a target to be observed and a callback function that is executed whenever the observed target enters or exits the viewport. So the implementation would be very simple:\n\n```tsx\nconst observer: IntersectionObserver = new IntersectionObserver(\n  onIntersect,\n  options,\n);\n\nobserver.observe(target);\n```\n\nInstantiate the `IntersectionObserver` class by passing an options object and the callback function. The `observer` will observe the `target` element.\n\nAs it is an effect in the DOM, we can wrap this into a `useEffect`.\n\n```tsx\nuseEffect(() => {\n  const observer: IntersectionObserver = new IntersectionObserver(\n    onIntersect,\n    options,\n  );\n\n  observer.observe(target);\n\n  return () => {\n    observer.unobserve(target);\n  };\n}, [target]);\n```\n\nUsing `useEffect`, we have two different things here: the dependency array and the returning function. We pass the `target` as the dependency function to make sure that we will re-run the effect if the `target` changes. And the returning function is a cleanup function. React performs the cleanup when the component unmounts, so it will clean up the effect before running another effect for every render.\n\nIn this cleanup function, we just stop observing the `target` element.\n\nWhen the component starts rendering, the `target` reference is not set yet, so we need to have a guard to not observe an `undefined` target.\n\n```tsx\nuseEffect(() => {\n  if (!target) {\n    return;\n  }\n\n  const observer: IntersectionObserver = new IntersectionObserver(\n    onIntersect,\n    options,\n  );\n\n  observer.observe(target);\n\n  return () => {\n    observer.unobserve(target);\n  };\n}, [target]);\n```\n\nInstead of using this effect in our component, we could build a custom hook to receive the target, some options to customize the configuration, and it would provide a boolean telling if the target is at the intersection of the viewport or not.\n\n```tsx\nexport type TargetType = Element | HTMLDivElement | undefined;\nexport type IntersectionStatus = {\n  isIntersecting: boolean;\n};\n\nconst defaultOptions: IntersectionObserverInit = {\n  rootMargin: '0px',\n  threshold: 0.1,\n};\n\nexport const useIntersectionObserver = (\n  target: TargetType,\n  options: IntersectionObserverInit = defaultOptions,\n): IntersectionStatus => {\n  const [isIntersecting, setIsIntersecting] = useState(false);\n\n  useEffect(() => {\n    if (!target) {\n      return;\n    }\n\n    const onIntersect = ([entry]: IntersectionObserverEntry[]) => {\n      setIsIntersecting(entry.isIntersecting);\n\n      if (entry.isIntersecting) {\n        observer.unobserve(target);\n      }\n    };\n\n    const observer: IntersectionObserver = new IntersectionObserver(\n      onIntersect,\n      options,\n    );\n\n    observer.observe(target);\n\n    return () => {\n      observer.unobserve(target);\n    };\n  }, [target]);\n\n  return { isIntersecting };\n};\n```\n\nIn our callback function, we just set if the entry target is intersecting the viewport or not. The `setIsIntersecting` is a setter from the `useState` hook we define at the top of our custom hook.\n\nIt is initialized as `false` but will update to `true` if it is intersecting the viewport.\n\nWith this new information in the component, we can render the image or not. If it is intersecting, we can render the image. If not, just render a skeleton until the user gets to the viewport intersection of the product image.\n\nHow does it look in practice?\n\nFirst we define the wrapper reference using `useState`:\n\n```tsx\nconst [wrapperRef, setWrapperRef] = useState<HTMLDivElement>();\n```\n\nIt start as `undefined`. Then build a wrapper callback to set the element node:\n\n```tsx\nconst wrapperCallback = useCallback((node) => {\n  setWrapperRef(node);\n}, []);\n```\n\nWith that, we can use it to get the wrapper reference by using a `ref` prop in our `div`.\n\n```tsx\n<div ref={wrapperCallback}>\n```\n\nAfter setting the `wrapperRef`, we can pass it as the `target` for our `useIntersectionObserver` and expect a `isIntersecting` status as a result:\n\n```tsx\nconst { isIntersecting }: IntersectionStatus =\n  useIntersectionObserver(wrapperRef);\n```\n\nWith this new value, we can build a boolean value to know if we render the skeleton or the product image.\n\n```tsx\nconst showImageSkeleton: boolean = isLoading || !isIntersecting;\n```\n\nSo now we can render the appropriate node to the DOM.\n\n```tsx\n<div ref={wrapperCallback} style={imageWrapperStyle}>\n  {showImageSkeleton ? (\n    <Skeleton\n      variant=\"rect\"\n      width={width}\n      height={imageWrapperStyle.height}\n      style={skeletonStyle}\n      data-testid=\"image-skeleton-loader\"\n    />\n  ) : (\n    <img src={imageUrl} alt={imageAlt} width={width} />\n  )}\n</div>\n```\n\nThe full component looks like this:\n\n```tsx\nexport const Image = ({\n  imageUrl,\n  imageAlt,\n  width,\n  isLoading,\n  imageWrapperStyle,\n}: ImagePropsType) => {\n  const [wrapperRef, setWrapperRef] = useState<HTMLDivElement>();\n  const wrapperCallback = useCallback((node) => {\n    setWrapperRef(node);\n  }, []);\n\n  const { isIntersecting }: IntersectionStatus =\n    useIntersectionObserver(wrapperRef);\n  const showImageSkeleton: boolean = isLoading || !isIntersecting;\n\n  return (\n    <div ref={wrapperCallback} style={imageWrapperStyle}>\n      {showImageSkeleton ? (\n        <Skeleton\n          variant=\"rect\"\n          width={width}\n          height={imageWrapperStyle.height}\n          style={skeletonStyle}\n          data-testid=\"image-skeleton-loader\"\n        />\n      ) : (\n        <img src={imageUrl} alt={imageAlt} width={width} />\n      )}\n    </div>\n  );\n};\n```\n\nGreat, now the loading on-demand works well. But I want to build a slightly better experience. The idea here is to have two different sizes of the same image. The low-quality image is requested and we make it visible, but blur while the high-quality image is requested in the background. When the high-quality image finally finishes loading, we transition from the low-quality to the high-quality image with an ease-in/ease-out transition to make it a smooth experience.\n\nLet's build this logic. We could build this into the component, but we could also extract this logic into a custom hook.\n\n```tsx\nexport const useImageOnLoad = (): ImageOnLoadType => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const handleImageOnLoad = () => setIsLoaded(true);\n\n  const imageVisibility: CSSProperties = {\n    visibility: isLoaded ? 'hidden' : 'visible',\n    filter: 'blur(10px)',\n    transition: 'visibility 0ms ease-out 500ms',\n  };\n\n  const imageOpactity: CSSProperties = {\n    opacity: isLoaded ? 1 : 0,\n    transition: 'opacity 500ms ease-in 0ms',\n  };\n\n  return { handleImageOnLoad, imageVisibility, imageOpactity };\n};\n```\n\nThis hook just provides some data and behavior for the component. The `handleImageOnLoad` we talked earlier, the `imageVisibility` to make the low-quality image visible or not, and the `imageOpactity` to make the transition from transparent to opaque, that way we make it visible after loading it.\n\nThe `isLoaded` is a simple boolean to handle the visibility of the images. Another small detail is the `filter: 'blur(10px)'` to make the low-quality-image blur and then slowly focusing while transitioning from the low-quality image to the high-quality image.\n\nWith this new hook, we just import it, and call inside the component:\n\n```tsx\nconst { handleImageOnLoad, imageVisibility, imageOpactity }: ImageOnLoadType =\n  useImageOnLoad();\n```\n\nAnd start using the data and behavior we built.\n\n```tsx\n<Fragment>\n  <img\n    src={thumbUrl}\n    alt={imageAlt}\n    width={width}\n    style={{ ...imageStyle, ...imageVisibility }}\n  />\n  <img\n    onLoad={handleImageOnLoad}\n    src={imageUrl}\n    alt={imageAlt}\n    width={width}\n    style={{ ...imageStyle, ...imageOpactity }}\n  />\n</Fragment>\n```\n\nThe first one has a low-quality image, the `thumbUrl`. The second has the original high-quality image, the `imageUrl`. When the high-quality image is loaded, it calls the `handleImageOnLoad` function. This function will make the transition between one image to the other.\n\n## Wrapping up\n\nThis is the first part of this project to learn more about user experience, native APIs, typed frontend, and tests.\n\nFor the next part of this series, we are going to think more in an architectural way to build the search with filters, but keeping the mindset to bring technical solutions to make the user experience as smooth as possible.\n\n## Resources\n\n- [Lazy Loading Images and Video](https://developers.google.com/web/fundamentals/performance/lazy-loading-guidance/images-and-video)\n- [Functional Uses for Intersection Observer](https://css-tricks.com/a-few-functional-uses-for-intersection-observer-to-know-when-an-element-is-in-view/)\n- [Tips for rolling your own lazy loading](https://css-tricks.com/tips-for-rolling-your-own-lazy-loading/)\n- [Intersection Observer API - MDN](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)\n- [React Typescript Cheatsheet](https://github.com/typescript-cheatsheets/react-typescript-cheatsheet)\n\n### React\n\n- [Become a React Developer](https://www.educative.io/path/become-a-react-developer?aff=x8bV)\n- [React Development for Professionals](https://www.educative.io/path/react-development-for-professionals?aff=x8bV)\n- [React App Testing](https://www.educative.io/path/react-app-testing?aff=x8bV)\n- [React for Front-End Developers](https://www.educative.io/path/react-front-end-developer?aff=x8bV)\n- [React Deep Dive: From Beginner to Advanced](https://www.educative.io/courses/react-beginner-to-advanced?aff=x8bV)\n- [Test-driven Development with React](https://www.educative.io/courses/test-driven-react-development?aff=x8bV)\n- [The Road to learn React](https://www.educative.io/courses/the-road-to-learn-react?aff=x8bV)\n- [Reintroducing React: V16 and Beyond](https://www.educative.io/courses/reintroducing-react-v16-beyond?aff=x8bV)\n- [Advanced React Patterns With Hooks](https://www.educative.io/courses/advanced-react-patterns-with-hooks?aff=x8bV)\n- [React for Beginners Course](https://reactforbeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://advancedreact.com/friend/LEANDRO)\n\n### Redux\n\n- [Practical Redux](https://www.educative.io/courses/practical-redux?aff=x8bV)\n- [The Ultimate Guide to Redux](https://www.educative.io/courses/ultimate-guide-to-redux?aff=x8bV)\n- [Intermediate Redux with Redux Toolkit](https://www.educative.io/courses/intermediate-redux-toolkit?aff=x8bV)\n\n### Web\n\n- [Fundamentals of Web Programming](https://www.educative.io/path/fundamentals-web-programming?aff=x8bV)\n- [Become an EmberJS Developer](https://www.educative.io/path/become-an-ember-js-developer?aff=x8bV)\n- [Ace the Front End Interview](https://www.educative.io/path/ace-front-end-interview?aff=x8bV)\n- [Become a Front End Developer](https://www.educative.io/path/become-front-end-developer?aff=x8bV)\n- [Web Development: Unraveling HTML, CSS, and JavaScript](https://www.educative.io/courses/web-development-unraveling-html-css-js?aff=x8bV)\n- [Complete JavaScript Course: Build a Real World App from Scratch](https://www.educative.io/courses/the-complete-javascript-course-build-a-real-world-app-from-scratch?aff=x8bV)\n\n### TypeScript\n\n- [TypeScript for Front-End Developers](https://www.educative.io/path/typescript-for-front-end-developers?aff=x8bV)\n- [Using TypeScript with React](https://www.educative.io/courses/using-typescript-with-react?aff=x8bV)\n- [Learn TypeScript: The Complete Course for Beginners](https://www.educative.io/courses/learn-typescript-complete-course?aff=x8bV)\n- [Advanced TypeScript Masterclass](https://www.educative.io/courses/advanced-typescript-masterclass?aff=x8bV)\n\n### JavaScript\n\n- [JavaScript in Detail: From Beginner to Advanced](https://www.educative.io/courses/javascript-in-detail-from-beginner-to-advanced?aff=x8bV)\n- [Simplifying JavaScript: A Handy Guide for Software Engineers](https://www.educative.io/courses/simplifying-javascript-handy-guide?aff=x8bV)\n- [The Complete Guide to Modern JavaScript](https://www.educative.io/courses/complete-guide-to-modern-javascript?aff=x8bV)\n- [Learn Object-Oriented Programming in JavaScript](https://www.educative.io/courses/learn-object-oriented-programming-in-javascript?aff=x8bV)\n- [JavaScript In Practice: ES6 And Beyond](https://www.educative.io/courses/javascript-in-practice-es6-and-beyond?aff=x8bV)\n- [Data Structures for Coding Interviews in JavaScript](https://www.educative.io/courses/data-structures-coding-interviews-javascript?aff=x8bV)\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n- [ES6 Course](https://es6.io/friend/LEANDRO)\n- [Beginner JavaScript Course](https://beginnerjavascript.com/friend/LEANDRO)\n- [JavaScript Fundamentals Before Learning React](https://www.educative.io/courses/javascript-fundamentals-before-learning-react?aff=x8bV)\n- [Rediscovering JavaScript: ES6, ES7 & ES8](https://www.educative.io/courses/rediscovering-javascript?aff=x8bV)\n",
  },
  {
    url: '/writing-idiomatic-beautiful-ruby-code',
    title: 'Idiomatic Ruby: writing beautiful code',
    content:
      'Ruby is a beautiful programming language.\n\nAccording to [Ruby](http://www.ruby-lang.org/en/)’s official web page, Ruby is a:\n\n> “dynamic, open source programming language with a focus on simplicity and productivity. It has an elegant syntax that is natural to read and easy to write.”\n\nRuby was created by [Yukihiro Matsumoto](https://twitter.com/yukihiro_matz), a Japanese software engineer. Since 2011, he has been the chief designer & software engineer for Ruby at [Heroku](https://www.heroku.com/).\n\nMatsumoto has often said that he tries **to make Ruby natural, not simple**, in a way that mirrors life.\n\n> “Ruby is simple in appearance, but is very complex inside, just like our human body” — Yukihiro Matsumoto\n\nI feel the same way about Ruby. It is a complex but very natural programming language, with a beautiful and intuitive syntax.\n\nWith more intuitive and faster code, we are able to build better software. In this post, I will show you how I express my thoughts (aka code) with Ruby, by using snippets of code.\n\n### Expressing my thoughts with array methods\n\n#### Map\n\nUse the **map** method to simplify your code and get what you want.\n\nThe method **map** returns a new array with the results of running a block once for every element in enum.\n\nLet’s try it:\n\n```ruby\nan_array.map { |element| element * element }\n```\n\nSimple as that.\n\nBut when you begin coding with Ruby, it is easy to always use the **each** iterator.\n\nThe **each** iterator as shown below\n\n```ruby\nuser_ids = []\nusers.each { |user| user_ids << user.id }\n```\n\nCan be simplified with **map** in a single beautiful line of code:\n\n```ruby\nuser_ids = users.map { |user| user.id }\n```\n\nOr even better (and faster):\n\n```ruby\nuser_ids = users.map(&:id)\n```\n\n#### Select\n\nAnd when you’re used to coding with **map**, sometimes your code can be like this:\n\n```ruby\neven_numbers = [1, 2, 3, 4, 5].map { |element| element if element.even? } # [ni, 2, nil, 4, nil]\neven_numbers = even_numbers.compact # [2, 4]\n```\n\n**nil** object as well. Use the **compact** method to remove all **nil** objects.\n\nAnd ta-da, you’ve selected all the even numbers.\n\nMission accomplished.\n\nCome on, we can do better than this! Did you hear about the **select** method from enumerable module?\n\n```ruby\n[1, 2, 3, 4, 5].select { |element| element.even? }\n```\n\nJust one line. Simple code. Easy to understand.\n\n#### Bonus\n\n```ruby\n[1, 2, 3, 4, 5].select(&:even?)\n```\n\n#### Sample\n\nImagine that you need to get a random element from an array. You just started learning Ruby, so your first thought will be, “Let’s use the **random** method,” and that’s what happens:\n\n```ruby\n[1, 2, 3][rand(3)]\n```\n\nWell, we can understand the code, but I’m not sure if it is good enough. And what if we use the **shuffle** method?\n\n```ruby\n[1, 2, 3].shuffle.first\n```\n\nHmm. I actually prefer to use **shuffle** over **rand**. But when I discovered the **sample** method, it made so much more sense:\n\n```ruby\n[1, 2, 3].sample\n```\n\nReally, really simple.\n\nPretty natural and intuitive. We ask a **sample** from an array and the method returns it. Now I’m happy.\n\nWhat about you?\n\n### Expressing my thoughts with Ruby syntax\n\nAs I mentioned before, I love the way Ruby lets me code. It’s really natural for me. I’ll show parts of the beautiful Ruby syntax.\n\n#### Implicit return\n\nAny statement in Ruby returns the value of the last evaluated expression. A simple example is the **getter **method. We call a method and expect some value in return.\n\nLet’s see:\n\n```ruby\ndef get_user_ids(users)\n  return users.map(&:id)\nend\n\n```\n\nBut as we know, Ruby always returns the last evaluated expression. Why use the **return** statement?\n\n```ruby\ndef get_user_ids(users)\n  users.map(&:id)\nend\n\n```\n\nAfter using Ruby for 3 years, I feel great using almost every method without the **return** statement.\n\n#### Multiple assignments\n\nRuby allows me to assign multiple variables at the same time. When you begin, you may be coding like this:\n\n```ruby\ndef values\n  [1, 2, 3]\nend\n\none   = values[0]\ntwo   = values[1]\nthree = values[2]\n```\n\nBut why not assign multiple variables at the same time?\n\n```ruby\ndef values\n  [1, 2, 3]\nend\n\none, two, three = values\n\n```\n\nPretty awesome.\n\n#### Methods that ask questions (also called predicates)\n\nOne feature that caught my attention when I was learning Ruby was the **question mark (?)** method, also called the **predicates **methods. It was weird to see at first, but now it makes so much sense. You can write code like this:\n\n```ruby\nmovie.awesome # => true\n```\n\nOk… nothing wrong with that. But let’s use the question mark:\n\n```ruby\nmovie.awesome? # => true\n```\n\nThis code is much more expressive, and I expect the method’s answer to return either a **true** or **false** value.\n\nA method that I commonly use is **any?** It’s like asking an array if it has **any**thing inside it.\n\n```ruby\n[].any? # => false\n[1, 2, 3].any? # => true\n\n```\n\n#### Interpolation\n\nFor me string interpolation is more intuitive than string concatenation. Period. Let’s see it in action.\n\nAn example of a string concatenation:\n\n```ruby\nprogramming_language = "Ruby"\nprogramming_language + " is a beautiful programming_language" # => "Ruby is a beautiful programming_language"\n```\n\nAn example of a string interpolation:\n\n```ruby\nprogramming_language = "Ruby"\n"#{programming_language} is a beautiful programming_language" # => "Ruby is a beautiful programming_language"\n```\n\nI prefer string interpolation.\n\nWhat do you think?\n\n#### The if statement\n\nI like to use the **if** statement:\n\n```ruby\ndef hey_ho?\n  true\nend\n\nputs "let’s go" if hey_ho?\n```\n\nPretty nice to code like that.\n\nFeels really natural.\n\n#### The try method (with Rails mode on)\n\nThe **try** method invokes the method identified by the symbol, passing it any arguments and/or the block specified. This is similar to Ruby’s **Object#send.** Unlike that method, **nil** will be returned if the receiving object is a **nil** object or **NilClass.**\n\nUsing **if and unless** condition statement:\n\n```ruby\nuser.id unless user.nil?\n```\n\nUsing the **try **method:\n\n```ruby\nuser.try(:id)\n```\n\nSince Ruby 2.3, we can use Ruby’s safe navigation operator** (&.)** instead of Rails **try **method.\n\n```ruby\nuser&.id\n```\n\n#### Double pipe equals (||=) / memoization\n\nThis feature is so C-O-O-L. It’s like caching a value in a variable.\n\n```ruby\nsome_variable ||= 10\nputs some_variable # => 10\n\nsome_variable ||= 99\nputs some_variable # => 10\n\n```\n\nYou don’t need to use the **if** statement ever. Just use double pipe equals **(||=)** and it’s done.\n\nSimple and easy.\n\n#### Class static method\n\nOne way I like to write Ruby classes is to define a **static **method (class method).\n\n```ruby\nGetSearchResult.call(params)\n```\n\nSimple. Beautiful. Intuitive.\n\nWhat happens in the background?\n\n```ruby\nclass GetSearchResult\n  def self.call(params)\n    new(params).call\n  end\n\n  def initialize(params)\n    @params = params\n  end\n\n  def call\n    # ... your code here ...\n  end\nend\n\n```\n\nThe **self.call** method initializes an instance, and this object calls the **call **method. [Interactor design pattern](https://github.com/collectiveidea/interactor) uses it.\n\n#### Getters and setters\n\nFor the same **GetSearchResult** class, if we want to use the params, we can use the @params\n\n```ruby\nclass GetSearchResult\n  def self.call(params)\n    new(params).call\n  end\n\n  def initialize(params)\n    @params = params\n  end\n\n  def call\n    # ... your code here ...\n    @params # do something with @params\n  end\nend\n\n```\n\nWe define a **setter **and **getter:**\n\n```ruby\nclass GetSearchResult\n  def self.call(params)\n    new(params).call\n  end\n\n  def initialize(params)\n    @params = params\n  end\n\n  def call\n    # ... your code here ...\n    params # do something with params method here\n  end\n\n  private\n\n  def params\n    @params\n  end\n\n  def params=(parameters)\n    @params = parameters\n  end\nend\n\n```\n\nOr we can define **attr_reader**, **attr_writer,** or **attr_accessor**\n\n```ruby\nclass GetSearchResult\n  attr_reader :param\n\n  def self.call(params)\n    new(params).call\n  end\n\n  def initialize(params)\n    @params = params\n  end\n\n  def call\n    # ... your code here ...\n    params # do something with params method here\n  end\nend\n\n```\n\nNice.\n\nWe don’t need to define the **getter** and **setter** methods. The code just became simpler, just what we want.\n\n#### Tap\n\nImagine you want to define a **create_user** method. This method will instantiate, set the parameters, and save and return the user.\n\nLet’s do it.\n\n```ruby\ndef create_user(params)\n  user       = User.new\n  user.id    = params[:id]\n  user.name  = params[:name]\n  user.email = params[:email]\n  # ...\n  user.save\n  user\nend\n```\n\nSimple. Nothing wrong here.\n\nSo now let’s implement it with the **tap** method\n\n```ruby\ndef create_user(params)\n  User.new.tap do |user|\n    user.id    = params[:id]\n    user.name  = params[:name]\n    user.email = params[:email]\n    # ...\n    user.save\n  end\nend\n```\n\nYou just need to worry about the user parameters, and the **tap** method will return the user object for you.\n\n### That’s it\n\nWe learned I write idiomatic Ruby by coding with\n\n- array methods\n\n- syntax\n\nWe also learned how Ruby is beautiful and intuitive, and runs even faster.\n\nAnd that’s it, guys! I will be updating and including more details to my [blog](https://medium.com/@leandrotk_/). The idea is to share great content, and the community helps to improve this post! ☺\n\nI hope you guys appreciate the content and learned how to program beautiful code (and better software).\n\nIf you want a complete Ruby course, learn real-world coding skills and build projects, try [One Month Ruby Bootcamp](https://onemonth.com/courses/ruby?mbsy=lG6tt&mbsy_source=97541b09-e3ab-45d7-a9b1-dbc77028e008&campaignid=33446&discount_code=TKRuby1). See you there ☺\n\nThis post appeared first [here](https://medium.com/the-renaissance-developer/idiomatic-ruby-1b5fa1445098) on my [Renaissance Developer publication](https://medium.com/the-renaissance-developer).\n\nHave fun, keep learning, and always keep coding!\n',
  },
  {
    url: '/series/building-an-interpreter',
    title: 'Building an Interpreter Series',
    content:
      '<div class="series">\nAfter rumbling a lot about learning Programming Language Theory (PLT), I finally decided to commit and learn this field that I care about.\n\nI wanted to start simple, with a friendly resource to just get started. After collecting a lot of resources, most of them were heavy books and papers, I got a copy of the `Writing an interpreter in Go` book. It seemed to be the simplest resource to get started in the field and it also let me be very practical in terms of engineering a compiler.\n\nBut instead of Go, I wanted to use a language I\'m most familiar nowadays. So TypeScript it\'s.\n\nThis book creates an interpreter for the Monkey programming language and we\'ll see in each chapter of this series the building blocks of the interpreter.\n\nIf you want to see the code, I have a public Github repository for this implementation: monkey-ts, the Monkey programming language\'s compiler written in TypeScript.\n\n## Building an Interpreter Series\n\n- <time class="date">2021-05-23</time> <span>[Building an Interpreter: Lexical Analysis - Part 1](/series/building-an-interpreter/lexical-analysis-part-1)</span>\n- <time class="date">2021-05-29</time> <span>[Building an Interpreter: Lexical Analysis - Part 2](/series/building-an-interpreter/lexical-analysis-part-2)</span>\n- <time class="date">2021-07-18</time> <span>[Building an Interpreter: Lexical Analysis - Part 3](/series/building-an-interpreter/lexical-analysis-part-3)</span>\n- <time class="date">2021-07-20</time> <span>[Building an Interpreter: REPL](/series/building-an-interpreter/repl)</span>\n- <time class="date">2021-10-17</time> <span>[Building an Interpreter: Parser - Part 1: Fundamental parts of AST and basic statements](/series/building-an-interpreter/parser-part-1)</span>\n\nHave fun, keep learning, and always keep coding!\n\n</div>\n',
  },
  {
    url: '/series/data-structures',
    title: 'Data Structures Series',
    content:
      '<div class="series">\nThis is part of my series on `Data Structures`, where I document posts about algorithms problems I solved.\n\nThis is live document and will be updated everytime I solve new problems.\n\n## Data Structures Series\n\n- <time class="date">2020-01-06</time> <span>[Stack Data Structure](/series/data-structures/stack-data-structure)</span>\n- <time class="date">2020-01-13</time> <span>[Queue Data Structure](/series/data-structures/queue-data-structure)</span>\n- <time class="date">2020-02-02</time> <span>[Linked List Data Structure](/series/data-structures/linked-list-data-structure)</span>\n- <time class="date">2020-02-10</time> <span>[Tree Data Structure](/series/data-structures/tree-data-structure)</span>\n</div>\n',
  },
  {
    url: '/series/elixir-learnings',
    title: 'Elixir Learnings Series',
    content:
      '<div class="series">\nThis is part of my series on `Elixir Learnings`, where I share micro posts about everything I\'m learning related to Elixir and functional programming.\n\nThis is live document and will be updated everytime I learn new things.\n\n## Elixir Learnings Series\n\n- <time class="date">2020-04-13</time> <span>[div and rem](/series/elixir-learnings/div-and-rem)</span>\n- <time class="date">2020-04-21</time> <span>[playing around with lists](/series/elixir-learnings/playing-around-with-lists)</span>\n\n</div>\n',
  },
  {
    url: '/series/frontend-challenges',
    title: 'Frontend Challenges Series',
    content:
      '<div class="series">\nThis is a series called `Frontend Challenges`, where I document posts about challenges in the frontend domain.\n\nThis is live document and will be updated everytime I design and implement a new frontend challenge.\n\n## Frontend Challenges Series\n\n- <time class="date">2021-12-27</time> <span>[Front-end Engineer Assignment](/series/frontend-challenges/findhotel-frontend-challenge)</span>\n</div>\n',
  },
  {
    url: '/series/mastering-javascript',
    title: 'Mastering JavaScript Series',
    content:
      '<div class="series">\nThis is part of my series on <code>Mastering JavaScript Series</code>, where I share posts about everything I\'m learning to master JavaScript.\nThis is live document and will be updated everytime I learn new things.\n\n## Mastering JavaScript Series\n\n- <time class="date">2022-01-03</time> <span>[Revisiting Conditionals in JavaScript and TypeScript](/series/mastering-javascript/revisiting-conditionals-in-javascript-and-typescript)</span>\n- <time class="date">2022-01-10</time> <span>[Destructuring Arrays and Objects in JavaScript](/series/mastering-javascript/destructuring-objects-and-arrays)</span>\n</div>\n',
  },
  {
    url: '/series/rebuilding-mercaris-search',
    title: "Rebuilding Mercari's Search Series",
    content:
      '<div class="series">\nI\'m always looking for ways to improve my craft. One of the fun things I do is side projects. Things that I find interesting but also challenging.\n\nA search experience was something that came to my mind as it has a lot of complexity both in the frontend and in the backend sides.\n\nI wanted to build this search similarly to [_Mercari\'s Search_](https://www.mercari.com/) focusing on the product\'s frontend aspect first. So I could think mostly about the frontend challenges like state management, performance, accessibility, data fetching, testing, and architecture.\n\nThis post will be a live document where I update with all the upcoming posts from this series. First, we\'ll just setup the project. Then the first implementation of the home and the main menu\'s draft. Then we\'ll dive into the product list and the filter architecture.\n\n## Rebuilding Mercari‘s Search Series\n\n- <time class="date">2021-06-20</time> <span>[Setup NextJS with TypeScript, Prettier, and Jest](/series/rebuilding-mercaris-search/setup-nextjs-with-typescript-prettier-and-jest)</span>\n- <time class="date">2021-06-23</time> <span>[Home and Menu](/series/rebuilding-mercaris-search/home-menu)</span>\n</div>\n',
  },
  {
    url: '/series/typescript-learnings',
    title: 'TypeScript Learnings Series',
    content:
      '<div class="series">\nThis is part of my series on `TypeScript Learnings` Series, where I share micro posts about everything I\'m learning related to TypeScript.\n\nThis is live document and will be updated everytime I learn new things.\n\n## TypeScript Learnings Series\n\n- <time class="date">2020-04-05</time> <span>[Object Destruturing](/series/typescript-learnings/object-destructuring)</span>\n- <time class="date">2020-04-25</time> <span>[Type System](/series/typescript-learnings/type-system)</span>\n- <time class="date">2020-05-09</time> <span>[Interesting Types](/series/typescript-learnings/interesting-types)</span>\n- <time class="date">2020-05-23</time> <span>[Union Types with Objects](/series/typescript-learnings/union-types-with-objects)</span>\n</div>\n',
  },
  {
    url: '/series/website-changelog',
    title: 'Website Changelog Series',
    content:
      '<div class="series">\nThis is a series about everything I want to share about the updates on my website. It\'s like a changelog but in a blog post format. Here it\'ll be everything from explaining my mission to every feature I deploy to production.\n\n## Website Changelog\n\n- <time class="date">2022-01-01</time> <span>[Building my Legacy through Accessible, Open, and Free content](/series/website-changelog/building-my-legacy-through-accessible-open-and-free-content)</span>\n- <time class="date">2022-01-04</time> <span>[Refactoring Setup: NextJS, TypeScript, Prettier, and Testing Library](/series/website-changelog/refactoring-setup)</span>\n</div>\n',
  },
  {
    url: '/series/building-an-interpreter/lexical-analysis-part-1',
    title: 'Building an Interpreter: Lexical Analysis - Part 1',
    content:
      "Lexical Analysis is the process of transforming the source code into tokens. Tokens are an accessible form to ease the way we interpret the programming language.\n\n<img src=\"/series/building-an-interpreter/lexical-analysis.png\">\n\nThe book `Writing an Interpreter in Go` shows a very simple example to illustrate how lexing works. Imagine this source code:\n\n```jsx\nlet x = 5 + 5;\n```\n\nWe read this source code and generate tokens like this:\n\n```jsx\n[\n  LET,\n  IDENTIFIER('x'),\n  EQUAL_SIGN,\n  INTEGER(5),\n  PLUS_SIGN,\n  INTEGER(5),\n  SEMICOLON,\n];\n```\n\n- `let` will be the `LET` token\n- `x` will be the `INDENTIFIER` token with literal `\"x\"`\n- `=` will be the `EQUAL_SIGN` token\n- `5` will be the `INTEGER` token with literal `5`\n- `+` will be the `PLUS_SIGN` token\n- `5` will be the `INTEGER` token with literal `5` again\n- `;` will be the `SEMICOLON` token\n\nTake a look that we don't count \"spaces\" as tokens.\n\n## Defining tokens\n\nTo define tokens, I created a class to represent and to create tokens when we start to analyze our source code.\n\n```tsx\nexport type TokenType = string;\n\nexport class Token {\n  type: TokenType;\n  literal: string;\n\n  constructor(type: TokenType, literal: string) {\n    this.type = type;\n    this.literal = literal;\n  }\n}\n```\n\nThe implementation is very simple. It contains the token type and the literal value. A simple example would be a token like the basic `+` operator. We create it like this:\n\n```tsx\nconst plusToken = new Token('PLUS', '+');\n```\n\nIt has the type `PLUS` and the literal value `+`.\n\nNow let's define all the possible token types for the Monkey language.\n\n```tsx\nexport enum Tokens {\n  ILLEGAL = 'ILLEGAL',\n  EOF = 'EOF',\n  IDENT = 'IDENT',\n  INT = 'INT',\n  ASSIGN = '=',\n  PLUS = '+',\n  COMMA = ',',\n  SEMICOLON = ';',\n  LPAREN = '(',\n  RPAREN = ')',\n  LBRACE = '{',\n  RBRACE = '}',\n  FUNCTION = 'FUNCTION',\n  LET = 'LET',\n}\n```\n\nNow we can use the defined tokens instead of a random string. Let's see the `+` example again:\n\n```tsx\nconst plusToken = new Token(Tokens.PLUS, '+');\n```\n\nNice!\n\n## Lexer\n\nAs we saw earlier, the lexer receives the source code and output tokens that have a more accessible source code representation.\n\nOur lexer will receive the source code input and it'll have a method called `nextToken` to output each token while reading the source code.\n\nTo validate our `Lexer` code, let's add tests to match tokens.\n\n```tsx\nimport { Tokens, Token } from 'src/token/token';\nimport { Lexer } from '../lexer';\n\ndescribe('Lexer', () => {\n  it('matches each token', () => {\n    const input = '=+(){},;';\n    const tokens: Token[] = [\n      { type: Tokens.ASSIGN, literal: '=' },\n      { type: Tokens.PLUS, literal: '+' },\n      { type: Tokens.LPAREN, literal: '(' },\n      { type: Tokens.RPAREN, literal: ')' },\n      { type: Tokens.LBRACE, literal: '{' },\n      { type: Tokens.RBRACE, literal: '}' },\n      { type: Tokens.COMMA, literal: ',' },\n      { type: Tokens.SEMICOLON, literal: ';' },\n      { type: Tokens.EOF, literal: '' },\n    ];\n\n    const lexer = new Lexer(input);\n\n    tokens.forEach(({ type, literal }) => {\n      const inputToken = lexer.nextToken();\n      expect(inputToken.type).toEqual(type);\n      expect(inputToken.literal).toEqual(literal);\n    });\n  });\n});\n```\n\nOk, let's break it down!\n\n- The `input` is our source code. It'll be transformed into tokens.\n- The `tokens` is a list of tokens we expect to match the source code.\n- The `Lexer` is a class to be implemented.\n  - It receives an input as source code.\n  - And have a `nextToken` method to output the next token.\n- For each token in the list of tokens, we want to test if they match the \"next token\" from our lexer.\n\nRunning our test, we get an error as we didn't implement our Lexer yet. So let's do it!\n\nTo help analyze the source code, we will have 4 different variable helpers:\n\n- `input`: this is the actual source code.\n- `position`: the current position of the current char we are reading.\n- `readPosition`: the position we are about to read the next char.\n- `char`: the character of the source code we are reading.\n\nWith these four parameters, we can build a simple class representing the `Lexer`.\n\n```tsx\nexport class Lexer {\n  input: string;\n  position: number;\n  readPosition: number;\n  char: string;\n\n  constructor(input: string) {\n    this.input = input;\n  }\n}\n```\n\nRunning our test again, we fix the lexer instantiation. But now we got another issue. When reading each token, we expect that the `Lexer` instance has a `nextToken` method. But in our current lexer implementation, we don't do much. We just let it be instantiated. Let's implement the `nextToken` method.\n\nTo get started, we first need to make sure that the lexer starts with its variables in the correct state. We do this in the constructor.\n\n```tsx\nINITIAL_POSITION = 0;\nEMPTY_CHAR = '';\n\nconstructor(input: string) {\n\tthis.input = input;\n  this.setUpInitialState();\n}\n\nprivate setUpInitialState() {\n  this.position = this.INITIAL_POSITION;\n  this.readPosition = this.INITIAL_POSITION;\n  this.char = this.EMPTY_CHAR;\n}\n```\n\nThe initial state for the positions is the index `0` and the `char` starts with the empty character (`''`) state.\n\nThe `nextToken` algorithm is very simple in this first implementation. We just need to:\n\n- read the next character\n- transform this character into a token\n- return this new token\n\n\"read the next character\" is basically the idea of updating the current state of the `position`, the `readPosition`, and the `char` variables.\n\n```tsx\nprivate readChar() {\n  if (this.readPosition >= this.input.length) {\n    this.char = '';\n  } else {\n    this.char = this.input[this.readPosition];\n  }\n\n  this.position = this.readPosition;\n  this.readPosition += 1;\n}\n```\n\nWe start verifying the `readPosition` to make sure that we didn't finish reading the entire source code. If we finish reading the source code, we just update the `char` with its initial state (empty string).\n\nTo get the next character, we just access the input with the next position index and update the `char`.\n\nAfter that, we always need to update the indices:\n\n- `position` becomes the `readPosition`\n- `readPosition` increments by one\n\nNow that we read the next character, we can generate the token based on this new current state. Here it's very simple. We just need to map the current `char` to its own `Token`. We build this with a simple switch case.\n\n```tsx\nprivate getToken(): Token {\n  switch (this.char) {\n    case '=':\n      return new Token(Tokens.ASSIGN, '=');\n    case ';':\n      return new Token(Tokens.SEMICOLON, ';');\n    case '(':\n      return new Token(Tokens.LPAREN, '(');\n    case ')':\n      return new Token(Tokens.RPAREN, ')');\n    case ',':\n      return new Token(Tokens.COMMA, ',');\n    case '+':\n      return new Token(Tokens.PLUS, '+');\n    case '{':\n      return new Token(Tokens.LBRACE, '{');\n    case '}':\n      return new Token(Tokens.RBRACE, '}');\n    case '':\n      return new Token(Tokens.EOF, '');\n  }\n}\n```\n\nSo let's get everything together now. We need to set up the lexer with the appropriate state and then start reading the source code. The constructor looks like this now:\n\n```tsx\nconstructor(input: string) {\n  this.input = input;\n  this.setUpInitialState();\n  this.readChar();\n}\n```\n\nand the `nextToken` looks like this:\n\n```tsx\nnextToken(): Token {\n  const token = this.getToken();\n  this.readChar();\n  return token;\n}\n```\n\nAs we read the next character in the constructor of the `Lexer`, we can start by getting the token, read the next character and return the created token.\n\nRunning our test again, we fixed all the issues and it is passing now.\n\n## Final words & Resources\n\nI'm very happy to share with you the first post about my journey learning compilers and studying programming language theory.\n\nThis is the first part of the Lexical Analysis posts and part of the [Building an Interpreter series](/series/building-an-interpreter).\n\nThese are the resources I'm using to learn more about this field:\n\n- [Crafting an Interpreter](https://github.com/imteekay/crafting-an-interpreter): the open source project of the compiler for the TypeScript version of the Monkey programming language.\n- [Programming Language Theory](https://github.com/imteekay/programming-language-theory): a bunch of resources about my studies on Programming Language Theory & Applied PLT.\n- [Writing an Interpreter in Go](https://www.goodreads.com/book/show/32681092-writing-an-interpreter-in-go): the book I'm reading to learn and implement the Monkey compiler.\n",
  },
  {
    url: '/series/building-an-interpreter/lexical-analysis-part-2',
    title: 'Building an Interpreter: Lexical Analysis - Part 2',
    content:
      "This post is part of a series called [Building an Interpreter](/series/building-an-interpreter). The [first part of the Lexical Analysis](/series/building-an-interpreter/lexical-analysis-part-1) post illustrated a basic lexer creating tokens from a simple source code.\n\nIn this post we'll extend the tests and improve the `Lexer` to work with new tokens. The source code was this basic one-liner `\"=+(){},;\"`. But now we want a more complex source code:\n\n```tsx\nconst input = `\n  let five = 5;\n  let ten = 10;\n  \n\tlet add = fn(x, y) {\n    x + y;\n  };\n  \n\tlet result = add(five, ten);\n`;\n```\n\nWith a new source code, we need more tokens to represent it. These are the tokens that we need to make the source code matches:\n\n```tsx\nconst tokens: Token[] = [\n  { type: Tokens.LET, literal: 'let' },\n  { type: Tokens.IDENT, literal: 'five' },\n  { type: Tokens.ASSIGN, literal: '=' },\n  { type: Tokens.INT, literal: '5' },\n  { type: Tokens.SEMICOLON, literal: ';' },\n  { type: Tokens.LET, literal: 'let' },\n  { type: Tokens.IDENT, literal: 'ten' },\n  { type: Tokens.ASSIGN, literal: '=' },\n  { type: Tokens.INT, literal: '10' },\n  { type: Tokens.SEMICOLON, literal: ';' },\n  { type: Tokens.LET, literal: 'let' },\n  { type: Tokens.IDENT, literal: 'add' },\n  { type: Tokens.ASSIGN, literal: '=' },\n  { type: Tokens.FUNCTION, literal: 'fn' },\n  { type: Tokens.LPAREN, literal: '(' },\n  { type: Tokens.IDENT, literal: 'x' },\n  { type: Tokens.COMMA, literal: ',' },\n  { type: Tokens.IDENT, literal: 'y' },\n  { type: Tokens.RPAREN, literal: ')' },\n  { type: Tokens.LBRACE, literal: '{' },\n  { type: Tokens.IDENT, literal: 'x' },\n  { type: Tokens.PLUS, literal: '+' },\n  { type: Tokens.IDENT, literal: 'y' },\n  { type: Tokens.SEMICOLON, literal: ';' },\n  { type: Tokens.RBRACE, literal: '}' },\n  { type: Tokens.SEMICOLON, literal: ';' },\n  { type: Tokens.LET, literal: 'let' },\n  { type: Tokens.IDENT, literal: 'result' },\n  { type: Tokens.ASSIGN, literal: '=' },\n  { type: Tokens.IDENT, literal: 'add' },\n  { type: Tokens.LPAREN, literal: '(' },\n  { type: Tokens.IDENT, literal: 'five' },\n  { type: Tokens.COMMA, literal: ',' },\n  { type: Tokens.IDENT, literal: 'ten' },\n  { type: Tokens.RPAREN, literal: ')' },\n  { type: Tokens.SEMICOLON, literal: ';' },\n  { type: Tokens.EOF, literal: '' },\n];\n```\n\nThe test keeps the same, only the data changes.\n\n```tsx\nconst lexer = new Lexer(input);\n\ntokens.forEach(({ type, literal }) => {\n  const inputToken = lexer.nextToken();\n\n  expect(inputToken.type).toEqual(type);\n  expect(inputToken.literal).toEqual(literal);\n});\n```\n\nRunning this test, we start getting new errors related to the new tokens that don't match with the next generated token by our lexer.\n\nAlso, the new tokens are a bit different now. They are not a \"single character\" token, they are a bit more complex and should be handled in a different way.\n\nThe simplest example is the integer tokens. In the test's source code, we have integer `5` (single character), but we also have integer `10` (multiple characters).\n\nAs they can be multiple characters tokens, we'll add the default case in our `Lexer`'s switch case. Starting with integers, we need to make sure that the current character is a digit, read the number to get the whole token literal, in this case, the whole integer. As we know that it's an integer and we have the integer value, we just create a new token and return it. It looks like this:\n\n```tsx\nif (this.isDigit(this.char)) {\n  const tokenLiteral = this.readNumber();\n  return new Token(Tokens.INT, tokenLiteral);\n}\n```\n\nTwo parts are missing:\n\n- `isDigit`: verifies that a given character is a digit.\n- `readNumber`: read the whole number, independently if it's a single digit number or bigger.\n\nLets start with the easier one: `isDigit`. To simplify the idea of a digit, we'll just do a verification if the character is between `'0'` and `'9'`.\n\n```tsx\nprivate isDigit(char: string) {\n  return '0' <= char && char <= '9';\n}\n```\n\nNow about the `readNumber`. The algorithm would be:\n\n- get the initial position of the number\n- read the next character while it's still a digit\n- now we have the initial position and the last position\n- return the slice of the source code: the whole number\n\n```tsx\nprivate readNumber() {\n  const initialIntPosition = this.position;\n\n  while (this.isDigit(this.char)) {\n    this.readChar();\n  }\n\n  return this.input.substring(initialIntPosition, this.position);\n}\n```\n\nReading the next character, we update the current state of the main variables (`position`, `char`, and `readPosition`).\n\nWe use the `substring` string's method to the source code's slice that represents the whole number.\n\nThis is a very simplistic way to handle numbers as we are just handling integers but not float numbers.\n\nRunning the tests again, we don't have the integer token problem anymore. But we still have work to do and more tokens to build.\n\nNow we start to generate the other tokens: identifiers and keywords. The main difference between identifiers and keywords is that keywords are part of the language \"grammar\", the language's syntax. In the test's source code, we saw keywords like `fn` and `let` for example. Identifiers, on the other hand, are not part of the language's syntax, they are user-defined identifiers.\n\nTo first identify that the next token is an identifier or a keyword, we need to verify if the current character is a letter, read the next characters until it is not a letter anymore, and decides if the token is an identifier or a keyword looking at its value.\n\nWe add this code to the default part of the switch case as we did for the number tokens.\n\n```tsx\nif (this.isLetter(this.char)) {\n  const tokenLiteral = this.readIdentifier();\n  const tokenType = lookupIdent(tokenLiteral);\n  return new Token(tokenType, tokenLiteral);\n}\n```\n\nLet's break it down:\n\n- `isLetter`: just a method to verify if the current character is a letter.\n- `readIdentifier`: reads the characters until it's not part of the identifier/keyword anymore and return it.\n- `lookupIdent`: returns the token type (`FUNCTION`, `LET`, or `IDENT`) based on the token literal we got from the `readIdentifier`.\n- And finally it returns the new generated token.\n\nThe `isLetter` is pretty basic:\n\n```tsx\nprivate isLetter(char: string) {\n  return (\n    ('a' <= char && char <= 'z') ||\n    ('A' <= char && char <= 'Z') ||\n    char === '_'\n  );\n}\n```\n\nThe Monkey programming language accepts `_` as part of the identifiers. It's very similar to Ruby and Python. And the main part of this verification is the idea that the `char` should be between `'a'` and `'z'` (lower case characters) or between `'A'` and `'Z'` (upper case characters).\n\nThe `readIdentifier` is pretty similar to the `readNumber` that we implemented earlier.\n\n```tsx\nprivate readIdentifier() {\n  const initialCharPosition = this.position;\n\n  while (this.isLetter(this.char)) {\n    this.readChar();\n  }\n\n  return this.input.substring(initialCharPosition, this.position);\n}\n```\n\n- We get the initial char position\n- Read the next char while it is still a letter\n- With the initial position and the last position of the identifier, we can get the slice of the source code and return it.\n\nAnd finally the `lookupIdent` that we decided to implement it in the `Token` module because it belongs to that domain.\n\n```tsx\ninterface KeywordsType {\n  [key: string]: string;\n}\n\nconst Keywords: KeywordsType = {\n  fn: Tokens.FUNCTION,\n  let: Tokens.LET,\n};\n\nexport function lookupIdent(ident: string) {\n  return ident in Keywords ? Keywords[ident] : Tokens.IDENT;\n}\n```\n\nIt receives the identifier string, verify if it is in the `Keywords` object, if it's, get the token type, otherwise, just return the `IDENT` as the token type.\n\nRunning the tests again, we see more tokens passing the test. But some still fail. It turns out that we are not handling the white spaces between characters. Let's handle that issue!\n\n```tsx\nprivate skipWhitespace() {\n  while (\n    this.char == ' ' ||\n    this.char == '\\t' ||\n    this.char == '\\n' ||\n    this.char == '\\r'\n  ) {\n    this.readChar();\n  }\n}\n```\n\nTo skip the white spaces, we need to keep reading the next until it's not a white space anymore.\n\n- `' '`: white space\n- `'\\t'`: add tab\n- `'\\n'`: new line\n- `'\\r'`: return\n\nCalling `readChar` we update the state of the `position` and `char` variables. With this new implementation, we just need to add the `skipWhitespace` to the `getToken` method before generating any token:\n\n```tsx\nprivate getToken(): Token {\n  this.skipWhitespace();\n```\n\nThe only adjustment we need to do now is to update the `nextToken`. It was like this before:\n\n```tsx\nnextToken(): Token {\n  const token = this.getToken();\n  this.readChar();\n  return token;\n}\n```\n\nBut as we read the next char for identifiers, keywords, and integers, we need to remove this line:\n\n```tsx\nnextToken(): Token {\n  const token = this.getToken();\n  return token;\n}\n```\n\n...and add only for the other tokens.\n\n```tsx\ncase '=':\n  this.readChar();\n  return new Token(Tokens.ASSIGN, '=');\n```\n\nBut as we need to make this same instruction for almost all tokens, I created a private method to handle that.\n\n```tsx\nprivate buildToken(type: TokenType, literal: string) {\n  this.readChar();\n  return new Token(type, literal);\n}\n```\n\nThe use is very straightforward.\n\n```tsx\nswitch (this.char) {\n  case '=':\n    return this.buildToken(Tokens.ASSIGN, '=');\n  case ';':\n    return this.buildToken(Tokens.SEMICOLON, ';');\n  case '(':\n    return this.buildToken(Tokens.LPAREN, '(');\n  case ')':\n    return this.buildToken(Tokens.RPAREN, ')');\n  case ',':\n    return this.buildToken(Tokens.COMMA, ',');\n  case '+':\n    return this.buildToken(Tokens.PLUS, '+');\n  case '{':\n    return this.buildToken(Tokens.LBRACE, '{');\n  case '}':\n    return this.buildToken(Tokens.RBRACE, '}');\n  case '':\n    return this.buildToken(Tokens.EOF, '');\n```\n\nNow we have the tests passing and an improved lexer. Our language is taking shape. The source code is a bit more complex and all the tokens were generated. That's pretty nice!\n\n## **Final words & Resources**\n\nIf you didn't have the opportunity, take a look at the [first part of the Lexical Analysis](/series/building-an-interpreter/lexical-analysis-part-1). This is the second post about my journey learning compilers and studying programming language theory. And part of the [Building an Interpreter series](/series/building-an-interpreter).\n\nThese are the resources I'm using to learn more about this field:\n\n- [Crafting an Interpreter](https://github.com/imteekay/crafting-an-interpreter): the open source project of the compiler for the TypeScript version of the Monkey programming language.\n- [Programming Language Theory](https://github.com/imteekay/programming-language-theory): a bunch of resources about my studies on Programming Language Theory & Applied PLT.\n- [Writing an Interpreter in Go](https://www.goodreads.com/book/show/32681092-writing-an-interpreter-in-go): the book I'm reading to learn and implement the Monkey compiler.\n",
  },
  {
    url: '/series/building-an-interpreter/lexical-analysis-part-3',
    title: 'Building an Interpreter: Lexical Analysis - Part 3',
    content:
      "This post is part of a series called [Building an Interpreter](/series/building-an-interpreter). After implementing a [basic lexer](/series/building-an-interpreter/lexical-analysis-part-1) and [building more tokens](/series/building-an-interpreter/lexical-analysis-part-2), we'll extend the token set to work with special characters, new keywords, and the \"equal\" and \"not equal\" symbols.\n\nLet's add support for `==`, `!`, `!=`, `-`, `/`, `*`, `<`, `>`, and the keywords `true`, `false`, `if`, `else`, and `return`.\n\n## Single characters as tokens\n\nFirst, the single characters, as they are the easiest ones to handle in the lexer.\n\nWe add this to the test:\n\n```jsx\nconst input = `\n  !-/*5;\n  5 < 10 > 5;\n`;\n```\n\nAdd new tokens:\n\n```jsx\nexport enum Tokens {\n  // ...\n  MINUS = '-',\n  BANG = '!',\n  ASTERISK = '*',\n  SLASH = '/',\n  LESS_THAN = '<',\n  GREATER_THAN = '>',\n  // ...\n}\n```\n\nAnd finally, add the expectations in the test:\n\n```jsx\nconst tokens: Token[] = [\n  // ...\n  { type: Tokens.BANG, literal: '!' },\n  { type: Tokens.MINUS, literal: '-' },\n  { type: Tokens.SLASH, literal: '/' },\n  { type: Tokens.ASTERISK, literal: '*' },\n  { type: Tokens.INT, literal: '5' },\n  { type: Tokens.SEMICOLON, literal: ';' },\n  { type: Tokens.INT, literal: '5' },\n  { type: Tokens.LESS_THAN, literal: '<' },\n  { type: Tokens.INT, literal: '10' },\n  { type: Tokens.GREATER_THAN, literal: '>' },\n  { type: Tokens.INT, literal: '5' },\n  { type: Tokens.SEMICOLON, literal: ';' },\n  // ...\n];\n```\n\nNow we just need to implement the lexer part to generate these token based on the source code:\n\n```jsx\nprivate getToken(): Token {\n  this.skipWhitespace();\n\n  switch (this.char) {\n    // ...\n    case '!':\n      return this.buildToken(Tokens.BANG, '!');\n    case '-':\n      return this.buildToken(Tokens.MINUS, '-');\n    case '/':\n      return this.buildToken(Tokens.SLASH, '/');\n    case '*':\n      return this.buildToken(Tokens.ASTERISK, '*');\n    case '<':\n      return this.buildToken(Tokens.LESS_THAN, '<');\n    case '>':\n      return this.buildToken(Tokens.GREATER_THAN, '>');\n    // ...\n  }\n}\n```\n\nIf we run the tests again, we make all green and passing.\n\n## Building new keywords as tokens\n\nThe process of building the tokens for the new keyword is pretty similar to the single characters.\n\nAdd the input to the test:\n\n```jsx\nconst input = `\n  if (5 < 10) {\n    return true;\n  } else {\n    return false;\n  }\n`;\n```\n\nNow add the expected tokens in the test:\n\n```jsx\nconst tokens: Token[] = [\n  // ...\n  { type: Tokens.IF, literal: 'if' },\n  { type: Tokens.LPAREN, literal: '(' },\n  { type: Tokens.INT, literal: '5' },\n  { type: Tokens.LESS_THAN, literal: '<' },\n  { type: Tokens.INT, literal: '10' },\n  { type: Tokens.RPAREN, literal: ')' },\n  { type: Tokens.LBRACE, literal: '{' },\n  { type: Tokens.RETURN, literal: 'return' },\n  { type: Tokens.TRUE, literal: 'true' },\n  { type: Tokens.SEMICOLON, literal: ';' },\n  { type: Tokens.RBRACE, literal: '}' },\n  { type: Tokens.ELSE, literal: 'else' },\n  { type: Tokens.LBRACE, literal: '{' },\n  { type: Tokens.RETURN, literal: 'return' },\n  { type: Tokens.FALSE, literal: 'false' },\n  { type: Tokens.SEMICOLON, literal: ';' },\n  { type: Tokens.RBRACE, literal: '}' },\n  // ...\n];\n```\n\nAnd the new tokens:\n\n```jsx\nexport enum Tokens {\n  // ...\n  TRUE = 'TRUE',\n  FALSE = 'FALSE',\n  IF = 'IF',\n  ELSE = 'ELSE',\n  RETURN = 'RETURN',\n}\n```\n\nBut the difference is that we also need to update the `Keywords` object to having the new tokens and be used in the `lookupIdent` function:\n\n```jsx\nconst Keywords: KeywordsType = {\n  // ...\n  true: Tokens.TRUE,\n  false: Tokens.FALSE,\n  if: Tokens.IF,\n  else: Tokens.ELSE,\n  return: Tokens.RETURN,\n};\n```\n\nRunning the tests again, we get all green and passing.\n\n## The Equal and Not Equal operators\n\nWhat we want to do now is to build the Equal and Not Equal tokens. We start adding the source code we need to handle:\n\n```jsx\nconst input = `\n  10 == 10;\n  10 != 9;\n`;\n```\n\nThe expected tokens are:\n\n```jsx\nconst tokens: Token[] = [\n  // ...\n  { type: Tokens.INT, literal: '10' },\n  { type: Tokens.EQUAL, literal: '==' },\n  { type: Tokens.INT, literal: '10' },\n  { type: Tokens.SEMICOLON, literal: ';' },\n  { type: Tokens.INT, literal: '10' },\n  { type: Tokens.NOT_EQUAL, literal: '!=' },\n  { type: Tokens.INT, literal: '9' },\n  { type: Tokens.SEMICOLON, literal: ';' },\n  // ...\n];\n```\n\nThen we need to add the new tokens:\n\n```jsx\nexport enum Tokens {\n  // ...\n  EQUAL = '==',\n  NOT_EQUAL = '!=',\n  // ...\n}\n```\n\nNow we are ready to implement the lexer part for these new tokens.\n\nFirst, the `==`. Every time we get the character `=`, we need to be aware of if the next character is a `=` char. If it is, we return the token type `Equal`. If it's not, we just return the token type `Assign`.\n\nTo search for the next character, let's build a new method to handle that for us: `peekChar`.\n\n```jsx\nprivate peekChar() {\n  if (this.readPosition >= this.input.length) {\n    return '';\n  } else {\n    return this.input[this.readPosition];\n  }\n}\n```\n\nIt's a simple method: if we get to the end of the source code, we return an empty string. Otherwise, it returns the next character.\n\nNow it becomes very easy to implement the lexer algorithm for the `==` token:\n\n```jsx\nswitch (this.char) {\n  // ...\n  case '=':\n    if (this.peekChar() === '=') {\n      this.readChar();\n      return this.buildToken(Tokens.EQUAL, '==');\n    } else {\n      return this.buildToken(Tokens.ASSIGN, '=');\n    }\n  // ...\n}\n```\n\nInside the case of a `=` character, we see if the next character is also `=` with the help of our new method `peekChar`.\n\nIf it is, read the next character to update the `position` and the `readPosition`'s states and return the new token type `EQUAL`.\n\nIf it is not, just return the already implemented token type `ASSIGN`.\n\nWe actually do this same implementation for the `NOT_EQUAL` token type:\n\n```jsx\nswitch (this.char) {\n  // ...\n  case '!':\n    if (this.peekChar() === '=') {\n      this.readChar();\n      return this.buildToken(Tokens.NOT_EQUAL, '!=');\n    } else {\n      return this.buildToken(Tokens.BANG, '!');\n    }\n  // ...\n}\n```\n\nBut now we are looking at the `!` character.\n\n## **Final words & Resources**\n\nIf you didn't have the opportunity, take a look at the [first](/series/building-an-interpreter/lexical-analysis-part-1) and the [second part of the Lexical Analysis](/series/building-an-interpreter/lexical-analysis-part-2). This is the third post about my journey learning compilers and studying programming language theory. And part of the [Building an Interpreter series](/series/building-an-interpreter).\n\nThese are the resources I'm using to learn more about this field:\n\n- [Crafting an Interpreter](https://github.com/imteekay/crafting-an-interpreter): the open source project of the compiler for the TypeScript version of the Monkey programming language.\n- [Programming Language Theory](https://github.com/imteekay/programming-language-theory): a bunch of resources about my studies on Programming Language Theory & Applied PLT.\n- [Writing an Interpreter in Go](https://www.goodreads.com/book/show/32681092-writing-an-interpreter-in-go): the book I'm reading to learn and implement the Monkey compiler.\n",
  },
  {
    url: '/series/building-an-interpreter/parser-part-1',
    title: 'Parser - Part 1: Fundamental parts of AST and basic statements',
    content:
      "> \"A parser is a software component that takes input data (frequently text) and builds a data structure – often some kind of parse tree, abstract syntax tree or other hierarchical structure – giving a structural representation of the input, checking for correct syntax in the process. [...] The parser is often preceded by a separate lexical analyser, which creates tokens from the sequence of input characters.\" - [Wikipedia](https://en.wikipedia.org/wiki/Parsing)\n\nSo the idea of the parser will be to receive input data, can be text or tokens, and to produce a new data structure that represents this input data.\n\nThe data structure the parsers produce is commonly called AST, or abstract syntax tree. It's called \"abstract\" because this data structure omits visible details of the source code like semicolons, newlines, whitespace, and so on.\n\nIn the process of building this data structure, it also analyzes the source code, checking whether the generated tokens form a meaningful expression. This process is called _Syntactic Analysis_.\n\nParsing JSON strings as an example. It transforms the string input into a data structure (JavaScript Object).\n\n```jsx\nconst input = '{\"name\": \"TK\", \"age\": 25}';\nconst output = JSON.parse(input);\n\noutput;\n=> { name: 'TK', age: 25 }\n\noutput.name;\n=> 'TK'\n\noutput.age;\n=> 25\n```\n\nIt also has the \"syntactic analysis\". When passing a \"wrong\" input data, it will throw a syntax error (`SyntaxError`):\n\n```jsx\nconst input = '{\"name\": \"TK\", 25}';\nconst output = JSON.parse(input);\n=> Uncaught SyntaxError: Unexpected number in JSON at position 15\n```\n\nIn this case, position 15 is the value `25`, where it is missing the attribute here.\n\n## Fundamental AST\n\nTo parse the `Let Statement`, let's first understand its syntax.\n\n```jsx\nlet x = 10;\nlet y = 15;\n\nlet add = fn(a, b) {\n  return a + b;\n};\n```\n\nTaking a closer look at this example, we can see a pattern here. All three statements have this same form:\n\n```jsx\nlet <identifier> = <expression>;\n```\n\nSo, in this case, it's easy to understand that `10`, `15`, and `fn` are expressions. The difference between statements and expressions is simple in this PL: expressions produce value, statements don't.\n\nAnd they are a fundamental part of the AST. Everything is a node in the tree, that can be a statement or an expression.\n\n```jsx\ninterface Node {\n  tokenLiteral: () => string;\n}\n```\n\nThe first step is to create this `Node` interface. Every node has to implement this `tokenLiteral` function. Meaning: every node has a token literal associated with it.\n\n```jsx\nexport interface Statement extends Node {}\n\nexport interface Expression extends Node {}\n```\n\nThe `Statement` and the `Expression` interfaces are built on top of the `Node` interface. Let's make it very simple now and improve later.\n\nThe other fundamental part of the AST is the `Program`. It's the root node of the AST and it contains a list of statements.\n\n```jsx\nexport class Program {\n  statements: Statement[] = [];\n}\n```\n\n## Parsing the let statement\n\nNow that we have the foundation for our AST, we can build more specific statements. And we'll start with the `LetStatement`.\n\n![Screen Shot 2021-10-16 at 21.52.02.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ede20de3-879f-49b1-be3d-b89bce7652f5/Screen_Shot_2021-10-16_at_21.52.02.png)\n\nThis is how I'm visualizing the relationship between the `LetStatement` and the other interfaces.\n\nWe start with \"everything is a node\". Then we have the two main interfaces: `Expression` and `Statement`. In this case, `LetStatement` implements the `Statement` interface.\n\nThe `LetStatement` has these attributes:\n\n- `token`: it has the type of the `Token` class we defined when we built the lexer. (just to refresh our memories, the `Token` has two attributes: the `type` (string) and `literal` (string). The `type` is any token we defined in the enum and the `literal` is the literal value of the token)\n- `value`: it's an `Expression`. But we'll see more about this only in the next part of this series.\n- `name`: it's an `Identifier` that has a `token` and a `value` as the attributes.\n\nTo illustrate how it works in the code, let's see this example\n\n```tsx\nlet x = 1;\n```\n\nThe representation of the `LetStatement`'s AST would be:\n\n```tsx\nLetStatement {\n  token: Token { type: 'LET', literal: 'let' },\n  name: Identifier {\n    token: Token { type: 'IDENT', literal: 'x' },\n    value: 'x'\n  }\n}\n```\n\nWe have the `token` that's the `LET` token and the `name` that's an `Identifier` with a token `IDENT` and the `value` as `'x'`. We won't cover the `value` attribute because we'll see this `Expression` in the next part of this series.\n\nWith this in mind, we can create our `LetStatement` class:\n\n```tsx\nclass LetStatement implements Statement {\n  token: Token;\n  name: Identifier;\n  value: Expression;\n\n  constructor(token: Token) {\n    this.token = token;\n  }\n\n  tokenLiteral() {\n    return this.token.literal;\n  }\n}\n```\n\nIt has everything we already discussed, but we are missing the `Identifier` implementation:\n\n```tsx\nclass Identifier implements Expression {\n  token: Token;\n  value: string;\n\n  constructor(token: Token, value: string) {\n    this.token = token;\n    this.value = value;\n  }\n\n  tokenLiteral() {\n    return this.token.literal;\n  }\n}\n```\n\nWe also discussed this structure and what it should have: the `token` and the `value`.\n\nNow we have all the necessary AST nodes to start to implement the parser. But before we build the parser and start parsing the `LetStatement`, we'll add tests to cover this implementation first.\n\n```tsx\ndescribe('Parser', () => {\n  describe('parseProgram', () => {\n    it('parses the let statement', () => {\n      const input = `\n        let x = 5;\n        let y = 10;\n        let foobar = 10000;\n      `;\n\n      const lexer = new Lexer(input);\n      const parser = new Parser(lexer);\n      const program = parser.parseProgram();\n\n      const tests = [\n        { identifier: 'x' },\n        { identifier: 'y' },\n        { identifier: 'foobar' },\n      ];\n\n      tests.forEach(({ identifier }, index) => {\n        const statement = program.statements[index];\n\n        expect(statement.tokenLiteral()).toEqual('let');\n        expect(statement.name.value).toEqual(identifier);\n        expect(statement.name.tokenLiteral()).toEqual(identifier);\n      });\n    });\n  });\n});\n```\n\nWe want the parser to parse this input\n\n```tsx\nlet x = 5;\nlet y = 10;\nlet foobar = 10000;\n```\n\nFirst, we pass the `input` to the `Lexer` and then the `lexer` to the `Parser`. And now we can call the `parsePogram`. It'll return the `program` with all the `statements` related to the `input` data.\n\nWhat are we testing here?\n\n- the statement token literal should be `'let'`.\n- the identifier's value should the `identifier` we have in the `tests` array.\n- and the token literal of the identifier should also be the `identifier`.\n\nNow we can start implementing the `Parser` and pass the tests. We start with the basic definition of the `Parser` class.\n\n```tsx\nclass Parser {\n  private lexer: Lexer;\n  private currentToken: Token;\n  private peekToken: Token;\n\n  constructor(lexer: Lexer) {\n    this.lexer = lexer;\n  }\n}\n```\n\nWe need to make sure that the `lexer` is passed as a parameter and the parser should also have the:\n\n- `currentToken`: it is the token under examination\n- `peekToken`: it is the next token that helps decide what to do next\n\nWe'll also have a method called `nextToken` to update the `currentToken` and the `peekToken`:\n\n```tsx\nnextToken() {\n\tthis.currentToken = this.peekToken;\n  this.peekToken = this.lexer.nextToken();\n}\n```\n\nAnd to initialize these two states, we can call this method two times in the constructor. Calling two times will set the correct state for the current and the next tokens. It looks like this:\n\n```tsx\nconstructor(lexer: Lexer) {\n  this.lexer = lexer;\n  this.nextToken();\n  this.nextToken();\n}\n```\n\nNow the `parseProgram`. The idea of this method is to create a program and parse each statement based on the tokens and add all the statements to the statements list in the program.\n\n```tsx\nparseProgram() {\n  const program = new Program();\n\n  while (this.currentToken.type !== Tokens.EOF) {\n    const statement = this.parseStatement();\n\n    if (statement !== null) {\n      program.statements.push(statement);\n    }\n\n    this.nextToken();\n  }\n\n  return program;\n}\n```\n\nIt iterates through all the tokens from the lexer, for each token, it'll parse the statement and add it to the statements list. And in the end, it'll just return the program.\n\nFrom this code, we need to implement this `parseStatement` method.\n\n```tsx\nprivate parseLetStatement() {\n  const statement = new LetStatement(this.currentToken);\n\n  if (!this.expectPeek(Tokens.IDENT)) {\n    return null;\n  }\n\n  const identifier = new Identifier(\n    this.currentToken,\n    this.currentToken.literal\n  );\n\n  statement.name = identifier;\n\n  if (!this.expectPeek(Tokens.ASSIGN)) {\n    return null;\n  }\n\n  while (!this.currentTokenIs(Tokens.SEMICOLON)) {\n    this.nextToken();\n  }\n\n  return statement;\n}\n```\n\nI think this first implementation is not the best one, but we can refactor it later (I have some ideas in mind that I want to try later).\n\n- The first thing is to create a new `LetStatement` based on the current token\n- Then we need to confirm that the next token is an `Identifier`. If it's, we call `nextToken` to update the state of the `currentToken` and the `peekToken`. If not, we just return `null` (just to simplify for now).\n- Then we move to create the identifier. We just pass the current token and the current token's literal and update the statement name with this new identifier.\n- We expect that the next token is a `=` token (`ASSIGN`).\n- **\\*TODO**:\\* implement the expression/value in the next post of this series\n- After that, we just go through all the tokens until we find the `;` token and return the new statement.\n\nThis new statement will be used to add it to the statements list in the program. But we are missing two important methods here: `expectPeek` and `currentTokenIs`. Let's implement them.\n\n```tsx\nprivate currentTokenIs(token: TokenType) {\n  return this.currentToken.type === token;\n}\n```\n\n`currentTokenIs` is a simple method to verify if the current token has the same token type that we expect it has.\n\n```tsx\nprivate peekTokenIs(token: TokenType) {\n  return this.peekToken.type === token;\n}\n\nprivate expectPeek(token: TokenType) {\n  if (this.peekTokenIs(token)) {\n    this.nextToken();\n    return true;\n  }\n\n  return false;\n}\n```\n\nThe `expectPeek` method will use the `peekTokenIs` (that's very similar to the `currentTokenIs`, but for the `peekToken`) to verify if the token is the expected one. If it is, we update the current and the next token and return true. If not just return false (we'll also add error handling soon).\n\nNow we have the parser, the program, and we can parse let statements making the tests pass.\n\n## Handling errors\n\nFor this input data `let x = 5;`, we don't have any syntax problem, so we won't have any error to handle. But imagine the PL user type this:\n\n```tsx\nlet 123;\nlet a;\n```\n\nThere's a syntax error. Because, for a let statement, we expect that after the `let` token, we get an identifier, not the value/expression. And for the second example, after having the identifier, the parser expects that it has `=` token.\n\nWe could output something like this to the user:\n\n```tsx\nlet 123;\n=> 'expected next token to be IDENT, got INT instead'\n\nlet a;\n=> 'expected next token to be =, got ; instead'\n```\n\nErrors are ways to communicate to the users about what they are writing and help them get to the final goal (a \"working software\").\n\nBut how do we do that? Let's start with the tests as we always do.\n\n```tsx\nit('parses an input with error', () => {\n  const input = `\n    let 123;\n    let a;\n  `;\n\n  const lexer = new Lexer(input);\n  const parser = new Parser(lexer);\n\n  parser.parseProgram();\n\n  const errors = parser.getErrors();\n  const expectedErrors = [\n    'expected next token to be IDENT, got INT instead',\n    'expected next token to be =, got ; instead',\n  ];\n\n  errors.forEach((error, index) => {\n    expect(error).toEqual(expectedErrors[index]);\n  });\n});\n```\n\nHere we have the input data that we talked about. But now we'll also have a `getErrors` method to get all the possible errors the parser had while parsing the input.\n\nAnd we expect that the parser has these two errors we already discussed.\n\nOk, to have all the errors, let's create a list of errors in the parser.\n\n```tsx\ntype Error = string;\n\nclass Parser {\n  private lexer: Lexer;\n  private currentToken: Token;\n  private peekToken: Token;\n  private errors: Error[];\n\n  constructor(lexer: Lexer) {\n    this.lexer = lexer;\n    this.errors = [];\n    this.nextToken();\n    this.nextToken();\n  }\n}\n```\n\nIt's very simple, it's just a private attribute from the class `Parser`, it has the type `Error` (that's a `string`), and we initialize it with an empty list.\n\nThe `getErrors` method will only return the errors attribute:\n\n```tsx\ngetErrors() {\n  return this.errors;\n}\n```\n\nAnd now what we need to do is to add a error message when the parser gets an error.\n\nIn this case, we'll add an error to the list when the next token it's not the expected one, so the place we do that is in the `expectPeek` method.\n\n```tsx\nprivate expectPeek(token: TokenType) {\n  if (this.peekTokenIs(token)) {\n    this.nextToken();\n    return true;\n  }\n\n  this.peekError(token);\n  return false;\n}\n```\n\nWhen the next token is not the expected one, we call the `peekError` method passing the expected token to it. Now let's implement this new method:\n\n```tsx\nprivate peekError(token: TokenType) {\n  const msg = `expected next token to be ${token}, got ${this.peekToken.type} instead`;\n  this.errors.push(msg);\n}\n```\n\nIt's very simple, we just need to add an error message to the `errors` list.\n\nAnd syntax error message is also simple: `expected next token to be ${token}, got ${this.peekToken.type} instead`. We expect one thing and got another.\n\nRunning the tests again, they pass, and we have a way to communicate to the user about the program she/he is creating.\n\n## Parsing the return statement\n\nThe `return` is also a `Statement`. Let's illustrate it:\n\n<img src=\"/series/building-an-interpreter/ast-2.png\">\n\nThe `ReturnStatement` will implement this `Statement` interface and it has these two attributes: `token` and `returnValue`.\n\nThis is actually very similar to the `LetStatement`:\n\n```tsx\nclass ReturnStatement implements Statement {\n  token: Token;\n  returnValue: Expression;\n\n  constructor(token: Token) {\n    this.token = token;\n  }\n\n  tokenLiteral() {\n    return this.token.literal;\n  }\n}\n```\n\nThe `token` is a `Token`, the `returnValue` is an `Expression`, when instantiating the `ReturnStatement`, we initialize it with the `token`, and we also provide a `tokenLiteral` method.\n\nLet's create a new test to verify this new statement:\n\n```tsx\nit('parses the return statement', () => {\n  const input = `\n    return 5;\n    return 10;\n    return 10000;\n  `;\n\n  const lexer = new Lexer(input);\n  const parser = new Parser(lexer);\n  const program = parser.parseProgram();\n\n  const tests = [\n    { tokenLiteral: 'return' },\n    { tokenLiteral: 'return' },\n    { tokenLiteral: 'return' },\n  ];\n\n  tests.forEach(({ tokenLiteral }, index) => {\n    const statement = program.statements[index];\n\n    expect(statement.tokenLiteral()).toEqual(tokenLiteral);\n  });\n});\n```\n\nThe input data has only correct return statements, and we expect that the statement token literal should be the `return` token.\n\nWhen the program parses statements, we only handle the let statement. But we want to handle return statements as well.\n\n```tsx\nprivate parseStatement() {\n  switch (this.currentToken.type) {\n    case Tokens.LET:\n      return this.parseLetStatement();\n    case Tokens.RETURN:\n      return this.parseReturnStatement();\n    default:\n      return null;\n  }\n}\n```\n\nIf the current token is a `RETURN` token, we call the `parseReturnStatement` method.\n\nThis method is also similar to the let statement, but simpler.\n\n```tsx\nprivate parseReturnStatement() {\n  const statement = new ReturnStatement(this.currentToken);\n\n  while (!this.currentTokenIs(Tokens.SEMICOLON)) {\n    this.nextToken();\n  }\n\n  return statement;\n}\n```\n\nIt creates the `ReturnStatement` passing the current token, go to the end of the statement (semicolon - we'll talk about the `returnValue` expression in another part of this series), and return the new statement.\n\nThis new statement is added to the `statements` list.\n\nOne small thing that I realized when implementing this new statement is that it also implements the `Statement` and the `statements` list doesn't know if it is a `LetStatement` or a `ReturnStatement`. One way to solve this in TypeScript is to add a [tagged union](https://mariusschulz.com/blog/tagged-union-types-in-typescript).\n\nLet's add the `kind` attribute to these two statements.\n\n- `LetStatement`:\n\n```tsx\nclass LetStatement implements BaseStatement {\n  token: Token;\n  name: Identifier;\n  value: Expression;\n  kind: StatementKind.Let;\n\n  constructor(token: Token) {\n    this.token = token;\n    this.kind = StatementKind.Let;\n  }\n\n  tokenLiteral() {\n    return this.token.literal;\n  }\n}\n```\n\n- `ReturnStatement`:\n\n```tsx\nclass ReturnStatement implements BaseStatement {\n  token: Token;\n  kind: StatementKind.Return;\n  returnValue: Expression;\n\n  constructor(token: Token) {\n    this.token = token;\n    this.kind = StatementKind.Return;\n  }\n\n  tokenLiteral() {\n    return this.token.literal;\n  }\n}\n```\n\nThe two statements have a new attribute called `kind` and we initialize it with the expected statement kind.\n\n```tsx\nenum StatementKind {\n  Let = 'let',\n  Return = 'return',\n}\n```\n\nIt's basically an enum to support this new attribute.\n\nBut we also need to update some things here:\n\n```tsx\ntype StatementKindType = StatementKind.Let | StatementKind.Return;\ntype Statement = LetStatement | ReturnStatement;\n\ninterface BaseStatement extends Node {\n  kind: StatementKindType;\n}\n\nclass Program {\n  statements: Statement[] = [];\n}\n```\n\n- The `StatementKindType` is all possible kind types\n- The `Statement` is all possible statements\n- The `BaseStatement` is the interface that `LetStatement` and `ReturnStatement` implement\n- The `Program` still have the `Statement` type for the list of the statements\n\nThat's all for this post. The next one we'll talk about expressions, I'm excited about it.\n\n## **Final words & Resources**\n\nIf you didn't have the opportunity, take a look at the posts from the [Building an Interpreter series](/series/building-an-interpreter):\n\n- [Building an Interpreter: Lexical Analysis - Part 1](/series/building-an-interpreter/lexical-analysis-part-1)\n- [Building an Interpreter: Lexical Analysis - Part 2](/series/building-an-interpreter/lexical-analysis-part-2)\n- [Building an Interpreter: Lexical Analysis - Part 3](/series/building-an-interpreter/lexical-analysis-part-3)\n- [Building an Interpreter: REPL](/series/building-an-interpreter/repl)\n\nThese are the resources I'm using to learn more about this field:\n\n- [Crafting an Interpreter](https://github.com/imteekay/crafting-an-interpreter): the open-source project of the compiler for the TypeScript version of the Monkey programming language.\n- [Programming Language Theory](https://github.com/imteekay/programming-language-theory): a bunch of resources about my studies on Programming Language Theory & Applied PLT.\n- [Writing an Interpreter in Go](https://www.goodreads.com/book/show/32681092-writing-an-interpreter-in-go): the book I'm reading to learn and implement the Monkey compiler.\n",
  },
  {
    url: '/series/building-an-interpreter/repl',
    title: 'Building an Interpreter: REPL',
    content:
      "This post is part of a series called [Building an Interpreter](/series/building-an-interpreter).\n\nNow that we implemented the [first steps of our lexer](/series/building-an-interpreter/lexical-analysis-part-1), [more complex tokens](/series/building-an-interpreter/lexical-analysis-part-2), and [extended the token set with special characters](/series/building-an-interpreter/lexical-analysis-part-3), we want to take a step back and implement a REPL and print the tokens using our lexer.\n\nA REPL stands for Read-Eval-Print-Loop, and it is an interactive environment that \"reads\" the input, \"evaluates\" and \"prints\" it. And then do it all over again (loop).\n\nAs we only have the token yet, we'll just print tokens related to the user input.\n\nAn example would be if we type this in the REPL:\n\n```bash\n> let a = 1;\n```\n\nWe'll get the tokens related to this input\n\n```bash\nToken { type: 'LET', literal: 'let' }\nToken { type: 'IDENT', literal: 'a' }\nToken { type: '=', literal: '=' }\nToken { type: 'INT', literal: '1' }\nToken { type: ';', literal: ';' }\n```\n\nNice, let's implement it!\n\n## Building the REPL\n\nTo build the REPL, I listed some ideas behind it:\n\n- We need to share a prompt to read the user input\n- When the user types code and clicks enter, we should print the tokens related to the input\n- After printing the token, we need to share a prompt again\n- If the user types \"exit\" or \"quit\", we want to close the REPL\n\nThese are the building blocks.\n\nTo share the prompt and read the user input, we can use the `readline` from Node's API.\n\n```jsx\nimport readline from 'readline';\n\nconst scanner = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout,\n});\n\nscanner.question('> ', (input) => {\n  // do stuff\n});\n```\n\nWith this code, we can share the prompt with `>` and read the user input.\n\nNow that we have the user input, we need to be aware of if the input is `\"quit\"` or `\"exit\"`. If it is, just close the REPL.\n\n```jsx\nconst ScannerClose = {\n  exit: 'exit',\n  quit: 'quit',\n};\n\nconst exits = [ScannerClose.exit, ScannerClose.quit];\n\nif (exits.includes(input)) return scanner.close();\n```\n\nBuilt an object and an array to have all the possible ways to exit the REPL, and verify if the input is included in these possible exits. If it is, close the REPL. If it isn't, we are able to print the tokens.\n\nTo print the tokens, we need to instantiate our Lexer class with the input, and print token by token until it gets an `EOF` token type.\n\n```jsx\nimport { Tokens } from '../token/token';\nimport { Lexer } from '../lexer/lexer';\n\nconst lexer = new Lexer(input);\n\nfor (\n  let token = lexer.nextToken();\n  token.type !== Tokens.EOF;\n  token = lexer.nextToken()\n) {\n  console.log(token);\n}\n```\n\nAfter printing the token, we want to share the prompt again for the user to type more code. We can do this with a recursive approach.\n\nThe idea is to wrap all this code into a function and call itself in the end like this:\n\n```jsx\nfunction repl() {\n  scanner.question('> ', (input) => {\n    if (exits.includes(input)) return scanner.close();\n\n    const lexer = new Lexer(input);\n\n    for (\n      let token = lexer.nextToken();\n      token.type !== Tokens.EOF;\n      token = lexer.nextToken()\n    ) {\n      console.log(token);\n    }\n\n    repl();\n  });\n}\n```\n\nTo finish the REPL, I wanted to wrap this code into a `startRepl` function with a \"Welcome to monkey.ts\" print before letting the user type code.\n\n```jsx\nimport readline from 'readline';\nimport { Tokens } from '../token/token';\nimport { Lexer } from '../lexer/lexer';\n\nconst ScannerClose = {\n  exit: 'exit',\n  quit: 'quit',\n};\n\nconst exits = [ScannerClose.exit, ScannerClose.quit];\n\nexport function startRepl() {\n  const scanner = readline.createInterface({\n    input: process.stdin,\n    output: process.stdout,\n  });\n\n  function repl() {\n    scanner.question('> ', (input) => {\n      if (exits.includes(input)) return scanner.close();\n\n      const lexer = new Lexer(input);\n\n      for (\n        let token = lexer.nextToken();\n        token.type !== Tokens.EOF;\n        token = lexer.nextToken()\n      ) {\n        console.log(token);\n      }\n\n      repl();\n    });\n  }\n\n  console.log('Welcome to monkey.ts');\n  repl();\n}\n```\n\nAnd now we can call it anywhere in our code to start the REPL.\n\n## **Final words & Resources**\n\nIf you didn't have the opportunity, take a look at the posts from the [Building an Interpreter series](/series/building-an-interpreter):\n\n- [Building an Interpreter: Lexical Analysis - Part 1](/series/building-an-interpreter/lexical-analysis-part-1)\n- [Building an Interpreter: Lexical Analysis - Part 2](/series/building-an-interpreter/lexical-analysis-part-2)\n- [Building an Interpreter: Lexical Analysis - Part 3](/series/building-an-interpreter/lexical-analysis-part-3)\n\nThese are the resources I'm using to learn more about this field:\n\n- [Crafting an Interpreter](https://github.com/imteekay/crafting-an-interpreter): the open-source project of the compiler for the TypeScript version of the Monkey programming language.\n- [monkey-ts - REPL PR](https://github.com/imteekay/monkey-ts/pull/4)\n- [Programming Language Theory](https://github.com/imteekay/programming-language-theory): a bunch of resources about my studies on Programming Language Theory & Applied PLT.\n- [Writing an Interpreter in Go](https://www.goodreads.com/book/show/32681092-writing-an-interpreter-in-go): the book I'm reading to learn and implement the Monkey compiler.\n",
  },
  {
    url: '/series/data-structures/linked-list-data-structure',
    title: 'Linked List Data Structure',
    content:
      "A linked list is a collection of nodes that form a linear sequence. The difference between an array and a linked list is that the array has indexed elements, so we can get an element by constant time by just searching by its index. In the linked list, we need to go through the nodes to get the searched element and that takes linear time.\n\nThe advantage is that the linked lists can insert and remove items in constant time.\n\nA Linked List is a sequence of nodes and each node has two `attributes`: the value it stores and the reference to the next node of the sequence.\n\nThe first and last nodes are called `head` and `tail` of the list, respectively. So to get to the tail of the last, we traverse the linked list by moving from one node to another using each node's next reference.\n\nThe Linked List having the `head` and the `tail` as attributes helps add new nodes to the start and the end of the list. But we can implement it with or without the `tail` attribute. We will dive into this implementation.\n\nWe can separate the linked list from its elements. Each element is a node and we can implement this representation with a `Node` class.\n\n```python\nclass Node:\n    def __init__(self, value, next=None):\n        self.value = value\n        self.next = next\n```\n\nBasically, it has a value and the reference to the next node. We add a default value (`None`) to the `next` parameter to make it more flexible to use when creating new nodes.\n\nThe simplest way to use it is:\n\n```python\nnew_node = Node(1)\nnew_node.value  # 1\nnew_node.next  # None\n```\n\n- Instantiate the new node.\n- We can access the `value` and the `next` attributes.\n\nBut with the flexibility of the `next` parameter, we can also use it by passing the next node reference.\n\n```python\nnext_node = Node(2)\n\nnew_node = Node(1, next_node)\nnew_node.value  # 1\nnew_node.next.value  # 2\n```\n\n- Have the next node.\n- Instantiate the new node by passing the value and the reference to the next node (`next_node` in our case).\n- We can access the `value` and the `next` value.\n\nFor the linked list, the first step is to create a class representing it. For now, we just want a `head` attribute when creating an empty list.\n\n```python\nclass LinkedList:\n    def __init__(self):\n        self.head = None\n```\n\nSimple as that. Just a class and initialize the `head` attribute with `None` for an empty list.\n\nLet's implement the easier method: `is_empty`. How do we know when a list is empty? If the `head` is `None`, we didn't add any node to this list. This is the logic behind the `is_empty` method.\n\n```python\ndef is_empty(self):\n    return self.head is None\n```\n\nPretty simple, huh?\n\nNow the `prepend` method. We basically need to create a new node, points the `next` attribute from this new node to the `head`, and assign this new node to be the new linked list `head`.\n\nRemember we have the `next` parameter when creating a new node? We can use it to assign the previous `head` when creating the new node. Something like this:\n\n```python\nNode(value, previous_head)\n```\n\nIn the context of the linked list, we will have the `self.head`. So:\n\n```python\nNode(value, self.head)\n```\n\nThe last step is to assign this new node to the `head` and we will prepend it.\n\n```python\nself.head = Node(value, self.head)\n```\n\n- Create new node\n- Assign the `next` attribute to the previous `head`\n- And assign the new node to the `head`\n\nThe complete method will be like this:\n\n```python\ndef prepend(self, value):\n    self.head = Node(value, self.head)\n```\n\nJust one line. Pretty good!\n\nFor the `append`, it's a bit different, because, instead of adding a new node to the head of the list, we need to add to the tail. So basically we need to iterate through the list to be in the last node and point it's `next` attribute to the newly created node.\n\nThe question is: How do we iterate through the list?\n\nThe difference between the tail node and the rest is the `next` attribute. The tail has no `next`. It points to `None`. The rest always point to a different node.\n\nTo iterate through the list to get the last node, we get the next node until the node has no `next` attribute. Start with the first node: the head.\n\n```python\ncurrent_node = self.head\n```\n\nAnd then iterate.\n\n```python\nwhile current_node.next is not None:\n    current_node = current_node.next\n```\n\nWe divide this code into two parts:\n\n- looping while the node's `next` attribute is not `None`\n- update the current node by assigning the next node\n\nWhen the `while` loop breaks, we have the last node, so we just need to update the last node `next` attribute.\n\n```python\ncurrent_node.next = Node(value)\n```\n\nThe complete code:\n\n```python\ncurrent_node = self.head\n\nwhile current_node.next is not None:\n    current_node = current_node.next\n\ncurrent_node.next = Node(value)\n```\n\nBut this code will break if the linked list is empty, because the `head` is `None`, it can't have a `next` attribute.\n\nIn this case, we just make a condition for emptiness. If it is empty, we just assign the new node to the `head`.\n\n```python\ndef append(self, value):\n    if self.is_empty():\n        self.head = Node(value)\n        return\n\n    current_node = self.head\n\n    while current_node.next is not None:\n        current_node = current_node.next\n\n    current_node.next = Node(value)\n```\n\nFor the `size` method is straightforward. We basically need to iterate through the whole list and count each node.\n\nTo iterate is pretty simple. We just need to loop while the current node is not `None`.\n\n```python\nwhile current_node is not None:\n    current_node = current_node.next\n```\n\nAnd for each iteration, we need to increase our counter.\n\n```python\ndef size(self):\n    list_length = 0\n    current_node = self.head\n\n    while current_node is not None:\n        list_length += 1\n        current_node = current_node.next\n\n    return list_length\n```\n\n- Initialize the `list_length` with `0`.\n- Get the current node: the `head`.\n- Iterate through the list.\n- For each iteration, increase the counter.\n- Returns the `list_length`.\n\nFor the `search` algorithm, we need to receive a value and return `True` or `False` if this value is in the linked list.\n\nSo we basically need to iterate through the linked list searching for this value.\n\nThe iteration is simple:\n\n```python\nwhile current_node is not None:\n\t\tcurrent_node = current_node.next\n```\n\nNow, for each node, we see if the current node value is the same as the searched value.\n\n```python\nwhile current_node is not None:\n    if current_node.value == value:\n        return True\n\n    current_node = current_node.next\n```\n\nWe can do this way to return `True` if the searched value is found. Or we can define a `found` variable and use it to set it to `True` when finding it and get out of the loop.\n\n```python\nwhile not found and current_node is not None:\n    found = current_node.value == value\n    current_node = current_node.next\n```\n\n- We will iterate while we didn't find the value and it is not the last node\n- Basically, the loop will stop when finding the searched value or finish the entire linked list\n- The `current_node.value == value` logic will store a `True` or `False` value for each current node value\n\nWe define the `found` and `current_node` before iterating and return if we found the searched value or not.\n\n```python\ndef search(self, value):\n    found = False\n    current_node = self.head\n\n    while not found and current_node is not None:\n        found = current_node.value == value\n        current_node = current_node.next\n\n    return found\n```\n\nThe last method to be implemented is the `empty` method. We can think about this method in separated cases:\n\n- when the list is empty.\n- when we want to remove the head node.\n- when we want to remove a node from the middle or the last one.\n\nFor the empty case is pretty simple. We just check the list with our `is_empty` method.\n\n```python\nif self.is_empty():\n    return\n```\n\nWe can also throw an error exception or just print \"The list is empty\", for example.\n\nFor the case when we want to remove the head node, we check it first and then remove it.\n\n```python\nif self.head.value == value:\n    self.head = self.head.next\n    return\n```\n\nTo remove it, we just need to point the head to the its next node.\n\nThe last case is when we want to remove a node in the middle or the last one. Let's draw it!\n\n![https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3fd50915-6d6b-43ee-9032-b0c85533d11d/20200202_201216.jpg](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/3fd50915-6d6b-43ee-9032-b0c85533d11d/20200202_201216.jpg)\n\nFor this algorithm, what we want is to get the previous node of the node to be removed and point to the next node of the node to be removed. So we need to have the previous node in each iteration. This is the fundamental part of our algorithm.\n\n```python\nwhile current_node.next is not None:\n    if current_node.next.value == value:\n        current_node.next = current_node.next.next\n        return\n\n    current_node = current_node.next\n```\n\nThis is the algorithm.\n\nWe will iterate through the list while the current node's next is not a `None` value. Why? Because we want to compare the next node value. Not the current one.\n\n```python\nif current_node.next.value == value:\n```\n\nThis the logic we are searching for. Does the current node's next value is the value we want to remove?\n\nIf it is `True`, we basically remove the current node's next node by pointing the `next` to the `next.next`, and returning the function.\n\nIf it is `False`, we keep iterating until we find the value we want or when we finish the entire list.\n\nJoining all the parts, we have:\n\n```python\ndef remove(self, value):\n    if self.is_empty():\n        return\n\n    if self.head.value == value:\n        self.head = self.head.next\n        return\n\n    current_node = self.head\n\n    while current_node.next is not None:\n        if current_node.next.value == value:\n            current_node.next = current_node.next.next\n            return\n\n        current_node = current_node.next\n```\n\n## The Linked List class\n\nJoining all the parts we talked about and implemented, we have:\n\n```python\nclass Node:\n    def __init__(self, value, next=None):\n        self.value = value\n        self.next = next\n\nclass LinkedList:\n    def __init__(self):\n        self.head = None\n\n    def append(self, value):\n        if self.is_empty():\n            self.head = Node(value)\n            return\n\n        current_node = self.head\n\n        while current_node.next is not None:\n            current_node = current_node.next\n\n        current_node.next = Node(value)\n\n    def prepend(self, value):\n        self.head = Node(value, self.head)\n\n    def remove(self, value):\n        if self.is_empty():\n            return\n\n        if self.head.value == value:\n            self.head = self.head.next\n            return\n\n        current_node = self.head\n\n        while current_node.next is not None:\n            if current_node.next.value == value:\n                current_node.next = current_node.next.next\n                return\n\n            current_node = current_node.next\n\n    def search(self, value):\n        found = False\n        current_node = self.head\n\n        while not found and current_node is not None:\n            found = current_node.value == value\n            current_node = current_node.next\n\n        return found\n\n    def is_empty(self):\n        return self.head is None\n\n    def size(self):\n        list_length = 0\n        current_node = self.head\n\n        while current_node is not None:\n            list_length += 1\n            current_node = current_node.next\n\n        return list_length\n```\n\n## Let's test it!\n\nI basically created three helper functions to help us to test our linked list.\n\n```python\ndef print_all(linked_list):\n    print('All values:', end=' ')\n    current_node = linked_list.head\n\n    while current_node is not None:\n        print(current_node.value, end=' ')\n        current_node = current_node.next\n\n    print()\n\ndef print_found(linked_list, value):\n    found = linked_list.search(value)\n    print('For value:', value, '-->', 'Found:', found, )\n\ndef print_size(linked_list):\n    list_length = linked_list.size()\n    print('Size:', list_length)\n```\n\nThey will print all the values, the found value, and the size of the list. So first we instantiate our list:\n\n```python\nlinked_list = LinkedList()\n```\n\nLet's see what we get when we try to print all the values and its size:\n\n```python\nprint_all(linked_list)\nprint_size(linked_list)  # 0\n```\n\nYes, no values and `0` elements.\n\nWe can append a node with value `1`, print the values, and see its size.\n\n```python\nlinked_list.append(1)\nprint_all(linked_list)  # 1\nprint_size(linked_list)  # 1\n```\n\nIf we try to remove `0`, the `1` is still there. But if we remove `1`, we have no nodes anymore. The first line is cool: it doesn't break if we try to remove an element that doesn't exist in the linked list.\n\n```python\nlinked_list.remove(0)\nprint_all(linked_list)  # 1\nlinked_list.remove(1)\nprint_all(linked_list)\n```\n\nAdding new nodes and printing them:\n\n```python\nlinked_list.append(2)\nlinked_list.append(3)\nprint_all(linked_list)  # 2 3\nprint_size(linked_list)  # 2\n```\n\nLet's try out `found` method:\n\n```python\nprint_found(linked_list, 1)  # False\nprint_found(linked_list, 2)  # True\nprint_found(linked_list, 3)  # True\n```\n\nThat's cool! We really don't have the `1` node, but we have the `2` and the `3`.\n\nNow printing after removing each node:\n\n```python\nlinked_list.remove(1)\nprint_all(linked_list)  # 2 3\nlinked_list.remove(2)\nprint_all(linked_list)  # 3\nlinked_list.remove(3)\nprint_all(linked_list)\n```\n\nLet's try out `prepend` method:\n\n```python\nlinked_list.prepend(4)\nlinked_list.prepend(3)\nlinked_list.prepend(2)\nlinked_list.prepend(1)\nprint_all(linked_list)  # 1 2 3 4\n```\n\nAnd remove the `3`.\n\n```python\nlinked_list.remove(3)\nprint_all(linked_list)  # 1 2 4\n```\n\nWorks fine!\n\n## Resources\n\n- [Learning Python: From Zero to Hero](http://leandrotk.github.io/tk/2017/09/learning-python-from-zero-to-hero/index.html)\n- [One Month - Learn Python](https://mbsy.co/lG6tv)\n- [Big-O Notation For Coding Interviews and Beyond](https://www.educative.io/courses/big-o-notation-for-interviews-and-beyond?aff=x8bV)\n- [Learn Python from Scratch](https://www.educative.io/courses/learn-python-from-scratch?aff=x8bV)\n- [Learn Object-Oriented Programming in Python](https://www.educative.io/courses/learn-object-oriented-programming-in-python?aff=x8bV)\n- [Data Structures in Python: An Interview Refresher](https://www.educative.io/courses/data-structures-in-python-an-interview-refresher?aff=x8bV)\n- [Data Structures and Algorithms in Python](https://www.amazon.com/Structures-Algorithms-Python-Michael-Goodrich/dp/1118290275))\n- [HackerRank Linked List](https://www.youtube.com/watch?v=njTh_OwMljA&feature=youtu.be)\n- [Linked List Part 1](https://medium.com/basecs/whats-a-linked-list-anyway-part-1-d8b7e6508b9d)\n- [Linked List Part 2](https://medium.com/basecs/whats-a-linked-list-anyway-part-2-131d96f71996)\n- [Data Structures in Python: Circular Linked Lists - Remove Node](https://www.youtube.com/watch?v=op42w-5o3nE)\n- [Data Structures: Linked Lists](https://www.youtube.com/watch?v=njTh_OwMljA&feature=youtu.be)\n",
  },
  {
    url: '/series/data-structures/queue-data-structure',
    title: 'Queue Data Structure',
    content:
      "The queue data structure is a collection of items that follow the `first-in, first out` principle. The first added element will be the first element to be removed from the queue. So, elements are added in the back and removed from the front.\n\nAn analogy would be a simple line of people waiting for the next train. In the software engineering context, an example is a web server receiving and responding requests.\n\nThe main API methods are `enqueue` (add) and `dequeue` (remove). But we can also add other methods as part of the API implementation: `size`, `front`, `back`, and `is_empty`.\n\n---\n\nWe can create a `Queue` class as a wrapper and use the Python list to store the queue data. This class will have the implementation of the `enqueue`, `dequeue`, `size`, `front`, `back`, and `is_empty` methods.\n\nThe first step is to create a class definition and how we are gone store our items.\n\n```python\nclass Queue:\n    def __init__(self):\n        self.items = []\n```\n\nThis is basically what we need for now. Just a class and its constructor. When the instance is created, it will have the `items` list to store the queue items.\n\nFor the `enqueue` method, we just need to use the list `append` method to add new items. The new items will be placed in the last index of this `items` list. So the front item from the queue will always be the first item.\n\n```python\ndef enqueue(self, item):\n    self.items.append(item)\n```\n\nIt receives the new item and appends it to the list.\n\nThe `size` method only counts the number of the queue items by using the `len` function.\n\n```python\ndef size(self):\n    return len(self.items)\n```\n\nThe idea of the `is_empty` method is to verify if the list has or not items in it. If it has, returns `False`. Otherwise, `True`. To count the number of items in the queue, we can simply use the `size` method already implemented.\n\n```python\ndef is_empty(self):\n    return self.size() == 0\n```\n\nThe `pop` method from the list data structure can also be used to dequeue the item from the queue. It dequeues the first element as it is expected for the queue. The first added item.\n\n```python\ndef dequeue(self):\n    return self.items.pop(0)\n```\n\nBut we need to handle the queue emptiness. For an empty list, the `pop` method raises an exception `IndexError: poop from empty list`. So we can create an exception class to handle this issue.\n\n```python\nclass Emptiness(Exception):\n    pass\n```\n\nAnd uses it when the list is empty:\n\n```python\ndef dequeue(self):\n    if self.is_empty():\n        raise Emptiness('The Queue is empty')\n\n    return self.items.dequeue()\n```\n\nIf it is empty, we raise this exception. Otherwise, we can dequeue the front item from the queue.\n\nWe use this same emptiness strategy for the `front` method:\n\n```python\ndef front(self):\n    if self.is_empty():\n        raise Emptiness('The Queue is empty')\n\n    return self.items[0]\n```\n\nIf it has at least one item, we get the front, the first added item in the queue.\n\nAlso the same emptiness strategy for the `back` method:\n\n```python\ndef back(self):\n    if self.is_empty():\n        raise Emptiness('The Queue is empty')\n\n    return self.items[-1]\n```\n\nIf it has at least one item, we get the back item, the last added item in the queue.\n\n## Queue usage\n\nI created some helper functions to help test the queue usage.\n\n```python\ndef test_enqueue(queue, item):\n    queue.enqueue(item)\n    print(queue.items)\n\n\ndef test_dequeue(queue):\n    queue.dequeue()\n    print(queue.items)\n\n\ndef test_emptiness(queue):\n    is_empty = queue.is_empty()\n    print(is_empty)\n\n\ndef test_size(queue):\n    size = queue.size()\n    print(size)\n\n\ndef test_front(queue):\n    front = queue.front()\n    print(front)\n\n\ndef test_back(queue):\n    back = queue.back()\n    print(back)\n```\n\nThey basically call a queue method and print the expected result from the method call.\n\nThe usage will be something like:\n\n```python\nqueue = Queue()\n\ntest_emptiness(queue)  # True\ntest_size(queue)  # 0\n\ntest_enqueue(queue, 1)  # [1]\ntest_enqueue(queue, 2)  # [1, 2]\ntest_enqueue(queue, 3)  # [1, 2, 3]\ntest_enqueue(queue, 4)  # [1, 2, 3, 4]\ntest_enqueue(queue, 5)  # [1, 2, 3, 4, 5]\n\ntest_emptiness(queue)  # False\ntest_size(queue)  # 5\ntest_front(queue)  # 1\ntest_back(queue)  # 5\n\ntest_dequeue(queue)  # [2, 3, 4, 5]\ntest_dequeue(queue)  # [3, 4, 5]\ntest_dequeue(queue)  # [4, 5]\ntest_dequeue(queue)  # [5]\n\ntest_emptiness(queue)  # False\ntest_size(queue)  # 1\ntest_front(queue)  # 5\ntest_back(queue)  # 5\n\ntest_dequeue(queue)  # []\n\ntest_emptiness(queue)  # True\ntest_size(queue)  # 0\n```\n\nWe first instantiate a new queue from the `Queue` class.\n\n- So now we can verify its emptiness: yes, it is!\n- Verify size: 0.\n- Enqueue 5 new items to the queue: `[1, 2, 3, 4, 5]`.\n- Verify emptiness again: not anymore!\n- Verify size: 5.\n- Get the front element: 1 because it was the first added item.\n- Get the back element: 5 because it was the last added item.\n- Dequeue 4 items: 1, 2, 3, and 4.\n- Verify emptiness: it is not empty yet!\n- The size is 1 and the back and front are the same number: 5\n- Dequeue the remaining item.\n- Verify emptiness: it is empty now!\n- Size is back to 0.\n\n---\n\n## Another way of testing it\n\nEnqueue 5 new items:\n\n```python\nqueue = Queue()\nqueue.enqueue(1)\nqueue.enqueue(2)\nqueue.enqueue(3)\nqueue.enqueue(4)\nqueue.enqueue(5)\n```\n\nLoop through the items and print each one.\n\n```python\nfor item in queue.items:\n    print(item)\n```\n\nTest front and back.\n\n```python\ntest_front(queue) # 1\ntest_back(queue) # 5\n```\n\nDequeue all.\n\n```python\nwhile not queue.is_empty():\n    queue.dequeue()\n```\n\nTest size.\n\n```python\ntest_size(queue) # 0\n```\n\n---\n\n## Runtime and Space complexities\n\nNow about space and runtime complexities for each method implemented.\n\nThe space is pretty simple. It's a list, so it's `O(n)` where `n` is the current number of items in the stack.\n\nThe runtime for each method is `O(1)`, constant time.\n\n---\n\n## Resources\n\n- [Learning Python: From Zero to Hero](http://leandrotk.github.io/tk/2017/09/learning-python-from-zero-to-hero/index.html)\n- [One Month - Learn Python](https://mbsy.co/lG6tv)\n- [Big-O Notation For Coding Interviews and Beyond](https://www.educative.io/courses/big-o-notation-for-interviews-and-beyond?aff=x8bV)\n- [Learn Python from Scratch](https://www.educative.io/courses/learn-python-from-scratch?aff=x8bV)\n- [Learn Object-Oriented Programming in Python](https://www.educative.io/courses/learn-object-oriented-programming-in-python?aff=x8bV)\n- [Data Structures in Python: An Interview Refresher](https://www.educative.io/courses/data-structures-in-python-an-interview-refresher?aff=x8bV)\n- [Data Structures and Algorithms in Python](https://www.amazon.com/Structures-Algorithms-Python-Michael-Goodrich/dp/1118290275))\n- [HackerRank Linked List](https://www.youtube.com/watch?v=njTh_OwMljA&feature=youtu.be)\n- [Linked List Part 1](https://medium.com/basecs/whats-a-linked-list-anyway-part-1-d8b7e6508b9d)\n- [Linked List Part 2](https://medium.com/basecs/whats-a-linked-list-anyway-part-2-131d96f71996)\n- [Data Structures in Python: Circular Linked Lists - Remove Node](https://www.youtube.com/watch?v=op42w-5o3nE)\n- [Data Structures: Linked Lists](https://www.youtube.com/watch?v=njTh_OwMljA&feature=youtu.be)\n",
  },
  {
    url: '/series/data-structures/stack-data-structure',
    title: 'Stack Data Structure',
    content:
      "The stack is a collection of items that follows the `last-in, first-out` concept.\n\nFor the addition of new items, the stack only allows it to push the new item to the top. When it comes to removing items, it only allows us to remove the last added item, or commonly known as the top item.\n\nThe main API methods are `push` (add) and `pop` (remove). But we can also add other methods as part of the API implementation: `size`, `top`, and `is_empty`.\n\n## Stack Implementation\n\nWe can create a `Stack` class as a wrapper and use the Python list to store the stack data. This class will have the implementation of the `push`, `pop`, `size`, `top`, and `is_empty` methods.\n\nThe first step is to create a class definition and how we are gone store our items.\n\n```python\nclass Stack:\n    def __init__(self):\n        self.items = []\n```\n\nThis is basically what we need for now. Just a class and its constructor. When the instance is created, it will have the `items` list to store the stack items.\n\nFor the `push` method, we just need to use the list `append` method to add new items. The new items will be placed in the last index of this `items` list. So the top item from the stack will always be the last item.\n\n```python\ndef push(self, item):\n    self.items.append(item)\n```\n\nIt receives the new item and appends it to the list.\n\nThe `size` method only counts the number of the stack items by using the `len` function.\n\n```python\ndef size(self):\n    return len(self.items)\n```\n\nThe idea of the `is_empty` method is to verify if the list has or not items in it. If it has, returns `False`. Otherwise, `True`. To count the number of items in the stack, we can simply use the `size` method already implemented.\n\n```python\ndef is_empty(self):\n    return self.size() == 0\n```\n\nThe `pop` method from the list data structure can also be used to pop the item from the stack. It pops the last element as it is expected for the stack. The last added item.\n\n```python\ndef pop(self):\n    return self.items.pop()\n```\n\nBut we need to handle the stack emptiness. For an empty list, the `pop` method raises an exception `IndexError: pop from empty list`. So we can create an exception class to handle this issue.\n\n```python\nclass Emptiness(Exception):\n    pass\n```\n\nAnd uses it when the list is empty:\n\n```python\ndef pop(self):\n    if self.is_empty():\n        raise Emptiness('The Stack is empty')\n\n    return self.items.pop()\n```\n\nIf it is empty, we raise this exception. Otherwise, we can pop the top item from the stack.\n\nWe use this same emptiness strategy for the `top` method:\n\n```python\ndef top(self):\n    if self.is_empty():\n        raise Emptiness('The Stack is empty')\n\n    return self.items[-1]\n```\n\nIf it has at least one item, we get the top, the last added item in the stack.\n\n## Stack usage\n\nThe usage would be something like:\n\n```python\nstack = Stack()\n\nstack.is_empty() # True\n\nstack.push(1) # [1]\nstack.push(2) # [1, 2]\nstack.push(3) # [1, 2, 3]\nstack.push(4) # [1, 2, 3, 4]\nstack.push(5) # [1, 2, 3, 4, 5]\n\nstack.is_empty() # False\nstack.top() # 5\n\nstack.pop() # 5\nstack.pop() # 4\nstack.pop() # 3\nstack.pop() # 2\n\nstack.is_empty() # False\n\nstack.pop() # 1\n\nstack.is_empty() # True\n```\n\nWe first instantiate a new stack from the `Stack` class.\n\n- Verify emptiness: yes, it is!\n- Add 5 new items to the stack: `[1, 2, 3, 4, 5]`.\n- Verify emptiness: not anymore!\n- Get the top element: 5 because it was the last added item.\n- Remove 4 items: 5, 4, 3, and 2.\n- Verify emptiness: empty yet!\n- Remove the remaining item.\n- Verify emptiness: it is empty now!\n\n---\n\n## Runtime and Space complexities\n\nNow about space and runtime complexities for each method implemented.\n\nThe space is pretty simple. It's a list, so it's `O(n)` where `n` is the current number of items in the stack.\n\nThe runtime for each method is `O(1)`, constant time.\n\n---\n\n## Reversing a list\n\nWe can use the stack data structure for a diverse number of algorithms. An example is to reverse the items from a list.\n\nWe want to reverse a list of books, a bookshelf.\n\n```python\ndef reverse(bookshelf):\n    stack = Stack()\n\n    for book in bookshelf:\n        stack.push(book)\n\n    reversed_bookshelf = []\n\n    while not stack.is_empty():\n        reversed_bookshelf.append(stack.pop())\n\n    return reversed_bookshelf\n```\n\n- Create a stack instance\n- Push each list item to the stack\n- Create an empty reversed list\n- Pop each item until the stack is empty\n- For each popped item, append it to the reversed list\n- Return the reversed list\n\nThe idea is to make the last list item the first to be popped from the stack.\n\nThe function usage would be something like:\n\n```python\nbookshelf = [\n    'Harry Potter',\n    'Atomic Habits',\n    'Leonardo da Vinci',\n    'Sapiens',\n    'Peak'\n]\n\nreversed_bookshelf = reverse(bookshelf)\n\nprint(reversed_bookshelf) # ['Peak', 'Sapiens', 'Leonardo da Vinci', 'Atomic Habits', 'Harry Potter']\n```\n\n---\n\n## Other examples\n\nWe can also implement the stack concept in a `undo` command. Imagine our text editor. For each document change, we store the new document in the stack. If we want to `undo` the change, we just need to pop the last change and stay with the previous state of the document.\n\nWeb Browsers can also use stacks to store the visited website. When the user visits a new website, it pushes the new URL to the stack. When the user goes back, using the \"back\" button, it pops the last visited website and uses the previous URL.\n\n---\n\n## Resources\n\n- [Learning Python: From Zero to Hero](http://leandrotk.github.io/tk/2017/09/learning-python-from-zero-to-hero/index.html)\n- [One Month - Learn Python](https://mbsy.co/lG6tv)\n- [Big-O Notation For Coding Interviews and Beyond](https://www.educative.io/courses/big-o-notation-for-interviews-and-beyond?aff=x8bV)\n- [Learn Python from Scratch](https://www.educative.io/courses/learn-python-from-scratch?aff=x8bV)\n- [Learn Object-Oriented Programming in Python](https://www.educative.io/courses/learn-object-oriented-programming-in-python?aff=x8bV)\n- [Data Structures in Python: An Interview Refresher](https://www.educative.io/courses/data-structures-in-python-an-interview-refresher?aff=x8bV)\n- [Stack Data Structure](https://www.geeksforgeeks.org/stack-data-structure-introduction-program/)\n- [Data Structures and Algorithms in Python](https://www.amazon.com/Structures-Algorithms-Python-Michael-Goodrich/dp/1118290275)\n- [Basics of Stacks](https://www.hackerearth.com/pt-br/practice/data-structures/stacks/basics-of-stacks/tutorial/)\n- [CMU Stacks](https://www.cs.cmu.edu/~adamchik/15-121/lectures/Stacks%20and%20Queues/Stacks%20and%20Queues.html)\n- [How to Implement a Python Stack](https://realpython.com/how-to-implement-python-stack/)\n",
  },
  {
    url: '/series/data-structures/tree-data-structure',
    title: 'Tree Data Structure',
    content:
      "When you first learn to code, it’s common to learn arrays as the “main data structure.”\n\nEventually, you will learn about `hash tables` too. If you are pursuing a Computer Science degree, you have to take a class on data structure. You will also learn about `linked lists`, `queues`, and `stacks`. Those data structures are called “linear” data structures because they all have a logical start and a logical end.\n\nWhen we start learning about `trees` and `graphs`, it can get really confusing. We don’t store data in a linear way. Both data structures store data in a specific way.\n\nThis post is to help you better understand the Tree Data Structure and to clarify any confusion you may have about it.\n\nIn this article, we will learn:\n\n- What is a tree\n\n- Examples of trees\n\n- Its terminology and how it works\n\n- How to implement tree structures in code.\n\nLet’s start this learning journey. :)\n\n### Definition\n\nWhen starting out programming, it is common to understand better the linear data structures than data structures like trees and graphs.\n\nTrees are well-known as a non-linear data structure. They don’t store data in a linear way. They organize data hierarchically.\n\n### Let’s dive into real life examples!\n\nWhat do I mean when I say in a hierarchical way?\n\nImagine a family tree with relationships from all generation: grandparents, parents, children, siblings, etc. We commonly organize family trees hierarchically.\n\n![](https://cdn-images-1.medium.com/max/1600/1*MasdC5DmucEU2abIXQe45Q.jpeg)\n\nThe above drawing is is my family tree. `Tossico, Akikazu, Hitomi,` and `Takemi` are my grandparents.\n\n`Toshiaki` and `Juliana `are my parents.\n\n`TK, Yuji, Bruno`, and `Kaio` are the children of my parents (me and my brothers).\n\nAn organization’s structure is another example of a hierarchy.\n\n![](https://cdn-images-1.medium.com/max/1600/1*GsBCmW5E1GuJ3MpH3Zz0Ew.jpeg)\n\nIn HTML, the Document Object Model (DOM) works as a tree.\n\n![](https://cdn-images-1.medium.com/max/1600/1*dLXUdR4NuIZG8GJdu_Cinw.jpeg)\n\nThe `HTML` tag contains other tags. We have a `head` tag and a `body` tag. Those tags contains specific elements. The `head` tag has `meta` and `title` tags. The `body` tag has elements that show in the user interface, for example, `h1`, `a`, `li`, etc.\n\n### A technical definition\n\nA `tree` is a collection of entities called `nodes`. Nodes are connected by `edges`. Each `node` contains a `value` or `data`, and it may or may not have a `child node` .\n\n![](https://cdn-images-1.medium.com/max/1600/1*3WN7tIQ-kNBQmY9MgvTuOA.jpeg)\n\nThe `first node` of the `tree` is called the `root`. If this `root node` is connected by another `node`, the `root` is then a `parent node` and the connected `node` is a `child`.\n\n![](https://cdn-images-1.medium.com/max/1600/1*9AtR3bhhlMJxQlaUVEQgrw.jpeg)\n\nAll` Tree nodes` are connected by links called `edges`. It’s an important part of `trees`, because it’s manages the relationship between `nodes`.\n\n![](https://cdn-images-1.medium.com/max/1600/1*j5qKwIxKcEjoxy88EOc1Rg.jpeg)\n\n`Leaves` are the last `nodes` on a `tree.` They are nodes without children. Like real trees, we have the `root`, `branches`, and finally the `leaves`.\n\n![](https://cdn-images-1.medium.com/max/1600/1*c9_5uMUsIy4Q3OA7Q8bJiw.jpeg)\n\nOther important concepts to understand are `height` and `depth`.\n\nThe `height` of a `tree` is the length of the longest path to a `leaf`.\n\nThe `depth` of a `node` is the length of the path to its `root`.\n\n### Terminology summary\n\n- **Root **is the topmost `node` of the `tree`\n\n- **Edge **is the link between two `nodes`\n\n- **Child **is a `node` that has a `parent node`\n\n- **Parent **is a `node` that has an `edge` to a `child node`\n\n- **Leaf **is a `node` that does not have a `child node` in the `tree`\n\n- **Height **is the length of the longest path to a `leaf`\n\n- **Depth **is the length of the path to its `root`\n\n### Binary trees\n\nNow we will discuss a specific type of `tree`. We call it the`binary tree`.\n\n> “In computer science, a binary tree is a tree data structure in which each node has at the most two children, which are referred to as the left child and the right child.” — Wikipedia\n\nSo let’s look at an example of a `binary tree`.\n\n![](https://cdn-images-1.medium.com/max/1600/1*ofbwuz4inpf2OlB-l9gtHw.jpeg)\n\n### Let’s code a binary tree\n\nThe first thing we need to keep in mind when we implement a `binary tree` is that it is a collection of `nodes`. Each `node` has three attributes: `value`, `left_child`, and `right_child`.\n\nHow do we implement a simple `binary tree` that initializes with these three properties?\n\nLet’s take a look.\n\n```python\nclass BinaryTree:\n    def __init__(self, value):\n        self.value = value\n        self.left_child = None\n        self.right_child = None\n```\n\nHere it is. Our `binary tree` class.\n\nWhen we instantiate an object, we pass the `value` (the data of the node) as a parameter. Look at the `left_child` and the `right_child`. Both are set to `None`.\n\nWhy?\n\nBecause when we create our `node`, it doesn’t have any children. We just have the `node data`.\n\nLet’s test it:\n\n```python\ntree = BinaryTree('a')\nprint(tree.value) # a\nprint(tree.left_child) # None\nprint(tree.right_child) # None\n```\n\nThat’s it.\n\nWe can pass the `string` ‘`a`’ as the `value` to our `Binary Tree node`. If we print the `value`, `left_child`, and `right_child`, we can see the values.\n\nLet’s go to the insertion part. What do we need to do here?\n\nWe will implement a method to insert a new `node` to the `right` and to the `left`.\n\nHere are the rules:\n\n- If the current `node` doesn’t have a `left child`, we just create a new `node`and set it to the current node’s `left_child`.\n\n- If it does have the `left child`, we create a new node and put it in the current `left child`’s place. Allocate this `left child node` to the new node’s `left child`.\n\nLet’s draw it out. :)\n\n![](https://cdn-images-1.medium.com/max/1600/1*ofbwuz4inpf2OlB-l9gtHw.jpeg)\n\nHere’s the code:\n\n```python\ndef insert_left(self, value):\n    if self.left_child == None:\n        self.left_child = BinaryTree(value)\n    else:\n        new_node = BinaryTree(value)\n        new_node.left_child = self.left_child\n        self.left_child = new_node\n```\n\nAgain, if the current node doesn’t have a `left child`, we just create a new node and set it to the current node’s `left_child`. Or else we create a new node and put it in the current `left child`’s place. Allocate this `left child node` to the new node’s `left child`.\n\nAnd we do the same thing to insert a `right child node`.\n\n```python\ndef insert_right(self, value):\n    if self.right_child == None:\n        self.right_child = BinaryTree(value)\n    else:\n        new_node = BinaryTree(value)\n        new_node.right_child = self.right_child\n        self.right_child = new_node\n```\n\nDone. :)\n\nBut not entirely. We still need to test it.\n\nLet’s build the following`tree`:\n\n![](https://cdn-images-1.medium.com/max/1600/1*V_EUgNXVc8Wy9H1-JoqT3g.jpeg)\n\nTo summarize the illustration of this tree:\n\n- `a` `node` will be the `root` of our `binary Tree`\n\n- `a` `left child` is `b` `node`\n\n- `a` `right child` is `c` `node`\n\n- `b` `right child` is `d` `node` (`b` `node` doesn’t have a `left child`)\n\n- `c` `left child` is `e` `node`\n\n- `c` `right child` is `f` `node`\n\n- both `e` and `f` `nodes` do not have children\n\nSo here is the code for the `tree`:\n\n```python\na_node = BinaryTree('a')\na_node.insert_left('b')\na_node.insert_right('c')\n\nb_node = a_node.left_child\nb_node.insert_right('d')\n\nc_node = a_node.right_child\nc_node.insert_left('e')\nc_node.insert_right('f')\n\nd_node = b_node.right_child\ne_node = c_node.left_child\nf_node = c_node.right_child\n\nprint(a_node.value) # a\nprint(b_node.value) # b\nprint(c_node.value) # c\nprint(d_node.value) # d\nprint(e_node.value) # e\nprint(f_node.value) # f\n```\n\nInsertion is done.\n\nNow we have to think about `tree` traversal.\n\nWe have **two options** here: **Depth-First Search (DFS)** and **Breadth-First Search (BFS)**.\n\n- [Wikipedia](https://en.wikipedia.org/wiki/Depth-first_search)\n\n- [Wikipedia](https://en.wikipedia.org/wiki/Breadth-first_search)\n\nSo let’s dive into each tree traversal type.\n\n#### Depth-First Search (DFS)\n\n**DFS** explores a path all the way to a leaf before **backtracking** and exploring another path. Let’s take a look at an example with this type of traversal.\n\n![](https://cdn-images-1.medium.com/max/1600/1*-sCuUx3R9e1ougu2pGdThg.jpeg)\n\nThe result for this algorithm will be 1–2–3–4–5–6–7.\n\nWhy?\n\nLet’s break it down.\n\n2. Go to the `left child` (2). Print it.\n\n3. Then go to the `left child` (3). Print it. (This `node` doesn’t have any children)\n\n4. Backtrack and go the `right child` (4). Print it. (This `node` doesn’t have any children)\n\n5. Backtrack to the `root` `node` and go to the `right child` (5). Print it.\n\n6. Go to the `left child` (6). Print it. (This `node` doesn’t have any children)\n\n7. Backtrack and go to the `right child` (7). Print it. (This `node` doesn’t have any children)\n\n8. Done.\n\nWhen we go deep to the leaf and backtrack, this is called **DFS** algorithm.\n\nNow that we are familiar with this traversal algorithm, we will discuss types of **DFS**: `pre-order`, `in-order`, and `post-order`.\n\n#### Pre-order\n\nThis is exactly what we did in the above example.\n\n```python\ndef pre_order(self):\n    print(self.value)\n\n    if self.left_child:\n        self.left_child.pre_order()\n\n    if self.right_child:\n        self.right_child.pre_order()\n```\n\n#### In-order\n\n![](https://cdn-images-1.medium.com/max/1600/1*-sCuUx3R9e1ougu2pGdThg.jpeg)\n\nThe result of the in-order algorithm for this `tree` example is 3–2–4–1–6–5–7.\n\nThe left first, the middle second, and the right last.\n\nNow let’s code it.\n\n```python\ndef in_order(self):\n    if self.left_child:\n        self.left_child.in_order()\n\n    print(self.value)\n\n    if self.right_child:\n        self.right_child.in_order()\n```\n\n#### Post-order\n\n![](https://cdn-images-1.medium.com/max/1600/1*-sCuUx3R9e1ougu2pGdThg.jpeg)\n\nThe result of the `post order` algorithm for this `tree` example is 3–4–2–6–7–5–1.\n\nThe left first, the right second, and the middle last.\n\nLet’s code this.\n\n```python\ndef post_order(self):\n    if self.left_child:\n        self.left_child.post_order()\n\n    if self.right_child:\n        self.right_child.post_order()\n\n    print(self.value)\n```\n\n#### Breadth-First Search (BFS)\n\n**BFS** algorithm traverses the `tree` level by level and depth by depth.\n\n![](https://cdn-images-1.medium.com/max/1600/1*ZNxp_NkRZLCeak85rreebA.jpeg)\n\nHere is an example that helps to better explain this algorithm:\n\n![](https://cdn-images-1.medium.com/max/1600/1*-sCuUx3R9e1ougu2pGdThg.jpeg)\n\nSo we traverse level by level. In this example, the result is 1–2–5–3–4–6–7.\n\n- Level/Depth 0: only `node` with value 1\n\n- Level/Depth 1: `nodes` with values 2 and 5\n\n- Level/Depth 2: `nodes` with values 3, 4, 6, and 7\n\nNow let’s code it.\n\n```python\ndef bfs(self):\n    queue = Queue()\n    queue.put(self)\n\n    while not queue.empty():\n        current_node = queue.get()\n        print(current_node.value)\n\n        if current_node.left_child:\n            queue.put(current_node.left_child)\n\n        if current_node.right_child:\n            queue.put(current_node.right_child)\n```\n\nTo implement a **BFS** algorithm, we use the `queue` data structure to help.\n\nHow does it work?\n\nHere’s the explanation.\n\n![](https://cdn-images-1.medium.com/max/1600/1*A4yGfEoiqcZ-COvAfr2CWQ.jpeg)\n\n### Binary Search tree\n\n> “A Binary Search Tree is sometimes called ordered or sorted binary trees, and it keeps its values in sorted order, so that lookup and other operations can use the principle of binary search” — Wikipedia\n\nAn important property of a `Binary Search Tree` is that the value of a `Binary Search Tree` `node`is larger than the value of the offspring of its `left child`, but smaller than the value of the offspring of its `right child.`”\n\n![](https://cdn-images-1.medium.com/max/1600/1*mslH9VtVUN9Hs983XxUN5A.jpeg)\n\nHere is a breakdown of the above illustration:\n\n- **A **is inverted. The `subtree` 7–5–8–6 needs to be on the right side, and the `subtree` 2–1–3 needs to be on the left.\n\n- **B **is the only correct option. It satisfies the `Binary Search Tree` property.\n\n- **C **has one problem: the `node` with the value 4. It needs to be on the left side of the `root` because it is smaller than 5.\n\n### Let’s code a Binary Search Tree!\n\nNow it’s time to code!\n\nWhat will we see here? We will insert new nodes, search for a value, delete nodes, and the balance of the `tree`.\n\nLet’s start.\n\n#### Insertion: adding new nodes to our tree\n\nImagine that we have an empty `tree` and we want to add new `nodes` with the following values in this order: 50, 76, 21, 4, 32, 100, 64, 52.\n\nThe first thing we need to know is if 50 is the `root` of our tree.\n\n![](https://cdn-images-1.medium.com/max/1600/1*fxSlTwgQSN_DlzfEmcxqQg.jpeg)\n\nWe can now start inserting `node` by `node`.\n\n- 76 is greater than 50, so insert 76 on the right side.\n\n- 21 is smaller than 50, so insert 21 on the left side.\n\n- 4 is smaller than 50. `Node` with value 50 has a `left child` 21. Since 4 is smaller than 21, insert it on the left side of this `node`.\n\n- 32 is smaller than 50. `Node` with value 50 has a `left child` 21. Since 32 is greater than 21, insert 32 on the right side of this `node`.\n\n- 100 is greater than 50. `Node` with value 50 has a `right child` 76. Since 100 is greater than 76, insert 100 on the right side of this `node`.\n\n- 64 is greater than 50. `Node` with value 50 has a `right child `76. Since 64 is smaller than 76, insert 64 on the left side of this `node`.\n\n- 52 is greater than 50. `Node` with value 50 has a `right child `76. Since 52 is smaller than 76, `node` with value 76 has a `left child` 64. 52 is smaller than 64, so insert 54 on the left side of this `node`.\n\n![](https://cdn-images-1.medium.com/max/1600/1*LlLDNx7wgJfH6VAGnyAbIQ.jpeg)\n\nDo you notice a pattern here?\n\nLet’s break it down.\n\nNow let’s code it.\n\n```python\nclass BinarySearchTree:\n    def __init__(self, value):\n        self.value = value\n        self.left_child = None\n        self.right_child = None\n\n    def insert_node(self, value):\n        if value <= self.value and self.left_child:\n            self.left_child.insert_node(value)\n        elif value <= self.value:\n            self.left_child = BinarySearchTree(value)\n        elif value > self.value and self.right_child:\n            self.right_child.insert_node(value)\n        else:\n            self.right_child = BinarySearchTree(value)\n```\n\nIt seems very simple.\n\nThe powerful part of this algorithm is the recursion part, which is on line 9 and line 13. Both lines of code call the `insert_node` method, and use it for its `left` and `right` `children`, respectively. Lines `11` and `15` are the ones that do the insertion for each `child`.\n\n#### Let’s search for the node value… Or not…\n\nThe algorithm that we will build now is about doing searches. For a given value (integer number), we will say if our `Binary Search Tree` does or does not have that value.\n\nAn important item to note is how we defined the tree **insertion algorithm**. First we have our `root` `node`. All the left `subtree` `nodes `will have smaller values than the `root` `node`. And all the right `subtree` `nodes `will have values greater than the `root` `node`.\n\nLet’s take a look at an example.\n\nImagine that we have this `tree`.\n\n![](https://cdn-images-1.medium.com/max/1600/1*LlLDNx7wgJfH6VAGnyAbIQ.jpeg)\n\nNow we want to know if we have a node based on value 52.\n\n![](https://cdn-images-1.medium.com/max/1600/1*NwvTrpKiJWb1u2yAY-nnAA.jpeg)\n\nLet’s break it down.\n\nNow let’s code it.\n\n```python\nclass BinarySearchTree:\n    def __init__(self, value):\n        self.value = value\n        self.left_child = None\n        self.right_child = None\n\n    def find_node(self, value):\n        if value < self.value and self.left_child:\n            return self.left_child.find_node(value)\n        if value > self.value and self.right_child:\n            return self.right_child.find_node(value)\n\n        return value == self.value\n```\n\nLet’s beak down the code:\n\n- Lines 8 and 9 fall under rule #1.\n\n- Lines 10 and 11 fall under rule #2.\n\n- Line 13 falls under rule #3.\n\nHow do we test it?\n\nLet’s create our `Binary Search Tree `by initializing the `root` `node` with the value 15.\n\n```python\nbst = BinarySearchTree(15)\n```\n\nAnd now we will insert many new `nodes`.\n\n```python\nbst.insert_node(10)\nbst.insert_node(8)\nbst.insert_node(12)\nbst.insert_node(20)\nbst.insert_node(17)\nbst.insert_node(25)\nbst.insert_node(19)\n```\n\nFor each inserted `node` , we will test if our `find_node` method really works.\n\n```python\nprint(bst.find_node(15)) # True\nprint(bst.find_node(10)) # True\nprint(bst.find_node(8)) # True\nprint(bst.find_node(12)) # True\nprint(bst.find_node(20)) # True\nprint(bst.find_node(17)) # True\nprint(bst.find_node(25)) # True\nprint(bst.find_node(19)) # True\n```\n\nYeah, it works for these given values! Let’s test for a value that doesn’t exist in our `Binary Search Tree`.\n\n```python\nprint(bst.find_node(0)) # False\n```\n\nOh yeah.\n\nOur search is done.\n\n#### Deletion: removing and organizing\n\nDeletion is a more complex algorithm because we need to handle different cases. For a given value, we need to remove the `node` with this value. Imagine the following scenarios for this `node` : it has no `children`, has a single `child`, or has two `children`.\n\n- **Scenario #1**: A `node` with no `children` (`leaf` `node`).\n\n```python\n#        |50|                              |50|\n#      /      \\                           /    \\\n#    |30|     |70|   (DELETE 20) --->   |30|   |70|\n#   /    \\                                \\\n# |20|   |40|                             |40|\n```\n\nIf the `node` we want to delete has no children, we simply delete it. The algorithm doesn’t need to reorganize the `tree`.\n\n- **Scenario #2**: A `node` with just one child (`left` or `right` child).\n\n```python\n#        |50|                              |50|\n#      /      \\                           /    \\\n#    |30|     |70|   (DELETE 30) --->   |20|   |70|\n#   /\n# |20|\n```\n\nIn this case, our algorithm needs to make the parent of the `node` point to the `child` node. If the `node` is the `left child`, we make the parent of the `left child` point to the `child`. If the `node` is the `right child` of its parent, we make the parent of the `right child` point to the `child`.\n\n- **Scenario #3**: A `node` with two children.\n\n```python\n#        |50|                              |50|\n#      /      \\                           /    \\\n#    |30|     |70|   (DELETE 30) --->   |40|   |70|\n#   /    \\                             /\n# |20|   |40|                        |20|\n```\n\nWhen the `node` has 2 children, we need to find the `node` with the minimum value, starting from the `node`’s`right child`. We will put this `node` with minimum value in the place of the `node` we want to remove.\n\nIt’s time to code.\n\n```python\ndef remove_node(self, value, parent):\n    if value < self.value and self.left_child:\n        return self.left_child.remove_node(value, self)\n    elif value < self.value:\n        return False\n    elif value > self.value and self.right_child:\n        return self.right_child.remove_node(value, self)\n    elif value > self.value:\n        return False\n    else:\n        if self.left_child is None and self.right_child is None and self == parent.left_child:\n            parent.left_child = None\n            self.clear_node()\n        elif self.left_child is None and self.right_child is None and self == parent.right_child:\n            parent.right_child = None\n            self.clear_node()\n        elif self.left_child and self.right_child is None and self == parent.left_child:\n            parent.left_child = self.left_child\n            self.clear_node()\n        elif self.left_child and self.right_child is None and self == parent.right_child:\n            parent.right_child = self.left_child\n            self.clear_node()\n        elif self.right_child and self.left_child is None and self == parent.left_child:\n            parent.left_child = self.right_child\n            self.clear_node()\n        elif self.right_child and self.left_child is None and self == parent.right_child:\n            parent.right_child = self.right_child\n            self.clear_node()\n        else:\n            self.value = self.right_child.find_minimum_value()\n            self.right_child.remove_node(self.value, self)\n\n        return True\n```\n\n- To use the `clear_node` method: set the `None` value to all three attributes — (`value`, `left_child`, and `right_child`)\n\n```python\ndef clear_node(self):\n    self.value = None\n    self.left_child = None\n    self.right_child = None\n```\n\n- To use the `find_minimum_value` method: go way down to the left. If we can’t find anymore nodes, we found the smallest one.\n\n```python\ndef find_minimum_value(self):\n    if self.left_child:\n        return self.left_child.find_minimum_value()\n    else:\n        return self.value\n```\n\nNow let’s test it.\n\nWe will use this `tree` to test our `remove_node` algorithm.\n\n```python\n#        |15|\n#      /      \\\n#    |10|     |20|\n#   /    \\    /    \\\n# |8|   |12| |17| |25|\n#              \\\n#              |19|\n```\n\nLet’s remove the `node` with the `value` 8. It’s a `node` with no child.\n\n```python\nprint(bst.remove_node(8, None)) # True\nbst.pre_order_traversal()\n\n#     |15|\n#   /      \\\n# |10|     |20|\n#    \\    /    \\\n#   |12| |17| |25|\n#          \\\n#          |19|\n```\n\nNow let’s remove the `node` with the `value` 17. It’s a `node` with just one child.\n\n```python\nprint(bst.remove_node(17, None)) # True\nbst.pre_order_traversal()\n\n#        |15|\n#      /      \\\n#    |10|     |20|\n#       \\    /    \\\n#      |12| |19| |25|\n```\n\nFinally, we will remove a `node` with two children. This is the `root` of our `tree`.\n\n```python\nprint(bst.remove_node(15, None)) # True\nbst.pre_order_traversal()\n\n#        |19|\n#      /      \\\n#    |10|     |20|\n#        \\        \\\n#        |12|     |25|\n```\n\nThe tests are now done. :)\n\n### That’s all for now!\n\nWe learned a lot here.\n\nCongrats on finishing this dense content. It’s really tough to understand a concept that we do not know. But you did it. :)\n\nThis is one more step forward in my journey to learning and mastering algorithms and data structures. You can see the documentation of my complete journey here on my [Renaissance Developer publication](https://medium.com/the-renaissance-developer).\n\nHave fun, keep learning and coding.\n\nHere are my [Medium](https://www.medium.com/@leandrotk_), [Twitter](https://twitter.com/LeandroTk_), [GitHub](https://github.com/imteekay), and [LinkedIn](http://br.linkedin.com/in/leandrotk/) accounts.☺\n\n### Additional resources\n\n- [Introduction to Tree Data Structure by mycodeschool](https://www.youtube.com/watch?v=qH6yxkw0u78&index=25&list=PL2_aWCzGMAwI3W_JlcBbtYTwiQSsOTa6P)\n- [Tree by Wikipedia](<https://en.wikipedia.org/wiki/Tree_(data_structure)>)\n- [How To Not Be Stumped By Trees by the talented Vaidehi Joshi](https://medium.com/basecs/how-to-not-be-stumped-by-trees-5f36208f68a7)\n- [Intro to Trees, Lecture by Professor Jonathan Cohen](http://www.cs.jhu.edu/~cohen/CS226/Lectures/Trees.pdf)\n- [Intro to Trees, Lecture by Professor David Schmidt](http://people.cs.ksu.edu/~schmidt/300s05/Lectures/Week7b.html)\n- [Intro to Trees, Lecture by Professor Victor Adamchik](http://www.cs.cmu.edu/~clo/www/CMU/DataStructures/Lessons/lesson4_1.htm)\n- [Trees with Gayle Laakmann McDowell](https://www.youtube.com/watch?v=oSWTXtMglKE)\n- [Binary Tree Implementation](https://github.com/imteekay/algorithms/blob/master/data_structures/binary_tree/binary_tree.py) and [Tests](https://github.com/imteekay/algorithms/blob/master/data_structures/binary_tree/test_binary_tree.py) by [TK](https://medium.com/@leandrotk_)\n- [Coursera Course: Data Structures by University of California, San Diego](https://www.coursera.org/learn/data-structures)\n- [Coursera Course: Data Structures and Performance by University of California, San Diego](https://www.coursera.org/learn/data-structures-optimizing-performance)\n- [Binary Search Tree concepts and Implementation by Paul Programming](https://www.youtube.com/playlist?list=PLTxllHdfUq4d-DE16EDkpeb8Z68DU7Z_Q)\n- [Binary Search Tree Implementation](https://github.com/imteekay/algorithms/blob/master/data_structures/binary_search_tree_without_node/binary_search_tree.py) and [Tests](https://github.com/imteekay/algorithms/blob/master/data_structures/binary_search_tree_without_node/test_binary_search_tree.py) by [TK](https://medium.com/@leandrotk_)\n- [Tree Traversal by Wikipedia](https://en.wikipedia.org/wiki/Tree_traversal)\n- [Binary Search Tree Remove Node Algorithm by GeeksforGeeks](http://www.geeksforgeeks.org/binary-search-tree-set-2-delete/)\n- [Binary Search Tree ](http://www.algolist.net/Data_structures/Binary_search_tree/Removal)[R](http://www.geeksforgeeks.org/binary-search-tree-set-2-delete/)[emove ](http://www.algolist.net/Data_structures/Binary_search_tree/Removal)[N](http://www.geeksforgeeks.org/binary-search-tree-set-2-delete/)[ode ](http://www.algolist.net/Data_structures/Binary_search_tree/Removal)[A](http://www.geeksforgeeks.org/binary-search-tree-set-2-delete/)[lgorithm by Algolist](http://www.algolist.net/Data_structures/Binary_search_tree/Removal)\n- [Learning Python From Zero to Hero](https://medium.freecodecamp.org/learning-python-from-zero-to-hero-120ea540b567)\n",
  },
  {
    url: '/series/elixir-learnings/div-and-rem',
    title: 'Elixir Learnings: div and rem',
    content:
      "This is part of my series on [Elixir Learnings](/series/elixir-learnings), where I share micro posts about everything I'm learning related to Elixir.\n\n`div` and `rem` stand for `division` and `remainder`. We can get the result of a division between two numbers.\n\n```elixir\ndiv 10, 2 # 5\ndiv 10, 3 # 3\ndiv 10, 4 # 2\ndiv 10, 5 # 2\n```\n\nAnd the remaining:\n\n```elixir\nrem 10, 2 # 0\nrem 10, 3 # 1\nrem 10, 4 # 2\nrem 10, 5 # 0\n```\n\nWhile learning Elixir, I came across an exercise: I needed to build a function that returns the how many boxes of each type (big, medium, and small) I need to use to organize a number of matchsticks. And I also needed to return the remaining matchsticks.\n\nThe big box can be filled with 50 matchsticks. The medium: 20. And the small: 5.\n\nTo solve this problem, I start with the big box. For a number `N`, how many big boxes I can use? I can use the `div` function to get this information: `div(N, 50)`. As I filled the big boxes, I need to get the remaining matchsticks to do the same thing with the medium and small boxes.\n\n```elixir\nbig = div(matchsticks, 50)\nremaining_after_big = rem(matchsticks, 50)\n\nmedium = div(remaining_after_big, 20)\nremaining_after_medium = rem(remaining_after_big, 20)\n\nsmall = div(remaining_after_medium, 5)\nremaining_matchsticks = rem(remaining_after_medium, 5)\n```\n\nWith this, I have the `big`, the `medium`, the `small`, and the `remaining_matchsticks`. And I can return this whole information with a map object.\n\n```elixir\ndef boxes(matchsticks) do\n  big = div(matchsticks, 50)\n  remaining_after_big = rem(matchsticks, 50)\n\n  medium = div(remaining_after_big, 20)\n  remaining_after_medium = rem(remaining_after_big, 20)\n\n  small = div(remaining_after_medium, 5)\n  remaining_matchsticks = rem(remaining_after_medium, 5)\n\n  %{\n    big: big,\n    medium: medium,\n    small: small,\n    remaining_matchsticks: remaining_matchsticks\n  }\nend\n```\n\nI can also build this function inside a module:\n\n```elixir\ndefmodule MatchstickFactory do\n  def boxes(matchsticks) do\n    big = div(matchsticks, 50)\n    remaining_after_big = rem(matchsticks, 50)\n\n    medium = div(remaining_after_big, 20)\n    remaining_after_medium = rem(remaining_after_big, 20)\n\n    small = div(remaining_after_medium, 5)\n    remaining_matchsticks = rem(remaining_after_medium, 5)\n\n    %{\n      big: big,\n      medium: medium,\n      small: small,\n      remaining_matchsticks: remaining_matchsticks\n    }\n  end\nend\n```\n\nAnd test it:\n\n```elixir\nMatchstickFactory.boxes(98) # %{big: 1, medium: 2, remaining_matchsticks: 3, small: 1}\nMatchstickFactory.boxes(39) # %{big: 0, medium: 1, remaining_matchsticks: 4, small: 3}\n```\n",
  },
  {
    url: '/series/elixir-learnings/playing-around-with-lists',
    title: 'Elixir Learnings: playing around with lists',
    content:
      "This is part of my series on [Elixir Learnings](/series/elixir-learnings), where I share micro-posts about everything I'm learning related to Elixir.\n\nToday we going to play around with lists. At the same time lists are very simple, they are powerful. And we use it always in our day-to-day work. Here we will understand some common concepts we need to handle lists.\n\n## Add and remove items\n\nWe have two ways to add new items to the list. We can use the `insert_at` List function and the `++` operator to concat lists.\n\nThe `insert_at` function receives three parameters: the list, the index position you want to add the new item, and the item.\n\n```elixir\nitems = [1 ,2 ,3 ,4]\nList.insert_at(items, 0, 0) # [0, 1 ,2 ,3 ,4]\nList.insert_at(items, 4, 5) # [1 ,2 ,3 ,4, 5]\n```\n\nAnd Elixir lists are immutable. After these operations, if we call the `items` again, it will be the first value.\n\n```elixir\nitems # [1 ,2 ,3 ,4]\n```\n\nThe list value doesn't change.\n\nWe can also use the `++` operator to concat lists to add a new item.\n\n```elixir\nbrothers = ['TK', 'Yuji', 'Bruno']\nnew_brother = 'Kaio'\nbrothers ++ [new_brother] # ['TK', 'Yuji', 'Bruno', 'Kaio']\n```\n\nNot only one item. But concat any list.\n\n```elixir\n['TK', 'Kaio'] ++ ['Yuji', 'Bruno'] # ['TK', 'Kaio', 'Yuji', 'Bruno']\n```\n\nWith the `--` operator, we can subtract a list of items from the left list.\n\n```elixir\nbookshelf = ['HP', 'Compound Effect', 'Enlightenment Now']\nbookshelf -- ['HP'] # ['Compound Effect', 'Enlightenment Now']\n```\n\n## Getting items\n\nI learned simple but very useful functions to get items: `first` and `last`.\n\n```elixir\nList.first([1, 2, 3]) # 1\nList.last([1, 2, 3]) # 3\n```\n\nWe can also handle empty lists:\n\n```elixir\nList.first([]) # nil\nList.last([]) # nil\n```\n\n## Make it flat\n\nAnother cool function is `flat`. It flats nested lists. In other words, it transforms nested lists into just one with all the elements.\n\n- Not so nested lists\n\n```elixir\nList.flatten([1, [2], [3]]) # [1, 2, 3]\n```\n\n- More complex nested lists\n\n```elixir\nList.flatten([1, [[2, [3]]]]) # [1, 2, 3]\n```\n\n- Nested empty lists\n\n```elixir\nList.flatten([[], [[], []]]) # []\n```\n\n## Iterate through it\n\nOne thing we always do with lists is iteration. We can use the `each` function from the `Enum` module to loop through the list.\n\n```elixir\nitems = [1, 2, 3, 4, 5]\nEnum.each(items, fn (n) -> IO.inspect(n) end)\n```\n\nAnd we can also use a shortcut for functions.\n\n```elixir\nEnum.each(items, &IO.inspect/1) # shortcut\n```\n\nThe `Enum` module has various other functions to work on data types, like lists, that implements the `Enumerable` protocol.\n\n## Destructuring\n\nAnother way to get items from the list is called `destructuring`. We unpack items from the list by specifying the \"variables\" inside a list.\n\n```elixir\n[a, b, c] = [1, 2, 3]\nIO.inspect a\nIO.inspect b\nIO.inspect c\n```\n\nWith the `[a, b, c]`, we are specifying the variable names to destructure the list.\n\nIf you want to get only the second item, use the `_` operator (also called `wildcard`).\n\n```elixir\n[_, x, _] = [1, 2, 3]\nIO.inspect x # 2\n```\n\nAnother interesting way to get items is by using the `|` operator. With this operator, we get the head (first item) and the right part represents the other items.\n\n```elixir\n[head | rest] = [1, 2, 3, 4, 5]\nIO.inspect head # 1\nIO.inspect rest # [2, 3, 4, 5]\n```\n\nBut it's not just about the first element. We can specify more than just the first item.\n\n```elixir\n[first, second | rest] = [1, 2, 3, 4, 5]\nIO.inspect first # 1\nIO.inspect second # 2\nIO.inspect rest # [2, 3, 4, 5]\n```\n\nLists are linked lists in Elixir. The last node points to an empty list.\n\n```elixir\n[head | rest] = [:a]\nIO.inspect head # :a\nIO.inspect rest # []\n```\n\nThis is why when we get the rest, it is an empty list.\n\n## Wrapping up\n\nLists have the `wrap` function to transform values into a list. It wraps the value in a list.\n\n```elixir\nList.wrap(\"TK\") # [\"TK\"]\nList.wrap(1) # [1]\nList.wrap(true) # [true]\nList.wrap(:ola) # [:ola]\n```\n\nWe can also wrap a list. But it just returns the same list.\n\n```elixir\nList.wrap([1, 2, 3]) # [1, 2, 3]\n```\n\n`nil` is also a value. It represents the absence of a value. When we wrap it, the function returns an empty list.\n\n```elixir\nList.wrap(nil) # []\n```\n\n## Resources\n\n- [Enum module docs](https://hexdocs.pm/elixir/Enum.html)\n- [Learn Functional Programming with Elixir book](https://www.amazon.com/Learn-Functional-Programming-Elixir-Foundations/dp/168050245X)\n",
  },
  {
    url: '/series/frontend-challenges/findhotel-frontend-challenge',
    title: 'Frontend Challenges: Front-end Engineer Assignment',
    content:
      "This is part of the [Frontend Challenges Series](/series/frontend-challenges).\n\nToday I finished a frontend challenge and I had a blast working on it. There were so many interesting concepts I debated with myself while designing and implementing the feature, so I was eager to document and share everything I learned through this entire journey.\n\nThe challenge was a `Front-end Engineer Assignment`. It's actually a public challenge and you can find it on their GitHub: **Front-end Engineer Assignment**.\n\nLet's talk about the challenge:\n\n### Technology\n\n- The project is setup using React\n- They prefer using [TypeScript](/a-mental-model-to-think-in-typescript) (or Flow)\n- They use EmotionJS as a CSS tool\n\n### UI\n\nThe idea is to create a Guest and Room Overlay component. The user can open it, add different rooms, select any limited number of adults and children, and select the children's ages.\n\n![The findhotel home, the dialog opened, and the dialog with multiple rooms](/series/frontend-challenges/findhotel-challenge.png)\n\n### Input rules\n\nThe component should be able to pass a string as the default data. These are the rules:\n\n- Rooms are separated by pipe `|`\n- Adults and children are separated by a colon `:`\n- Children ages are separated by a comma `,`\n\nExamples:\n\n- \"1:4,6|3\" → Two rooms, one with one adult and two children ages four and six and the other with three adults and no children\n- \"3\" → One room with three adults and no children\n- \"2:4\" → One room with two adults and one child aged four\n- \"1:0,13,16\" → One room with one adult and three children (aged zero, thirteen, and sixteen)\n\n### Functional Requirements\n\n- Up to eight rooms can be added\n- Each room has at least one adult and up to a maximum of five\n- Each room has zero or more children up to a maximum of three\n- Each child needs to have their age supplied, so we know what kind of bed or cot to provide and what to charge for the room\n- Each room has a maximum occupancy of five. This is, adults plus children per room\n- The Guest and Room selector should always yield a valid room occupancy, use button disablement to avoid invalid configurations\n- A user can either click `Search` to commit the output to the URL or click the `x` on top to reset the chosen room selection and revert the UI back to the original state.\n\nNow, giving this introduction to the challenge, I want to share the topics I will cover in this piece. The main topics are:\n\n- **Data Structure & State Management**: in this part, we'll discuss how to design the UI’s state data structure and manage it throughout the entire component.\n- **UI & Style**: creating reusable components, handling responsive design with media queries and react-device-detect, and handling animation.\n- **Unit & Integration tests**: the implementation of the tests to make us confident about the feature. Unit tests will be handled by [react-testing-library](/basic-recipes-for-react-testing-library) and Integration tests by Cypress.\n\n## Data Structure & State Management\n\nI came up with a data structure to represent this UI and it looks like this:\n\n```tsx\n{\n  rooms: [\n    {\n      adultsCount: <number>,\n      children: [\n        {\n          age: <number>,\n        },\n      ],\n    },\n  ],\n}\n```\n\nA TypeScript implementation looks like this:\n\n```tsx\ntype Child = {\n  age: number;\n};\n\ntype Room = {\n  adultsCount: number;\n  children: Child[];\n};\n\ntype GuestRooms = {\n  rooms: Room[];\n};\n```\n\nAnd an example would look like this:\n\n```tsx\nconst GuestRooms = {\n  rooms: [\n    {\n      adultsCount: 2,\n      children: [\n        {\n          age: 4,\n        },\n      ],\n    },\n    {\n      adultsCount: 2,\n      children: [\n        {\n          age: 4,\n        },\n        {\n          age: 10,\n        },\n      ],\n    },\n  ],\n};\n```\n\nNow that we have defined the data structure and have a simple implementation of it, we can move to the next part that's how we use this data and which API we should provide to update this state in different parts of the component.\n\nListing all the behaviors makes it easier to understand how we should handle the data and what are the APIs we need to provide for each component to update our data structure.\n\nI sketched a little drawing with all the behaviors:\n\n![Showing each component's behavior in the guest rooms dialog](/series/frontend-challenges/guest-rooms-dialog.png)\n\nLet's list them here:\n\n- _Update adults count for room X_: `updateAdultsCount`, which should receive the room index and the new count. The function's type contract should be:\n  ```tsx\n  (roomIndex: number, count: number) => void\n  ```\n- _Update children count for room X_: `addChild`, which should receive the room index and it should add a new child to the children list with the age's value as 8 (the default age's value). The function's type contract should be:\n  ```tsx\n  (roomIndex: number) => void\n  ```\n- _Remove a child from room X_: `removeChild`, which should receive the room index and the child index. The function's type contract should be:\n  ```tsx\n  (roomIndex: number, childIndex: number) => void\n  ```\n- _Remove room X_: `removeRoom`, which should receive the room index. The function's type contract should be:\n  ```tsx\n  (roomIndex: number) => void\n  ```\n- _Select a child's age from room X_: `updateChild`, which should receive the room index, the child index, and the new child age.\n  ```tsx\n  (roomIndex: number, childIndex: number, childAge: number) => void\n  ```\n- _Add new room section_: `addRoom`, which should just add a new room to the rooms list.\n  ```tsx\n  () => void\n  ```\n- _Search with the selected rooms & guests_: this function won't update our data structure, it'll only receive the data structure, transform it into a string representation and append the result as a query param in the url.\n\nNice, we have all the necessary APIs to handle the component's state. Now let's start implementing them all.\n\n### Context Provider\n\nWhen I started implementing this solution, I didn't want to use any library or framework to handle the state. I wanted to keep it very simple. I start with a `useState` hook. But soon some interesting (and common) problems started to arise.\n\nIf we have centralized data, to be able to access it using a `useState` hook, we need to the state via props to all components. And prop drilling can be a big problem in terms of runtime performance and impacting user experience. Updating the state had the same issue. I needed to pass this update function as a prop for all components.\n\nThe second solution that I came across, as I still didn't want to use a library for it, was to use the Context API and provide the state's data structure and function APIs to every component that is wrapped by the context provider. This is the fundamental part of my solution to handle the state.\n\nThe provider will be pretty simple. It should just be a component that wraps our component and provide a value for it.\n\n```tsx\nexport const GuestRoomsContext = createContext<GuestRoomsValues>(undefined);\n\nconst GUEST_ROOMS_DEFAULT = {\n  rooms: [\n    {\n      adultsCount: 2,\n      children: [],\n    },\n  ],\n};\n\ntype GuestRoomsProviderPropTypes = {\n  guestRoomsString?: string;\n};\n\nexport const GuestRoomsProvider: FC<GuestRoomsProviderPropTypes> = ({\n  children,\n  guestRoomsString,\n}) => {\n  const defaultGuestRooms = guestRoomsString\n    ? toGuestRooms(guestRoomsString)\n    : GUEST_ROOMS_DEFAULT;\n\n  const [guestRooms, setGuestRooms] = useState<GuestRooms>(defaultGuestRooms);\n\n  // ...\n\n  return (\n    <GuestRoomsContext.Provider value={providerValue}>\n      {children}\n    </GuestRoomsContext.Provider>\n  );\n};\n```\n\nSo it will receive `children` and a `guestRoomsString`. Receiving the `guestRoomsString` enables us to pass a string as the initial state of our data structure. You can see in the `GuestRoomsProviderPropTypes`, that this prop is optional, so if we don't pass any string for the provider, it should use the default value `GUEST_ROOMS_DEFAULT`.\n\nWe also use a simple `useState` and it should be the source of truth of our data. `guestRooms` is the state and `setGuestRooms` is the function API to update the state.\n\nThe `GuestRoomsContext` is created and exported. We will use this context in our components to access the data and function APIs. And we also use it to create the provider. `children` is wrapped by this provider and we also see a `providerValue` that will talk about it soon.\n\nBefore moving to the other implementations, I want to talk a bit about the `toGuestRooms` function. This is just a transformer, specifically transforming the string format into a `GuestRooms` data structure.\n\nWhy did I decide to do this? My approach is to have an internal data structure for the component instead of using string as the state type. I think designing a better data structure to represent the state of this UI would help a lot when managing the state. This is how is looks like:\n\n```tsx\nconst ROOM_SEPARATOR = '|';\nconst ADULT_CHILDREN_SEPARATOR = ':';\nconst CHILDREN_SEPARATOR = ',';\n\nfunction parseChildren(children: string) {\n  return children\n    .split(CHILDREN_SEPARATOR)\n    .map((age: string) => ({ age: Number(age) }));\n}\n\nfunction parseGuestRooms(guestRooms: GuestRooms, room: string) {\n  const [adultsCount, childrenString] = room.split(ADULT_CHILDREN_SEPARATOR);\n  const children = childrenString ? parseChildren(childrenString) : [];\n\n  guestRooms.rooms.push({\n    adultsCount: Number(adultsCount),\n    children,\n  });\n\n  return guestRooms;\n}\n\nexport function toGuestRooms(guestRooms: string) {\n  const rooms = guestRooms.split(ROOM_SEPARATOR);\n  const guestRoomsInitialValue = { rooms: [] };\n\n  return rooms.reduce<GuestRooms>(parseGuestRooms, guestRoomsInitialValue);\n}\n```\n\nUsing the separators to get each meaningful data and returning the `GuestRooms` data structure.\n\nAs a pure function, we can easily test it.\n\n```tsx\ndescribe('toGuestRooms', () => {\n  it('generates GuestRooms based on \"1:4,6|3\"', () => {\n    expect(toGuestRooms('1:4,6|3')).toEqual({\n      rooms: [\n        {\n          adultsCount: 1,\n          children: [\n            {\n              age: 4,\n            },\n            {\n              age: 6,\n            },\n          ],\n        },\n        {\n          adultsCount: 3,\n          children: [],\n        },\n      ],\n    });\n  });\n\n  it('generates GuestRooms based on \"3\"', () => {\n    expect(toGuestRooms('3')).toEqual({\n      rooms: [\n        {\n          adultsCount: 3,\n          children: [],\n        },\n      ],\n    });\n  });\n\n  it('generates GuestRooms based on \"2:4\"', () => {\n    expect(toGuestRooms('2:4')).toEqual({\n      rooms: [\n        {\n          adultsCount: 2,\n          children: [\n            {\n              age: 4,\n            },\n          ],\n        },\n      ],\n    });\n  });\n\n  it('generates GuestRooms based on \"1:0,13,16\"', () => {\n    expect(toGuestRooms('1:0,13,16')).toEqual({\n      rooms: [\n        {\n          adultsCount: 1,\n          children: [\n            {\n              age: 0,\n            },\n            {\n              age: 13,\n            },\n            {\n              age: 16,\n            },\n          ],\n        },\n      ],\n    });\n  });\n});\n```\n\n...to make sure it works and also gain confidence in the implementation.\n\n### Number input\n\nLet's now create the `NumberInput` component as it will be the building block for the adults count input and children count input.\n\nThis component is a very simple one. It should only handle the UI and be able to receive data and functions to trigger when necessary.\n\nThe type contract (or prop types) should be like:\n\n```tsx\ntype NumberInputPropTypes = {\n  value: number;\n  increaseValue: () => void;\n  decreaseValue: () => void;\n  minValue: number;\n  maxValue: number;\n};\n```\n\n- `value`: the value we want to show to the user.\n- `increaseValue`: the function to increase the value (meaning adults or children count)\n- `decreaseValue`: the function to decrease the value (meaning adults or children count)\n- `minValue`: the minimum value accepted by the component. It will be useful to disable the decrease button\n- `maxValue`: the maximum value accepted by the component. It will be useful to disable the increase button\n\nAnd that's it.\n\nThere's a simple logic that I wanted to do to disable (or not) the increase and the decrease buttons.\n\n```tsx\nconst isAbleToDecreaseValue = value > minValue;\nconst isAbleToIncreaseValue = value < maxValue;\n\nconst isDecreaseDisabled = value === minValue;\nconst isIncreaseDisabled = value === maxValue;\n\nconst decreaseNumber = () => isAbleToDecreaseValue && decreaseValue();\nconst increaseNumber = () => isAbleToIncreaseValue && increaseValue();\n\nconst decreaseButtonVariant = isDecreaseDisabled ? 'disabled' : 'secondary';\nconst increaseButtonVariant = isIncreaseDisabled ? 'disabled' : 'secondary';\n```\n\nI not only wanted to add a `disabled` variant for the buttons and change the UI but also disable the state update because it's possible for the user to just disable it via devtools and be able to click the button. Having this second constraint is nice to block this behavior.\n\nAnd here's the UI:\n\n```tsx\n<div>\n  <Button\n    disabled={isDecreaseDisabled}\n    onClick={decreaseNumber}\n    variant={decreaseButtonVariant}\n  >\n    <MinusIcon />\n  </Button>\n  <span>{value}</span>\n  <Button\n    disabled={isIncreaseDisabled}\n    onClick={increaseNumber}\n    variant={increaseButtonVariant}\n  >\n    <PlusIcon />\n  </Button>\n</div>\n```\n\n### Adults count input\n\nNow that we have this base component, we can build the `AdultsCountInput` and the `ChildrenCountInput` on top of that.\n\nIt should be very simple actually.\n\n```tsx\ntype AdultsCountInputPropTypes = {\n  roomIndex: number;\n};\n\nexport const AdultsCountInput: FC<AdultsCountInputPropTypes> = ({\n  roomIndex,\n}) => {\n  const { guestRooms, updateAdultsCount } = useContext(GuestRoomsContext);\n  const adultsCount = getAdultsCount(guestRooms, roomIndex);\n\n  const increaseValue = () => updateAdultsCount(roomIndex, adultsCount + 1);\n  const decreaseValue = () => updateAdultsCount(roomIndex, adultsCount - 1);\n\n  return (\n    <NumberInput\n      value={adultsCount}\n      increaseValue={increaseValue}\n      decreaseValue={decreaseValue}\n      minValue={1}\n      maxValue={5}\n    />\n  );\n};\n```\n\nThe `AdultsCountInput` component can receive the `roomIndex` as we need this value to be able to update the correct adults count for a given room.\n\nWe use the `useContext` passing the `GuestRoomsContext` to get the `guestRooms` and the `updateAdultsCount` (that will be implemented in a sec).\n\nBut I want to focus on the `getAdultsCount` first. The idea is to just implement a “getter” to, well, get the adults’ count.\n\n```tsx\nexport function getAdultsCount(guestRooms: GuestRooms, roomIndex: number) {\n  return guestRooms.rooms[roomIndex].adultsCount;\n}\n```\n\nIt's pretty straightforward. It receives the `guestRooms` and the `roomIndex` and it should get the `adultsCount` from a specific room.\n\nWith that, we can use this value to pass to the `NumberInput`.\n\nWe can also see the `minValue` and `maxValue`:\n\n```tsx\nminValue={1}\nmaxValue={5}\n```\n\nThese are parts of the business rules. For adults, it should have this interval.\n\nNow let's talk about `updateAdultsCount`. As we mentioned earlier, it should have this type definition:\n\n```tsx\nupdateAdultsCount: (roomIndex: number, count: number) => void;\n```\n\nWithin the provider, we can access the `guestRooms` state and the `setGuestRooms` function to update the state. Receiving the `roomIndex` and the new adults’ `count` should be enough to update the state.\n\n```tsx\nfunction updateAdultsCount(roomIndex: number, count: number) {\n  guestRooms.rooms[roomIndex] = {\n    ...guestRooms.rooms[roomIndex],\n    adultsCount: count,\n  };\n\n  setGuestRooms({\n    rooms: guestRooms.rooms,\n  });\n}\n```\n\nAnd that's it. We use the spread operator to just update the `adultsCount` and keep the `children` value. Pass the updated value to the `setGuestRooms` and it should update properly.\n\nBack to the component, we can use this new function:\n\n```tsx\nconst increaseValue = () => updateAdultsCount(roomIndex, adultsCount + 1);\nconst decreaseValue = () => updateAdultsCount(roomIndex, adultsCount - 1);\n```\n\nThe `increaseValue` should add +1 to the `adultsCount` and the `decreaseValue` should add -1 to the `adultsCount`.\n\n### Children count input\n\nThe `ChildrenCountInput` has a similar behavior but the data structure is a bit different. For the adults, the data representation is a number. For children, it's a list of objects.\n\n```tsx\ntype ChildrenCountInputPropTypes = {\n  roomIndex: number;\n};\n\nexport const ChildrenCountInput: FC<ChildrenCountInputPropTypes> = ({\n  roomIndex,\n}) => {\n  const { guestRooms, addChild, removeChild } = useContext(GuestRoomsContext);\n  const childrenCount = getChildrenCount(guestRooms, roomIndex);\n\n  const increaseValue = () => addChild(roomIndex);\n  const decreaseValue = () => removeChild(roomIndex);\n\n  return (\n    <NumberInput\n      value={childrenCount}\n      increaseValue={increaseValue}\n      decreaseValue={decreaseValue}\n      minValue={0}\n      maxValue={3}\n    />\n  );\n};\n```\n\nThe `ChildrenCountInput` also has a `roomIndex` prop. It should receive a `minValue` and a `maxValue`. As the functional requirements say, the minimum should be 0 and the maximum children's count should be 3.\n\nThe `getChildrenCount` is also very similar.\n\n```tsx\nexport function getChildrenCount(guestRooms: GuestRooms, roomIndex: number) {\n  return guestRooms.rooms[roomIndex].children.length;\n}\n```\n\nGet the children's length from a specific room.\n\nTo increase and decrease the children's count, we should add a new child or remove the child from the children's list. Let's implement the `addChild` and the `removeChild` functions.\n\n```tsx\nfunction addChild(roomIndex: number) {\n  const children = guestRooms.rooms[roomIndex].children;\n\n  children.push({\n    ...children,\n    age: 8,\n  });\n\n  setGuestRooms({\n    rooms: guestRooms.rooms,\n  });\n}\n```\n\nIt receives the `roomIndex`, gets the `children`’s list, and pushes a new child with the age of 8 (the default age). Then we should just update the `guestRooms` state.\n\nThe `removeChild` should work in a similar way but remove a specific child.\n\n```tsx\nfunction removeChild(roomIndex: number, childIndex: number = -1) {\n  const children = guestRooms.rooms[roomIndex].children;\n\n  children.splice(childIndex, 1);\n\n  setGuestRooms({\n    rooms: guestRooms.rooms,\n  });\n}\n```\n\nWe use `splice` to remove the child by its index and then update the `guestRooms` state.\n\nIt receives a `childIndex` because, in the future, we should use it in our favor to remove a specific child. In this case, we just want to remove the last one. This is why we add a default value as -1, so when calling `splice`, it removes the last one.\n\n### Child select\n\nThe next part is about the `ChildSelect`. It should show all possible age options and handle the select on change.\n\nAbout the options, I just created a `ageOptions` with a simple array.\n\n```tsx\nconst ageOptions = [...Array(18)];\n```\n\nAnd we use it to create all options for the select. The entire the `ChildSelect` component will look like this:\n\n```tsx\ntype ChildSelectPropTypes = {\n  child: Child;\n  roomIndex: number;\n  index: number;\n};\n\nexport const ChildSelect: FC<ChildSelectPropTypes> = ({\n  child,\n  roomIndex,\n  index,\n}) => {\n  const { updateChild } = useContext(GuestRoomsContext);\n\n  const childAgeOnChange =\n    (childIndex: number) => (event: ChangeEvent<HTMLSelectElement>) => {\n      const childAge = Number(event.target.value);\n      updateChild(roomIndex, childIndex, childAge);\n    };\n\n  return (\n    <select onChange={childAgeOnChange(index)} value={child.age}>\n      {ageOptions.map((_, age) => (\n        <option\n          value={age}\n          key={`${roomIndex}-child-${index}-age-option-${age}`}\n        >\n          {age ? age : '<1'}\n        </option>\n      ))}\n    </select>\n  );\n};\n```\n\nThe component receives the `child` (to get the current age), the `roomIndex` (to be able to find and update the child in a specific room), and the `index` (the child's index to update its age).\n\nNow we need to implement the `updateChild` in the provider. This is the type definition:\n\n```tsx\nupdateChild: (\n  roomIndex: number,\n  childIndex: number,\n  childAge: number\n) => void;\n```\n\nAnd the implementation looks like this:\n\n```tsx\nfunction updateChild(roomIndex: number, childIndex: number, childAge: number) {\n  const children = guestRooms.rooms[roomIndex].children;\n\n  children[childIndex] = {\n    age: childAge,\n  };\n\n  guestRooms.rooms[roomIndex] = {\n    ...guestRooms.rooms[roomIndex],\n    children,\n  };\n\n  setGuestRooms({\n    rooms: guestRooms.rooms,\n  });\n}\n```\n\nThe idea here is to get a specific child from a given room, update this child's age, and update the `guestRooms` state.\n\nThis component is used by the `ChildrenSelect`, where we get all children from a room and iterate through it:\n\n```tsx\nexport const ChildrenSelect = ({ roomIndex }: ChildrenSelectPropTypes) => {\n  const { guestRooms } = useContext(GuestRoomsContext);\n  const chidren = getChildren(guestRooms, roomIndex);\n\n  return (\n    <div className={childrenSelectWrapper}>\n      {chidren.map((child, index) => (\n        <div\n          className={childAgeSelectWrapper}\n          key={`${roomIndex}-child-${index}`}\n        >\n          <span>Child {index + 1} age</span>\n          <div className={selectWrapperStyle}>\n            <ChildSelect child={child} roomIndex={roomIndex} index={index} />\n            <CloseButton roomIndex={roomIndex} index={index} />\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n```\n\nHere are just iterating through the `children`. To get the `children`, we need to implement a simple getter.\n\n```tsx\nexport function getChildren(guestRooms: GuestRooms, roomIndex: number) {\n  return guestRooms.rooms[roomIndex].children;\n}\n```\n\n### Remove child\n\nNow that we can add a new child and update its age, we need to be able to remove it with the close button.\n\n```tsx\ntype CloseButtonPropTypes = {\n  roomIndex: number;\n  index: number;\n};\n\nexport const CloseButton: FC<CloseButtonPropTypes> = ({ roomIndex, index }) => {\n  const { removeChild } = useContext(GuestRoomsContext);\n\n  const removeOnClick = (childIndex: number) => () => {\n    removeChild(roomIndex, childIndex);\n  };\n\n  return (\n    <Button variant=\"danger\" onClick={removeOnClick(index)}>\n      <CloseIcon />\n    </Button>\n  );\n};\n```\n\nIt's actually a very simple implementation. We need a button and a way to handle the button's `onClick` event. Remember when I said that we could use the `removeChild` in other places too? This is the case for this component. To remove it, we'll use the `removeChild` function we already implemented but now passing the `childIndex` for it, so we can remove a specific child from a room.\n\nAnd that's it!\n\n### Add room\n\nAdding a new room is also very simple. We need a button and the `addRoom` function that will update the rooms list by pushing a new room with the default value to it.\n\n```tsx\n<Button variant=\"secondary\" onClick={addRoom} fullWidth>\n  + Add room\n</Button>\n```\n\nAnd the `addRoom` implementation looks like this:\n\n```tsx\nfunction addRoom() {\n  setGuestRooms({\n    rooms: [\n      ...guestRooms.rooms,\n      {\n        adultsCount: 2,\n        children: [],\n      },\n    ],\n  });\n}\n```\n\nWe keep the current rooms and add a new room two adults and no children.\n\n### Remove room\n\nTo remove a room, we need a button and the room's index.\n\n```tsx\nconst { removeRoom } = useContext(GuestRoomsContext);\nconst removeRoomOnClick = (roomIndex: number) => () => {\n  removeRoom(roomIndex);\n};\n\n<Button variant=\"danger\" onClick={removeRoomOnClick(index)}>\n  Remove room\n</Button>;\n```\n\nWe have the button and the `removeRoomOnClick`. Now we should implement the `removeRoom` function:\n\n```tsx\nfunction removeRoom(roomIndex: number) {\n  guestRooms.rooms.splice(roomIndex, 1);\n\n  setGuestRooms({\n    rooms: guestRooms.rooms,\n  });\n}\n```\n\nHere we use the same concept we used to remove children from the children's list. Using splice with a specific `roomIndex` and then updating the `guestRooms` state.\n\n### Search button\n\nTo handle the search button, I needed to enable users (engineers) to pass a callback function to the main component and pass it down to the search button component to call it when the user clicks the button. This way, we enable engineers to do whatever they want with the current state.\n\nIn the case of this challenge, we are required to get the state data structure, transform it into the string format and attach it to the url.\n\nTo do this transformation, we can create a simple function to handle this part:\n\n```tsx\nconst ROOM_SEPARATOR = '|';\nconst ADULT_CHILDREN_SEPARATOR = ':';\nconst CHILDREN_SEPARATOR = ',';\n\nfunction toChildrenAgesString(children: Child[]) {\n  return children.map(({ age }) => age).join(CHILDREN_SEPARATOR);\n}\n\nfunction toAdultsAndChildrenAgesString({ adultsCount, children }: Room) {\n  const childrenAges = toChildrenAgesString(children);\n\n  return childrenAges\n    ? adultsCount + ADULT_CHILDREN_SEPARATOR + childrenAges\n    : adultsCount;\n}\n\nexport function toGuestRoomsString(guestRooms: GuestRooms) {\n  return guestRooms.rooms\n    .map(toAdultsAndChildrenAgesString)\n    .join(ROOM_SEPARATOR);\n}\n```\n\nA `toGuestRoomsString` to transform the `GuestRooms` data structure into a string. We use the separators to construct it. To “prove” it works, we can add some tests and gain more confidence.\n\n```tsx\ndescribe('toGuestRoomsString', () => {\n  it('generates \"1:4,6|3\"', () => {\n    expect(\n      toGuestRoomsString({\n        rooms: [\n          {\n            adultsCount: 1,\n            children: [\n              {\n                age: 4,\n              },\n              {\n                age: 6,\n              },\n            ],\n          },\n          {\n            adultsCount: 3,\n            children: [],\n          },\n        ],\n      }),\n    ).toEqual('1:4,6|3');\n  });\n\n  it('generates \"3\"', () => {\n    expect(\n      toGuestRoomsString({\n        rooms: [\n          {\n            adultsCount: 3,\n            children: [],\n          },\n        ],\n      }),\n    ).toEqual('3');\n  });\n\n  it('generates \"2:4\"', () => {\n    expect(\n      toGuestRoomsString({\n        rooms: [\n          {\n            adultsCount: 2,\n            children: [\n              {\n                age: 4,\n              },\n            ],\n          },\n        ],\n      }),\n    ).toEqual('2:4');\n  });\n\n  it('generates \"1:0,13,16\"', () => {\n    expect(\n      toGuestRoomsString({\n        rooms: [\n          {\n            adultsCount: 1,\n            children: [\n              {\n                age: 0,\n              },\n              {\n                age: 13,\n              },\n              {\n                age: 16,\n              },\n            ],\n          },\n        ],\n      }),\n    ).toEqual('1:0,13,16');\n  });\n});\n```\n\nThat's it! Now we are able to transform it into the string format before attaching it to the URL. To the function and call the callback with the result of it, I created a search function:\n\n```tsx\nfunction search(guestRooms: GuestRooms, callback: OnSearchFunction) {\n  const guestRoomsString = toGuestRoomsString(guestRooms);\n\n  return () =>\n    callback(\n      { guestRooms: guestRoomsString },\n      `?guestRooms=${guestRoomsString}`,\n    );\n}\n```\n\nThis way, we just need to implement a possible callback for it. As I'm not using any library or framework for this, we can use the History API.\n\n```tsx\ntype State = any;\ntype Url = string | null;\n\nexport type PushStateSignature = (state: State, url?: Url) => void;\n\nexport const pushState: PushStateSignature = (state, url) => {\n  window.history.pushState(state, '', url);\n};\n```\n\nIt expects the state and the URL. Passing the `pushState` as a callback for the `search` function and we are able to append the guest rooms string as a query param.\n\n## UI & Style\n\nBuilding a lot of different React apps, ones with pure React others with NextJS, made me experience different approaches to CSS styles. Even though it's simple to use inline CSS on React components, I didn't really like the experience as it lacks a lot of “features” like pseudo-classes, selectors.\n\nSo in this challenge, I was open to learning and applying a new CSS tool. I’ve heard about emotion-js before but never really tried. This is a tool the company uses, so I started taking a look at the docs and it surprised me. It seemed very simple, just CSS styles that you could attach to components. It's like the old days when you just write pure CSS but now with the power of making it modular.\n\nI didn't want to use styled components, so I just installed `@emotion/css`.\n\n```bash\nnpm i @emotion/css\n```\n\n### Button\n\nThe first component I wanted to focus on was the `<Button>`. I wanted to make a component that I could reuse for the entire application. With a “type”, I could change the entire style of a component, so what I built was a `variant` and this it looks like:\n\n```tsx\ntype ButtonVariants = 'primary' | 'secondary' | 'disabled' | 'danger' | 'close';\n```\n\nAnd now we are able to use this as the prop type:\n\n```tsx\ntype ButtonPropTypes = {\n  variant?: ButtonVariants;\n};\n```\n\nIf the users (engineers using this component) are also using TypeScript, it requires they use one of these variants in compile time. This is a beautiful use of TypeScript with React.\n\nWith this variant, we can style anything. I used the idea of an object that matches a variant with its style. The first is the cursor:\n\n```tsx\nconst Cursor = {\n  primary: 'pointer',\n  secondary: 'pointer',\n  disabled: 'not-allowed',\n  danger: 'pointer',\n  close: 'pointer',\n};\n```\n\nAnd the usage is simple:\n\n```tsx\ncursor: ${Cursor[variant]};\n```\n\nWe would do the same thing for all other styles:\n\n```tsx\nconst Colors = {\n  primary: 'white',\n  secondary: '#0071f3',\n  disabled: '#6a7886',\n  danger: '#d83b3b',\n  close: '#6a7886',\n};\n\nconst BackgroundColors = {\n  primary: '#0071f3',\n  secondary: '#f7fbff',\n  disabled: '#eff2F6',\n  danger: 'rgba(255, 255, 255, 0)',\n  close: 'rgba(255, 255, 255, 0)',\n};\n\nconst BackgroundColorsHover = {\n  primary: '#0064d8',\n  secondary: '#e4f0fe',\n  disabled: '#eff2F6',\n  danger: 'rgba(255, 255, 255, 0)',\n  close: 'rgba(255, 255, 255, 0)',\n};\n\nconst BoxShadow = {\n  primary: 'none',\n  secondary: '#bfdaf9 0px 0px 0px 1px inset',\n  disabled: 'none',\n  danger: 'none',\n  close: 'none',\n};\n```\n\nThe usage is similar to the cursor:\n\n```tsx\ncolor: ${Colors[variant]};\nbackground-color: ${BackgroundColors[variant]};\nbox-shadow: ${BoxShadow[variant]};\n\n&:hover {\n  background-color: ${BackgroundColorsHover[variant]};\n}\n```\n\nIn this component, I also enable it to receive these props: `disabled`, `onClick`, `dataTestid`, and `children`.\n\n```tsx\n<button\n  disabled={disabled}\n  onClick={onClick}\n  data-testid={dataTestid}\n\t...\n>\n\t{children}\n</button>\n```\n\nI also saw the need to be able to customize the styles if the user wants. For example, the component has a default padding spacing. But the user could need a different spacing for padding, so we can add a `className` prop as well and add it to the `css` like this:\n\n```tsx\nclassName={css`\n\t...\n\t${className}\n`}\n```\n\nIt's actually a lot of power we give to the user. The option was to have an object for the padding and margin, and any other property we want to match with the button's variant.\n\nThe last part of this component is the prop `fullWidth`. The name says everything. If enabling this prop, the button will have a full width, if not it will have an auto width.\n\n```tsx\nwidth: ${fullWidth ? '100%' : 'auto'};\n```\n\nThe prop types look like this:\n\n```tsx\ntype ButtonVariants = 'primary' | 'secondary' | 'disabled' | 'danger' | 'close';\n\ntype ButtonPropTypes = {\n  disabled?: boolean;\n  onClick: () => void;\n  variant?: ButtonVariants;\n  className?: string;\n  fullWidth?: boolean;\n  dataTestid?: string;\n};\n```\n\nAnd the whole component has these props, types, and styles.\n\n```tsx\nexport const Button: FC<ButtonPropTypes> = ({\n  children,\n  disabled = false,\n  onClick,\n  variant = 'primary',\n  className,\n  fullWidth = false,\n  dataTestid,\n}) => (\n  <button\n    disabled={disabled}\n    onClick={onClick}\n    data-testid={dataTestid}\n    className={css`\n      display: inline-flex;\n      border: 0px;\n      border-radius: 6px;\n      margin: 0px;\n      cursor: ${Cursor[variant]};\n      align-items: center;\n      justify-content: center;\n      text-align: center;\n      vertical-align: middle;\n      position: relative;\n      text-decoration: none;\n      font-size: 16px;\n      font-weight: 600;\n      padding: 16px 32px;\n      color: ${Colors[variant]};\n      background-color: ${BackgroundColors[variant]};\n      box-shadow: ${BoxShadow[variant]};\n\n      width: ${fullWidth ? '100%' : 'auto'};\n\n      &:hover {\n        background-color: ${BackgroundColorsHover[variant]};\n      }\n\n      ${className}\n    `}\n  >\n    {children}\n  </button>\n);\n```\n\n### Animation\n\nTo make sure we have an effect when opening the overlay component in the mobile view, we will use `keyframes` and `animation`.\n\n<div style=\"margin: auto; text-align: center;\">\n  <video controls=\"true\" allowfullscreen=\"true\" >\n    <source src=\"/series/frontend-challenges/dialog-transition.mov\" type=\"video/mp4\">\n  </video>\n</div>\n\nThe code looks very simple for this transition.\n\nThe `keyframes` is imported from the `emotion` library, we create an animation name to go from top 100% to top 0, and set the duration for this transition.\n\n```tsx\nimport { css, keyframes } from '@emotion/css';\n\nconst overlayFade = keyframes`\n  from {\n    top: 100%;\n  }\n  to {\n    top: 0;\n  }\n`;\n\nconst modelStyle = css`\n  // ...\n  animation-name: ${overlayFade};\n  animation-duration: 0.3s;\n  // ...\n`;\n```\n\nSimple as that.\n\n### Responsive design\n\nTo handle responsive design, I focused on mobile-first, and additional adjustments for desktop.\n\nTo be able to change a style for specific screen size, we can use media queries. Using `emotion-js` looks like this:\n\n```tsx\nconst style = css`\n  border-radius: 0;\n\n  @media (min-width: 576px) {\n    border-radius: 6px;\n  }\n`;\n```\n\nFor mobile view, it won't have a `border-radius`, but all screens with a minimum size of `576px` will have a `border-radius` of `6px`.\n\nTo make it more consistent across all components and remove the need to write the correct media query, I created a `mediaQuery` object with all the possibilities.\n\n```tsx\ntype Breakpoints = 'xs' | 'sm' | 'md' | 'lg' | 'xl';\ntype MediaQuery = Record<Breakpoints, string>;\n\nexport const mediaQuery: MediaQuery = {\n  xs: '@media (max-width: 576px)',\n  sm: '@media (min-width: 576px)',\n  md: '@media (min-width: 768px)',\n  lg: '@media (min-width: 992px)',\n  xl: '@media (min-width: 1200px)',\n};\n```\n\nNow we can use our object without the need to understand the implementation details about each query. Refactoring the style CSS code above, we get something like this:\n\n```tsx\nconst style = css`\n  border-radius: 0;\n\n  ${mediaQuery['sm']} {\n    border-radius: 6px;\n  }\n`;\n```\n\nNow we can reuse this `mediaQuery` code in all components that need to handle different views.\n\nI also created a simple unit test for it:\n\n```tsx\ndescribe('mediaQuery', () => {\n  it('returns the correct media query for each breakpoint', () => {\n    expect(mediaQuery['xs']).toEqual('@media (max-width: 576px)');\n    expect(mediaQuery['sm']).toEqual('@media (min-width: 576px)');\n    expect(mediaQuery['md']).toEqual('@media (min-width: 768px)');\n    expect(mediaQuery['lg']).toEqual('@media (min-width: 992px)');\n    expect(mediaQuery['xl']).toEqual('@media (min-width: 1200px)');\n  });\n});\n```\n\nI also needed to handle different HTML elements and styles for desktop vs. mobile views. This is why I used a library called `react-device-detect`.\n\nIn this case, our desktop modal should not only have a modal component but also a backdrop-overlay side by side. If the user clicks the overlay, it should close the modal.\n\nIn the mobile view, it doesn't have this overlay component. It should just open a dialog.\n\nThe desktop dialog:\n\n```tsx\nexport const DialogBrowserView: FC<DialogBrowserViewPropTypes> = ({\n  guestRoomsString,\n  onClose,\n  onSearch,\n}) => (\n  <BrowserView>\n    <div className={dialogStyle}>\n      <div onClick={onClose} className={backdropStyle} />\n      <Dialog\n        guestRoomsString={guestRoomsString}\n        onClose={onClose}\n        onSearch={onSearch}\n      />\n    </div>\n  </BrowserView>\n);\n```\n\nAnd the mobile dialog:\n\n```tsx\nexport const DialogMobileView: FC<DialogMobileViewPropTypes> = ({\n  guestRoomsString,\n  onClose,\n  onSearch,\n}) => (\n  <MobileView>\n    <Dialog\n      guestRoomsString={guestRoomsString}\n      onClose={onClose}\n      onSearch={onSearch}\n    />\n  </MobileView>\n);\n```\n\nAnd use them:\n\n```tsx\n<DialogBrowserView\n  guestRoomsString={guestRoomsString}\n  onClose={onClose}\n  onSearch={onSearch}\n/>\n<DialogMobileView\n  guestRoomsString={guestRoomsString}\n  onClose={onClose}\n  onSearch={onSearch}\n/>\n```\n\nWe could also replace `react-device-detect` with media queries.\n\n### Code splitting\n\nAn additional thing that I did was to code split the dialog. Create a chunk for the mobile dialog and another chunk for the desktop dialog.\n\nThat way the application won't need to load the mobile dialog code in the desktop view and vice versa.\n\nTo do this, I used a library called Loadable Components.\n\nI just needed to do this for the mobile dialog\n\n```tsx\nimport loadable from '@loadable/component';\n\nexport default loadable(\n  () => import(/* webpackChunkName: \"DialogMobileView\" */ './DialogMobileView'),\n);\n```\n\nAnd this for the desktop view\n\n```tsx\nimport loadable from '@loadable/component';\n\nexport default loadable(\n  () =>\n    import(/* webpackChunkName: \"DialogBrowserView\" */ './DialogBrowserView'),\n);\n```\n\nAnd now the application doesn't need to load unnecessary JavaScript code for each screen size.\n\n## Unit & Integration Tests\n\n### Unit tests\n\nTo verify that all variants are working with the correct styles, I created a test for each variant.\n\n```tsx\ndescribe('Button', () => {\n  describe('primary variant', () => {\n    it('verifies correct styles for primary button', () => {\n      render(<Button onClick={noop}>{text}</Button>);\n\n      const buttonText = screen.getByText(/Text/i);\n\n      expect(buttonText).toBeInTheDocument();\n      expect(buttonText).toHaveStyle('cursor: pointer');\n      expect(buttonText).toHaveStyle('color: white');\n      expect(buttonText).toHaveStyle('background-color: #0071f3');\n      expect(buttonText).toHaveStyle('box-shadow: none');\n    });\n  });\n});\n```\n\nWe can use the `toHaveStyle` API to verify each CSS property. I wanted to test if the button is rendered and these four properties: cursor, color, background-color, and box-shadow.\n\nAnd I also have a similar test for all other variants: `secondary`, `disabled`, `danger`, and `close`.\n\nFor the header, I added a very simple unit test to verify the header text and if the close button triggers everything correctly.\n\n```tsx\nconst noop = jest.fn();\n\ndescribe('Header', () => {\n  it('renders the header text', () => {\n    render(<Header onClose={noop} />);\n\n    const headerText = screen.getByText(/Rooms & Guests/i);\n    expect(headerText).toBeInTheDocument();\n  });\n\n  it('triggers the onClose after clicking the close button', () => {\n    render(<Header onClose={noop} />);\n\n    const onCloseButton = screen.getByRole('button');\n    userEvent.click(onCloseButton);\n    expect(noop).toBeCalled();\n  });\n});\n```\n\nFor the header text, it's a nice test, but mocking the `onClose` function is not ideal. I will test it properly in an integration test where we simulate how the user interacts with the dialog and close it.\n\nThe test for the `AdultsCountInput` is very interesting as we can test it the way an user would use it.\n\n```tsx\ndescribe('AdultsCountInput', () => {\n  it('increases and decreases count by clicking buttons', () => {\n    render(\n      <GuestRoomsProvider>\n        <AdultsCountInput roomIndex={0} />\n      </GuestRoomsProvider>,\n    );\n\n    const count = screen.getByText('2');\n    expect(count).toBeInTheDocument();\n\n    const minusButton = screen.getAllByRole('button')[0];\n    userEvent.click(minusButton);\n    const decreasedCount = screen.getByText('1');\n    expect(decreasedCount).toBeInTheDocument();\n\n    const plusButton = screen.getAllByRole('button')[1];\n    userEvent.click(plusButton);\n    userEvent.click(plusButton);\n    const increasedCount = screen.getByText('3');\n    expect(increasedCount).toBeInTheDocument();\n  });\n});\n```\n\n- We start with rendering the component\n- Verify if the current count's value is correct\n- Click the button to decrease the count and verify if it actually decreases it\n- Click the button to increase the count twice and verify the current count's value\n\nWe can have a lot of confidence in this test as it simulates how a user would use it.\n\nThe test for the `ChildrenCountInput` works the same way:\n\n```tsx\ndescribe('ChildrenCountInput', () => {\n  it('increases and decreases count by clicking buttons', () => {\n    render(\n      <GuestRoomsProvider>\n        <ChildrenCountInput roomIndex={0} />\n      </GuestRoomsProvider>,\n    );\n\n    const count = screen.getByText('0');\n    expect(count).toBeInTheDocument();\n\n    const plusButton = screen.getAllByRole('button')[1];\n    userEvent.click(plusButton);\n    userEvent.click(plusButton);\n    const increasedCount = screen.getByText('2');\n\n    expect(increasedCount).toBeInTheDocument();\n    const minusButton = screen.getAllByRole('button')[0];\n    userEvent.click(minusButton);\n    const decreasedCount = screen.getByText('1');\n    expect(decreasedCount).toBeInTheDocument();\n  });\n});\n```\n\nThe select component is also very interesting. The experience using `userEvent` is smooth and does what it intends to do.\n\nBut first, let's just add a test to verify the `ChildrenSelect` doesn't render any select because the current state doesn't have any children.\n\n```tsx\ndescribe('ChildrenSelect', () => {\n  it(\"does not render a child selector when there's no child\", () => {\n    render(\n      <GuestRoomsProvider>\n        <ChildrenSelect roomIndex={0} />\n      </GuestRoomsProvider>,\n    );\n\n    const selectLabel = screen.queryByText('Child 1 age');\n    expect(selectLabel).not.toBeInTheDocument();\n  });\n});\n```\n\nNow we can create a test to interact with the select and choose different age options.\n\nFirst I created a helper function to get the first option from the select element.\n\n```tsx\nfunction getFirstOption(name: string) {\n  return screen.getAllByRole('option', {\n    name,\n  })[0] as HTMLOptionElement;\n}\n```\n\nAnd now I can use it to verify the rendered selects and interact with each one of them.\n\n```tsx\ndescribe('ChildrenSelect', () => {\n  it('selects new option and verify selected item', () => {\n    render(\n      <GuestRoomsProvider guestRoomsString=\"1:4,6\">\n        <ChildrenSelect roomIndex={0} />\n      </GuestRoomsProvider>,\n    );\n\n    const selectLabel1 = screen.getByText('Child 1 age');\n    expect(selectLabel1).toBeInTheDocument();\n\n    const selectLabel2 = screen.getByText('Child 2 age');\n    expect(selectLabel2).toBeInTheDocument();\n\n    const selectLabel3 = screen.queryByText('Child 3 age');\n    expect(selectLabel3).not.toBeInTheDocument();\n\n    const select = screen.getAllByRole('combobox')[0];\n    const selectedOption = getFirstOption('4');\n    expect(selectedOption.selected).toBeTruthy();\n\n    const newSelectedOption = getFirstOption('3');\n    userEvent.selectOptions(select, newSelectedOption);\n    expect(selectedOption.selected).toBeFalsy();\n    expect(newSelectedOption.selected).toBeTruthy();\n  });\n});\n```\n\n_Context_: “1:4,6” means\n\n- 1 adult\n- 2 children: one with age 4 and the other with age 6.\n\nWe test a lot of things here:\n\n- Verify that child 1 and child 2 are rendered\n- Make sure that child 3 is not rendered\n- Verify if the selected option is the age 4\n- Select a new option (age 3)\n- Verify that the option age 4 is no more the selected one and now the selected option is age 3\n\nFor the `NumberInput` component, the test is pretty straightforward. Just render it and make sure the correct number is rendered.\n\n```tsx\ndescribe('NumberInput', () => {\n  it('renders the value between buttons', () => {\n    const noop = () => {};\n\n    render(\n      <GuestRoomsProvider>\n        <NumberInput\n          value={3}\n          increaseValue={noop}\n          decreaseValue={noop}\n          minValue={1}\n          maxValue={5}\n        />\n      </GuestRoomsProvider>,\n    );\n\n    expect(screen.getByText('3')).toBeInTheDocument();\n  });\n});\n```\n\nThe test for the `SearchButton` is also similar to the test above as we just want to make sure we are rendering the correct component with the right value.\n\n```tsx\ndescribe('SearchButton', () => {\n  it('renders the button', () => {\n    render(\n      <GuestRoomsProvider>\n        <SearchButton onSearch={() => {}} />\n      </GuestRoomsProvider>,\n    );\n\n    const button = screen.getByRole('button', {\n      name: /Search 1 room • 2 guests/i,\n    });\n\n    expect(button).toBeInTheDocument();\n  });\n});\n```\n\nI also created a test for the `GuestRooms` component but it is very similar to the integration test I created later on. I will cover this test in the next section.\n\n### Integration tests\n\nTo gain even more confidence in the feature, I created an integration test using Cypress.\n\nFirst, created a function to test the query params in the URL:\n\n```tsx\nfunction verifyQueryParams(queryParams) {\n  cy.location().should((location) => {\n    expect(location.search).to.eq(queryParams);\n  });\n}\n```\n\nAlso created a function to click the search button and provide the `verifyQueryParams`:\n\n```tsx\nfunction clickSearchButtonWithText(text) {\n  cy.get('button').contains(text).click();\n\n  return {\n    andVerifyQueryParams: verifyQueryParams,\n  };\n}\n```\n\nThis way we can use it like this:\n\n```tsx\nclickSearchButtonWithText('Search 1 room • 2 guests').andVerifyQueryParams(\n  '?guestRooms=2',\n);\n```\n\nThen I created a function to handle the test for the adults’ count selection:\n\n```tsx\nfunction selectAdultsCount() {\n  const adultsBlock = 'div[data-testid=\"adults-count-input-block\"]';\n\n  cy.get(adultsBlock).within(() => {\n    cy.contains('2').should('exist');\n\n    const adultsMinusButton = cy.get('button[data-testid=\"minus-button\"]');\n\n    adultsMinusButton.click();\n    adultsMinusButton.should('be.disabled');\n    cy.contains('1').should('exist');\n\n    const adultsPlusButton = cy\n      .get('button[data-testid=\"plus-button\"]')\n      .first();\n\n    adultsPlusButton.click();\n    adultsPlusButton.click();\n    adultsPlusButton.click();\n    cy.contains('4').should('exist');\n  });\n}\n```\n\n- Verify the count is 2\n- Click the decrease button and verify the button is now disabled because it's the minimum number of adults and verify that 1 is rendered as the count\n- Then click the increase button 3 times and verify the current's count is 4\n\nNow we need to create a function to test the children's count selection and their ages.\n\n```tsx\nfunction selectChildrenCountAndAges() {\n  const childrenBlock = 'div[data-testid=\"children-count-input-block\"]';\n\n  cy.get(childrenBlock).within(() => {\n    cy.contains('0').should('exist');\n\n    const childrenMinusButton = cy.get('button[data-testid=\"minus-button\"]');\n\n    childrenMinusButton.should('be.disabled');\n    cy.contains('0').should('exist');\n\n    const childrenPlusButton = cy\n      .get('button[data-testid=\"plus-button\"]')\n      .first();\n\n    childrenPlusButton.click();\n    childrenPlusButton.click();\n    childrenPlusButton.click();\n    cy.contains('3').should('exist');\n\n    cy.contains('Child 1 age');\n    cy.contains('Child 2 age');\n    cy.contains('Child 3 age');\n\n    cy.get('button[data-testid=\"close-button-1\"]').click();\n    cy.contains('Child 3 age').should('not.exist');\n\n    cy.get('select').first().select('3');\n  });\n}\n```\n\n- Verify it starts with the count 0 and the decrease button should be disabled\n- Click the increase button 3 times and it should add three age selects for each child's age\n- Click the close button for the third child and verify if it is not there anymore\n- Select the age for the first child\n\nNow that we have all the building blocks, we can use them to create a complete test for the dialog.\n\n```tsx\nfunction verifyGuestRoomsBehavior() {\n  const openDialogButton = cy.get('button');\n  openDialogButton.click();\n\n  clickSearchButtonWithText('Search 1 room • 2 guests').andVerifyQueryParams(\n    '?guestRooms=2',\n  );\n\n  const firstRoom = 'div[data-testid=\"room-key-0\"]';\n\n  cy.get(firstRoom).within(() => {\n    selectAdultsCount();\n    selectChildrenCountAndAges();\n  });\n\n  clickSearchButtonWithText('Search 1 room • 6 guests').andVerifyQueryParams(\n    '?guestRooms=4:3,8',\n  );\n\n  cy.contains('Room 2').should('not.exist');\n  cy.get('button').contains('+ Add room').click();\n  cy.contains('Room 2').should('exist');\n\n  const secondRoom = 'div[data-testid=\"room-key-1\"]';\n\n  cy.get(secondRoom).within(() => {\n    selectAdultsCount();\n    selectChildrenCountAndAges();\n  });\n\n  clickSearchButtonWithText('Search 2 rooms • 12 guests').andVerifyQueryParams(\n    '?guestRooms=4:3,8|4:3,8',\n  );\n\n  cy.get('button').contains('Remove room').click();\n  cy.contains('Room 2').should('not.exist');\n\n  clickSearchButtonWithText('Search 1 room • 6 guests').andVerifyQueryParams(\n    '?guestRooms=4:3,8',\n  );\n}\n```\n\n- Click the button to open the dialog\n- Click the search button and verify the expected query param in the URL\n- In the first room, select adults count and the children's count and ages\n- Click the search button again and verify the correct query param\n- Add a second room and add adults and children to it. Verify the query param again\n- Remove the second room, verify it is not there anymore, click the search button and verify the expected query param\n\nI also created a function to handle the dialog close button and verify its behavior.\n\n```tsx\nfunction verifyCloseButtonBehavior() {\n  cy.contains('Rooms & Guests').should('exist');\n  cy.get('button[data-testid=\"dialog-close-button\"]').click();\n  cy.contains('Rooms & Guests').should('not.exist');\n}\n```\n\nEverything together looks like this:\n\n```tsx\nit('verifies guest rooms dialog behavior', () => {\n  verifyGuestRoomsBehavior();\n  verifyCloseButtonBehavior();\n});\n```\n\nBut this is a test for the desktop. I also wanted to test it works fine for the mobile view. The idea is very similar, but add a different viewport and then test it.\n\n```tsx\ndescribe('on iPhone X', () => {\n  it('verifies guest rooms dialog behavior', () => {\n    cy.viewport('iphone-x');\n    verifyGuestRoomsBehavior();\n    verifyCloseButtonBehavior();\n  });\n});\n```\n\nEverything together looks like this:\n\n```tsx\ndescribe('GuestRoomsDialog', () => {\n  beforeEach(() => {\n    cy.visit('/');\n  });\n\n  describe('on iPhone X', () => {\n    it('verifies guest rooms dialog behavior', () => {\n      cy.viewport('iphone-x');\n      verifyGuestRoomsBehavior();\n      verifyCloseButtonBehavior();\n    });\n  });\n\n  describe('on desktop', () => {\n    it('verifies guest rooms dialog behavior', () => {\n      verifyGuestRoomsBehavior();\n      verifyCloseButtonBehavior();\n    });\n  });\n});\n```\n\nLet's see a preview of the integration test in action?\n\n<div style=\"margin: auto; text-align: center;\">\n  <video controls=\"true\" allowfullscreen=\"true\" class=\"full-width\">\n    <source src=\"/series/frontend-challenges/dialog-integration-test-cypress.mov\" type=\"video/mp4\">\n  </video>\n</div>\n\n## That's it!\n\nThis is the first article from this series I'm working on: `Frontend Challenges`. I want to challenge myself in different challenges in the frontend domain and see what I can learn from it. Every challenge will be documented and shared with you all.\n\nI hope you liked this post and feel free to steal some ideas for the projects and products you are building.\n\nSee ya!\n\n## Resources\n\n- [Frontend Challenges](https://github.com/imteekay/frontend-challenges)\n- [A Mental Model to think in TypeScript](/a-mental-model-to-think-in-typescript)\n- [Basic Recipes for React Testing Library](/basic-recipes-for-react-testing-library)\n- [React Hooks, Context API, and Pokemons](/react-hooks-context-api-and-pokemons)\n\n### React\n\n- [Become a React Developer](https://www.educative.io/path/become-a-react-developer?aff=x8bV)\n- [React Development for Professionals](https://www.educative.io/path/react-development-for-professionals?aff=x8bV)\n- [React App Testing](https://www.educative.io/path/react-app-testing?aff=x8bV)\n- [React for Front-End Developers](https://www.educative.io/path/react-front-end-developer?aff=x8bV)\n- [React Deep Dive: From Beginner to Advanced](https://www.educative.io/courses/react-beginner-to-advanced?aff=x8bV)\n- [Test-driven Development with React](https://www.educative.io/courses/test-driven-react-development?aff=x8bV)\n- [The Road to learn React](https://www.educative.io/courses/the-road-to-learn-react?aff=x8bV)\n- [Reintroducing React: V16 and Beyond](https://www.educative.io/courses/reintroducing-react-v16-beyond?aff=x8bV)\n- [Advanced React Patterns With Hooks](https://www.educative.io/courses/advanced-react-patterns-with-hooks?aff=x8bV)\n- [React for Beginners Course](https://reactforbeginners.com/friend/LEANDRO)\n- [Advanced React Course](https://advancedreact.com/friend/LEANDRO)\n\n### TypeScript\n\n- [TypeScript for Front-End Developers](https://www.educative.io/path/typescript-for-front-end-developers?aff=x8bV)\n- [Using TypeScript with React](https://www.educative.io/courses/using-typescript-with-react?aff=x8bV)\n- [Learn TypeScript: The Complete Course for Beginners](https://www.educative.io/courses/learn-typescript-complete-course?aff=x8bV)\n- [Advanced TypeScript Masterclass](https://www.educative.io/courses/advanced-typescript-masterclass?aff=x8bV)\n\n### JavaScript\n\n- [JavaScript in Detail: From Beginner to Advanced](https://www.educative.io/courses/javascript-in-detail-from-beginner-to-advanced?aff=x8bV)\n- [Simplifying JavaScript: A Handy Guide for Software Engineers](https://www.educative.io/courses/simplifying-javascript-handy-guide?aff=x8bV)\n- [The Complete Guide to Modern JavaScript](https://www.educative.io/courses/complete-guide-to-modern-javascript?aff=x8bV)\n- [Learn Object-Oriented Programming in JavaScript](https://www.educative.io/courses/learn-object-oriented-programming-in-javascript?aff=x8bV)\n- [JavaScript In Practice: ES6 And Beyond](https://www.educative.io/courses/javascript-in-practice-es6-and-beyond?aff=x8bV)\n- [Data Structures for Coding Interviews in JavaScript](https://www.educative.io/courses/data-structures-coding-interviews-javascript?aff=x8bV)\n- [JavaScript Course by OneMonth](https://mbsy.co/lFtbC)\n- [ES6 Course](https://es6.io/friend/LEANDRO)\n- [Beginner JavaScript Course](https://beginnerjavascript.com/friend/LEANDRO)\n- [JavaScript Fundamentals Before Learning React](https://www.educative.io/courses/javascript-fundamentals-before-learning-react?aff=x8bV)\n- [Rediscovering JavaScript: ES6, ES7 & ES8](https://www.educative.io/courses/rediscovering-javascript?aff=x8bV)\n",
  },
  {
    url: '/series/mastering-javascript/destructuring-objects-and-arrays',
    title: 'Destructuring Arrays and Objects in JavaScript',
    content:
      "This post is part of the [Mastering JavaScript Series](/series/mastering-javascript).\n\nThe [destructuring assignment](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment) is a very versatile tool. This technique can be used for both objects and arrays. We will take a closer look on both data structures.\n\n## Named parameters\n\nWe can create named parameters for functions with two or more parameters. This way we don't have to deal with ordering problems, the function API is better exposed and it is easier to track down errors caused by missing parameters.\n\nWe can refactor this code:\n\n```ts\nconst hello = (name, country) => `Hi, I'm ${name} from ${country}`;\n\nhello('Brazil', 'TK'); // 'Hi, I'm Brazil from TK'\n```\n\nInto a function that receives only one object with all the necessary parameters and use object destructuring to get all the parameters:\n\n```ts\nconst hello = ({ name, country }) => `Hi, I'm ${name} from ${country}`;\n\nhello({ country: 'Brazil', name: 'TK' }); // 'Hi, I'm TK from Brazil'\n```\n\nYou can even set default values!\n\n```ts\nconst hello = ({ name = 'TK', country = 'Brazil' } = {}) =>\n  `Hi, I'm ${name} from ${country}`;\n\nhello(); // 'Hi, I'm TK from Brazil'\n```\n\n## Accessing object attributes\n\nAnother way we can use the object destructuring is to access the object fields. This makes the code simpler, creating a copy of the targeted field into a variable/constant.\n\nFrom this:\n\n```ts\nconst person = { name: 'TK', country: 'Brazil' };\nconst name = person.name;\nconst country = person.country;\n```\n\nTo this:\n\n```ts\nconst person = { name: 'TK', country: 'Brazil' };\nconst { name, country } = person;\n```\n\nYou can use default values here too. For example:\n\n```ts\nconst person = { name: 'TK', country: 'Brazil' };\nconst { name, country, age = 23 } = person;\n\nname; // 'TK'\ncountry; // 'Brazil'\nage; // 23\n```\n\nThe age is not part of the `person` but it has a default value when the object is destructured.\n\n## Accessing array elements\n\nThe destructuring feature also works for the array data structure. But instead using the `{}` notation, we use the `[]` to access elements from the array.\n\nInstead of accessing the array elements by an index:\n\n```ts\nconst person = ['TK', 23];\nconst name = person[0];\nconst age = person[1];\n```\n\nWe use array destructuring:\n\n```ts\nconst person = ['TK', 23];\nconst [name, age] = person;\n```\n\nAlso, in frontend/react applications, it is very common to destructure the array that is returned from a React Hook. For example the `useState` hook. It's a function that returns an array of a state and its setter:\n\nHere, it works the same way. Instead of accessing by an index:\n\n```ts\nimport { useState } from 'react';\n\nconst defaultPerson = { name: 'TK', age: 23 };\n\nconst state = useState(defaultPerson);\nconst person = state[0];\nconst setPerson = state[1];\n```\n\nWe destructure the array:\n\n```ts\nimport { useState } from 'react';\n\nconst defaultPerson = { name: 'TK', age: 23 };\n\nconst [person, setPerson] = useState(defaultPerson);\n```\n\nJust like objects, we can also set a default value for array destructuring:\n\n```ts\nconst person = ['TK', 23];\nconst [name, age, lastName = 'Kinoshita'] = person;\n\nname; // 'TK'\nage; // 23\nlastName; // 'Kinoshita'\n```\n\n## Swapping values\n\nIt is also useful if you need to swap values between two variables.\n\n```ts\nlet name1 = 'TK';\nlet name2 = 'Kazumi';\n\nname1; // 'TK'\nname2; // 'Kazumi'\n\n[name1, name2] = [name2, name1];\n\nname1; // 'Kazumi'\nname2; // 'TK'\n```\n\n## Ignoring values\n\nWe saw how we can use destructuring to get attributes from an object or elements from an array. But what if we want to ignore any attribute or element?\n\nIn an object, it's pretty straightforward. We just need to not destructure with the attribute we don't want or need.\n\n```ts\nconst person = { name: 'TK', country: 'Brazil' };\nconst { name } = person;\n```\n\nWe just ignore the `country` attribute.\n\nBut for arrays, we need to understand that they are linear data structure with sequential access, meaning that the sequence matters.\n\n```ts\nconst person = ['TK', 'Brazil', 23];\nconst [name, , age] = person;\n\nname; // 'TK';\nage; // 23\n```\n\nIf we want to ignore the `'Brazil'` value but still want the `age` element, we can skip it by using an empty space between commas.\n\n## Assigning rest\n\nBut what if we don't want to ignore it. We care about one of the values and also want to keep an eye on the other ones. In this next example we care about the `name` attribute and we want to keep an eye on the rest of the other attributes:\n\n```ts\nconst person = { name: 'TK', country: 'Brazil', age: 23 };\nconst { name, ...rest } = person;\n\nname; // 'TK'\nrest; // { country: 'Brazil', age: 23 }\n```\n\nYou can see the `rest` still holds all the other attributes that were not destructured.\n\nThis `...` is called `Spread operator` and the `...rest` is commonly called `Rest parameters`.\n\n## Resources\n\n- [Master JavaScript repo](https://github.com/imteekay/master-javascript)\n- [Master JavaScript Series](/series/mastering-javascript)\n- [JavaScript in Detail: From Beginner to Advanced](https://www.educative.io/courses/javascript-in-detail-from-beginner-to-advanced?aff=x8bV)\n- [The Complete Guide to Modern JavaScript](https://www.educative.io/courses/complete-guide-to-modern-javascript?aff=x8bV)\n- [Rediscovering JavaScript: ES6, ES7 & ES8](https://www.educative.io/courses/rediscovering-javascript?aff=x8bV)\n",
  },
  {
    url: '/series/mastering-javascript/revisiting-conditionals-in-javascript-and-typescript',
    title: 'Revisiting Conditionals in JavaScript and TypeScript',
    content:
      "This post is part of the [Mastering JavaScript Series](/series/mastering-javascript).\n\nWe are going to see different ways we can handle conditions in JavaScript and how TypeScript can help us make better use of code.\n\nImagine we have a boolean value and based on this boolean, we want to assign a value to a new variable.\n\n```tsx\nconst isActive = true;\n```\n\nWith this boolean, we want:\n\n- if active (`isActive` = true): assign a value `on` to the variable `toggle`.\n- if inactive (`isActive` = false): assign a value `off` to the variable `toggle`.\n\n```tsx\nlet toggle;\n\nif (isActive) {\n  toggle = 'on';\n} else {\n  toggle = 'off';\n}\n```\n\nTo do this, we usually use a `var` or a `let` statement. Create a `toggle` with `undefined` value and then assign the correct value based on the `isActive` value.\n\nThis works.\n\nBut we can't use `const` in this case. When defining a `const`, we need to add a value attached to it. Doing something like this will throw an error:\n\n```tsx\n> Uncaught SyntaxError: Missing initializer in const declaration\n```\n\nWe also can't use `const` inside the if-else condition.\n\nIf we do this:\n\n```tsx\nif (isActive) {\n  const toggle = 'on';\n} else {\n  const toggle = 'off';\n}\n```\n\nAnd then verify the `toggle` value, it throws an error because this constant is not in the scope.\n\n```tsx\n$ toggle\n> Uncaught ReferenceError: toggle is not defined\n```\n\nAnother way to handle this type of condition is by using the ternary operator.\n\n```tsx\nconst toggle = isActive ? 'on' : 'off';\n```\n\nThat's nice and beautiful. Capture everything in a very short and readable way.\n\nNow imagine handling multiple conditions. We can't really use the ternary operator. The first thought is to come back to the if-else statement, but now with multiple possible conditions:\n\n```tsx\nlet label;\n\nif (status === 'finished') {\n  label = 'Finished task';\n} else if (status === 'inactive') {\n  label = 'Task inactive';\n} else if (status === 'ongoing') {\n  label = 'Ongoing task';\n}\n```\n\nAnother possibility that comes to mind is using a switch case.\n\n```tsx\nlet label;\n\nswitch (status) {\n  case 'finished':\n    label = 'Finished task';\n    break;\n  case 'inactive':\n    label = 'Task inactive';\n    break;\n  case 'ongoing':\n    label = 'Ongoing task';\n    break;\n}\n```\n\nBut what if we also want to assign a value to another variable? A `tag` variable in this case. The tag's value follows this logic:\n\n- `finished`: `Finished`\n- `inactive`: `Inactive`\n- `ongoing`: `Ongoing`\n\nLet's build it!\n\n```tsx\nlet label;\nlet tag;\n\nswitch (status) {\n  case 'finished':\n    label = 'Finished task';\n    tag = 'Finished';\n    break;\n  case 'inactive':\n    label = 'Task inactive';\n    tag = 'Inactive';\n    break;\n  case 'ongoing':\n    label = 'Ongoing task';\n    tag = 'Ongoing';\n    break;\n}\n```\n\nNow we also want a button's variant for each status. The logic follows:\n\n- `finished`: `secondary`\n- `inactive`: `disabled`\n- `ongoing`: `primary`\n\nLet's add this variable to the switch case.\n\n```tsx\nlet label;\nlet tag;\nlet variant;\n\nswitch (status) {\n  case 'finished':\n    label = 'Finished task';\n    tag = 'Finished';\n    variant = 'secondary';\n    break;\n  case 'inactive':\n    label = 'Task inactive';\n    tag = 'Inactive';\n    variant = 'disabled';\n    break;\n  case 'ongoing':\n    label = 'Ongoing task';\n    tag = 'Ongoing';\n    variant = 'primary';\n    break;\n}\n```\n\nThe lesson here is that the switch case starts to get bigger and more complex. To abstract this complexity, we can use object to map the status to an object that represents the status.\n\n```tsx\nconst statusMap = {\n  finished: {\n    label: 'Finished task',\n    tag: 'Finished',\n    variant: 'secondary',\n  },\n  inactive: {\n    label: 'Task inactive',\n    tag: 'Inactive',\n    variant: 'disabled',\n  },\n  ongoing: {\n    label: 'Ongoing task',\n    tag: 'Ongoing',\n    variant: 'primary',\n  },\n};\n\nconst { label, tag, variant } = statusMap['finished'];\nlabel; // => Finished tag\ntag; // => Finished\nvariant; // => secondary\n```\n\nAnd if you are using a type system like TypeScript, we can do even better things.\n\nWe can type the `statusMap`’s key and value and require to use the existing keys.\n\n```tsx\ntype Statuses = 'finished' | 'inactive' | 'ongoing';\ntype StatusObject = {\n  label: string;\n  tag: string;\n  variant: string;\n};\n\ntype StatusMap = Record<Statuses, StatusObject>;\n```\n\nAnd we used in the map:\n\n```tsx\nconst statusMap: StatusMap = {\n  finished: {\n    label: 'Finished task',\n    tag: 'Finished',\n    variant: 'secondary',\n  },\n  inactive: {\n    label: 'Task inactive',\n    tag: 'Inactive',\n    variant: 'disabled',\n  },\n  ongoing: {\n    label: 'Ongoing task',\n    tag: 'Ongoing',\n    variant: 'primary',\n  },\n};\n```\n\nWhen you use it (and if your editor is configured to make the IntelliSense works), it will show all the possibilities for you.\n\n![](/series/mastering-javascript/intellisense.png)\n\nIt will also get errors in compile-time if you use a different key to access the object.\n\n![](/series/mastering-javascript/error-in-compile-time.png)\n\nGreat! Now we have a solution abstracting the complexity and getting errors in compile-time. In the future, it will also be possible to use [pattern matching](https://github.com/tc39/proposal-pattern-matching) in JavaScript and we can come up with more solutions to handle conditions.\n\n## Resources\n\n- [Master JavaScript repo](https://github.com/imteekay/master-javascript)\n- [Master JavaScript: Conditionals](https://github.com/imteekay/master-javascript/tree/main/conditionals)\n- [Master JavaScript Series](/series/mastering-javascript)\n- [Learn Object-Oriented Programming in JavaScript](https://www.educative.io/courses/learn-object-oriented-programming-in-javascript?aff=x8bV)\n- [JavaScript in Detail: From Beginner to Advanced](https://www.educative.io/courses/javascript-in-detail-from-beginner-to-advanced?aff=x8bV)\n",
  },
  {
    url: '/series/rebuilding-mercaris-search/home-menu',
    title: "Rebuilding Mercari's Search: Home and Menu",
    content:
      "This is the second post of the [Rebuilding Mercari's Search series](/series/rebuilding-mercaris-search).\n\nIn this post, we'll talk about the home and the menu drafts. Before starting to implement the search, the filter, and the products list, I wanted to add a very simple home and a very simple menu to do the navigation between the home (url: `/`) and the search (url: `/search`) pages.\n\nAs we start to implement UI, I should tell you that my focus on this project was to do the logic, state management, and tests. This is why I was looking for a UI framework to work as my design system. With this idea, I don't need to work heavily with CSS.\n\nI chose Material UI, because I'm familiar with it, so I can focus on other parts instead of learning a new framework now.\n\nSo let's install the library and start implement the home and the menu.\n\n```bash\nyarn add @material-ui/core\n```\n\nThe home is just a page with a title for now as I want to focus on the navigation between the home and the search.\n\nSo the home, that will live in the `/` url, will have the menu to navigate to the search page, which will live in the `/search` url for now.\n\nThis is the home with the title:\n\n```tsx\nexport default function Home() {\n  return <h1>Home</h1>;\n}\n```\n\nThis component page lives in the `pages/index.tsx` as NextJS does routing based on the folder and file structures.\n\nTo make all the pages have a menu to be able to navigate to other places, we need to add it to the `pages/_app.tsx` file. But to be able to do that, let's first implement our Menu component.\n\nTo simplify the menu at first, I wanted to add a button that will open or close the menu showing or hiding the menu items.\n\n```tsx\n<Button aria-controls=\"menu\" aria-haspopup=\"true\" onClick={handleClick}>\n  Open Menu\n</Button>\n```\n\nThis is the first part. Nothing much here. We need the `handleClick` function now.\n\n```tsx\nconst [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n\nconst handleClick = (event: MouseEvent<HTMLButtonElement>) => {\n  setAnchorEl(event.currentTarget);\n};\n```\n\nThe `handleClick` function only manage the state related to the `anchorEl`.\n\nThe rest of the menu UI is pretty simple, we only need to use the `Menu` and the `MenuItem` from the Material UI.\n\n```tsx\n<MuiMenu\n  id=\"menu\"\n  anchorEl={anchorEl}\n  keepMounted\n  open={Boolean(anchorEl)}\n  onClose={handleClose}\n>\n  {menuItems.map((item: MenuItem) => (\n    <Link href={item.linkTo} key={item.key}>\n      <MuiMenuItem>{item.label}</MuiMenuItem>\n    </Link>\n  ))}\n</MuiMenu>\n```\n\nWe know about the `anchorEl`, but we need to implement the `handleClose` function, the `menuItems` list, and the `MenuItem` type.\n\nThe `MenuItem` is a \"type\" representation for each item:\n\n```tsx\nexport type MenuItem = {\n  linkTo: string;\n  label: string;\n  key: string;\n};\n```\n\nThe `menuItems` is the simplest as it is just a list of items passed as a prop to this menu component. But we need to make sure it is passed and the \"type\" representation of this list is in the function component contract.\n\n```tsx\nimport { FunctionComponent } from 'react';\n\ntype MenuPropsType = { menuItems: MenuItem[] };\n\nexport const Menu: FunctionComponent<MenuPropsType> = ({ menuItems }) => {\n\t...\n};\n```\n\nAnd the `handleClose` function only undo what the `handleClick` does: reset the `anchorEl` with a `null` value.\n\n```tsx\nconst handleClose = (_: any) => {\n  setAnchorEl(null);\n};\n```\n\nNice! The menu is not complete nor pretty, but it's functional now. We can start using in our app. To be able to reuse for all pages (for this app, it'll be for the home and the search pages), we just need to add it to the `_app.tsx` file.\n\n```tsx\nimport { Fragment } from 'react';\nimport type { AppProps } from 'next/app';\nimport Menu, { MenuItem } from 'Base/Layout/Menu';\nimport '../styles/globals.css';\n\nconst menuItems: MenuItem[] = [\n  {\n    linkTo: '/',\n    label: 'Home',\n    key: 'link-to-home',\n  },\n  {\n    linkTo: '/search',\n    label: 'Search',\n    key: 'link-to-search',\n  },\n];\n\nfunction App({ Component, pageProps }: AppProps) {\n  return (\n    <Fragment>\n      <Menu menuItems={menuItems} />\n      <Component {...pageProps} />\n    </Fragment>\n  );\n}\n\nexport default App;\n```\n\nThe `Component` is each page we want to create and we add the `Menu` at the top of the page. As we saw earlier, we need to pass the `menuItems` with the type contract we built in the menu. It's also nice that we can reuse the types to make the data consistent.\n\n## Final words\n\nThis was the second post of the _Rebuilding Mercari's Search_ series and I hope this also provides value to you. In this post, we start creating the building blocks for the app by adding a very simple home and menu for navigation.\n\nFor the following post, we'll talk about the implementation of the search page, where we'll focus on the products list UI first.\n\n## Resources\n\n- [Home & Menu Pull Request](https://github.com/imteekay/mercari-search/pull/1)\n- [mercari-search repo](https://github.com/imteekay/mercari-search)\n",
  },
  {
    url: '/series/rebuilding-mercaris-search/setup-nextjs-with-typescript-prettier-and-jest',
    title:
      "Rebuilding Mercari's Search: Setup NextJS with TypeScript, Prettier, and Jest",
    content:
      "This post is part of the [Rebuilding Mercari's Search series](/series/rebuilding-mercaris-search) and the very first one.\n\nIn this post, we'll setup the project with some nice tooling I've been working on these days. It'll be a NextJS application powered by TypeScript and nice devtools like Prettier, Jest, and the Testing Library.\n\nWe'll also see how to setup husky to help make our codebase consistent running Prettier on pre-commit. Let's dive in.\n\n## NextJS & TypeScript\n\nNextJS setup with TypeScript is pretty easy. We just need to use its CLI:\n\n```jsx\nyarn create next-app --typescript\n```\n\nAnd done! We have the whole ready to be run. Just start the dev server and we can see the app running:\n\n```jsx\nyarn dev\n```\n\nNow you're able to access `[localhost:3000](http://localhost:3000)` and see the app running.\n\nIt comes with the whole TypeScript initial setup like:\n\n- `tsconfig.json`: the compiler configuration for the TypeScript\n- `next-env.d.ts`: the declaration types for NextJS\n- `_app.tsx`: the main app that runs the pages setup with the extension `.tsx`\n- `index.tsx`: the `/` page as an example of a `.tsx` component\n\n## Prettier\n\nPrettier is an opinionated code formatter. It supports many languages, it's configurable, and it's heavily used in the JavaScript community.\n\nA couple of days ago, Anthony joked about Prettier not respecting himself. And I said that I love prettier for _respecting_ consistency:\n\n[https://twitter.com/leandrotk\\_/status/1399090968301801473](https://twitter.com/wordsofteekay/status/1399090968301801473)\n\nI think that's the important \"word\": consistency. When working in a big company with different teams or just many people in the same team, code consistency is key.\n\nTo configure Prettier is very simple. Let's take a look:\n\n```bash\nyarn add --dev --exact prettier\n```\n\nCreate a file `.prettierrc`:\n\n```json\n{\n  \"singleQuote\": true,\n  \"trailingComma\": \"all\"\n}\n```\n\nAnd the configuration is pretty much it. To make it work in your editor, you'll probably need to install a plugin or extension. I've been using vscode with Prettier and it looks great.\n\nWe can also do other two things to make it more complete:\n\n- Add a `.prettierignore` file to ignore files that we don't want to run Prettier\n\n```json\nnode_modules\n.next\n.yarn.lock\n```\n\nFor a NextJS project, we'll add the common `node_modules` folder to the ignore file, the `.yarn.lock`, and the `.next` folder that's generated from the NextJS dev build.\n\n- Run prettier on pre-commit to make sure all changes are _Prettier_.\n\nTo make this works, we can use lint-staged and husky. The easier way is to run this command:\n\n```json\nnpx mrm@2 lint-staged\n```\n\nIt'll configure basically everything you need to run prettier on pre-commit. The only thing that I needed to do was adding the important file extensions for this project, more specifically `.tsx` and `.ts`:\n\n```json\n\"lint-staged\": {\n  \"*.{js,jsx,css,md,ts,tsx}\": \"prettier --write\"\n}\n```\n\nThis configuration was added by the command in the `package.json` file. If you add a new file with any of these extensions, it'll run prettier on each file that is in the git staged area before the commit.\n\nGreat, now we can make sure the project's code will be consistent from beginning to the end.\n\n## Testing with Jest and Testing Library\n\nTesting is a big part of a project's setup. When building software, we want to ship it with confidence that it really works. Not only now, but across many releases we'll do. Automation is also important in terms of velocity.\n\nTo be able to have this confidence, I always rely on Jest, a testing framework, and the Testing Library + its helpers to do the job. First jest:\n\n```bash\nyarn add -D jest @types/jest babel-jest jest-axe @types/jest-axe\n```\n\n- `jest`: the testing framework\n- `@types/jest`: the types to work well with TypeScript\n- `babel-jest`: compiles JavaScript code for the tests files\n- `jest-axe`: a custom Jest matcher to handle accessibility testing\n- `@types/jest-axe`: the types to work well with TypeScript\n\nAfter installing all the necessary dependencies, we need to add the configuration.\n\n`jest.setup.js`:\n\n```jsx\nimport 'jest-axe/extend-expect';\n```\n\n`jest.config.js`:\n\n```jsx\nmodule.exports = {\n  setupFilesAfterEnv: ['./jest.setup.js'],\n  testEnvironment: 'jsdom',\n};\n```\n\n`.babelrc`:\n\n```json\n{\n  \"presets\": [\"next/babel\"]\n}\n```\n\n`package.json`:\n\n```json\n{\n  ...\n\t\"test\": \"jest\",\n\t\"test:watch\": \"jest --watch\"\n\t...\n}\n```\n\nAnd now we are able to run our tests by calling these commands:\n\n```bash\nyarn test\nyarn test:watch\n```\n\nFor the Testing Library, it's simpler. We just need to install it and start using it.\n\n```json\nyarn add -D @testing-library/react @testing-library/jest-dom\n```\n\n- `@testing-library/react`: the testing tool to test react components\n- `@testing-library/jest-dom`: it provides custom matchers for jest. I really like to use the `toBeInTheDocument` matcher for component testing.\n\nThe only configuration I needed to do was adding the `jest-dom` to the testing setup to enable the matchers for test files.\n\n`jest.setup.js`:\n\n```jsx\nimport '@testing-library/jest-dom';\nimport 'jest-axe/extend-expect';\n```\n\nI didn't setup Cypress because I want to focus on the search implementation first, but we'll see in the last episodes of this series that we'll try to implement an integration test with Cypress to test our app.\n\n## Final words\n\nI'm very happy with this first post of the _Rebuilding Mercari's Search_ series and I hope this also provides value and knowledge when it comes to starting a new project, adding valuable frontend tooling, and setup NextJS.\n\nFor the following post, we'll talk about a simple implementation of the home page and menu using React together with TypeScript.\n\n## Resources\n\n- [Project Set up + Home: Pull Request](https://github.com/imteekay/mercari-search/pull/1/)\n- [Configure husky and lint-staged to run prettier on pre-commit: Pull Request](https://github.com/imteekay/mercari-search/pull/3)\n- [mercari-search repo](https://github.com/imteekay/mercari-search)\n",
  },
  {
    url: '/series/typescript-learnings/interesting-types',
    title: 'Typescript Interesting Types',
    content:
      "These days I'm building a new project to understand some topics deeply. It is about user experience, web performance, accessibility, and a type system for consistent data.\n\nThis project I'm basically using React with Typescript. At first, I implemented a custom hook to handle the data fetching. One of the possible data types the fetch could return is a `Product` type. It looks like this:\n\n```typescript\ntype Product = {\n  name: string;\n  price: number;\n  imageUrl: string;\n  description: string;\n  isShippingFree: boolean;\n  discount: number;\n};\n```\n\nNow that I could fetch some products, I wanted to use the list of products to render in the DOM. So I created a `Product` component. But as we are using Typescript, the props should be typed. In this case, I used the `Product` type. It looks like this:\n\n```typescript\nexport const Product = ({\n  imageUrl,\n  name,\n  description,\n  price,\n  discount,\n  isShippingFree,\n}: ProductType) => (\n  <Box>\n    <Image imageUrl={imageUrl} imageAlt={name} />\n    <TitleDescription name={name} description={description} />\n    <Price price={price} discount={discount} />\n    <Tag label=\"Free Shipping\" isVisible={isShippingFree} />\n  </Box>\n);\n```\n\nAnd when I started implementing the `Image` component, I just passed the `imageUrl` and the `imageAlt` as props. It looks like this:\n\n```typescript\nexport const Image = ({ imageUrl }) => <img src={imageUrl} />;\n```\n\nIn this case, I couldn't use the `Product` type. But I could reuse it.\n\nI learned about this new type: the [Partial](https://www.typescriptlang.org/docs/handbook/utility-types.html#partialt) type. The idea of the `Partial` type is to build a new type based on the passed type and set all attributes to `optional`.\n\nSo, if we do a partial of the `Product` type, it would look like this:\n\n```typescript\ntype Product = {\n  name?: string;\n  price?: number;\n  imageUrl?: string;\n  description?: string;\n  isShippingFree?: boolean;\n  discount?: number;\n};\n```\n\nAll properties are set to optional.\n\nAnd now I can use it for the `Image` component:\n\n```typescript\nexport const Image = ({ imageUrl }): Partial<ProductType> => (\n  <img src={imageUrl} />\n);\n```\n\nBut when I use the `Image` component, I can pass any props I want. I miss the type check. It doesn't break in compile time.\n\nTo fix that, I could just build an `ImagePropsType` and use it as the component props type.\n\n```typescript\ntype ImagePropsType = {\n  imageUrl: string;\n};\n\nexport const Image = ({ imageUrl }): ImagePropsType => <img src={imageUrl} />;\n```\n\nBut I already have the type for the `imageUrl` inside the `Product` type. So I started to search how I could reuse the type: I found the `Pick` type.\n\nThe `Pick` type lets me reuse the `Product` type by picking a set of properties I want:\n\n```typescript\ntype ImagePropsType = Pick<ProductType, 'imageUrl'>;\n```\n\nNow I ensure that type checking and the type reusability work well.\n\nTo build the whole `Image` component, I also needed to pass other props like: `imageAlt` and `width`.\n\nWhat I wanted is the intersection of the `Pick<ProductType, 'imageUrl'>`, the `imageAlt` type, and the `width` type.\n\nIn Typescript, the representation of the intersection is the `&` operator.\n\nI defined the `ImageUrlType`:\n\n```typescript\ntype ImageUrlType = Pick<ProductType, 'imageUrl'>;\n```\n\nAnd the `ImageAttrType` to represent both the `imageAlt` and the `width`:\n\n```typescript\ntype ImageAttrType = { imageAlt: string; width?: string };\n```\n\nAnd compose them together by insecting the types:\n\n```typescript\ntype ImagePropsType = ImageUrlType & ImageAttrType;\n```\n\nAnd the final result is:\n\n```typescript\nimport { ProductType } from 'types/Product';\n\ntype ImageUrlType = Pick<ProductType, 'imageUrl'>;\ntype ImageAttrType = { imageAlt: string; width?: string };\ntype ImagePropsType = ImageUrlType & ImageAttrType;\n\nexport const Image = ({ imageUrl, imageAlt, width }: ImagePropsType) => (\n  <img src={imageUrl} alt={imageAlt} width={width} />\n);\n```\n\nI have the image URL, alt, width types intersected, and defined in the `ImagePropsType`. It can think of types as data and compose them. This is a very cool feature.\n\nThese are the interesting new types I learned this week.\n\n## Resources\n\n- [TypeScript for Front-End Developers](https://www.educative.io/path/typescript-for-front-end-developers?aff=x8bV)\n- [Using TypeScript with React](https://www.educative.io/courses/using-typescript-with-react?aff=x8bV)\n- [Learn TypeScript: The Complete Course for Beginners](https://www.educative.io/courses/learn-typescript-complete-course?aff=x8bV)\n- [Advanced TypeScript Masterclass](https://www.educative.io/courses/advanced-typescript-masterclass?aff=x8bV)\n",
  },
  {
    url: '/series/typescript-learnings/object-destructuring',
    title: 'Typescript Learnings: Object Destructuring',
    content:
      "This is part of my series on [Typescript Learnings](/series/typescript-learnings), where I share micro posts about everything I'm learning related to Typescript.\n\nIt's a common feature to destructure objects in JavaScript. For example, imagine we have a `Person` object. It looks like:\n\n```javascript\nconst person = {\n  firstName: 'TK',\n  age: 24,\n  email: 'tk@mail.com',\n  isLearning: true,\n};\n```\n\nAnd when we use it, sometimes we want to destructure the object to get the attributes.\n\n```javascript\nconst { firstName, age, email, isLearning } = person;\n```\n\nIn Typescript, it works the same way. But with types. So let's type the attributes. At first I thought I could add the type after each attribute. Something like:\n\n```typescript\nconst {\n  firstName: string,\n  age: number,\n  email: string,\n  isLearning: boolean,\n} = person;\n```\n\nBut it actually doesn't compile that way. We don't specify a type for each attribute, we specify the object type. We could add this way:\n\n```typescript\nconst {\n  firstName,\n  age,\n  email,\n  isLearning,\n}: {\n  firstName: string;\n  age: number;\n  email: string;\n  isLearning: boolean;\n} = person;\n```\n\nOr we could have a `Person` type (or interface) to handle these types.\n\n```typescript\ntype Person = {\n  firstName: string;\n  age: number;\n  email: string;\n  isLearning: boolean;\n};\n```\n\nAnd use it in the object destructuring:\n\n```typescript\nconst { firstName, age, email, isLearning }: Person = person;\n```\n\nImplementing a `type` is cool because we could also use it in the `person` definition:\n\n```typescript\nconst person: Person = {\n  firstName: 'TK',\n  age: 24,\n  email: 'tk@mail.com',\n  isLearning: true,\n};\n```\n\n## Resources\n\n- [TypeScript for Front-End Developers](https://www.educative.io/path/typescript-for-front-end-developers?aff=x8bV)\n- [Using TypeScript with React](https://www.educative.io/courses/using-typescript-with-react?aff=x8bV)\n- [Learn TypeScript: The Complete Course for Beginners](https://www.educative.io/courses/learn-typescript-complete-course?aff=x8bV)\n- [Advanced TypeScript Masterclass](https://www.educative.io/courses/advanced-typescript-masterclass?aff=x8bV)\n",
  },
  {
    url: '/series/typescript-learnings/type-system',
    title: 'Typescript Learnings: Type System',
    content:
      "This is part of my series on [Typescript Learning](/series/typescript-learnings), where I share micro-posts about everything I'm learning related to Typescript.\n\nOne of the main Typescript features is the Type System. We are going to play around with the type system and see how it works.\n\n## Basic Types\n\nThe basic types are:\n\n- number\n- string\n- boolean\n\nWe define these type by using this nomenclature: `variableName: typeName`, where the `variableName` you choose and the `typeName` can a `number`, a `string`, or a `boolean`. Let's try it out.\n\n```typescript\nconst age: number = 25;\nconst name: string = 'TK';\nconst isLearning: boolean = true;\n```\n\nWhat is the power of the Typescript type system? We define a type for a given variable or constant, it doesn't change across the whole system. A string will be a string forever. A number too. And so on.\n\n```typescript\nlet age: number = 25;\nage = 'TK'; // Type '\"TK\"' is not assignable to type 'number'.\n```\n\nIt fails on compile-time and raises a \"Type Error\". This helps us with immutable types and prevent possible bugs.\n\n## Collections\n\nHere we have Arrays, Tuples, and Objects. They are collection, data structures to store, well, data.\n\nThere are two ways to define a `Array` type. The type followed by a `[]`:\n\n```typescript\nconst bookshelf: string[] = [\n  'The Compound Effect',\n  'Leonardo Da Vinci',\n  'Enlightenment Now',\n];\n```\n\nThe `string` is the type followed by `[]`.\n\nAnother way is to use the `Array` type:\n\n```typescript\nconst bookshelf: Array<string> = [\n  'The Compound Effect',\n  'Leonardo Da Vinci',\n  'Enlightenment Now',\n];\n```\n\nTuples are a little different from the array. It has a fixed number of elements, so we define the type for each index.\n\n```typescript\nconst thoughts: [string, number] = ['Programming', 42];\n```\n\nBy the way, the order of the elements and types is relevant:\n\n```typescript\nlet thoughts: [string, number];\n\nthoughts = ['Programming', 42]; // Succeeds!\nthoughts = [42, 'Programming']; // Fails!\n```\n\nFor objects, we can use the `object` type that represents the non-primitive type (`number`, `string`, `boolean`, `bigint`, `symbol`, `null`, or `undefined`).\n\n```typescript\nconst printObj = (obj: object): void => {\n  console.log(obj);\n};\n\nprintObj({ name: 'TK' }); // it compiles and prints!\n\nprintObj(42); // Argument of type '42' is not assignable to parameter of type 'object'.\nprintObj('TK'); // Argument of type '\"TK\"' is not assignable to parameter of type 'object'.\nprintObj(null); // Argument of type 'null' is not assignable to parameter of type 'object'.\nprintObj(undefined); // Argument of type 'undefined' is not assignable to parameter of type 'object'.\nprintObj(true); // Argument of type 'true' is not assignable to parameter of type 'object'.\n```\n\nAnother way to define types for the object is to use Interfaces and Types.\n\nInterfaces give the shape of the object. We define the types for the object structure. For the `printObj` function we defined before, we just need an interface to handle the object structure.\n\n```typescript\ninterface Person {\n  name: string;\n}\n\nconst printObj = (obj: Person): void => {\n  console.log(obj);\n};\n\nprintObj({ name: 'TK' }); // it compiles and prints!\n```\n\nThe `Type` looks the same way:\n\n```typescript\ntype Person = {\n  name: string;\n};\n\nconst printObj = (obj: Person): void => {\n  console.log(obj);\n};\n\nprintObj({ name: 'TK' }); // it compiles and prints!\n```\n\n## Resources\n\n- [Typescript Utility Types: Docs](https://www.typescriptlang.org/docs/handbook/utility-types.html)\n- [Typescript Basic Types: Docs](https://www.typescriptlang.org/docs/handbook/basic-types.html)\n- [TypeScript for Front-End Developers](https://www.educative.io/path/typescript-for-front-end-developers?aff=x8bV)\n- [Using TypeScript with React](https://www.educative.io/courses/using-typescript-with-react?aff=x8bV)\n- [Learn TypeScript: The Complete Course for Beginners](https://www.educative.io/courses/learn-typescript-complete-course?aff=x8bV)\n- [Advanced TypeScript Masterclass](https://www.educative.io/courses/advanced-typescript-masterclass?aff=x8bV)\n",
  },
  {
    url: '/series/typescript-learnings/union-types-with-objects',
    title: 'Union Types with Objects',
    content:
      "This post is part of the [Typescript Learning Series](/series/typescript-learnings).\n\nWhen I was testing some ideas and API features for JavaScript dates, I built a project in Typescript. I wanted to build a more [human-friendly API to handle dates](/fun-with-dates).\n\nThis is what I was looking for:\n\n```tsx\nget(1).dayAgo; // it gets yesterday\n```\n\nI also make it work for month and year:\n\n```tsx\nget(1).monthAgo; // it gets a month ago from today\nget(1).yearAgo; // it gets a year ago from today\n```\n\nThese are great! But I wanted more: what if we want to get days, months, or years ago? It works too:\n\n```tsx\nget(30).daysAgo;\nget(6).monthsAgo;\nget(10).yearsAgo;\n```\n\nAnd about the implementation? It is just a function that returns an JavaScript object:\n\n```tsx\nconst get = (n: number): DateAgo | DatesAgo => {\n  if (n < 1) {\n    throw new Error('Number should be greater or equal than 1');\n  }\n\n  const { day, month, year }: SeparatedDate = getSeparatedDate();\n\n  const dayAgo: Date = new Date(year, month, day - n);\n  const monthAgo: Date = new Date(year, month - n, day);\n  const yearAgo: Date = new Date(year - n, month, day);\n\n  const daysAgo: Date = new Date(year, month, day - n);\n  const monthsAgo: Date = new Date(year, month - n, day);\n  const yearsAgo: Date = new Date(year - n, month, day);\n\n  if (n > 1) {\n    return { daysAgo, monthsAgo, yearsAgo };\n  }\n\n  return { dayAgo, monthAgo, yearAgo };\n};\n```\n\nAnd here we are! I want to tell you about Union Type with objects.\n\nWe have different return types depending on the `n` parameter. If the `n` is greater than `1`, we return an object with \"plural\" kind of attributes. Otherwise, I just return the \"singular\" type of attributes.\n\nDifferent return types. So I built the two types.\n\nThe `DateAgo`:\n\n```tsx\ntype DateAgo = {\n  dayAgo: Date;\n  monthAgo: Date;\n  yearAgo: Date;\n};\n```\n\nAnd the `DatesAgo`:\n\n```tsx\ntype DatesAgo = {\n  daysAgo: Date;\n  monthsAgo: Date;\n  yearsAgo: Date;\n};\n```\n\nAnd use them in the function definition:\n\n```tsx\nconst get = (n: number): DateAgo | DatesAgo =>\n```\n\nBut this gets a type error.\n\nWhen using:\n\n```tsx\nget(2).daysAgo;\n```\n\nI got this error: `Property 'daysAgo' does not exist on type 'DateAgo | DatesAgo'.`\n\nWhen using:\n\n```tsx\nget(1).dayAgo;\n```\n\nI got this error: `Property 'dayAgo' does not exist on type 'DateAgo | DatesAgo'.`\n\nThe `DateAgo` doesn't declare the following types:\n\n- `daysAgo`\n- `monthsAgo`\n- `yearsAgo`\n\nThe same for the `DatesAgo`:\n\n- `dayAgo`\n- `monthAgo`\n- `yearAgo`\n\nBut it can have this properties in run-time. Because we can assign any kind of properties to an object. So a possible solution would be to add an `undefined` type to both `DateAgo` and `DatesAgo`.\n\n```tsx\ntype DateAgo = {\n  dayAgo: Date;\n  monthAgo: Date;\n  yearAgo: Date;\n  daysAgo: undefined;\n  monthsAgo: undefined;\n  yearsAgo: undefined;\n};\n\ntype DatesAgo = {\n  daysAgo: Date;\n  monthsAgo: Date;\n  yearsAgo: Date;\n  dayAgo: undefined;\n  monthAgo: undefined;\n  yearAgo: undefined;\n};\n```\n\nThis will fix the issue in compile time. But with this, you'll always need to set an `undefined` value to the object. One to get around this is to add an optional to the `undefined` types. Like this:\n\n```tsx\nyearAgo?: undefined\n```\n\nWith that, you can set these `undefined` properties. A better solution is to use the `never` type:\n\n> \"The never type represents the type of values that never occur.\"\n\n```tsx\ntype DateAgo = {\n  dayAgo: Date;\n  monthAgo: Date;\n  yearAgo: Date;\n  daysAgo?: never;\n  monthsAgo?: never;\n  yearsAgo?: never;\n};\n\ntype DatesAgo = {\n  daysAgo: Date;\n  monthsAgo: Date;\n  yearsAgo: Date;\n  dayAgo?: never;\n  monthAgo?: never;\n  yearAgo?: never;\n};\n```\n\nIt works as expected and it also represents the data semantically as these attributes will not occur for both situations.\n\n## Resources\n\n- [TypeScript for Front-End Developers](https://www.educative.io/path/typescript-for-front-end-developers?aff=x8bV)\n- [Using TypeScript with React](https://www.educative.io/courses/using-typescript-with-react?aff=x8bV)\n- [Learn TypeScript: The Complete Course for Beginners](https://www.educative.io/courses/learn-typescript-complete-course?aff=x8bV)\n- [Advanced TypeScript Masterclass](https://www.educative.io/courses/advanced-typescript-masterclass?aff=x8bV)\n- [Possible solution for objects](https://github.com/microsoft/TypeScript/issues/12815#issuecomment-266250230)\n- [Better solution](https://github.com/microsoft/TypeScript/issues/12815#issuecomment-373047380)\n- [Even better solution](https://github.com/microsoft/TypeScript/issues/12815#issuecomment-506946211)\n- [Solution example](https://github.com/imteekay/dating/blob/master/src/index.ts#L11)\n- [Dating API source code](https://github.com/imteekay/dating)\n",
  },
  {
    url: '/series/website-changelog/building-my-legacy-through-accessible-open-and-free-content',
    title: 'Building my Legacy through Accessible, Open, and Free content',
    content:
      "I've been writing for 8 years now, more than 50 posts, everything free and available for everybody. I was not so serious about writing content, my process was always to “Learn & Share”. Make it available for everybody.\n\nOver the years I came with a better process and [implemented toolings](/publisher-a-tooling-to-automate-the-process-to-publish-my-blog-posts) to help me automate the repetitive process I needed to publish new content.\n\nNow I'm changing again and I want to be transparent about how this website will work from now on.\n\nTo start, I debated with myself a lot about creating content only for paid subscribers but I decided for now that I want to keep it open and free.\n\n_My goal with this website is to build a legacy. I see it as a digital notebook where I share all my draft and published content, every piece of knowledge that is in my head and can be valuable in the world. Making it free and available for everybody is part of this mission._\n\nThis is the architecture of the new process I'm following:\n\n![My new content creation process and distribution](/series/website-changelog/content-creation.png)\n\nI'll write and publish first on [my Substack (paid subscribers)](https://teekay.substack.com/) and [Patreon (patrons only)](https://www.patreon.com/iamteekay). This content will available as early access for paid subscribers and patrons-only.\n\nAfter X days or weeks, I’ll publish on [my website](/) and [Substack (free subscribers)](https://teekay.substack.com/) and distribute via [RSS](/rss.xml) and [my Twitter](https://twitter.com/wordsofteekay).\n\nThen I'll also share on other platforms like [dev.to](https://dev.to/teekay), [Medium](https://leandrotk.medium.com/), and [Hashnode](https://tk.hashnode.dev/).\n\nIn summary, the idea is to:\n\n- give early access to paid Substack subscribers and patrons-only\n- keep everything open and free in the long term\n- cross-post on other platforms as people prefer to access their favorite website\n\nTo be compensated for my work and still make it available for everybody is the best of both worlds. This is still an experiment, so let's see if it works well.\n\nYou can support my work by\n\n- being a [paid subscriber on Substack](https://teekay.substack.com)\n- being a [patron on Patreon](https://www.patreon.com/iamteekay)\n- or make a one-time donation on [Ko-Fi](https://ko-fi.com/teekay)\n\nBy the way, you can take a look at the [Support page](/support).\n\nMy goal is not to be rich. I want to be financially independent to support this website and have more time to dedicate to sharing more well-crafted posts.\n\nI'm also planning to experiment with other media like podcast and youtube. I already have a microphone and I'm saving money to buy a camera to record videos. As I wrote more than 50 pieces of content, I can use them all to provide in other formats like video and audio. So the money from paid subscribers and patrons will be also used to scale my content.\n",
  },
  {
    url: '/series/website-changelog/refactoring-setup',
    title: 'Refactoring Setup',
    content:
      "I created this website a long time ago. At that time, I didn't know any JavaScript framework nor JavaScript, actually. So I made it with Pure HTML and CSS (and some bits of JavaScript).\n\nRunning this website was painful to maintain and create new features. If I wanted to create a new feature for the post page, I needed to replicate for all HTML files and it was more than 50 files. In the era of UI components, the DX is so much better. I create one component and reuse it in the entire application. This was I was aiming for.\n\nThis is why decided to refactor all my website using React. Why React? Just because I like it and I feel fairly proficient in it.\n\n---\n\nThis post is part of this [Website Changelog](/series/website-changelog) and the very first one.\n\nIn this post, we'll setup the project with some nice tooling I've been working on these days. It'll be a NextJS application powered by TypeScript and nice devtools like Prettier, Jest, and the Testing Library.\n\nWe'll also see how to setup husky to help make our codebase consistent running Prettier on pre-commit. Let's dive in.\n\n## NextJS & TypeScript\n\nNextJS setup with TypeScript is pretty easy. We just need to use its CLI:\n\n```jsx\nyarn create next-app --typescript\n```\n\nAnd done! We have the whole ready to be run. Just start the dev server and we can see the app running:\n\n```jsx\nyarn dev\n```\n\nNow you're able to access `[localhost:3000](http://localhost:3000)` and see the app running.\n\nIt comes with the whole TypeScript initial setup like:\n\n- `tsconfig.json`: the compiler configuration for the TypeScript\n- `next-env.d.ts`: the declaration types for NextJS\n- `_app.tsx`: the main app that runs the pages setup with the extension `.tsx`\n- `index.tsx`: the `/` page as an example of a `.tsx` component\n\n## Prettier\n\nPrettier is an opinionated code formatter. It supports many languages, it's configurable, and it's heavily used in the JavaScript community.\n\nA couple of days ago, Anthony joked about Prettier not respecting himself. And I said that I love prettier for _respecting_ consistency:\n\n[https://twitter.com/leandrotk\\_/status/1399090968301801473](https://twitter.com/wordsofteekay/status/1399090968301801473)\n\nI think that's the important \"word\": consistency. When working in a big company with different teams or just many people in the same team, code consistency is key.\n\nTo configure Prettier is very simple. Let's take a look:\n\n```bash\nyarn add --dev --exact prettier\n```\n\nCreate a file `.prettierrc`:\n\n```json\n{\n  \"singleQuote\": true,\n  \"trailingComma\": \"all\"\n}\n```\n\nAnd the configuration is pretty much it. To make it work in your editor, you'll probably need to install a plugin or extension. I've been using vscode with Prettier and it looks great.\n\nWe can also do other two things to make it more complete:\n\n- Add a `.prettierignore` file to ignore files that we don't want to run Prettier\n\n```json\nnode_modules\n.next\n.yarn.lock\n```\n\nFor a NextJS project, we'll add the common `node_modules` folder to the ignore file, the `.yarn.lock`, and the `.next` folder that's generated from the NextJS dev build.\n\n- Run prettier on pre-commit to make sure all changes are _Prettier_.\n\nTo make this works, we can use lint-staged and husky. The easier way is to run this command:\n\n```json\nnpx mrm@2 lint-staged\n```\n\nIt'll configure basically everything you need to run prettier on pre-commit. The only thing that I needed to do was adding the important file extensions for this project, more specifically `.tsx` and `.ts`:\n\n```json\n\"lint-staged\": {\n  \"*.{js,ts,tsx}\": \"eslint --cache --fix\",\n  \"*.{js,jsx,css,md,ts,tsx}\": \"prettier --write\"\n}\n```\n\nThis configuration was added by the command in the `package.json` file. If you add a new file with any of these extensions, it'll run prettier on each file that is in the git staged area before the commit.\n\nGreat, now we can make sure the project's code will be consistent from beginning to the end.\n\n## Testing with Jest and Testing Library\n\nTesting is a big part of a project's setup. When building software, we want to ship it with confidence that it really works. Not only now, but across many releases we'll do. Automation is also important in terms of velocity.\n\nTo be able to have this confidence, I always rely on Jest, a testing framework, and the Testing Library + its helpers to do the job. First jest:\n\n```bash\nyarn add -D jest @types/jest babel-jest jest-axe @types/jest-axe\n```\n\n- `jest`: the testing framework\n- `@types/jest`: the types to work well with TypeScript\n- `babel-jest`: compiles JavaScript code for the tests files\n- `jest-axe`: a custom Jest matcher to handle accessibility testing\n- `@types/jest-axe`: the types to work well with TypeScript\n\nAfter installing all the necessary dependencies, we need to add the configuration.\n\n`jest.setup.js`:\n\n```jsx\nimport 'jest-axe/extend-expect';\n```\n\n`jest.config.js`:\n\n```jsx\nmodule.exports = {\n  setupFilesAfterEnv: ['./jest.setup.js'],\n  testEnvironment: 'jsdom',\n};\n```\n\n`.babelrc`:\n\n```json\n{\n  \"presets\": [\"next/babel\"]\n}\n```\n\n`package.json`:\n\n```json\n{\n  ...\n\t\"test\": \"jest\",\n\t\"test:watch\": \"jest --watch\"\n\t...\n}\n```\n\nAnd now we are able to run our tests by calling these commands:\n\n```bash\nyarn test\nyarn test:watch\n```\n\nFor the Testing Library, it's simpler. We just need to install it and start using it.\n\n```json\nyarn add -D @testing-library/react @testing-library/jest-dom\n```\n\n- `@testing-library/react`: the testing tool to test react components\n- `@testing-library/jest-dom`: it provides custom matchers for jest. I really like to use the `toBeInTheDocument` matcher for component testing.\n\nThe only configuration I needed to do was adding the `jest-dom` to the testing setup to enable the matchers for test files.\n\n`jest.setup.js`:\n\n```jsx\nimport '@testing-library/jest-dom';\nimport 'jest-axe/extend-expect';\n```\n\nI didn't setup Cypress because I want to focus on the search implementation first, but we'll see in the last episodes of this series that we'll try to implement an integration test with Cypress to test our app.\n\n## Continuous Integration\n\nI also automated some code checking with the help of Github actions. I created a workflow to run on every push and the ideas is to type check my code, check code format, run lint, and run tests.\n\nTo start, I run an action to setup the node version based on my `.nvmrc`.\n\n```yaml\n- uses: actions/checkout@v2\n- name: Read .nvmrc\n  run: echo \"##[set-output name=NVMRC;]$(cat .nvmrc)\"\n  id: nvm\n\n- name: Use Node.js (.nvmrc)\n  uses: actions/setup-node@v2\n  with:\n    node-version: '${{ steps.nvm.outputs.NVMRC }}'\n```\n\nAnd the machine is able to install all dependencies.\n\n```yaml\n- name: Install dependencies\n  run: yarn\n```\n\nAnd then the following steps I mentioned. Type check code with Typescript.\n\n```yaml\n- name: Type check code w/ TypeScript\n  run: yarn typecheck\n```\n\nCheck code format with Prettier:\n\n```yaml\n- name: Check code format w/ Prettier\n  run: yarn prettier:check\n```\n\nAnalyze code with ESLint:\n\n```yaml\n- name: Analyze code w/ ESLint\n  run: yarn lint\n```\n\nTest code with Jest:\n\n```yaml\n- name: Test code w/ Jest\n  run: yarn test\n```\n\nAnd this is the entire file.\n\n```yaml\nname: Push CI\n\non: [push]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v2\n      - name: Read .nvmrc\n        run: echo \"##[set-output name=NVMRC;]$(cat .nvmrc)\"\n        id: nvm\n\n      - name: Use Node.js (.nvmrc)\n        uses: actions/setup-node@v2\n        with:\n          node-version: '${{ steps.nvm.outputs.NVMRC }}'\n\n      - name: Install dependencies\n        run: yarn\n\n      - name: Type check code w/ TypeScript\n        run: yarn typecheck\n\n      - name: Check code format w/ Prettier\n        run: yarn prettier:check\n\n      - name: Analyze code w/ ESLint\n        run: yarn lint\n```\n\nIn the future, I have a task to implement integration tests with Cypress and gain more confidence when shipping new features or changes. And it will requires me to add a new step to run cypress tests on CI as well.\n\n## Final words\n\nI'm pretty happy with this new setup. I'm even happier that the DX will improve a lot and it will enable me to improve the website and write more well-crafted content for everybody.\n",
  },
];
